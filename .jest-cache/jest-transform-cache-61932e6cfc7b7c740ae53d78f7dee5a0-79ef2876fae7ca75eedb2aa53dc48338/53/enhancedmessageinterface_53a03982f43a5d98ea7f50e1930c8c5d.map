{"version":3,"sources":["C:\\Ai Projecten\\ADSapp\\src\\components\\messaging\\enhanced-message-interface.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport {\n  PaperAirplaneIcon,\n  PaperClipIcon,\n  FaceSmileIcon,\n  MicrophoneIcon,\n  PhotoIcon,\n  DocumentIcon,\n  VideoCameraIcon,\n  LinkIcon,\n  BoldIcon,\n  ItalicIcon,\n  UnderlineIcon,\n  ListBulletIcon,\n  NumberedListIcon,\n  CodeBracketIcon,\n  AtSymbolIcon,\n  HashtagIcon,\n  XMarkIcon,\n  PlayIcon,\n  PauseIcon,\n  StopIcon,\n  SpeakerWaveIcon,\n  EyeIcon,\n  ArrowDownTrayIcon,\n  ClockIcon,\n  CheckIcon,\n  ExclamationTriangleIcon,\n  InformationCircleIcon\n} from '@heroicons/react/24/outline';\nimport {\n  CheckIcon as CheckIconSolid,\n  ExclamationTriangleIcon as ExclamationTriangleIconSolid\n} from '@heroicons/react/24/solid';\n\n// Message types\ninterface Message {\n  id: string;\n  content: string;\n  type: 'text' | 'image' | 'video' | 'audio' | 'document' | 'location';\n  sender: 'user' | 'contact';\n  timestamp: Date;\n  status: 'sending' | 'sent' | 'delivered' | 'read' | 'failed';\n  metadata?: {\n    fileName?: string;\n    fileSize?: number;\n    duration?: number;\n    mimeType?: string;\n    thumbnail?: string;\n    location?: { lat: number; lng: number; address: string };\n  };\n  replyTo?: string;\n  reactions?: { emoji: string; count: number }[];\n}\n\ninterface Attachment {\n  id: string;\n  file: File;\n  type: 'image' | 'video' | 'audio' | 'document';\n  preview?: string;\n  uploadProgress?: number;\n}\n\ninterface Template {\n  id: string;\n  name: string;\n  content: string;\n  category: string;\n  variables: string[];\n}\n\n// Sample data\nconst SAMPLE_MESSAGES: Message[] = [\n  {\n    id: '1',\n    content: 'Hello! How can I help you today?',\n    type: 'text',\n    sender: 'user',\n    timestamp: new Date(Date.now() - 3600000),\n    status: 'read'\n  },\n  {\n    id: '2',\n    content: 'Hi! I\\'m interested in your products. Could you send me more information?',\n    type: 'text',\n    sender: 'contact',\n    timestamp: new Date(Date.now() - 3300000),\n    status: 'read'\n  },\n  {\n    id: '3',\n    content: 'Of course! Let me share our latest catalog with you.',\n    type: 'text',\n    sender: 'user',\n    timestamp: new Date(Date.now() - 3000000),\n    status: 'read'\n  }\n];\n\nconst SAMPLE_TEMPLATES: Template[] = [\n  {\n    id: '1',\n    name: 'Welcome Message',\n    content: 'Hello {{name}}! Welcome to our service. How can we help you today?',\n    category: 'greeting',\n    variables: ['name']\n  },\n  {\n    id: '2',\n    name: 'Order Confirmation',\n    content: 'Your order #{{orderNumber}} has been confirmed. Total: {{amount}}. Expected delivery: {{date}}.',\n    category: 'order',\n    variables: ['orderNumber', 'amount', 'date']\n  },\n  {\n    id: '3',\n    name: 'Support Response',\n    content: 'Thank you for contacting support. We\\'ve received your inquiry about {{topic}} and will respond within 24 hours.',\n    category: 'support',\n    variables: ['topic']\n  }\n];\n\nconst EMOJI_CATEGORIES = {\n  recent: ['üòÄ', 'üòÇ', '‚ù§Ô∏è', 'üëç', 'üéâ', 'üòä', 'ü§î', 'üëè'],\n  people: ['üòÄ', 'üòÇ', 'ü•∞', 'üòç', 'ü§ó', 'ü§î', 'üòé', 'üò¥', 'ü§Ø', 'üò±'],\n  nature: ['üåü', 'üåô', '‚òÄÔ∏è', 'üåà', 'üî•', 'üíß', 'üå∏', 'üå∫', 'üåª', 'üçÄ'],\n  objects: ['üíº', 'üì±', 'üíª', 'üìù', 'üìä', 'üéØ', 'üîî', 'üéÅ', 'üèÜ', '‚ö°'],\n  symbols: ['‚ù§Ô∏è', 'üíØ', '‚ú®', 'üéâ', 'üëç', 'üëé', '‚úÖ', '‚ùå', '‚≠ê', 'üî•']\n};\n\ninterface EnhancedMessageInterfaceProps {\n  contactId: string;\n  contactName: string;\n  onSendMessage: (message: Omit<Message, 'id' | 'timestamp' | 'status'>) => void;\n}\n\nexport default function EnhancedMessageInterface({\n  contactId,\n  contactName,\n  onSendMessage\n}: EnhancedMessageInterfaceProps) {\n  const [messages, setMessages] = useState<Message[]>(SAMPLE_MESSAGES);\n  const [messageInput, setMessageInput] = useState('');\n  const [attachments, setAttachments] = useState<Attachment[]>([]);\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [showTemplates, setShowTemplates] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [selectedTemplate, setSelectedTemplate] = useState<Template | null>(null);\n  const [showFormatting, setShowFormatting] = useState(false);\n  const [replyingTo, setReplyingTo] = useState<Message | null>(null);\n  const [isTyping, setIsTyping] = useState(false);\n\n  const messageInputRef = useRef<HTMLTextAreaElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n  const recordingIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // Simulate typing indicator\n  useEffect(() => {\n    if (messageInput.length > 0) {\n      setIsTyping(true);\n      const timeout = setTimeout(() => setIsTyping(false), 1000);\n      return () => clearTimeout(timeout);\n    }\n  }, [messageInput]);\n\n  // Handle file selection\n  const handleFileSelect = useCallback((files: FileList | null) => {\n    if (!files) return;\n\n    Array.from(files).forEach(file => {\n      const attachment: Attachment = {\n        id: `att-${Date.now()}-${Math.random()}`,\n        file,\n        type: file.type.startsWith('image/') ? 'image' :\n              file.type.startsWith('video/') ? 'video' :\n              file.type.startsWith('audio/') ? 'audio' : 'document',\n        uploadProgress: 0\n      };\n\n      // Generate preview for images\n      if (file.type.startsWith('image/')) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          setAttachments(prev => prev.map(att =>\n            att.id === attachment.id\n              ? { ...att, preview: e.target?.result as string }\n              : att\n          ));\n        };\n        reader.readAsDataURL(file);\n      }\n\n      setAttachments(prev => [...prev, attachment]);\n\n      // Simulate upload progress\n      let progress = 0;\n      const interval = setInterval(() => {\n        progress += Math.random() * 30;\n        if (progress >= 100) {\n          progress = 100;\n          clearInterval(interval);\n        }\n        setAttachments(prev => prev.map(att =>\n          att.id === attachment.id\n            ? { ...att, uploadProgress: progress }\n            : att\n        ));\n      }, 200);\n    });\n  }, []);\n\n  // Start voice recording\n  const startRecording = useCallback(async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      const mediaRecorder = new MediaRecorder(stream);\n      mediaRecorderRef.current = mediaRecorder;\n\n      const chunks: Blob[] = [];\n      mediaRecorder.ondataavailable = (e) => chunks.push(e.data);\n      mediaRecorder.onstop = () => {\n        const audioBlob = new Blob(chunks, { type: 'audio/wav' });\n        const file = new File([audioBlob], 'voice-message.wav', { type: 'audio/wav' });\n        handleFileSelect([file] as any);\n      };\n\n      mediaRecorder.start();\n      setIsRecording(true);\n      setRecordingTime(0);\n\n      recordingIntervalRef.current = setInterval(() => {\n        setRecordingTime(prev => prev + 1);\n      }, 1000);\n    } catch (error) {\n      console.error('Error starting recording:', error);\n      alert('Unable to access microphone. Please check permissions.');\n    }\n  }, [handleFileSelect]);\n\n  // Stop voice recording\n  const stopRecording = useCallback(() => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      mediaRecorderRef.current.stream.getTracks().forEach(track => track.stop());\n      setIsRecording(false);\n      setRecordingTime(0);\n      if (recordingIntervalRef.current) {\n        clearInterval(recordingIntervalRef.current);\n      }\n    }\n  }, [isRecording]);\n\n  // Format time for recording\n  const formatRecordingTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // Insert emoji\n  const insertEmoji = useCallback((emoji: string) => {\n    if (messageInputRef.current) {\n      const start = messageInputRef.current.selectionStart || 0;\n      const end = messageInputRef.current.selectionEnd || 0;\n      const newValue = messageInput.slice(0, start) + emoji + messageInput.slice(end);\n      setMessageInput(newValue);\n\n      // Set cursor position after emoji\n      setTimeout(() => {\n        if (messageInputRef.current) {\n          messageInputRef.current.selectionStart = start + emoji.length;\n          messageInputRef.current.selectionEnd = start + emoji.length;\n          messageInputRef.current.focus();\n        }\n      }, 0);\n    }\n    setShowEmojiPicker(false);\n  }, [messageInput]);\n\n  // Apply text formatting\n  const applyFormatting = useCallback((format: string) => {\n    if (!messageInputRef.current) return;\n\n    const start = messageInputRef.current.selectionStart || 0;\n    const end = messageInputRef.current.selectionEnd || 0;\n    const selectedText = messageInput.slice(start, end);\n\n    let formattedText = selectedText;\n    switch (format) {\n      case 'bold':\n        formattedText = `*${selectedText}*`;\n        break;\n      case 'italic':\n        formattedText = `_${selectedText}_`;\n        break;\n      case 'code':\n        formattedText = `\\`${selectedText}\\``;\n        break;\n      case 'strikethrough':\n        formattedText = `~${selectedText}~`;\n        break;\n    }\n\n    const newValue = messageInput.slice(0, start) + formattedText + messageInput.slice(end);\n    setMessageInput(newValue);\n\n    setTimeout(() => {\n      if (messageInputRef.current) {\n        messageInputRef.current.selectionStart = start + formattedText.length;\n        messageInputRef.current.selectionEnd = start + formattedText.length;\n        messageInputRef.current.focus();\n      }\n    }, 0);\n  }, [messageInput]);\n\n  // Use template\n  const useTemplate = useCallback((template: Template) => {\n    setMessageInput(template.content);\n    setSelectedTemplate(template);\n    setShowTemplates(false);\n    messageInputRef.current?.focus();\n  }, []);\n\n  // Send message\n  const sendMessage = useCallback(() => {\n    if (!messageInput.trim() && attachments.length === 0) return;\n\n    const newMessage: Omit<Message, 'id' | 'timestamp' | 'status'> = {\n      content: messageInput.trim(),\n      type: attachments.length > 0 ? attachments[0].type : 'text',\n      sender: 'user',\n      replyTo: replyingTo?.id\n    };\n\n    onSendMessage(newMessage);\n    setMessages(prev => [...prev, {\n      ...newMessage,\n      id: `msg-${Date.now()}`,\n      timestamp: new Date(),\n      status: 'sending'\n    }]);\n\n    setMessageInput('');\n    setAttachments([]);\n    setReplyingTo(null);\n    setSelectedTemplate(null);\n    messageInputRef.current?.focus();\n  }, [messageInput, attachments, replyingTo, onSendMessage]);\n\n  // Handle key press\n  const handleKeyPress = useCallback((e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      if (e.shiftKey) {\n        // Allow new line on Shift+Enter\n        return;\n      } else {\n        e.preventDefault();\n        sendMessage();\n      }\n    }\n  }, [sendMessage]);\n\n  // Remove attachment\n  const removeAttachment = useCallback((attachmentId: string) => {\n    setAttachments(prev => prev.filter(att => att.id !== attachmentId));\n  }, []);\n\n  // Message status icon\n  const getStatusIcon = (status: Message['status']) => {\n    switch (status) {\n      case 'sending':\n        return <ClockIcon className=\"w-3 h-3 text-gray-400\" />;\n      case 'sent':\n        return <CheckIcon className=\"w-3 h-3 text-gray-400\" />;\n      case 'delivered':\n        return <CheckIconSolid className=\"w-3 h-3 text-gray-600\" />;\n      case 'read':\n        return <CheckIconSolid className=\"w-3 h-3 text-blue-600\" />;\n      case 'failed':\n        return <ExclamationTriangleIconSolid className=\"w-3 h-3 text-red-500\" />;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-white\">\n      {/* Messages Area */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {messages.map((message) => (\n          <div\n            key={message.id}\n            className={`flex ${message.sender === 'user' ? 'justify-end' : 'justify-start'}`}\n          >\n            <div\n              className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${\n                message.sender === 'user'\n                  ? 'bg-blue-600 text-white'\n                  : 'bg-gray-100 text-gray-900'\n              }`}\n            >\n              {/* Reply indicator */}\n              {message.replyTo && (\n                <div className=\"text-xs opacity-75 mb-1 p-2 bg-black bg-opacity-10 rounded\">\n                  Replying to message\n                </div>\n              )}\n\n              {/* Message content */}\n              <div className=\"text-sm whitespace-pre-wrap\">{message.content}</div>\n\n              {/* Message metadata */}\n              <div className={`flex items-center justify-between mt-1 text-xs ${\n                message.sender === 'user' ? 'text-blue-100' : 'text-gray-500'\n              }`}>\n                <span>{message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>\n                {message.sender === 'user' && (\n                  <div className=\"ml-2\">{getStatusIcon(message.status)}</div>\n                )}\n              </div>\n\n              {/* Reactions */}\n              {message.reactions && message.reactions.length > 0 && (\n                <div className=\"flex flex-wrap gap-1 mt-2\">\n                  {message.reactions.map((reaction, index) => (\n                    <span\n                      key={index}\n                      className=\"px-2 py-1 text-xs bg-black bg-opacity-10 rounded-full\"\n                    >\n                      {reaction.emoji} {reaction.count}\n                    </span>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        ))}\n\n        {/* Typing indicator */}\n        {isTyping && (\n          <div className=\"flex justify-start\">\n            <div className=\"bg-gray-100 px-4 py-2 rounded-lg\">\n              <div className=\"flex space-x-1\">\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Reply indicator */}\n      {replyingTo && (\n        <div className=\"px-4 py-2 bg-blue-50 border-l-4 border-blue-500 flex items-center justify-between\">\n          <div>\n            <div className=\"text-xs text-blue-600 font-medium\">Replying to</div>\n            <div className=\"text-sm text-gray-700 truncate\">{replyingTo.content}</div>\n          </div>\n          <button\n            onClick={() => setReplyingTo(null)}\n            className=\"text-gray-400 hover:text-gray-600\"\n          >\n            <XMarkIcon className=\"w-4 h-4\" />\n          </button>\n        </div>\n      )}\n\n      {/* Attachments preview */}\n      {attachments.length > 0 && (\n        <div className=\"px-4 py-2 bg-gray-50 border-t\">\n          <div className=\"flex flex-wrap gap-2\">\n            {attachments.map((attachment) => (\n              <div\n                key={attachment.id}\n                className=\"relative bg-white p-2 rounded-lg border border-gray-200\"\n              >\n                {attachment.type === 'image' && attachment.preview && (\n                  <img\n                    src={attachment.preview}\n                    alt=\"\"\n                    className=\"w-16 h-16 object-cover rounded\"\n                  />\n                )}\n                {attachment.type !== 'image' && (\n                  <div className=\"w-16 h-16 flex items-center justify-center bg-gray-100 rounded\">\n                    {attachment.type === 'video' && <VideoCameraIcon className=\"w-6 h-6 text-gray-400\" />}\n                    {attachment.type === 'audio' && <MicrophoneIcon className=\"w-6 h-6 text-gray-400\" />}\n                    {attachment.type === 'document' && <DocumentIcon className=\"w-6 h-6 text-gray-400\" />}\n                  </div>\n                )}\n\n                {/* Upload progress */}\n                {attachment.uploadProgress !== undefined && attachment.uploadProgress < 100 && (\n                  <div className=\"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded\">\n                    <div className=\"text-white text-xs\">{Math.round(attachment.uploadProgress)}%</div>\n                  </div>\n                )}\n\n                {/* Remove button */}\n                <button\n                  onClick={() => removeAttachment(attachment.id)}\n                  className=\"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600\"\n                >\n                  <XMarkIcon className=\"w-3 h-3\" />\n                </button>\n\n                <div className=\"text-xs text-gray-500 mt-1 truncate w-16\">\n                  {attachment.file.name}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Message input area */}\n      <div className=\"p-4 border-t border-gray-200\">\n        {/* Formatting toolbar */}\n        {showFormatting && (\n          <div className=\"flex items-center space-x-2 mb-3 p-2 bg-gray-50 rounded-lg\">\n            <button\n              onClick={() => applyFormatting('bold')}\n              className=\"p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded\"\n              title=\"Bold\"\n            >\n              <BoldIcon className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => applyFormatting('italic')}\n              className=\"p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded\"\n              title=\"Italic\"\n            >\n              <ItalicIcon className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => applyFormatting('code')}\n              className=\"p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded\"\n              title=\"Code\"\n            >\n              <CodeBracketIcon className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => applyFormatting('strikethrough')}\n              className=\"p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded\"\n              title=\"Strikethrough\"\n            >\n              <UnderlineIcon className=\"w-4 h-4\" />\n            </button>\n          </div>\n        )}\n\n        <div className=\"flex items-end space-x-2\">\n          {/* Attachment button */}\n          <button\n            onClick={() => fileInputRef.current?.click()}\n            className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\"\n            title=\"Attach file\"\n          >\n            <PaperClipIcon className=\"w-5 h-5\" />\n          </button>\n\n          {/* Message input */}\n          <div className=\"flex-1 relative\">\n            <textarea\n              ref={messageInputRef}\n              value={messageInput}\n              onChange={(e) => setMessageInput(e.target.value)}\n              onKeyDown={handleKeyPress}\n              placeholder={`Message ${contactName}...`}\n              className=\"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              rows={1}\n              style={{\n                minHeight: '44px',\n                maxHeight: '120px',\n                resize: 'none'\n              }}\n              onInput={(e) => {\n                const target = e.target as HTMLTextAreaElement;\n                target.style.height = 'auto';\n                target.style.height = `${Math.min(target.scrollHeight, 120)}px`;\n              }}\n            />\n\n            {/* Input actions */}\n            <div className=\"absolute right-3 bottom-3 flex items-center space-x-1\">\n              <button\n                onClick={() => setShowFormatting(!showFormatting)}\n                className={`p-1 rounded transition-colors ${\n                  showFormatting ? 'text-blue-600' : 'text-gray-400 hover:text-gray-600'\n                }`}\n                title=\"Text formatting\"\n              >\n                <BoldIcon className=\"w-4 h-4\" />\n              </button>\n\n              <button\n                onClick={() => setShowEmojiPicker(!showEmojiPicker)}\n                className=\"p-1 text-gray-400 hover:text-gray-600 rounded transition-colors\"\n                title=\"Add emoji\"\n              >\n                <FaceSmileIcon className=\"w-4 h-4\" />\n              </button>\n\n              <button\n                onClick={() => setShowTemplates(!showTemplates)}\n                className=\"p-1 text-gray-400 hover:text-gray-600 rounded transition-colors\"\n                title=\"Use template\"\n              >\n                <AtSymbolIcon className=\"w-4 h-4\" />\n              </button>\n            </div>\n          </div>\n\n          {/* Voice recording / Send button */}\n          {messageInput.trim() || attachments.length > 0 ? (\n            <button\n              onClick={sendMessage}\n              className=\"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n              title=\"Send message\"\n            >\n              <PaperAirplaneIcon className=\"w-5 h-5\" />\n            </button>\n          ) : (\n            <button\n              onMouseDown={startRecording}\n              onMouseUp={stopRecording}\n              onMouseLeave={stopRecording}\n              className={`p-2 rounded-lg transition-colors ${\n                isRecording\n                  ? 'bg-red-600 text-white'\n                  : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n              }`}\n              title={isRecording ? 'Release to send' : 'Hold to record'}\n            >\n              {isRecording ? (\n                <div className=\"flex items-center space-x-1\">\n                  <div className=\"w-2 h-2 bg-white rounded-full animate-pulse\"></div>\n                  <span className=\"text-xs\">{formatRecordingTime(recordingTime)}</span>\n                </div>\n              ) : (\n                <MicrophoneIcon className=\"w-5 h-5\" />\n              )}\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Emoji Picker */}\n      {showEmojiPicker && (\n        <div className=\"absolute bottom-20 right-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50 w-80\">\n          <div className=\"flex space-x-2 mb-3\">\n            {Object.keys(EMOJI_CATEGORIES).map((category) => (\n              <button\n                key={category}\n                className=\"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded capitalize\"\n              >\n                {category}\n              </button>\n            ))}\n          </div>\n          <div className=\"grid grid-cols-8 gap-1 max-h-48 overflow-y-auto\">\n            {EMOJI_CATEGORIES.recent.concat(\n              EMOJI_CATEGORIES.people,\n              EMOJI_CATEGORIES.nature,\n              EMOJI_CATEGORIES.objects,\n              EMOJI_CATEGORIES.symbols\n            ).map((emoji, index) => (\n              <button\n                key={index}\n                onClick={() => insertEmoji(emoji)}\n                className=\"p-2 hover:bg-gray-100 rounded text-lg\"\n              >\n                {emoji}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Templates Panel */}\n      {showTemplates && (\n        <div className=\"absolute bottom-20 left-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50 w-96\">\n          <h3 className=\"font-medium text-gray-900 mb-3\">Message Templates</h3>\n          <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n            {SAMPLE_TEMPLATES.map((template) => (\n              <button\n                key={template.id}\n                onClick={() => useTemplate(template)}\n                className=\"w-full text-left p-3 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors\"\n              >\n                <div className=\"font-medium text-sm text-gray-900\">{template.name}</div>\n                <div className=\"text-xs text-gray-600 mt-1 line-clamp-2\">{template.content}</div>\n                <div className=\"flex items-center mt-2\">\n                  <span className=\"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full\">\n                    {template.category}\n                  </span>\n                  {template.variables.length > 0 && (\n                    <span className=\"text-xs text-gray-500 ml-2\">\n                      {template.variables.length} variables\n                    </span>\n                  )}\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Hidden file input */}\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        multiple\n        accept=\"image/*,video/*,audio/*,.pdf,.doc,.docx,.txt\"\n        onChange={(e) => handleFileSelect(e.target.files)}\n        className=\"hidden\"\n      />\n    </div>\n  );\n}"],"names":["EnhancedMessageInterface","SAMPLE_MESSAGES","id","content","type","sender","timestamp","Date","now","status","SAMPLE_TEMPLATES","name","category","variables","EMOJI_CATEGORIES","recent","people","nature","objects","symbols","contactId","contactName","onSendMessage","messages","setMessages","useState","messageInput","setMessageInput","attachments","setAttachments","showEmojiPicker","setShowEmojiPicker","showTemplates","setShowTemplates","isRecording","setIsRecording","recordingTime","setRecordingTime","selectedTemplate","setSelectedTemplate","showFormatting","setShowFormatting","replyingTo","setReplyingTo","isTyping","setIsTyping","messageInputRef","useRef","fileInputRef","messagesEndRef","mediaRecorderRef","recordingIntervalRef","useEffect","current","scrollIntoView","behavior","length","timeout","setTimeout","clearTimeout","handleFileSelect","useCallback","files","Array","from","forEach","file","attachment","Math","random","startsWith","uploadProgress","reader","FileReader","onload","e","prev","map","att","preview","target","result","readAsDataURL","progress","interval","setInterval","clearInterval","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","mediaRecorder","MediaRecorder","chunks","ondataavailable","push","data","onstop","audioBlob","Blob","File","start","error","console","alert","stopRecording","stop","getTracks","track","formatRecordingTime","seconds","mins","floor","secs","toString","padStart","insertEmoji","emoji","selectionStart","end","selectionEnd","newValue","slice","focus","applyFormatting","format","selectedText","formattedText","useTemplate","template","sendMessage","trim","newMessage","replyTo","handleKeyPress","key","shiftKey","preventDefault","removeAttachment","attachmentId","filter","getStatusIcon","ClockIcon","className","CheckIcon","CheckIconSolid","ExclamationTriangleIconSolid","div","message","span","toLocaleTimeString","hour","minute","reactions","reaction","index","count","style","animationDelay","ref","button","onClick","XMarkIcon","img","src","alt","VideoCameraIcon","MicrophoneIcon","DocumentIcon","undefined","round","title","BoldIcon","ItalicIcon","CodeBracketIcon","UnderlineIcon","click","PaperClipIcon","textarea","value","onChange","onKeyDown","placeholder","rows","minHeight","maxHeight","resize","onInput","height","min","scrollHeight","FaceSmileIcon","AtSymbolIcon","PaperAirplaneIcon","onMouseDown","onMouseUp","onMouseLeave","Object","keys","concat","h3","input","multiple","accept"],"mappings":"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"}