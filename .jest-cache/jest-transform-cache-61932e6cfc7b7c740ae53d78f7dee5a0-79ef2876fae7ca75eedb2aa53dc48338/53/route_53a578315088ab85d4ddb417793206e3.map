{"version":3,"names":["cov_26lc3jvuhp","actualCoverage","s","GET","request","f","middlewareResponse","_middleware","adminMiddleware","b","searchParams","URL","url","page","parseInt","get","limit","adminId","undefined","action","targetType","result","_superadmin","getAuditLogs","_server","NextResponse","json","error","status","console"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\app\\api\\admin\\audit-logs\\route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { getAuditLogs } from '@/lib/super-admin'\nimport { adminMiddleware } from '@/lib/middleware'\n\nexport async function GET(request: NextRequest) {\n  // Apply admin middleware (validates super admin access)\n  const middlewareResponse = await adminMiddleware(request);\n  if (middlewareResponse) return middlewareResponse;\n\n  try {\n    const { searchParams } = new URL(request.url)\n    const page = parseInt(searchParams.get('page') || '1')\n    const limit = parseInt(searchParams.get('limit') || '50')\n    const adminId = searchParams.get('admin_id') || undefined\n    const action = searchParams.get('action') || undefined\n    const targetType = searchParams.get('target_type') || undefined\n\n    const result = await getAuditLogs(page, limit, adminId, action, targetType)\n\n    if (!result) {\n      return NextResponse.json(\n        { error: 'Failed to fetch audit logs' },\n        { status: 500 }\n      )\n    }\n\n    return NextResponse.json(result)\n  } catch (error) {\n    console.error('Admin audit logs API error:', error)\n    return NextResponse.json(\n      { error: 'Failed to fetch audit logs' },\n      { status: 500 }\n    )\n  }\n}"],"mappings":"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","ignoreList":[]}