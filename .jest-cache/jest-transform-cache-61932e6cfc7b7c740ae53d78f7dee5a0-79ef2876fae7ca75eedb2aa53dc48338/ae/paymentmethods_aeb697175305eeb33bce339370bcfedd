d66beef35e1ab4a1f3d6b6e21f3fb91e
"use strict";

/* istanbul ignore next */
function cov_2aml7mj6mf() {
  var path = "C:\\Ai Projecten\\ADSapp\\src\\lib\\billing\\payment-methods.ts";
  var hash = "c57c585ecd7851565a1eab9661982bd9e37cb9ff";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Ai Projecten\\ADSapp\\src\\lib\\billing\\payment-methods.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 10,
          column: 3
        }
      },
      "2": {
        start: {
          line: 8,
          column: 8
        },
        end: {
          line: 8,
          column: 36
        }
      },
      "3": {
        start: {
          line: 11,
          column: 16
        },
        end: {
          line: 11,
          column: 45
        }
      },
      "4": {
        start: {
          line: 12,
          column: 17
        },
        end: {
          line: 12,
          column: 44
        }
      },
      "5": {
        start: {
          line: 15,
          column: 25
        },
        end: {
          line: 15,
          column: 44
        }
      },
      "6": {
        start: {
          line: 17,
          column: 30
        },
        end: {
          line: 17,
          column: 129
        }
      },
      "7": {
        start: {
          line: 18,
          column: 8
        },
        end: {
          line: 20,
          column: 9
        }
      },
      "8": {
        start: {
          line: 19,
          column: 12
        },
        end: {
          line: 19,
          column: 76
        }
      },
      "9": {
        start: {
          line: 22,
          column: 30
        },
        end: {
          line: 24,
          column: 10
        }
      },
      "10": {
        start: {
          line: 26,
          column: 8
        },
        end: {
          line: 36,
          column: 9
        }
      },
      "11": {
        start: {
          line: 27,
          column: 12
        },
        end: {
          line: 31,
          column: 15
        }
      },
      "12": {
        start: {
          line: 33,
          column: 12
        },
        end: {
          line: 35,
          column: 76
        }
      },
      "13": {
        start: {
          line: 38,
          column: 34
        },
        end: {
          line: 38,
          column: 124
        }
      },
      "14": {
        start: {
          line: 39,
          column: 8
        },
        end: {
          line: 39,
          column: 73
        }
      },
      "15": {
        start: {
          line: 40,
          column: 8
        },
        end: {
          line: 40,
          column: 33
        }
      },
      "16": {
        start: {
          line: 43,
          column: 25
        },
        end: {
          line: 43,
          column: 44
        }
      },
      "17": {
        start: {
          line: 45,
          column: 30
        },
        end: {
          line: 45,
          column: 129
        }
      },
      "18": {
        start: {
          line: 46,
          column: 8
        },
        end: {
          line: 48,
          column: 9
        }
      },
      "19": {
        start: {
          line: 47,
          column: 12
        },
        end: {
          line: 47,
          column: 76
        }
      },
      "20": {
        start: {
          line: 49,
          column: 28
        },
        end: {
          line: 58,
          column: 10
        }
      },
      "21": {
        start: {
          line: 59,
          column: 8
        },
        end: {
          line: 62,
          column: 10
        }
      },
      "22": {
        start: {
          line: 65,
          column: 31
        },
        end: {
          line: 65,
          column: 66
        }
      },
      "23": {
        start: {
          line: 66,
          column: 29
        },
        end: {
          line: 66,
          column: 73
        }
      },
      "24": {
        start: {
          line: 67,
          column: 8
        },
        end: {
          line: 69,
          column: 9
        }
      },
      "25": {
        start: {
          line: 68,
          column: 12
        },
        end: {
          line: 68,
          column: 19
        }
      },
      "26": {
        start: {
          line: 70,
          column: 8
        },
        end: {
          line: 72,
          column: 11
        }
      },
      "27": {
        start: {
          line: 75,
          column: 25
        },
        end: {
          line: 75,
          column: 44
        }
      },
      "28": {
        start: {
          line: 77,
          column: 31
        },
        end: {
          line: 77,
          column: 93
        }
      },
      "29": {
        start: {
          line: 78,
          column: 8
        },
        end: {
          line: 78,
          column: 36
        }
      },
      "30": {
        start: {
          line: 78,
          column: 29
        },
        end: {
          line: 78,
          column: 36
        }
      },
      "31": {
        start: {
          line: 79,
          column: 34
        },
        end: {
          line: 79,
          column: 100
        }
      },
      "32": {
        start: {
          line: 80,
          column: 8
        },
        end: {
          line: 80,
          column: 73
        }
      },
      "33": {
        start: {
          line: 83,
          column: 25
        },
        end: {
          line: 83,
          column: 44
        }
      },
      "34": {
        start: {
          line: 84,
          column: 8
        },
        end: {
          line: 87,
          column: 60
        }
      },
      "35": {
        start: {
          line: 90,
          column: 25
        },
        end: {
          line: 90,
          column: 44
        }
      },
      "36": {
        start: {
          line: 92,
          column: 46
        },
        end: {
          line: 92,
          column: 204
        }
      },
      "37": {
        start: {
          line: 93,
          column: 8
        },
        end: {
          line: 95,
          column: 9
        }
      },
      "38": {
        start: {
          line: 94,
          column: 12
        },
        end: {
          line: 94,
          column: 56
        }
      },
      "39": {
        start: {
          line: 97,
          column: 8
        },
        end: {
          line: 104,
          column: 9
        }
      },
      "40": {
        start: {
          line: 99,
          column: 43
        },
        end: {
          line: 99,
          column: 212
        }
      },
      "41": {
        start: {
          line: 100,
          column: 12
        },
        end: {
          line: 103,
          column: 13
        }
      },
      "42": {
        start: {
          line: 102,
          column: 16
        },
        end: {
          line: 102,
          column: 109
        }
      },
      "43": {
        start: {
          line: 106,
          column: 8
        },
        end: {
          line: 106,
          column: 98
        }
      },
      "44": {
        start: {
          line: 108,
          column: 8
        },
        end: {
          line: 111,
          column: 37
        }
      },
      "45": {
        start: {
          line: 114,
          column: 25
        },
        end: {
          line: 114,
          column: 44
        }
      },
      "46": {
        start: {
          line: 116,
          column: 30
        },
        end: {
          line: 116,
          column: 129
        }
      },
      "47": {
        start: {
          line: 117,
          column: 8
        },
        end: {
          line: 119,
          column: 9
        }
      },
      "48": {
        start: {
          line: 118,
          column: 12
        },
        end: {
          line: 118,
          column: 76
        }
      },
      "49": {
        start: {
          line: 121,
          column: 8
        },
        end: {
          line: 125,
          column: 11
        }
      },
      "50": {
        start: {
          line: 127,
          column: 8
        },
        end: {
          line: 129,
          column: 49
        }
      },
      "51": {
        start: {
          line: 130,
          column: 8
        },
        end: {
          line: 132,
          column: 97
        }
      },
      "52": {
        start: {
          line: 135,
          column: 25
        },
        end: {
          line: 135,
          column: 44
        }
      },
      "53": {
        start: {
          line: 136,
          column: 41
        },
        end: {
          line: 140,
          column: 10
        }
      },
      "54": {
        start: {
          line: 141,
          column: 8
        },
        end: {
          line: 141,
          column: 36
        }
      },
      "55": {
        start: {
          line: 144,
          column: 25
        },
        end: {
          line: 144,
          column: 44
        }
      },
      "56": {
        start: {
          line: 146,
          column: 46
        },
        end: {
          line: 146,
          column: 192
        }
      },
      "57": {
        start: {
          line: 147,
          column: 8
        },
        end: {
          line: 149,
          column: 9
        }
      },
      "58": {
        start: {
          line: 148,
          column: 12
        },
        end: {
          line: 148,
          column: 56
        }
      },
      "59": {
        start: {
          line: 151,
          column: 27
        },
        end: {
          line: 151,
          column: 29
        }
      },
      "60": {
        start: {
          line: 152,
          column: 8
        },
        end: {
          line: 157,
          column: 9
        }
      },
      "61": {
        start: {
          line: 153,
          column: 12
        },
        end: {
          line: 156,
          column: 14
        }
      },
      "62": {
        start: {
          line: 158,
          column: 8
        },
        end: {
          line: 160,
          column: 9
        }
      },
      "63": {
        start: {
          line: 159,
          column: 12
        },
        end: {
          line: 159,
          column: 51
        }
      },
      "64": {
        start: {
          line: 161,
          column: 8
        },
        end: {
          line: 163,
          column: 9
        }
      },
      "65": {
        start: {
          line: 162,
          column: 12
        },
        end: {
          line: 162,
          column: 114
        }
      },
      "66": {
        start: {
          line: 165,
          column: 8
        },
        end: {
          line: 169,
          column: 37
        }
      },
      "67": {
        start: {
          line: 172,
          column: 25
        },
        end: {
          line: 172,
          column: 44
        }
      },
      "68": {
        start: {
          line: 173,
          column: 8
        },
        end: {
          line: 181,
          column: 59
        }
      },
      "69": {
        start: {
          line: 174,
          column: 97
        },
        end: {
          line: 174,
          column: 112
        }
      },
      "70": {
        start: {
          line: 184,
          column: 25
        },
        end: {
          line: 184,
          column: 44
        }
      },
      "71": {
        start: {
          line: 185,
          column: 8
        },
        end: {
          line: 193,
          column: 11
        }
      },
      "72": {
        start: {
          line: 196,
          column: 25
        },
        end: {
          line: 196,
          column: 44
        }
      },
      "73": {
        start: {
          line: 197,
          column: 35
        },
        end: {
          line: 197,
          column: 141
        }
      },
      "74": {
        start: {
          line: 198,
          column: 8
        },
        end: {
          line: 198,
          column: 35
        }
      },
      "75": {
        start: {
          line: 198,
          column: 23
        },
        end: {
          line: 198,
          column: 35
        }
      },
      "76": {
        start: {
          line: 199,
          column: 8
        },
        end: {
          line: 205,
          column: 10
        }
      },
      "77": {
        start: {
          line: 208,
          column: 25
        },
        end: {
          line: 208,
          column: 75
        }
      },
      "78": {
        start: {
          line: 209,
          column: 8
        },
        end: {
          line: 211,
          column: 9
        }
      },
      "79": {
        start: {
          line: 210,
          column: 12
        },
        end: {
          line: 210,
          column: 25
        }
      },
      "80": {
        start: {
          line: 212,
          column: 31
        },
        end: {
          line: 212,
          column: 75
        }
      },
      "81": {
        start: {
          line: 213,
          column: 30
        },
        end: {
          line: 213,
          column: 93
        }
      },
      "82": {
        start: {
          line: 213,
          column: 58
        },
        end: {
          line: 213,
          column: 92
        }
      },
      "83": {
        start: {
          line: 214,
          column: 8
        },
        end: {
          line: 216,
          column: 9
        }
      },
      "84": {
        start: {
          line: 215,
          column: 12
        },
        end: {
          line: 215,
          column: 25
        }
      },
      "85": {
        start: {
          line: 218,
          column: 29
        },
        end: {
          line: 221,
          column: 9
        }
      },
      "86": {
        start: {
          line: 219,
          column: 42
        },
        end: {
          line: 219,
          column: 54
        }
      },
      "87": {
        start: {
          line: 220,
          column: 42
        },
        end: {
          line: 220,
          column: 55
        }
      },
      "88": {
        start: {
          line: 222,
          column: 8
        },
        end: {
          line: 236,
          column: 9
        }
      },
      "89": {
        start: {
          line: 223,
          column: 12
        },
        end: {
          line: 235,
          column: 13
        }
      },
      "90": {
        start: {
          line: 225,
          column: 31
        },
        end: {
          line: 225,
          column: 104
        }
      },
      "91": {
        start: {
          line: 226,
          column: 16
        },
        end: {
          line: 228,
          column: 17
        }
      },
      "92": {
        start: {
          line: 227,
          column: 20
        },
        end: {
          line: 227,
          column: 32
        }
      },
      "93": {
        start: {
          line: 230,
          column: 16
        },
        end: {
          line: 230,
          column: 89
        }
      },
      "94": {
        start: {
          line: 231,
          column: 16
        },
        end: {
          line: 234,
          column: 19
        }
      },
      "95": {
        start: {
          line: 237,
          column: 8
        },
        end: {
          line: 237,
          column: 21
        }
      },
      "96": {
        start: {
          line: 240,
          column: 8
        },
        end: {
          line: 270,
          column: 9
        }
      },
      "97": {
        start: {
          line: 241,
          column: 34
        },
        end: {
          line: 241,
          column: 96
        }
      },
      "98": {
        start: {
          line: 242,
          column: 27
        },
        end: {
          line: 242,
          column: 29
        }
      },
      "99": {
        start: {
          line: 243,
          column: 12
        },
        end: {
          line: 258,
          column: 13
        }
      },
      "100": {
        start: {
          line: 245,
          column: 28
        },
        end: {
          line: 245,
          column: 38
        }
      },
      "101": {
        start: {
          line: 246,
          column: 36
        },
        end: {
          line: 246,
          column: 53
        }
      },
      "102": {
        start: {
          line: 247,
          column: 37
        },
        end: {
          line: 247,
          column: 55
        }
      },
      "103": {
        start: {
          line: 248,
          column: 16
        },
        end: {
          line: 250,
          column: 17
        }
      },
      "104": {
        start: {
          line: 249,
          column: 20
        },
        end: {
          line: 249,
          column: 52
        }
      },
      "105": {
        start: {
          line: 252,
          column: 35
        },
        end: {
          line: 252,
          column: 106
        }
      },
      "106": {
        start: {
          line: 253,
          column: 41
        },
        end: {
          line: 253,
          column: 51
        }
      },
      "107": {
        start: {
          line: 254,
          column: 16
        },
        end: {
          line: 254,
          column: 75
        }
      },
      "108": {
        start: {
          line: 255,
          column: 16
        },
        end: {
          line: 257,
          column: 17
        }
      },
      "109": {
        start: {
          line: 256,
          column: 20
        },
        end: {
          line: 256,
          column: 53
        }
      },
      "110": {
        start: {
          line: 259,
          column: 12
        },
        end: {
          line: 262,
          column: 14
        }
      },
      "111": {
        start: {
          line: 264,
          column: 12
        },
        end: {
          line: 269,
          column: 14
        }
      },
      "112": {
        start: {
          line: 273,
          column: 25
        },
        end: {
          line: 273,
          column: 44
        }
      },
      "113": {
        start: {
          line: 274,
          column: 34
        },
        end: {
          line: 274,
          column: 122
        }
      },
      "114": {
        start: {
          line: 275,
          column: 8
        },
        end: {
          line: 284,
          column: 9
        }
      },
      "115": {
        start: {
          line: 276,
          column: 12
        },
        end: {
          line: 283,
          column: 14
        }
      },
      "116": {
        start: {
          line: 285,
          column: 30
        },
        end: {
          line: 285,
          column: 62
        }
      },
      "117": {
        start: {
          line: 285,
          column: 50
        },
        end: {
          line: 285,
          column: 61
        }
      },
      "118": {
        start: {
          line: 286,
          column: 30
        },
        end: {
          line: 286,
          column: 69
        }
      },
      "119": {
        start: {
          line: 286,
          column: 48
        },
        end: {
          line: 286,
          column: 60
        }
      },
      "120": {
        start: {
          line: 287,
          column: 30
        },
        end: {
          line: 287,
          column: 80
        }
      },
      "121": {
        start: {
          line: 287,
          column: 55
        },
        end: {
          line: 287,
          column: 76
        }
      },
      "122": {
        start: {
          line: 288,
          column: 28
        },
        end: {
          line: 288,
          column: 58
        }
      },
      "123": {
        start: {
          line: 289,
          column: 28
        },
        end: {
          line: 292,
          column: 14
        }
      },
      "124": {
        start: {
          line: 290,
          column: 12
        },
        end: {
          line: 290,
          column: 59
        }
      },
      "125": {
        start: {
          line: 291,
          column: 12
        },
        end: {
          line: 291,
          column: 23
        }
      },
      "126": {
        start: {
          line: 294,
          column: 30
        },
        end: {
          line: 294,
          column: 40
        }
      },
      "127": {
        start: {
          line: 295,
          column: 8
        },
        end: {
          line: 295,
          column: 60
        }
      },
      "128": {
        start: {
          line: 296,
          column: 31
        },
        end: {
          line: 296,
          column: 128
        }
      },
      "129": {
        start: {
          line: 296,
          column: 51
        },
        end: {
          line: 296,
          column: 120
        }
      },
      "130": {
        start: {
          line: 297,
          column: 8
        },
        end: {
          line: 304,
          column: 10
        }
      },
      "131": {
        start: {
          line: 308,
          column: 25
        },
        end: {
          line: 318,
          column: 9
        }
      },
      "132": {
        start: {
          line: 319,
          column: 8
        },
        end: {
          line: 328,
          column: 9
        }
      },
      "133": {
        start: {
          line: 320,
          column: 12
        },
        end: {
          line: 327,
          column: 14
        }
      },
      "134": {
        start: {
          line: 329,
          column: 8
        },
        end: {
          line: 335,
          column: 9
        }
      },
      "135": {
        start: {
          line: 330,
          column: 12
        },
        end: {
          line: 334,
          column: 14
        }
      },
      "136": {
        start: {
          line: 336,
          column: 8
        },
        end: {
          line: 336,
          column: 24
        }
      },
      "137": {
        start: {
          line: 339,
          column: 25
        },
        end: {
          line: 339,
          column: 44
        }
      },
      "138": {
        start: {
          line: 340,
          column: 25
        },
        end: {
          line: 340,
          column: 120
        }
      },
      "139": {
        start: {
          line: 341,
          column: 8
        },
        end: {
          line: 341,
          column: 32
        }
      },
      "140": {
        start: {
          line: 344,
          column: 8
        },
        end: {
          line: 352,
          column: 9
        }
      },
      "141": {
        start: {
          line: 345,
          column: 28
        },
        end: {
          line: 347,
          column: 14
        }
      },
      "142": {
        start: {
          line: 348,
          column: 12
        },
        end: {
          line: 348,
          column: 45
        }
      },
      "143": {
        start: {
          line: 350,
          column: 12
        },
        end: {
          line: 350,
          column: 68
        }
      },
      "144": {
        start: {
          line: 351,
          column: 12
        },
        end: {
          line: 351,
          column: 25
        }
      },
      "145": {
        start: {
          line: 355,
          column: 8
        },
        end: {
          line: 355,
          column: 52
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 9
          },
          end: {
            line: 7,
            column: 10
          }
        },
        loc: {
          start: {
            line: 7,
            column: 20
          },
          end: {
            line: 9,
            column: 5
          }
        },
        line: 7
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 14,
            column: 4
          },
          end: {
            line: 14,
            column: 5
          }
        },
        loc: {
          start: {
            line: 14,
            column: 77
          },
          end: {
            line: 41,
            column: 5
          }
        },
        line: 14
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 42,
            column: 4
          },
          end: {
            line: 42,
            column: 5
          }
        },
        loc: {
          start: {
            line: 42,
            column: 58
          },
          end: {
            line: 63,
            column: 5
          }
        },
        line: 42
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 64,
            column: 4
          },
          end: {
            line: 64,
            column: 5
          }
        },
        loc: {
          start: {
            line: 64,
            column: 50
          },
          end: {
            line: 73,
            column: 5
          }
        },
        line: 64
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 74,
            column: 4
          },
          end: {
            line: 74,
            column: 5
          }
        },
        loc: {
          start: {
            line: 74,
            column: 53
          },
          end: {
            line: 81,
            column: 5
          }
        },
        line: 74
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 82,
            column: 4
          },
          end: {
            line: 82,
            column: 5
          }
        },
        loc: {
          start: {
            line: 82,
            column: 53
          },
          end: {
            line: 88,
            column: 5
          }
        },
        line: 82
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 89,
            column: 4
          },
          end: {
            line: 89,
            column: 5
          }
        },
        loc: {
          start: {
            line: 89,
            column: 63
          },
          end: {
            line: 112,
            column: 5
          }
        },
        line: 89
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 113,
            column: 4
          },
          end: {
            line: 113,
            column: 5
          }
        },
        loc: {
          start: {
            line: 113,
            column: 67
          },
          end: {
            line: 133,
            column: 5
          }
        },
        line: 113
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 134,
            column: 4
          },
          end: {
            line: 134,
            column: 5
          }
        },
        loc: {
          start: {
            line: 134,
            column: 44
          },
          end: {
            line: 142,
            column: 5
          }
        },
        line: 134
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 143,
            column: 4
          },
          end: {
            line: 143,
            column: 5
          }
        },
        loc: {
          start: {
            line: 143,
            column: 72
          },
          end: {
            line: 170,
            column: 5
          }
        },
        line: 143
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 171,
            column: 4
          },
          end: {
            line: 171,
            column: 5
          }
        },
        loc: {
          start: {
            line: 171,
            column: 57
          },
          end: {
            line: 182,
            column: 5
          }
        },
        line: 171
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 174,
            column: 89
          },
          end: {
            line: 174,
            column: 90
          }
        },
        loc: {
          start: {
            line: 174,
            column: 97
          },
          end: {
            line: 174,
            column: 112
          }
        },
        line: 174
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 183,
            column: 4
          },
          end: {
            line: 183,
            column: 5
          }
        },
        loc: {
          start: {
            line: 183,
            column: 62
          },
          end: {
            line: 194,
            column: 5
          }
        },
        line: 183
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 195,
            column: 4
          },
          end: {
            line: 195,
            column: 5
          }
        },
        loc: {
          start: {
            line: 195,
            column: 50
          },
          end: {
            line: 206,
            column: 5
          }
        },
        line: 195
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 207,
            column: 4
          },
          end: {
            line: 207,
            column: 5
          }
        },
        loc: {
          start: {
            line: 207,
            column: 78
          },
          end: {
            line: 238,
            column: 5
          }
        },
        line: 207
      },
      "15": {
        name: "(anonymous_15)",
        decl: {
          start: {
            line: 213,
            column: 52
          },
          end: {
            line: 213,
            column: 53
          }
        },
        loc: {
          start: {
            line: 213,
            column: 58
          },
          end: {
            line: 213,
            column: 92
          }
        },
        line: 213
      },
      "16": {
        name: "(anonymous_16)",
        decl: {
          start: {
            line: 219,
            column: 36
          },
          end: {
            line: 219,
            column: 37
          }
        },
        loc: {
          start: {
            line: 219,
            column: 42
          },
          end: {
            line: 219,
            column: 54
          }
        },
        line: 219
      },
      "17": {
        name: "(anonymous_17)",
        decl: {
          start: {
            line: 220,
            column: 36
          },
          end: {
            line: 220,
            column: 37
          }
        },
        loc: {
          start: {
            line: 220,
            column: 42
          },
          end: {
            line: 220,
            column: 55
          }
        },
        line: 220
      },
      "18": {
        name: "(anonymous_18)",
        decl: {
          start: {
            line: 239,
            column: 4
          },
          end: {
            line: 239,
            column: 5
          }
        },
        loc: {
          start: {
            line: 239,
            column: 49
          },
          end: {
            line: 271,
            column: 5
          }
        },
        line: 239
      },
      "19": {
        name: "(anonymous_19)",
        decl: {
          start: {
            line: 272,
            column: 4
          },
          end: {
            line: 272,
            column: 5
          }
        },
        loc: {
          start: {
            line: 272,
            column: 52
          },
          end: {
            line: 305,
            column: 5
          }
        },
        line: 272
      },
      "20": {
        name: "(anonymous_20)",
        decl: {
          start: {
            line: 285,
            column: 45
          },
          end: {
            line: 285,
            column: 46
          }
        },
        loc: {
          start: {
            line: 285,
            column: 50
          },
          end: {
            line: 285,
            column: 61
          }
        },
        line: 285
      },
      "21": {
        name: "(anonymous_21)",
        decl: {
          start: {
            line: 286,
            column: 43
          },
          end: {
            line: 286,
            column: 44
          }
        },
        loc: {
          start: {
            line: 286,
            column: 48
          },
          end: {
            line: 286,
            column: 60
          }
        },
        line: 286
      },
      "22": {
        name: "(anonymous_22)",
        decl: {
          start: {
            line: 287,
            column: 45
          },
          end: {
            line: 287,
            column: 46
          }
        },
        loc: {
          start: {
            line: 287,
            column: 55
          },
          end: {
            line: 287,
            column: 76
          }
        },
        line: 287
      },
      "23": {
        name: "(anonymous_23)",
        decl: {
          start: {
            line: 289,
            column: 43
          },
          end: {
            line: 289,
            column: 44
          }
        },
        loc: {
          start: {
            line: 289,
            column: 58
          },
          end: {
            line: 292,
            column: 9
          }
        },
        line: 289
      },
      "24": {
        name: "(anonymous_24)",
        decl: {
          start: {
            line: 296,
            column: 46
          },
          end: {
            line: 296,
            column: 47
          }
        },
        loc: {
          start: {
            line: 296,
            column: 51
          },
          end: {
            line: 296,
            column: 120
          }
        },
        line: 296
      },
      "25": {
        name: "(anonymous_25)",
        decl: {
          start: {
            line: 307,
            column: 4
          },
          end: {
            line: 307,
            column: 5
          }
        },
        loc: {
          start: {
            line: 307,
            column: 76
          },
          end: {
            line: 337,
            column: 5
          }
        },
        line: 307
      },
      "26": {
        name: "(anonymous_26)",
        decl: {
          start: {
            line: 338,
            column: 4
          },
          end: {
            line: 338,
            column: 5
          }
        },
        loc: {
          start: {
            line: 338,
            column: 50
          },
          end: {
            line: 342,
            column: 5
          }
        },
        line: 338
      },
      "27": {
        name: "(anonymous_27)",
        decl: {
          start: {
            line: 343,
            column: 4
          },
          end: {
            line: 343,
            column: 5
          }
        },
        loc: {
          start: {
            line: 343,
            column: 60
          },
          end: {
            line: 353,
            column: 5
          }
        },
        line: 343
      },
      "28": {
        name: "(anonymous_28)",
        decl: {
          start: {
            line: 354,
            column: 4
          },
          end: {
            line: 354,
            column: 5
          }
        },
        loc: {
          start: {
            line: 354,
            column: 17
          },
          end: {
            line: 356,
            column: 5
          }
        },
        line: 354
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 14,
            column: 63
          },
          end: {
            line: 14,
            column: 75
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 14,
            column: 73
          },
          end: {
            line: 14,
            column: 75
          }
        }],
        line: 14
      },
      "1": {
        loc: {
          start: {
            line: 18,
            column: 8
          },
          end: {
            line: 20,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 18,
            column: 8
          },
          end: {
            line: 20,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 18
      },
      "2": {
        loc: {
          start: {
            line: 26,
            column: 8
          },
          end: {
            line: 36,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 26,
            column: 8
          },
          end: {
            line: 36,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 26
      },
      "3": {
        loc: {
          start: {
            line: 38,
            column: 94
          },
          end: {
            line: 38,
            column: 123
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 38,
            column: 94
          },
          end: {
            line: 38,
            column: 114
          }
        }, {
          start: {
            line: 38,
            column: 118
          },
          end: {
            line: 38,
            column: 123
          }
        }],
        line: 38
      },
      "4": {
        loc: {
          start: {
            line: 42,
            column: 44
          },
          end: {
            line: 42,
            column: 56
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 42,
            column: 54
          },
          end: {
            line: 42,
            column: 56
          }
        }],
        line: 42
      },
      "5": {
        loc: {
          start: {
            line: 46,
            column: 8
          },
          end: {
            line: 48,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 46,
            column: 8
          },
          end: {
            line: 48,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 46
      },
      "6": {
        loc: {
          start: {
            line: 51,
            column: 19
          },
          end: {
            line: 51,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 51,
            column: 19
          },
          end: {
            line: 51,
            column: 32
          }
        }, {
          start: {
            line: 51,
            column: 36
          },
          end: {
            line: 51,
            column: 49
          }
        }],
        line: 51
      },
      "7": {
        loc: {
          start: {
            line: 55,
            column: 30
          },
          end: {
            line: 55,
            column: 73
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 55,
            column: 30
          },
          end: {
            line: 55,
            column: 62
          }
        }, {
          start: {
            line: 55,
            column: 66
          },
          end: {
            line: 55,
            column: 73
          }
        }],
        line: 55
      },
      "8": {
        loc: {
          start: {
            line: 67,
            column: 8
          },
          end: {
            line: 69,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 67,
            column: 8
          },
          end: {
            line: 69,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 67
      },
      "9": {
        loc: {
          start: {
            line: 67,
            column: 12
          },
          end: {
            line: 67,
            column: 58
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 67,
            column: 12
          },
          end: {
            line: 67,
            column: 27
          }
        }, {
          start: {
            line: 67,
            column: 31
          },
          end: {
            line: 67,
            column: 58
          }
        }],
        line: 67
      },
      "10": {
        loc: {
          start: {
            line: 78,
            column: 8
          },
          end: {
            line: 78,
            column: 36
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 78,
            column: 8
          },
          end: {
            line: 78,
            column: 36
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 78
      },
      "11": {
        loc: {
          start: {
            line: 93,
            column: 8
          },
          end: {
            line: 95,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 93,
            column: 8
          },
          end: {
            line: 95,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 93
      },
      "12": {
        loc: {
          start: {
            line: 97,
            column: 8
          },
          end: {
            line: 104,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 97,
            column: 8
          },
          end: {
            line: 104,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 97
      },
      "13": {
        loc: {
          start: {
            line: 100,
            column: 12
          },
          end: {
            line: 103,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 100,
            column: 12
          },
          end: {
            line: 103,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 100
      },
      "14": {
        loc: {
          start: {
            line: 117,
            column: 8
          },
          end: {
            line: 119,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 117,
            column: 8
          },
          end: {
            line: 119,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 117
      },
      "15": {
        loc: {
          start: {
            line: 141,
            column: 15
          },
          end: {
            line: 141,
            column: 35
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 141,
            column: 15
          },
          end: {
            line: 141,
            column: 29
          }
        }, {
          start: {
            line: 141,
            column: 33
          },
          end: {
            line: 141,
            column: 35
          }
        }],
        line: 141
      },
      "16": {
        loc: {
          start: {
            line: 147,
            column: 8
          },
          end: {
            line: 149,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 147,
            column: 8
          },
          end: {
            line: 149,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 147
      },
      "17": {
        loc: {
          start: {
            line: 152,
            column: 8
          },
          end: {
            line: 157,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 152,
            column: 8
          },
          end: {
            line: 157,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 152
      },
      "18": {
        loc: {
          start: {
            line: 152,
            column: 12
          },
          end: {
            line: 152,
            column: 53
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 152,
            column: 12
          },
          end: {
            line: 152,
            column: 31
          }
        }, {
          start: {
            line: 152,
            column: 35
          },
          end: {
            line: 152,
            column: 53
          }
        }],
        line: 152
      },
      "19": {
        loc: {
          start: {
            line: 158,
            column: 8
          },
          end: {
            line: 160,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 158,
            column: 8
          },
          end: {
            line: 160,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 158
      },
      "20": {
        loc: {
          start: {
            line: 161,
            column: 8
          },
          end: {
            line: 163,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 161,
            column: 8
          },
          end: {
            line: 163,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 161
      },
      "21": {
        loc: {
          start: {
            line: 174,
            column: 98
          },
          end: {
            line: 174,
            column: 107
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 174,
            column: 98
          },
          end: {
            line: 174,
            column: 102
          }
        }, {
          start: {
            line: 174,
            column: 106
          },
          end: {
            line: 174,
            column: 107
          }
        }],
        line: 174
      },
      "22": {
        loc: {
          start: {
            line: 198,
            column: 8
          },
          end: {
            line: 198,
            column: 35
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 198,
            column: 8
          },
          end: {
            line: 198,
            column: 35
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 198
      },
      "23": {
        loc: {
          start: {
            line: 209,
            column: 8
          },
          end: {
            line: 211,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 209,
            column: 8
          },
          end: {
            line: 211,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 209
      },
      "24": {
        loc: {
          start: {
            line: 209,
            column: 12
          },
          end: {
            line: 209,
            column: 69
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 209,
            column: 12
          },
          end: {
            line: 209,
            column: 30
          }
        }, {
          start: {
            line: 209,
            column: 34
          },
          end: {
            line: 209,
            column: 69
          }
        }],
        line: 209
      },
      "25": {
        loc: {
          start: {
            line: 213,
            column: 58
          },
          end: {
            line: 213,
            column: 92
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 213,
            column: 58
          },
          end: {
            line: 213,
            column: 69
          }
        }, {
          start: {
            line: 213,
            column: 73
          },
          end: {
            line: 213,
            column: 92
          }
        }],
        line: 213
      },
      "26": {
        loc: {
          start: {
            line: 214,
            column: 8
          },
          end: {
            line: 216,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 214,
            column: 8
          },
          end: {
            line: 216,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 214
      },
      "27": {
        loc: {
          start: {
            line: 226,
            column: 16
          },
          end: {
            line: 228,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 226,
            column: 16
          },
          end: {
            line: 228,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 226
      },
      "28": {
        loc: {
          start: {
            line: 233,
            column: 29
          },
          end: {
            line: 233,
            column: 85
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 233,
            column: 54
          },
          end: {
            line: 233,
            column: 67
          }
        }, {
          start: {
            line: 233,
            column: 70
          },
          end: {
            line: 233,
            column: 85
          }
        }],
        line: 233
      },
      "29": {
        loc: {
          start: {
            line: 243,
            column: 12
          },
          end: {
            line: 258,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 243,
            column: 12
          },
          end: {
            line: 258,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 243
      },
      "30": {
        loc: {
          start: {
            line: 248,
            column: 16
          },
          end: {
            line: 250,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 248,
            column: 16
          },
          end: {
            line: 250,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 248
      },
      "31": {
        loc: {
          start: {
            line: 248,
            column: 20
          },
          end: {
            line: 248,
            column: 155
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 248,
            column: 20
          },
          end: {
            line: 248,
            column: 61
          }
        }, {
          start: {
            line: 248,
            column: 65
          },
          end: {
            line: 248,
            column: 108
          }
        }, {
          start: {
            line: 248,
            column: 112
          },
          end: {
            line: 248,
            column: 155
          }
        }],
        line: 248
      },
      "32": {
        loc: {
          start: {
            line: 255,
            column: 16
          },
          end: {
            line: 257,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 255,
            column: 16
          },
          end: {
            line: 257,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 255
      },
      "33": {
        loc: {
          start: {
            line: 275,
            column: 8
          },
          end: {
            line: 284,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 275,
            column: 8
          },
          end: {
            line: 284,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 275
      },
      "34": {
        loc: {
          start: {
            line: 286,
            column: 30
          },
          end: {
            line: 286,
            column: 69
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 286,
            column: 30
          },
          end: {
            line: 286,
            column: 61
          }
        }, {
          start: {
            line: 286,
            column: 65
          },
          end: {
            line: 286,
            column: 69
          }
        }],
        line: 286
      },
      "35": {
        loc: {
          start: {
            line: 290,
            column: 32
          },
          end: {
            line: 290,
            column: 53
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 290,
            column: 32
          },
          end: {
            line: 290,
            column: 48
          }
        }, {
          start: {
            line: 290,
            column: 52
          },
          end: {
            line: 290,
            column: 53
          }
        }],
        line: 290
      },
      "36": {
        loc: {
          start: {
            line: 296,
            column: 51
          },
          end: {
            line: 296,
            column: 120
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 296,
            column: 51
          },
          end: {
            line: 296,
            column: 65
          }
        }, {
          start: {
            line: 296,
            column: 69
          },
          end: {
            line: 296,
            column: 120
          }
        }],
        line: 296
      },
      "37": {
        loc: {
          start: {
            line: 319,
            column: 8
          },
          end: {
            line: 328,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 319,
            column: 8
          },
          end: {
            line: 328,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 319
      },
      "38": {
        loc: {
          start: {
            line: 329,
            column: 8
          },
          end: {
            line: 335,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 329,
            column: 8
          },
          end: {
            line: 335,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 329
      },
      "39": {
        loc: {
          start: {
            line: 341,
            column: 15
          },
          end: {
            line: 341,
            column: 31
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 341,
            column: 15
          },
          end: {
            line: 341,
            column: 23
          }
        }, {
          start: {
            line: 341,
            column: 27
          },
          end: {
            line: 341,
            column: 31
          }
        }],
        line: 341
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0,
      "91": 0,
      "92": 0,
      "93": 0,
      "94": 0,
      "95": 0,
      "96": 0,
      "97": 0,
      "98": 0,
      "99": 0,
      "100": 0,
      "101": 0,
      "102": 0,
      "103": 0,
      "104": 0,
      "105": 0,
      "106": 0,
      "107": 0,
      "108": 0,
      "109": 0,
      "110": 0,
      "111": 0,
      "112": 0,
      "113": 0,
      "114": 0,
      "115": 0,
      "116": 0,
      "117": 0,
      "118": 0,
      "119": 0,
      "120": 0,
      "121": 0,
      "122": 0,
      "123": 0,
      "124": 0,
      "125": 0,
      "126": 0,
      "127": 0,
      "128": 0,
      "129": 0,
      "130": 0,
      "131": 0,
      "132": 0,
      "133": 0,
      "134": 0,
      "135": 0,
      "136": 0,
      "137": 0,
      "138": 0,
      "139": 0,
      "140": 0,
      "141": 0,
      "142": 0,
      "143": 0,
      "144": 0,
      "145": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0
    },
    b: {
      "0": [0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0],
      "21": [0, 0],
      "22": [0, 0],
      "23": [0, 0],
      "24": [0, 0],
      "25": [0, 0],
      "26": [0, 0],
      "27": [0, 0],
      "28": [0, 0],
      "29": [0, 0],
      "30": [0, 0],
      "31": [0, 0, 0],
      "32": [0, 0],
      "33": [0, 0],
      "34": [0, 0],
      "35": [0, 0],
      "36": [0, 0],
      "37": [0, 0],
      "38": [0, 0],
      "39": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Ai Projecten\\ADSapp\\src\\lib\\billing\\payment-methods.ts"],
      sourcesContent: ["import Stripe from 'stripe'\nimport { createClient } from '@/lib/supabase/server'\nimport { stripe } from '@/lib/stripe/server'\n\nexport interface PaymentMethodData {\n  id: string\n  organizationId: string\n  stripePaymentMethodId: string\n  customerId: string\n  type: 'card' | 'bank_account' | 'sepa_debit' | 'us_bank_account'\n  brand?: string\n  last4: string\n  expiryMonth?: number\n  expiryYear?: number\n  country?: string\n  isDefault: boolean\n  isActive: boolean\n  failureCount: number\n  lastFailure?: {\n    code: string\n    message: string\n    timestamp: string\n  }\n  createdAt: string\n  updatedAt: string\n}\n\nexport interface PaymentMethodSetupOptions {\n  setAsDefault?: boolean\n  confirmationMethod?: 'automatic' | 'manual'\n  usage?: 'off_session' | 'on_session'\n  metadata?: Record<string, string>\n}\n\nexport interface PaymentRetryStrategy {\n  enabled: boolean\n  maxRetries: number\n  retryIntervals: number[] // in hours\n  fallbackMethods: string[] // payment method IDs to try\n  notifyCustomer: boolean\n}\n\nexport class PaymentMethodManager {\n  private supabase = createClient()\n\n  async attachPaymentMethod(\n    organizationId: string,\n    paymentMethodId: string,\n    options: PaymentMethodSetupOptions = {}\n  ): Promise<PaymentMethodData> {\n    const supabase = await this.supabase\n\n    // Get organization's customer ID\n    const { data: org } = await supabase\n      .from('organizations')\n      .select('stripe_customer_id')\n      .eq('id', organizationId)\n      .single()\n\n    if (!org?.stripe_customer_id) {\n      throw new Error('Organization does not have a Stripe customer')\n    }\n\n    // Attach payment method to customer\n    const paymentMethod = await stripe.paymentMethods.attach(paymentMethodId, {\n      customer: org.stripe_customer_id,\n    })\n\n    // Set as default if requested\n    if (options.setAsDefault) {\n      await stripe.customers.update(org.stripe_customer_id, {\n        invoice_settings: {\n          default_payment_method: paymentMethodId,\n        },\n      })\n\n      // Update existing default payment methods\n      await supabase\n        .from('payment_methods')\n        .update({ is_default: false })\n        .eq('organization_id', organizationId)\n        .eq('is_default', true)\n    }\n\n    // Create local record\n    const paymentMethodData = this.formatPaymentMethodData(\n      paymentMethod,\n      organizationId,\n      options.setAsDefault || false\n    )\n\n    await supabase\n      .from('payment_methods')\n      .upsert(paymentMethodData)\n\n    return paymentMethodData\n  }\n\n  async createSetupIntent(\n    organizationId: string,\n    options: PaymentMethodSetupOptions = {}\n  ): Promise<{ clientSecret: string; setupIntentId: string }> {\n    const supabase = await this.supabase\n\n    // Get organization's customer ID\n    const { data: org } = await supabase\n      .from('organizations')\n      .select('stripe_customer_id')\n      .eq('id', organizationId)\n      .single()\n\n    if (!org?.stripe_customer_id) {\n      throw new Error('Organization does not have a Stripe customer')\n    }\n\n    const setupIntent = await stripe.setupIntents.create({\n      customer: org.stripe_customer_id,\n      usage: options.usage || 'off_session',\n      confirm: options.confirmationMethod === 'automatic',\n      metadata: {\n        organizationId,\n        setAsDefault: options.setAsDefault?.toString() || 'false',\n        ...options.metadata,\n      },\n    })\n\n    return {\n      clientSecret: setupIntent.client_secret!,\n      setupIntentId: setupIntent.id,\n    }\n  }\n\n  async handleSetupIntentSucceeded(setupIntent: Stripe.SetupIntent): Promise<void> {\n    const organizationId = setupIntent.metadata.organizationId\n    const setAsDefault = setupIntent.metadata.setAsDefault === 'true'\n\n    if (!organizationId || !setupIntent.payment_method) {\n      return\n    }\n\n    await this.attachPaymentMethod(\n      organizationId,\n      setupIntent.payment_method as string,\n      { setAsDefault }\n    )\n  }\n\n  async handlePaymentMethodAttached(paymentMethod: Stripe.PaymentMethod): Promise<void> {\n    const supabase = await this.supabase\n\n    // Get organization from customer\n    const organizationId = await this.getOrganizationFromCustomer(paymentMethod.customer as string)\n    if (!organizationId) return\n\n    const paymentMethodData = this.formatPaymentMethodData(paymentMethod, organizationId, false)\n\n    await supabase\n      .from('payment_methods')\n      .upsert(paymentMethodData)\n  }\n\n  async handlePaymentMethodDetached(paymentMethod: Stripe.PaymentMethod): Promise<void> {\n    const supabase = await this.supabase\n\n    await supabase\n      .from('payment_methods')\n      .update({\n        is_active: false,\n        updated_at: new Date().toISOString(),\n      })\n      .eq('stripe_payment_method_id', paymentMethod.id)\n  }\n\n  async detachPaymentMethod(organizationId: string, paymentMethodId: string): Promise<void> {\n    const supabase = await this.supabase\n\n    // Get payment method\n    const { data: paymentMethodRecord } = await supabase\n      .from('payment_methods')\n      .select('stripe_payment_method_id, is_default')\n      .eq('id', paymentMethodId)\n      .eq('organization_id', organizationId)\n      .single()\n\n    if (!paymentMethodRecord) {\n      throw new Error('Payment method not found')\n    }\n\n    // Check if this is the default method\n    if (paymentMethodRecord.is_default) {\n      // Check if there are other payment methods to set as default\n      const { data: otherMethods } = await supabase\n        .from('payment_methods')\n        .select('stripe_payment_method_id')\n        .eq('organization_id', organizationId)\n        .eq('is_active', true)\n        .neq('id', paymentMethodId)\n        .limit(1)\n\n      if (otherMethods?.length) {\n        // Set another method as default\n        await this.setDefaultPaymentMethod(organizationId, otherMethods[0].stripe_payment_method_id)\n      }\n    }\n\n    // Detach from Stripe\n    await stripe.paymentMethods.detach(paymentMethodRecord.stripe_payment_method_id)\n\n    // Update local record\n    await supabase\n      .from('payment_methods')\n      .update({\n        is_active: false,\n        updated_at: new Date().toISOString(),\n      })\n      .eq('id', paymentMethodId)\n  }\n\n  async setDefaultPaymentMethod(organizationId: string, paymentMethodId: string): Promise<void> {\n    const supabase = await this.supabase\n\n    // Get organization and payment method\n    const { data: org } = await supabase\n      .from('organizations')\n      .select('stripe_customer_id')\n      .eq('id', organizationId)\n      .single()\n\n    if (!org?.stripe_customer_id) {\n      throw new Error('Organization does not have a Stripe customer')\n    }\n\n    // Update Stripe customer default payment method\n    await stripe.customers.update(org.stripe_customer_id, {\n      invoice_settings: {\n        default_payment_method: paymentMethodId,\n      },\n    })\n\n    // Update local records\n    await supabase\n      .from('payment_methods')\n      .update({ is_default: false })\n      .eq('organization_id', organizationId)\n\n    await supabase\n      .from('payment_methods')\n      .update({ is_default: true })\n      .eq('organization_id', organizationId)\n      .eq('stripe_payment_method_id', paymentMethodId)\n  }\n\n  async getPaymentMethods(organizationId: string): Promise<PaymentMethodData[]> {\n    const supabase = await this.supabase\n\n    const { data: paymentMethods } = await supabase\n      .from('payment_methods')\n      .select('*')\n      .eq('organization_id', organizationId)\n      .eq('is_active', true)\n      .order('is_default', { ascending: false })\n      .order('created_at', { ascending: false })\n\n    return paymentMethods || []\n  }\n\n  async updatePaymentMethod(\n    organizationId: string,\n    paymentMethodId: string,\n    updates: {\n      expiryMonth?: number\n      expiryYear?: number\n      metadata?: Record<string, string>\n    }\n  ): Promise<void> {\n    const supabase = await this.supabase\n\n    // Get payment method\n    const { data: paymentMethodRecord } = await supabase\n      .from('payment_methods')\n      .select('stripe_payment_method_id')\n      .eq('id', paymentMethodId)\n      .eq('organization_id', organizationId)\n      .single()\n\n    if (!paymentMethodRecord) {\n      throw new Error('Payment method not found')\n    }\n\n    // Update in Stripe\n    const updateData: any = {}\n    if (updates.expiryMonth || updates.expiryYear) {\n      updateData.card = {\n        exp_month: updates.expiryMonth,\n        exp_year: updates.expiryYear,\n      }\n    }\n    if (updates.metadata) {\n      updateData.metadata = updates.metadata\n    }\n\n    if (Object.keys(updateData).length > 0) {\n      await stripe.paymentMethods.update(paymentMethodRecord.stripe_payment_method_id, updateData)\n    }\n\n    // Update local record\n    await supabase\n      .from('payment_methods')\n      .update({\n        expiry_month: updates.expiryMonth,\n        expiry_year: updates.expiryYear,\n        updated_at: new Date().toISOString(),\n      })\n      .eq('id', paymentMethodId)\n  }\n\n  async recordPaymentFailure(\n    paymentMethodId: string,\n    failure: { code: string; message: string }\n  ): Promise<void> {\n    const supabase = await this.supabase\n\n    await supabase\n      .from('payment_methods')\n      .update({\n        failure_count: supabase.from('payment_methods').select('failure_count').then(data => (data || 0) + 1),\n        last_failure: {\n          code: failure.code,\n          message: failure.message,\n          timestamp: new Date().toISOString(),\n        },\n        updated_at: new Date().toISOString(),\n      })\n      .eq('stripe_payment_method_id', paymentMethodId)\n  }\n\n  async setupPaymentRetryStrategy(\n    organizationId: string,\n    strategy: PaymentRetryStrategy\n  ): Promise<void> {\n    const supabase = await this.supabase\n\n    await supabase\n      .from('payment_retry_strategies')\n      .upsert({\n        organization_id: organizationId,\n        enabled: strategy.enabled,\n        max_retries: strategy.maxRetries,\n        retry_intervals: strategy.retryIntervals,\n        fallback_methods: strategy.fallbackMethods,\n        notify_customer: strategy.notifyCustomer,\n        updated_at: new Date().toISOString(),\n      })\n  }\n\n  async getPaymentRetryStrategy(organizationId: string): Promise<PaymentRetryStrategy | null> {\n    const supabase = await this.supabase\n\n    const { data: strategy } = await supabase\n      .from('payment_retry_strategies')\n      .select('*')\n      .eq('organization_id', organizationId)\n      .single()\n\n    if (!strategy) return null\n\n    return {\n      enabled: strategy.enabled,\n      maxRetries: strategy.max_retries,\n      retryIntervals: strategy.retry_intervals,\n      fallbackMethods: strategy.fallback_methods,\n      notifyCustomer: strategy.notify_customer,\n    }\n  }\n\n  async processFailedPaymentRetry(\n    organizationId: string,\n    invoiceId: string,\n    attemptNumber: number\n  ): Promise<boolean> {\n    const strategy = await this.getPaymentRetryStrategy(organizationId)\n\n    if (!strategy?.enabled || attemptNumber > strategy.maxRetries) {\n      return false\n    }\n\n    const paymentMethods = await this.getPaymentMethods(organizationId)\n    const activeMethods = paymentMethods.filter(pm => pm.isActive && pm.failureCount < 3)\n\n    if (activeMethods.length === 0) {\n      return false\n    }\n\n    // Try primary method first, then fallback methods\n    const methodsToTry = [\n      ...activeMethods.filter(pm => pm.isDefault),\n      ...activeMethods.filter(pm => !pm.isDefault),\n    ]\n\n    for (const method of methodsToTry) {\n      try {\n        // Attempt payment with this method\n        const result = await this.attemptInvoicePayment(invoiceId, method.stripePaymentMethodId)\n        if (result) {\n          return true\n        }\n      } catch (error) {\n        console.error(`Payment attempt failed with method ${method.id}:`, error)\n        await this.recordPaymentFailure(method.stripePaymentMethodId, {\n          code: 'payment_failed',\n          message: error instanceof Error ? error.message : 'Unknown error',\n        })\n      }\n    }\n\n    return false\n  }\n\n  async validatePaymentMethod(paymentMethodId: string): Promise<{\n    valid: boolean\n    issues: string[]\n  }> {\n    try {\n      const paymentMethod = await stripe.paymentMethods.retrieve(paymentMethodId)\n      const issues: string[] = []\n\n      if (paymentMethod.card) {\n        // Check expiry\n        const now = new Date()\n        const currentYear = now.getFullYear()\n        const currentMonth = now.getMonth() + 1\n\n        if (paymentMethod.card.exp_year < currentYear ||\n            (paymentMethod.card.exp_year === currentYear && paymentMethod.card.exp_month < currentMonth)) {\n          issues.push('Card has expired')\n        }\n\n        // Check for upcoming expiry (next 2 months)\n        const expiryDate = new Date(paymentMethod.card.exp_year, paymentMethod.card.exp_month - 1)\n        const twoMonthsFromNow = new Date()\n        twoMonthsFromNow.setMonth(twoMonthsFromNow.getMonth() + 2)\n\n        if (expiryDate <= twoMonthsFromNow) {\n          issues.push('Card expires soon')\n        }\n      }\n\n      return {\n        valid: issues.length === 0,\n        issues,\n      }\n    } catch (error) {\n      return {\n        valid: false,\n        issues: ['Payment method not found or invalid'],\n      }\n    }\n  }\n\n  async getPaymentMethodAnalytics(organizationId: string): Promise<{\n    totalMethods: number\n    activeMethods: number\n    defaultMethod: PaymentMethodData | null\n    failureRate: number\n    methodTypes: Record<string, number>\n    recentFailures: number\n  }> {\n    const supabase = await this.supabase\n\n    const { data: methods } = await supabase\n      .from('payment_methods')\n      .select('*')\n      .eq('organization_id', organizationId)\n\n    if (!methods?.length) {\n      return {\n        totalMethods: 0,\n        activeMethods: 0,\n        defaultMethod: null,\n        failureRate: 0,\n        methodTypes: {},\n        recentFailures: 0,\n      }\n    }\n\n    const activeMethods = methods.filter(m => m.is_active)\n    const defaultMethod = methods.find(m => m.is_default) || null\n    const totalFailures = methods.reduce((sum, m) => sum + m.failure_count, 0)\n    const failureRate = totalFailures / methods.length\n\n    const methodTypes = methods.reduce((acc, method) => {\n      acc[method.type] = (acc[method.type] || 0) + 1\n      return acc\n    }, {} as Record<string, number>)\n\n    // Count recent failures (last 30 days)\n    const thirtyDaysAgo = new Date()\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30)\n\n    const recentFailures = methods.filter(m =>\n      m.last_failure && new Date(m.last_failure.timestamp) >= thirtyDaysAgo\n    ).length\n\n    return {\n      totalMethods: methods.length,\n      activeMethods: activeMethods.length,\n      defaultMethod,\n      failureRate,\n      methodTypes,\n      recentFailures,\n    }\n  }\n\n  // Private helper methods\n  private formatPaymentMethodData(\n    stripePaymentMethod: Stripe.PaymentMethod,\n    organizationId: string,\n    isDefault: boolean\n  ): Partial<PaymentMethodData> {\n    const baseData = {\n      organization_id: organizationId,\n      stripe_payment_method_id: stripePaymentMethod.id,\n      customer_id: stripePaymentMethod.customer as string,\n      type: stripePaymentMethod.type as PaymentMethodData['type'],\n      is_default: isDefault,\n      is_active: true,\n      failure_count: 0,\n      created_at: new Date(stripePaymentMethod.created * 1000).toISOString(),\n      updated_at: new Date().toISOString(),\n    }\n\n    if (stripePaymentMethod.card) {\n      return {\n        ...baseData,\n        brand: stripePaymentMethod.card.brand,\n        last4: stripePaymentMethod.card.last4,\n        expiry_month: stripePaymentMethod.card.exp_month,\n        expiry_year: stripePaymentMethod.card.exp_year,\n        country: stripePaymentMethod.card.country,\n      }\n    }\n\n    if (stripePaymentMethod.us_bank_account) {\n      return {\n        ...baseData,\n        last4: stripePaymentMethod.us_bank_account.last4,\n        brand: stripePaymentMethod.us_bank_account.bank_name,\n      }\n    }\n\n    return baseData\n  }\n\n  private async getOrganizationFromCustomer(customerId: string): Promise<string | null> {\n    const supabase = await this.supabase\n    const { data } = await supabase\n      .from('organizations')\n      .select('id')\n      .eq('stripe_customer_id', customerId)\n      .single()\n\n    return data?.id || null\n  }\n\n  private async attemptInvoicePayment(invoiceId: string, paymentMethodId: string): Promise<boolean> {\n    try {\n      const invoice = await stripe.invoices.pay(invoiceId, {\n        payment_method: paymentMethodId,\n      })\n\n      return invoice.status === 'paid'\n    } catch (error) {\n      console.error('Invoice payment attempt failed:', error)\n      return false\n    }\n  }\n}"],
      names: ["PaymentMethodManager", "attachPaymentMethod", "organizationId", "paymentMethodId", "options", "supabase", "data", "org", "from", "select", "eq", "single", "stripe_customer_id", "Error", "paymentMethod", "stripe", "paymentMethods", "attach", "customer", "setAsDefault", "customers", "update", "invoice_settings", "default_payment_method", "is_default", "paymentMethodData", "formatPaymentMethodData", "upsert", "createSetupIntent", "setupIntent", "setupIntents", "create", "usage", "confirm", "confirmationMethod", "metadata", "toString", "clientSecret", "client_secret", "setupIntentId", "id", "handleSetupIntentSucceeded", "payment_method", "handlePaymentMethodAttached", "getOrganizationFromCustomer", "handlePaymentMethodDetached", "is_active", "updated_at", "Date", "toISOString", "detachPaymentMethod", "paymentMethodRecord", "otherMethods", "neq", "limit", "length", "setDefaultPaymentMethod", "stripe_payment_method_id", "detach", "getPaymentMethods", "order", "ascending", "updatePaymentMethod", "updates", "updateData", "expiryMonth", "expiryYear", "card", "exp_month", "exp_year", "Object", "keys", "expiry_month", "expiry_year", "recordPaymentFailure", "failure", "failure_count", "then", "last_failure", "code", "message", "timestamp", "setupPaymentRetryStrategy", "strategy", "organization_id", "enabled", "max_retries", "maxRetries", "retry_intervals", "retryIntervals", "fallback_methods", "fallbackMethods", "notify_customer", "notifyCustomer", "getPaymentRetryStrategy", "processFailedPaymentRetry", "invoiceId", "attemptNumber", "activeMethods", "filter", "pm", "isActive", "failureCount", "methodsToTry", "isDefault", "method", "result", "attemptInvoicePayment", "stripePaymentMethodId", "error", "console", "validatePaymentMethod", "retrieve", "issues", "now", "currentYear", "getFullYear", "currentMonth", "getMonth", "push", "expiryDate", "twoMonthsFromNow", "setMonth", "valid", "getPaymentMethodAnalytics", "methods", "totalMethods", "defaultMethod", "failureRate", "methodTypes", "recentFailures", "m", "find", "totalFailures", "reduce", "sum", "acc", "type", "thirtyDaysAgo", "setDate", "getDate", "stripePaymentMethod", "baseData", "customer_id", "created_at", "created", "brand", "last4", "country", "us_bank_account", "bank_name", "customerId", "invoice", "invoices", "pay", "status", "createClient"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "c57c585ecd7851565a1eab9661982bd9e37cb9ff"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2aml7mj6mf = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2aml7mj6mf();
cov_2aml7mj6mf().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_2aml7mj6mf().s[1]++;
Object.defineProperty(exports, "PaymentMethodManager", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[0]++;
    cov_2aml7mj6mf().s[2]++;
    return PaymentMethodManager;
  }
});
const _server =
/* istanbul ignore next */
(cov_2aml7mj6mf().s[3]++, require("../supabase/server"));
const _server1 =
/* istanbul ignore next */
(cov_2aml7mj6mf().s[4]++, require("../stripe/server"));
class PaymentMethodManager {
  async attachPaymentMethod(organizationId, paymentMethodId, options =
  /* istanbul ignore next */
  (cov_2aml7mj6mf().b[0][0]++, {})) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[1]++;
    const supabase =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[5]++, await this.supabase);
    // Get organization's customer ID
    const {
      data: org
    } =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[6]++, await supabase.from('organizations').select('stripe_customer_id').eq('id', organizationId).single());
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[7]++;
    if (!org?.stripe_customer_id) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[1][0]++;
      cov_2aml7mj6mf().s[8]++;
      throw new Error('Organization does not have a Stripe customer');
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[1][1]++;
    }
    // Attach payment method to customer
    const paymentMethod =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[9]++, await _server1.stripe.paymentMethods.attach(paymentMethodId, {
      customer: org.stripe_customer_id
    }));
    // Set as default if requested
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[10]++;
    if (options.setAsDefault) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[2][0]++;
      cov_2aml7mj6mf().s[11]++;
      await _server1.stripe.customers.update(org.stripe_customer_id, {
        invoice_settings: {
          default_payment_method: paymentMethodId
        }
      });
      // Update existing default payment methods
      /* istanbul ignore next */
      cov_2aml7mj6mf().s[12]++;
      await supabase.from('payment_methods').update({
        is_default: false
      }).eq('organization_id', organizationId).eq('is_default', true);
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[2][1]++;
    }
    // Create local record
    const paymentMethodData =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[13]++, this.formatPaymentMethodData(paymentMethod, organizationId,
    /* istanbul ignore next */
    (cov_2aml7mj6mf().b[3][0]++, options.setAsDefault) ||
    /* istanbul ignore next */
    (cov_2aml7mj6mf().b[3][1]++, false)));
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[14]++;
    await supabase.from('payment_methods').upsert(paymentMethodData);
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[15]++;
    return paymentMethodData;
  }
  async createSetupIntent(organizationId, options =
  /* istanbul ignore next */
  (cov_2aml7mj6mf().b[4][0]++, {})) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[2]++;
    const supabase =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[16]++, await this.supabase);
    // Get organization's customer ID
    const {
      data: org
    } =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[17]++, await supabase.from('organizations').select('stripe_customer_id').eq('id', organizationId).single());
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[18]++;
    if (!org?.stripe_customer_id) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[5][0]++;
      cov_2aml7mj6mf().s[19]++;
      throw new Error('Organization does not have a Stripe customer');
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[5][1]++;
    }
    const setupIntent =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[20]++, await _server1.stripe.setupIntents.create({
      customer: org.stripe_customer_id,
      usage:
      /* istanbul ignore next */
      (cov_2aml7mj6mf().b[6][0]++, options.usage) ||
      /* istanbul ignore next */
      (cov_2aml7mj6mf().b[6][1]++, 'off_session'),
      confirm: options.confirmationMethod === 'automatic',
      metadata: {
        organizationId,
        setAsDefault:
        /* istanbul ignore next */
        (cov_2aml7mj6mf().b[7][0]++, options.setAsDefault?.toString()) ||
        /* istanbul ignore next */
        (cov_2aml7mj6mf().b[7][1]++, 'false'),
        ...options.metadata
      }
    }));
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[21]++;
    return {
      clientSecret: setupIntent.client_secret,
      setupIntentId: setupIntent.id
    };
  }
  async handleSetupIntentSucceeded(setupIntent) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[3]++;
    const organizationId =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[22]++, setupIntent.metadata.organizationId);
    const setAsDefault =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[23]++, setupIntent.metadata.setAsDefault === 'true');
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[24]++;
    if (
    /* istanbul ignore next */
    (cov_2aml7mj6mf().b[9][0]++, !organizationId) ||
    /* istanbul ignore next */
    (cov_2aml7mj6mf().b[9][1]++, !setupIntent.payment_method)) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[8][0]++;
      cov_2aml7mj6mf().s[25]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[8][1]++;
    }
    cov_2aml7mj6mf().s[26]++;
    await this.attachPaymentMethod(organizationId, setupIntent.payment_method, {
      setAsDefault
    });
  }
  async handlePaymentMethodAttached(paymentMethod) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[4]++;
    const supabase =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[27]++, await this.supabase);
    // Get organization from customer
    const organizationId =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[28]++, await this.getOrganizationFromCustomer(paymentMethod.customer));
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[29]++;
    if (!organizationId) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[10][0]++;
      cov_2aml7mj6mf().s[30]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[10][1]++;
    }
    const paymentMethodData =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[31]++, this.formatPaymentMethodData(paymentMethod, organizationId, false));
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[32]++;
    await supabase.from('payment_methods').upsert(paymentMethodData);
  }
  async handlePaymentMethodDetached(paymentMethod) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[5]++;
    const supabase =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[33]++, await this.supabase);
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[34]++;
    await supabase.from('payment_methods').update({
      is_active: false,
      updated_at: new Date().toISOString()
    }).eq('stripe_payment_method_id', paymentMethod.id);
  }
  async detachPaymentMethod(organizationId, paymentMethodId) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[6]++;
    const supabase =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[35]++, await this.supabase);
    // Get payment method
    const {
      data: paymentMethodRecord
    } =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[36]++, await supabase.from('payment_methods').select('stripe_payment_method_id, is_default').eq('id', paymentMethodId).eq('organization_id', organizationId).single());
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[37]++;
    if (!paymentMethodRecord) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[11][0]++;
      cov_2aml7mj6mf().s[38]++;
      throw new Error('Payment method not found');
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[11][1]++;
    }
    // Check if this is the default method
    cov_2aml7mj6mf().s[39]++;
    if (paymentMethodRecord.is_default) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[12][0]++;
      // Check if there are other payment methods to set as default
      const {
        data: otherMethods
      } =
      /* istanbul ignore next */
      (cov_2aml7mj6mf().s[40]++, await supabase.from('payment_methods').select('stripe_payment_method_id').eq('organization_id', organizationId).eq('is_active', true).neq('id', paymentMethodId).limit(1));
      /* istanbul ignore next */
      cov_2aml7mj6mf().s[41]++;
      if (otherMethods?.length) {
        /* istanbul ignore next */
        cov_2aml7mj6mf().b[13][0]++;
        cov_2aml7mj6mf().s[42]++;
        // Set another method as default
        await this.setDefaultPaymentMethod(organizationId, otherMethods[0].stripe_payment_method_id);
      } else
      /* istanbul ignore next */
      {
        cov_2aml7mj6mf().b[13][1]++;
      }
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[12][1]++;
    }
    // Detach from Stripe
    cov_2aml7mj6mf().s[43]++;
    await _server1.stripe.paymentMethods.detach(paymentMethodRecord.stripe_payment_method_id);
    // Update local record
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[44]++;
    await supabase.from('payment_methods').update({
      is_active: false,
      updated_at: new Date().toISOString()
    }).eq('id', paymentMethodId);
  }
  async setDefaultPaymentMethod(organizationId, paymentMethodId) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[7]++;
    const supabase =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[45]++, await this.supabase);
    // Get organization and payment method
    const {
      data: org
    } =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[46]++, await supabase.from('organizations').select('stripe_customer_id').eq('id', organizationId).single());
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[47]++;
    if (!org?.stripe_customer_id) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[14][0]++;
      cov_2aml7mj6mf().s[48]++;
      throw new Error('Organization does not have a Stripe customer');
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[14][1]++;
    }
    // Update Stripe customer default payment method
    cov_2aml7mj6mf().s[49]++;
    await _server1.stripe.customers.update(org.stripe_customer_id, {
      invoice_settings: {
        default_payment_method: paymentMethodId
      }
    });
    // Update local records
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[50]++;
    await supabase.from('payment_methods').update({
      is_default: false
    }).eq('organization_id', organizationId);
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[51]++;
    await supabase.from('payment_methods').update({
      is_default: true
    }).eq('organization_id', organizationId).eq('stripe_payment_method_id', paymentMethodId);
  }
  async getPaymentMethods(organizationId) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[8]++;
    const supabase =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[52]++, await this.supabase);
    const {
      data: paymentMethods
    } =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[53]++, await supabase.from('payment_methods').select('*').eq('organization_id', organizationId).eq('is_active', true).order('is_default', {
      ascending: false
    }).order('created_at', {
      ascending: false
    }));
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[54]++;
    return /* istanbul ignore next */(cov_2aml7mj6mf().b[15][0]++, paymentMethods) ||
    /* istanbul ignore next */
    (cov_2aml7mj6mf().b[15][1]++, []);
  }
  async updatePaymentMethod(organizationId, paymentMethodId, updates) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[9]++;
    const supabase =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[55]++, await this.supabase);
    // Get payment method
    const {
      data: paymentMethodRecord
    } =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[56]++, await supabase.from('payment_methods').select('stripe_payment_method_id').eq('id', paymentMethodId).eq('organization_id', organizationId).single());
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[57]++;
    if (!paymentMethodRecord) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[16][0]++;
      cov_2aml7mj6mf().s[58]++;
      throw new Error('Payment method not found');
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[16][1]++;
    }
    // Update in Stripe
    const updateData =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[59]++, {});
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[60]++;
    if (
    /* istanbul ignore next */
    (cov_2aml7mj6mf().b[18][0]++, updates.expiryMonth) ||
    /* istanbul ignore next */
    (cov_2aml7mj6mf().b[18][1]++, updates.expiryYear)) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[17][0]++;
      cov_2aml7mj6mf().s[61]++;
      updateData.card = {
        exp_month: updates.expiryMonth,
        exp_year: updates.expiryYear
      };
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[17][1]++;
    }
    cov_2aml7mj6mf().s[62]++;
    if (updates.metadata) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[19][0]++;
      cov_2aml7mj6mf().s[63]++;
      updateData.metadata = updates.metadata;
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[19][1]++;
    }
    cov_2aml7mj6mf().s[64]++;
    if (Object.keys(updateData).length > 0) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[20][0]++;
      cov_2aml7mj6mf().s[65]++;
      await _server1.stripe.paymentMethods.update(paymentMethodRecord.stripe_payment_method_id, updateData);
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[20][1]++;
    }
    // Update local record
    cov_2aml7mj6mf().s[66]++;
    await supabase.from('payment_methods').update({
      expiry_month: updates.expiryMonth,
      expiry_year: updates.expiryYear,
      updated_at: new Date().toISOString()
    }).eq('id', paymentMethodId);
  }
  async recordPaymentFailure(paymentMethodId, failure) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[10]++;
    const supabase =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[67]++, await this.supabase);
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[68]++;
    await supabase.from('payment_methods').update({
      failure_count: supabase.from('payment_methods').select('failure_count').then(data => {
        /* istanbul ignore next */
        cov_2aml7mj6mf().f[11]++;
        cov_2aml7mj6mf().s[69]++;
        return (
        /* istanbul ignore next */
        (cov_2aml7mj6mf().b[21][0]++, data) ||
        /* istanbul ignore next */
        (cov_2aml7mj6mf().b[21][1]++, 0)) + 1;
      }),
      last_failure: {
        code: failure.code,
        message: failure.message,
        timestamp: new Date().toISOString()
      },
      updated_at: new Date().toISOString()
    }).eq('stripe_payment_method_id', paymentMethodId);
  }
  async setupPaymentRetryStrategy(organizationId, strategy) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[12]++;
    const supabase =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[70]++, await this.supabase);
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[71]++;
    await supabase.from('payment_retry_strategies').upsert({
      organization_id: organizationId,
      enabled: strategy.enabled,
      max_retries: strategy.maxRetries,
      retry_intervals: strategy.retryIntervals,
      fallback_methods: strategy.fallbackMethods,
      notify_customer: strategy.notifyCustomer,
      updated_at: new Date().toISOString()
    });
  }
  async getPaymentRetryStrategy(organizationId) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[13]++;
    const supabase =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[72]++, await this.supabase);
    const {
      data: strategy
    } =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[73]++, await supabase.from('payment_retry_strategies').select('*').eq('organization_id', organizationId).single());
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[74]++;
    if (!strategy) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[22][0]++;
      cov_2aml7mj6mf().s[75]++;
      return null;
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[22][1]++;
    }
    cov_2aml7mj6mf().s[76]++;
    return {
      enabled: strategy.enabled,
      maxRetries: strategy.max_retries,
      retryIntervals: strategy.retry_intervals,
      fallbackMethods: strategy.fallback_methods,
      notifyCustomer: strategy.notify_customer
    };
  }
  async processFailedPaymentRetry(organizationId, invoiceId, attemptNumber) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[14]++;
    const strategy =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[77]++, await this.getPaymentRetryStrategy(organizationId));
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[78]++;
    if (
    /* istanbul ignore next */
    (cov_2aml7mj6mf().b[24][0]++, !strategy?.enabled) ||
    /* istanbul ignore next */
    (cov_2aml7mj6mf().b[24][1]++, attemptNumber > strategy.maxRetries)) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[23][0]++;
      cov_2aml7mj6mf().s[79]++;
      return false;
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[23][1]++;
    }
    const paymentMethods =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[80]++, await this.getPaymentMethods(organizationId));
    const activeMethods =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[81]++, paymentMethods.filter(pm => {
      /* istanbul ignore next */
      cov_2aml7mj6mf().f[15]++;
      cov_2aml7mj6mf().s[82]++;
      return /* istanbul ignore next */(cov_2aml7mj6mf().b[25][0]++, pm.isActive) &&
      /* istanbul ignore next */
      (cov_2aml7mj6mf().b[25][1]++, pm.failureCount < 3);
    }));
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[83]++;
    if (activeMethods.length === 0) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[26][0]++;
      cov_2aml7mj6mf().s[84]++;
      return false;
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[26][1]++;
    }
    // Try primary method first, then fallback methods
    const methodsToTry =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[85]++, [...activeMethods.filter(pm => {
      /* istanbul ignore next */
      cov_2aml7mj6mf().f[16]++;
      cov_2aml7mj6mf().s[86]++;
      return pm.isDefault;
    }), ...activeMethods.filter(pm => {
      /* istanbul ignore next */
      cov_2aml7mj6mf().f[17]++;
      cov_2aml7mj6mf().s[87]++;
      return !pm.isDefault;
    })]);
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[88]++;
    for (const method of methodsToTry) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().s[89]++;
      try {
        // Attempt payment with this method
        const result =
        /* istanbul ignore next */
        (cov_2aml7mj6mf().s[90]++, await this.attemptInvoicePayment(invoiceId, method.stripePaymentMethodId));
        /* istanbul ignore next */
        cov_2aml7mj6mf().s[91]++;
        if (result) {
          /* istanbul ignore next */
          cov_2aml7mj6mf().b[27][0]++;
          cov_2aml7mj6mf().s[92]++;
          return true;
        } else
        /* istanbul ignore next */
        {
          cov_2aml7mj6mf().b[27][1]++;
        }
      } catch (error) {
        /* istanbul ignore next */
        cov_2aml7mj6mf().s[93]++;
        console.error(`Payment attempt failed with method ${method.id}:`, error);
        /* istanbul ignore next */
        cov_2aml7mj6mf().s[94]++;
        await this.recordPaymentFailure(method.stripePaymentMethodId, {
          code: 'payment_failed',
          message: error instanceof Error ?
          /* istanbul ignore next */
          (cov_2aml7mj6mf().b[28][0]++, error.message) :
          /* istanbul ignore next */
          (cov_2aml7mj6mf().b[28][1]++, 'Unknown error')
        });
      }
    }
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[95]++;
    return false;
  }
  async validatePaymentMethod(paymentMethodId) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[18]++;
    cov_2aml7mj6mf().s[96]++;
    try {
      const paymentMethod =
      /* istanbul ignore next */
      (cov_2aml7mj6mf().s[97]++, await _server1.stripe.paymentMethods.retrieve(paymentMethodId));
      const issues =
      /* istanbul ignore next */
      (cov_2aml7mj6mf().s[98]++, []);
      /* istanbul ignore next */
      cov_2aml7mj6mf().s[99]++;
      if (paymentMethod.card) {
        /* istanbul ignore next */
        cov_2aml7mj6mf().b[29][0]++;
        // Check expiry
        const now =
        /* istanbul ignore next */
        (cov_2aml7mj6mf().s[100]++, new Date());
        const currentYear =
        /* istanbul ignore next */
        (cov_2aml7mj6mf().s[101]++, now.getFullYear());
        const currentMonth =
        /* istanbul ignore next */
        (cov_2aml7mj6mf().s[102]++, now.getMonth() + 1);
        /* istanbul ignore next */
        cov_2aml7mj6mf().s[103]++;
        if (
        /* istanbul ignore next */
        (cov_2aml7mj6mf().b[31][0]++, paymentMethod.card.exp_year < currentYear) ||
        /* istanbul ignore next */
        (cov_2aml7mj6mf().b[31][1]++, paymentMethod.card.exp_year === currentYear) &&
        /* istanbul ignore next */
        (cov_2aml7mj6mf().b[31][2]++, paymentMethod.card.exp_month < currentMonth)) {
          /* istanbul ignore next */
          cov_2aml7mj6mf().b[30][0]++;
          cov_2aml7mj6mf().s[104]++;
          issues.push('Card has expired');
        } else
        /* istanbul ignore next */
        {
          cov_2aml7mj6mf().b[30][1]++;
        }
        // Check for upcoming expiry (next 2 months)
        const expiryDate =
        /* istanbul ignore next */
        (cov_2aml7mj6mf().s[105]++, new Date(paymentMethod.card.exp_year, paymentMethod.card.exp_month - 1));
        const twoMonthsFromNow =
        /* istanbul ignore next */
        (cov_2aml7mj6mf().s[106]++, new Date());
        /* istanbul ignore next */
        cov_2aml7mj6mf().s[107]++;
        twoMonthsFromNow.setMonth(twoMonthsFromNow.getMonth() + 2);
        /* istanbul ignore next */
        cov_2aml7mj6mf().s[108]++;
        if (expiryDate <= twoMonthsFromNow) {
          /* istanbul ignore next */
          cov_2aml7mj6mf().b[32][0]++;
          cov_2aml7mj6mf().s[109]++;
          issues.push('Card expires soon');
        } else
        /* istanbul ignore next */
        {
          cov_2aml7mj6mf().b[32][1]++;
        }
      } else
      /* istanbul ignore next */
      {
        cov_2aml7mj6mf().b[29][1]++;
      }
      cov_2aml7mj6mf().s[110]++;
      return {
        valid: issues.length === 0,
        issues
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().s[111]++;
      return {
        valid: false,
        issues: ['Payment method not found or invalid']
      };
    }
  }
  async getPaymentMethodAnalytics(organizationId) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[19]++;
    const supabase =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[112]++, await this.supabase);
    const {
      data: methods
    } =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[113]++, await supabase.from('payment_methods').select('*').eq('organization_id', organizationId));
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[114]++;
    if (!methods?.length) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[33][0]++;
      cov_2aml7mj6mf().s[115]++;
      return {
        totalMethods: 0,
        activeMethods: 0,
        defaultMethod: null,
        failureRate: 0,
        methodTypes: {},
        recentFailures: 0
      };
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[33][1]++;
    }
    const activeMethods =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[116]++, methods.filter(m => {
      /* istanbul ignore next */
      cov_2aml7mj6mf().f[20]++;
      cov_2aml7mj6mf().s[117]++;
      return m.is_active;
    }));
    const defaultMethod =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[118]++,
    /* istanbul ignore next */
    (cov_2aml7mj6mf().b[34][0]++, methods.find(m => {
      /* istanbul ignore next */
      cov_2aml7mj6mf().f[21]++;
      cov_2aml7mj6mf().s[119]++;
      return m.is_default;
    })) ||
    /* istanbul ignore next */
    (cov_2aml7mj6mf().b[34][1]++, null));
    const totalFailures =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[120]++, methods.reduce((sum, m) => {
      /* istanbul ignore next */
      cov_2aml7mj6mf().f[22]++;
      cov_2aml7mj6mf().s[121]++;
      return sum + m.failure_count;
    }, 0));
    const failureRate =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[122]++, totalFailures / methods.length);
    const methodTypes =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[123]++, methods.reduce((acc, method) => {
      /* istanbul ignore next */
      cov_2aml7mj6mf().f[23]++;
      cov_2aml7mj6mf().s[124]++;
      acc[method.type] = (
      /* istanbul ignore next */
      (cov_2aml7mj6mf().b[35][0]++, acc[method.type]) ||
      /* istanbul ignore next */
      (cov_2aml7mj6mf().b[35][1]++, 0)) + 1;
      /* istanbul ignore next */
      cov_2aml7mj6mf().s[125]++;
      return acc;
    }, {}));
    // Count recent failures (last 30 days)
    const thirtyDaysAgo =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[126]++, new Date());
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[127]++;
    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
    const recentFailures =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[128]++, methods.filter(m => {
      /* istanbul ignore next */
      cov_2aml7mj6mf().f[24]++;
      cov_2aml7mj6mf().s[129]++;
      return /* istanbul ignore next */(cov_2aml7mj6mf().b[36][0]++, m.last_failure) &&
      /* istanbul ignore next */
      (cov_2aml7mj6mf().b[36][1]++, new Date(m.last_failure.timestamp) >= thirtyDaysAgo);
    }).length);
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[130]++;
    return {
      totalMethods: methods.length,
      activeMethods: activeMethods.length,
      defaultMethod,
      failureRate,
      methodTypes,
      recentFailures
    };
  }
  // Private helper methods
  formatPaymentMethodData(stripePaymentMethod, organizationId, isDefault) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[25]++;
    const baseData =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[131]++, {
      organization_id: organizationId,
      stripe_payment_method_id: stripePaymentMethod.id,
      customer_id: stripePaymentMethod.customer,
      type: stripePaymentMethod.type,
      is_default: isDefault,
      is_active: true,
      failure_count: 0,
      created_at: new Date(stripePaymentMethod.created * 1000).toISOString(),
      updated_at: new Date().toISOString()
    });
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[132]++;
    if (stripePaymentMethod.card) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[37][0]++;
      cov_2aml7mj6mf().s[133]++;
      return {
        ...baseData,
        brand: stripePaymentMethod.card.brand,
        last4: stripePaymentMethod.card.last4,
        expiry_month: stripePaymentMethod.card.exp_month,
        expiry_year: stripePaymentMethod.card.exp_year,
        country: stripePaymentMethod.card.country
      };
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[37][1]++;
    }
    cov_2aml7mj6mf().s[134]++;
    if (stripePaymentMethod.us_bank_account) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().b[38][0]++;
      cov_2aml7mj6mf().s[135]++;
      return {
        ...baseData,
        last4: stripePaymentMethod.us_bank_account.last4,
        brand: stripePaymentMethod.us_bank_account.bank_name
      };
    } else
    /* istanbul ignore next */
    {
      cov_2aml7mj6mf().b[38][1]++;
    }
    cov_2aml7mj6mf().s[136]++;
    return baseData;
  }
  async getOrganizationFromCustomer(customerId) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[26]++;
    const supabase =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[137]++, await this.supabase);
    const {
      data
    } =
    /* istanbul ignore next */
    (cov_2aml7mj6mf().s[138]++, await supabase.from('organizations').select('id').eq('stripe_customer_id', customerId).single());
    /* istanbul ignore next */
    cov_2aml7mj6mf().s[139]++;
    return /* istanbul ignore next */(cov_2aml7mj6mf().b[39][0]++, data?.id) ||
    /* istanbul ignore next */
    (cov_2aml7mj6mf().b[39][1]++, null);
  }
  async attemptInvoicePayment(invoiceId, paymentMethodId) {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[27]++;
    cov_2aml7mj6mf().s[140]++;
    try {
      const invoice =
      /* istanbul ignore next */
      (cov_2aml7mj6mf().s[141]++, await _server1.stripe.invoices.pay(invoiceId, {
        payment_method: paymentMethodId
      }));
      /* istanbul ignore next */
      cov_2aml7mj6mf().s[142]++;
      return invoice.status === 'paid';
    } catch (error) {
      /* istanbul ignore next */
      cov_2aml7mj6mf().s[143]++;
      console.error('Invoice payment attempt failed:', error);
      /* istanbul ignore next */
      cov_2aml7mj6mf().s[144]++;
      return false;
    }
  }
  constructor() {
    /* istanbul ignore next */
    cov_2aml7mj6mf().f[28]++;
    cov_2aml7mj6mf().s[145]++;
    this.supabase = (0, _server.createClient)();
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmFtbDdtajZtZiIsImFjdHVhbENvdmVyYWdlIiwicyIsIlBheW1lbnRNZXRob2RNYW5hZ2VyIiwiYXR0YWNoUGF5bWVudE1ldGhvZCIsIm9yZ2FuaXphdGlvbklkIiwicGF5bWVudE1ldGhvZElkIiwib3B0aW9ucyIsImIiLCJmIiwic3VwYWJhc2UiLCJkYXRhIiwib3JnIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwic3RyaXBlX2N1c3RvbWVyX2lkIiwiRXJyb3IiLCJwYXltZW50TWV0aG9kIiwiX3NlcnZlcjEiLCJzdHJpcGUiLCJwYXltZW50TWV0aG9kcyIsImF0dGFjaCIsImN1c3RvbWVyIiwic2V0QXNEZWZhdWx0IiwiY3VzdG9tZXJzIiwidXBkYXRlIiwiaW52b2ljZV9zZXR0aW5ncyIsImRlZmF1bHRfcGF5bWVudF9tZXRob2QiLCJpc19kZWZhdWx0IiwicGF5bWVudE1ldGhvZERhdGEiLCJmb3JtYXRQYXltZW50TWV0aG9kRGF0YSIsInVwc2VydCIsImNyZWF0ZVNldHVwSW50ZW50Iiwic2V0dXBJbnRlbnQiLCJzZXR1cEludGVudHMiLCJjcmVhdGUiLCJ1c2FnZSIsImNvbmZpcm0iLCJjb25maXJtYXRpb25NZXRob2QiLCJtZXRhZGF0YSIsInRvU3RyaW5nIiwiY2xpZW50U2VjcmV0IiwiY2xpZW50X3NlY3JldCIsInNldHVwSW50ZW50SWQiLCJpZCIsImhhbmRsZVNldHVwSW50ZW50U3VjY2VlZGVkIiwicGF5bWVudF9tZXRob2QiLCJoYW5kbGVQYXltZW50TWV0aG9kQXR0YWNoZWQiLCJnZXRPcmdhbml6YXRpb25Gcm9tQ3VzdG9tZXIiLCJoYW5kbGVQYXltZW50TWV0aG9kRGV0YWNoZWQiLCJpc19hY3RpdmUiLCJ1cGRhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZGV0YWNoUGF5bWVudE1ldGhvZCIsInBheW1lbnRNZXRob2RSZWNvcmQiLCJvdGhlck1ldGhvZHMiLCJuZXEiLCJsaW1pdCIsImxlbmd0aCIsInNldERlZmF1bHRQYXltZW50TWV0aG9kIiwic3RyaXBlX3BheW1lbnRfbWV0aG9kX2lkIiwiZGV0YWNoIiwiZ2V0UGF5bWVudE1ldGhvZHMiLCJvcmRlciIsImFzY2VuZGluZyIsInVwZGF0ZVBheW1lbnRNZXRob2QiLCJ1cGRhdGVzIiwidXBkYXRlRGF0YSIsImV4cGlyeU1vbnRoIiwiZXhwaXJ5WWVhciIsImNhcmQiLCJleHBfbW9udGgiLCJleHBfeWVhciIsIk9iamVjdCIsImtleXMiLCJleHBpcnlfbW9udGgiLCJleHBpcnlfeWVhciIsInJlY29yZFBheW1lbnRGYWlsdXJlIiwiZmFpbHVyZSIsImZhaWx1cmVfY291bnQiLCJ0aGVuIiwibGFzdF9mYWlsdXJlIiwiY29kZSIsIm1lc3NhZ2UiLCJ0aW1lc3RhbXAiLCJzZXR1cFBheW1lbnRSZXRyeVN0cmF0ZWd5Iiwic3RyYXRlZ3kiLCJvcmdhbml6YXRpb25faWQiLCJlbmFibGVkIiwibWF4X3JldHJpZXMiLCJtYXhSZXRyaWVzIiwicmV0cnlfaW50ZXJ2YWxzIiwicmV0cnlJbnRlcnZhbHMiLCJmYWxsYmFja19tZXRob2RzIiwiZmFsbGJhY2tNZXRob2RzIiwibm90aWZ5X2N1c3RvbWVyIiwibm90aWZ5Q3VzdG9tZXIiLCJnZXRQYXltZW50UmV0cnlTdHJhdGVneSIsInByb2Nlc3NGYWlsZWRQYXltZW50UmV0cnkiLCJpbnZvaWNlSWQiLCJhdHRlbXB0TnVtYmVyIiwiYWN0aXZlTWV0aG9kcyIsImZpbHRlciIsInBtIiwiaXNBY3RpdmUiLCJmYWlsdXJlQ291bnQiLCJtZXRob2RzVG9UcnkiLCJpc0RlZmF1bHQiLCJtZXRob2QiLCJyZXN1bHQiLCJhdHRlbXB0SW52b2ljZVBheW1lbnQiLCJzdHJpcGVQYXltZW50TWV0aG9kSWQiLCJlcnJvciIsImNvbnNvbGUiLCJ2YWxpZGF0ZVBheW1lbnRNZXRob2QiLCJyZXRyaWV2ZSIsImlzc3VlcyIsIm5vdyIsImN1cnJlbnRZZWFyIiwiZ2V0RnVsbFllYXIiLCJjdXJyZW50TW9udGgiLCJnZXRNb250aCIsInB1c2giLCJleHBpcnlEYXRlIiwidHdvTW9udGhzRnJvbU5vdyIsInNldE1vbnRoIiwidmFsaWQiLCJnZXRQYXltZW50TWV0aG9kQW5hbHl0aWNzIiwibWV0aG9kcyIsInRvdGFsTWV0aG9kcyIsImRlZmF1bHRNZXRob2QiLCJmYWlsdXJlUmF0ZSIsIm1ldGhvZFR5cGVzIiwicmVjZW50RmFpbHVyZXMiLCJtIiwiZmluZCIsInRvdGFsRmFpbHVyZXMiLCJyZWR1Y2UiLCJzdW0iLCJhY2MiLCJ0eXBlIiwidGhpcnR5RGF5c0FnbyIsInNldERhdGUiLCJnZXREYXRlIiwic3RyaXBlUGF5bWVudE1ldGhvZCIsImJhc2VEYXRhIiwiY3VzdG9tZXJfaWQiLCJjcmVhdGVkX2F0IiwiY3JlYXRlZCIsImJyYW5kIiwibGFzdDQiLCJjb3VudHJ5IiwidXNfYmFua19hY2NvdW50IiwiYmFua19uYW1lIiwiY3VzdG9tZXJJZCIsImludm9pY2UiLCJpbnZvaWNlcyIsInBheSIsInN0YXR1cyIsIl9zZXJ2ZXIiLCJjcmVhdGVDbGllbnQiXSwic291cmNlcyI6WyJDOlxcQWkgUHJvamVjdGVuXFxBRFNhcHBcXHNyY1xcbGliXFxiaWxsaW5nXFxwYXltZW50LW1ldGhvZHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFN0cmlwZSBmcm9tICdzdHJpcGUnXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9zZXJ2ZXInXG5pbXBvcnQgeyBzdHJpcGUgfSBmcm9tICdAL2xpYi9zdHJpcGUvc2VydmVyJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFBheW1lbnRNZXRob2REYXRhIHtcbiAgaWQ6IHN0cmluZ1xuICBvcmdhbml6YXRpb25JZDogc3RyaW5nXG4gIHN0cmlwZVBheW1lbnRNZXRob2RJZDogc3RyaW5nXG4gIGN1c3RvbWVySWQ6IHN0cmluZ1xuICB0eXBlOiAnY2FyZCcgfCAnYmFua19hY2NvdW50JyB8ICdzZXBhX2RlYml0JyB8ICd1c19iYW5rX2FjY291bnQnXG4gIGJyYW5kPzogc3RyaW5nXG4gIGxhc3Q0OiBzdHJpbmdcbiAgZXhwaXJ5TW9udGg/OiBudW1iZXJcbiAgZXhwaXJ5WWVhcj86IG51bWJlclxuICBjb3VudHJ5Pzogc3RyaW5nXG4gIGlzRGVmYXVsdDogYm9vbGVhblxuICBpc0FjdGl2ZTogYm9vbGVhblxuICBmYWlsdXJlQ291bnQ6IG51bWJlclxuICBsYXN0RmFpbHVyZT86IHtcbiAgICBjb2RlOiBzdHJpbmdcbiAgICBtZXNzYWdlOiBzdHJpbmdcbiAgICB0aW1lc3RhbXA6IHN0cmluZ1xuICB9XG4gIGNyZWF0ZWRBdDogc3RyaW5nXG4gIHVwZGF0ZWRBdDogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudE1ldGhvZFNldHVwT3B0aW9ucyB7XG4gIHNldEFzRGVmYXVsdD86IGJvb2xlYW5cbiAgY29uZmlybWF0aW9uTWV0aG9kPzogJ2F1dG9tYXRpYycgfCAnbWFudWFsJ1xuICB1c2FnZT86ICdvZmZfc2Vzc2lvbicgfCAnb25fc2Vzc2lvbidcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudFJldHJ5U3RyYXRlZ3kge1xuICBlbmFibGVkOiBib29sZWFuXG4gIG1heFJldHJpZXM6IG51bWJlclxuICByZXRyeUludGVydmFsczogbnVtYmVyW10gLy8gaW4gaG91cnNcbiAgZmFsbGJhY2tNZXRob2RzOiBzdHJpbmdbXSAvLyBwYXltZW50IG1ldGhvZCBJRHMgdG8gdHJ5XG4gIG5vdGlmeUN1c3RvbWVyOiBib29sZWFuXG59XG5cbmV4cG9ydCBjbGFzcyBQYXltZW50TWV0aG9kTWFuYWdlciB7XG4gIHByaXZhdGUgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKVxuXG4gIGFzeW5jIGF0dGFjaFBheW1lbnRNZXRob2QoXG4gICAgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyxcbiAgICBwYXltZW50TWV0aG9kSWQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiBQYXltZW50TWV0aG9kU2V0dXBPcHRpb25zID0ge31cbiAgKTogUHJvbWlzZTxQYXltZW50TWV0aG9kRGF0YT4ge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuXG4gICAgLy8gR2V0IG9yZ2FuaXphdGlvbidzIGN1c3RvbWVyIElEXG4gICAgY29uc3QgeyBkYXRhOiBvcmcgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnb3JnYW5pemF0aW9ucycpXG4gICAgICAuc2VsZWN0KCdzdHJpcGVfY3VzdG9tZXJfaWQnKVxuICAgICAgLmVxKCdpZCcsIG9yZ2FuaXphdGlvbklkKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAoIW9yZz8uc3RyaXBlX2N1c3RvbWVyX2lkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ09yZ2FuaXphdGlvbiBkb2VzIG5vdCBoYXZlIGEgU3RyaXBlIGN1c3RvbWVyJylcbiAgICB9XG5cbiAgICAvLyBBdHRhY2ggcGF5bWVudCBtZXRob2QgdG8gY3VzdG9tZXJcbiAgICBjb25zdCBwYXltZW50TWV0aG9kID0gYXdhaXQgc3RyaXBlLnBheW1lbnRNZXRob2RzLmF0dGFjaChwYXltZW50TWV0aG9kSWQsIHtcbiAgICAgIGN1c3RvbWVyOiBvcmcuc3RyaXBlX2N1c3RvbWVyX2lkLFxuICAgIH0pXG5cbiAgICAvLyBTZXQgYXMgZGVmYXVsdCBpZiByZXF1ZXN0ZWRcbiAgICBpZiAob3B0aW9ucy5zZXRBc0RlZmF1bHQpIHtcbiAgICAgIGF3YWl0IHN0cmlwZS5jdXN0b21lcnMudXBkYXRlKG9yZy5zdHJpcGVfY3VzdG9tZXJfaWQsIHtcbiAgICAgICAgaW52b2ljZV9zZXR0aW5nczoge1xuICAgICAgICAgIGRlZmF1bHRfcGF5bWVudF9tZXRob2Q6IHBheW1lbnRNZXRob2RJZCxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBkZWZhdWx0IHBheW1lbnQgbWV0aG9kc1xuICAgICAgYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3BheW1lbnRfbWV0aG9kcycpXG4gICAgICAgIC51cGRhdGUoeyBpc19kZWZhdWx0OiBmYWxzZSB9KVxuICAgICAgICAuZXEoJ29yZ2FuaXphdGlvbl9pZCcsIG9yZ2FuaXphdGlvbklkKVxuICAgICAgICAuZXEoJ2lzX2RlZmF1bHQnLCB0cnVlKVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBsb2NhbCByZWNvcmRcbiAgICBjb25zdCBwYXltZW50TWV0aG9kRGF0YSA9IHRoaXMuZm9ybWF0UGF5bWVudE1ldGhvZERhdGEoXG4gICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgb3JnYW5pemF0aW9uSWQsXG4gICAgICBvcHRpb25zLnNldEFzRGVmYXVsdCB8fCBmYWxzZVxuICAgIClcblxuICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncGF5bWVudF9tZXRob2RzJylcbiAgICAgIC51cHNlcnQocGF5bWVudE1ldGhvZERhdGEpXG5cbiAgICByZXR1cm4gcGF5bWVudE1ldGhvZERhdGFcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVNldHVwSW50ZW50KFxuICAgIG9yZ2FuaXphdGlvbklkOiBzdHJpbmcsXG4gICAgb3B0aW9uczogUGF5bWVudE1ldGhvZFNldHVwT3B0aW9ucyA9IHt9XG4gICk6IFByb21pc2U8eyBjbGllbnRTZWNyZXQ6IHN0cmluZzsgc2V0dXBJbnRlbnRJZDogc3RyaW5nIH0+IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcblxuICAgIC8vIEdldCBvcmdhbml6YXRpb24ncyBjdXN0b21lciBJRFxuICAgIGNvbnN0IHsgZGF0YTogb3JnIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ29yZ2FuaXphdGlvbnMnKVxuICAgICAgLnNlbGVjdCgnc3RyaXBlX2N1c3RvbWVyX2lkJylcbiAgICAgIC5lcSgnaWQnLCBvcmdhbml6YXRpb25JZClcbiAgICAgIC5zaW5nbGUoKVxuXG4gICAgaWYgKCFvcmc/LnN0cmlwZV9jdXN0b21lcl9pZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdPcmdhbml6YXRpb24gZG9lcyBub3QgaGF2ZSBhIFN0cmlwZSBjdXN0b21lcicpXG4gICAgfVxuXG4gICAgY29uc3Qgc2V0dXBJbnRlbnQgPSBhd2FpdCBzdHJpcGUuc2V0dXBJbnRlbnRzLmNyZWF0ZSh7XG4gICAgICBjdXN0b21lcjogb3JnLnN0cmlwZV9jdXN0b21lcl9pZCxcbiAgICAgIHVzYWdlOiBvcHRpb25zLnVzYWdlIHx8ICdvZmZfc2Vzc2lvbicsXG4gICAgICBjb25maXJtOiBvcHRpb25zLmNvbmZpcm1hdGlvbk1ldGhvZCA9PT0gJ2F1dG9tYXRpYycsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBvcmdhbml6YXRpb25JZCxcbiAgICAgICAgc2V0QXNEZWZhdWx0OiBvcHRpb25zLnNldEFzRGVmYXVsdD8udG9TdHJpbmcoKSB8fCAnZmFsc2UnLFxuICAgICAgICAuLi5vcHRpb25zLm1ldGFkYXRhLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNsaWVudFNlY3JldDogc2V0dXBJbnRlbnQuY2xpZW50X3NlY3JldCEsXG4gICAgICBzZXR1cEludGVudElkOiBzZXR1cEludGVudC5pZCxcbiAgICB9XG4gIH1cblxuICBhc3luYyBoYW5kbGVTZXR1cEludGVudFN1Y2NlZWRlZChzZXR1cEludGVudDogU3RyaXBlLlNldHVwSW50ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgb3JnYW5pemF0aW9uSWQgPSBzZXR1cEludGVudC5tZXRhZGF0YS5vcmdhbml6YXRpb25JZFxuICAgIGNvbnN0IHNldEFzRGVmYXVsdCA9IHNldHVwSW50ZW50Lm1ldGFkYXRhLnNldEFzRGVmYXVsdCA9PT0gJ3RydWUnXG5cbiAgICBpZiAoIW9yZ2FuaXphdGlvbklkIHx8ICFzZXR1cEludGVudC5wYXltZW50X21ldGhvZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5hdHRhY2hQYXltZW50TWV0aG9kKFxuICAgICAgb3JnYW5pemF0aW9uSWQsXG4gICAgICBzZXR1cEludGVudC5wYXltZW50X21ldGhvZCBhcyBzdHJpbmcsXG4gICAgICB7IHNldEFzRGVmYXVsdCB9XG4gICAgKVxuICB9XG5cbiAgYXN5bmMgaGFuZGxlUGF5bWVudE1ldGhvZEF0dGFjaGVkKHBheW1lbnRNZXRob2Q6IFN0cmlwZS5QYXltZW50TWV0aG9kKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCB0aGlzLnN1cGFiYXNlXG5cbiAgICAvLyBHZXQgb3JnYW5pemF0aW9uIGZyb20gY3VzdG9tZXJcbiAgICBjb25zdCBvcmdhbml6YXRpb25JZCA9IGF3YWl0IHRoaXMuZ2V0T3JnYW5pemF0aW9uRnJvbUN1c3RvbWVyKHBheW1lbnRNZXRob2QuY3VzdG9tZXIgYXMgc3RyaW5nKVxuICAgIGlmICghb3JnYW5pemF0aW9uSWQpIHJldHVyblxuXG4gICAgY29uc3QgcGF5bWVudE1ldGhvZERhdGEgPSB0aGlzLmZvcm1hdFBheW1lbnRNZXRob2REYXRhKHBheW1lbnRNZXRob2QsIG9yZ2FuaXphdGlvbklkLCBmYWxzZSlcblxuICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncGF5bWVudF9tZXRob2RzJylcbiAgICAgIC51cHNlcnQocGF5bWVudE1ldGhvZERhdGEpXG4gIH1cblxuICBhc3luYyBoYW5kbGVQYXltZW50TWV0aG9kRGV0YWNoZWQocGF5bWVudE1ldGhvZDogU3RyaXBlLlBheW1lbnRNZXRob2QpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcblxuICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncGF5bWVudF9tZXRob2RzJylcbiAgICAgIC51cGRhdGUoe1xuICAgICAgICBpc19hY3RpdmU6IGZhbHNlLFxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9KVxuICAgICAgLmVxKCdzdHJpcGVfcGF5bWVudF9tZXRob2RfaWQnLCBwYXltZW50TWV0aG9kLmlkKVxuICB9XG5cbiAgYXN5bmMgZGV0YWNoUGF5bWVudE1ldGhvZChvcmdhbml6YXRpb25JZDogc3RyaW5nLCBwYXltZW50TWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuXG4gICAgLy8gR2V0IHBheW1lbnQgbWV0aG9kXG4gICAgY29uc3QgeyBkYXRhOiBwYXltZW50TWV0aG9kUmVjb3JkIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3BheW1lbnRfbWV0aG9kcycpXG4gICAgICAuc2VsZWN0KCdzdHJpcGVfcGF5bWVudF9tZXRob2RfaWQsIGlzX2RlZmF1bHQnKVxuICAgICAgLmVxKCdpZCcsIHBheW1lbnRNZXRob2RJZClcbiAgICAgIC5lcSgnb3JnYW5pemF0aW9uX2lkJywgb3JnYW5pemF0aW9uSWQpXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmICghcGF5bWVudE1ldGhvZFJlY29yZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXltZW50IG1ldGhvZCBub3QgZm91bmQnKVxuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgdGhlIGRlZmF1bHQgbWV0aG9kXG4gICAgaWYgKHBheW1lbnRNZXRob2RSZWNvcmQuaXNfZGVmYXVsdCkge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIG90aGVyIHBheW1lbnQgbWV0aG9kcyB0byBzZXQgYXMgZGVmYXVsdFxuICAgICAgY29uc3QgeyBkYXRhOiBvdGhlck1ldGhvZHMgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdwYXltZW50X21ldGhvZHMnKVxuICAgICAgICAuc2VsZWN0KCdzdHJpcGVfcGF5bWVudF9tZXRob2RfaWQnKVxuICAgICAgICAuZXEoJ29yZ2FuaXphdGlvbl9pZCcsIG9yZ2FuaXphdGlvbklkKVxuICAgICAgICAuZXEoJ2lzX2FjdGl2ZScsIHRydWUpXG4gICAgICAgIC5uZXEoJ2lkJywgcGF5bWVudE1ldGhvZElkKVxuICAgICAgICAubGltaXQoMSlcblxuICAgICAgaWYgKG90aGVyTWV0aG9kcz8ubGVuZ3RoKSB7XG4gICAgICAgIC8vIFNldCBhbm90aGVyIG1ldGhvZCBhcyBkZWZhdWx0XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0RGVmYXVsdFBheW1lbnRNZXRob2Qob3JnYW5pemF0aW9uSWQsIG90aGVyTWV0aG9kc1swXS5zdHJpcGVfcGF5bWVudF9tZXRob2RfaWQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGV0YWNoIGZyb20gU3RyaXBlXG4gICAgYXdhaXQgc3RyaXBlLnBheW1lbnRNZXRob2RzLmRldGFjaChwYXltZW50TWV0aG9kUmVjb3JkLnN0cmlwZV9wYXltZW50X21ldGhvZF9pZClcblxuICAgIC8vIFVwZGF0ZSBsb2NhbCByZWNvcmRcbiAgICBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3BheW1lbnRfbWV0aG9kcycpXG4gICAgICAudXBkYXRlKHtcbiAgICAgICAgaXNfYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfSlcbiAgICAgIC5lcSgnaWQnLCBwYXltZW50TWV0aG9kSWQpXG4gIH1cblxuICBhc3luYyBzZXREZWZhdWx0UGF5bWVudE1ldGhvZChvcmdhbml6YXRpb25JZDogc3RyaW5nLCBwYXltZW50TWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuXG4gICAgLy8gR2V0IG9yZ2FuaXphdGlvbiBhbmQgcGF5bWVudCBtZXRob2RcbiAgICBjb25zdCB7IGRhdGE6IG9yZyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdvcmdhbml6YXRpb25zJylcbiAgICAgIC5zZWxlY3QoJ3N0cmlwZV9jdXN0b21lcl9pZCcpXG4gICAgICAuZXEoJ2lkJywgb3JnYW5pemF0aW9uSWQpXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmICghb3JnPy5zdHJpcGVfY3VzdG9tZXJfaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignT3JnYW5pemF0aW9uIGRvZXMgbm90IGhhdmUgYSBTdHJpcGUgY3VzdG9tZXInKVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBTdHJpcGUgY3VzdG9tZXIgZGVmYXVsdCBwYXltZW50IG1ldGhvZFxuICAgIGF3YWl0IHN0cmlwZS5jdXN0b21lcnMudXBkYXRlKG9yZy5zdHJpcGVfY3VzdG9tZXJfaWQsIHtcbiAgICAgIGludm9pY2Vfc2V0dGluZ3M6IHtcbiAgICAgICAgZGVmYXVsdF9wYXltZW50X21ldGhvZDogcGF5bWVudE1ldGhvZElkLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgLy8gVXBkYXRlIGxvY2FsIHJlY29yZHNcbiAgICBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3BheW1lbnRfbWV0aG9kcycpXG4gICAgICAudXBkYXRlKHsgaXNfZGVmYXVsdDogZmFsc2UgfSlcbiAgICAgIC5lcSgnb3JnYW5pemF0aW9uX2lkJywgb3JnYW5pemF0aW9uSWQpXG5cbiAgICBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3BheW1lbnRfbWV0aG9kcycpXG4gICAgICAudXBkYXRlKHsgaXNfZGVmYXVsdDogdHJ1ZSB9KVxuICAgICAgLmVxKCdvcmdhbml6YXRpb25faWQnLCBvcmdhbml6YXRpb25JZClcbiAgICAgIC5lcSgnc3RyaXBlX3BheW1lbnRfbWV0aG9kX2lkJywgcGF5bWVudE1ldGhvZElkKVxuICB9XG5cbiAgYXN5bmMgZ2V0UGF5bWVudE1ldGhvZHMob3JnYW5pemF0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8UGF5bWVudE1ldGhvZERhdGFbXT4ge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuXG4gICAgY29uc3QgeyBkYXRhOiBwYXltZW50TWV0aG9kcyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwYXltZW50X21ldGhvZHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ29yZ2FuaXphdGlvbl9pZCcsIG9yZ2FuaXphdGlvbklkKVxuICAgICAgLmVxKCdpc19hY3RpdmUnLCB0cnVlKVxuICAgICAgLm9yZGVyKCdpc19kZWZhdWx0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcblxuICAgIHJldHVybiBwYXltZW50TWV0aG9kcyB8fCBbXVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlUGF5bWVudE1ldGhvZChcbiAgICBvcmdhbml6YXRpb25JZDogc3RyaW5nLFxuICAgIHBheW1lbnRNZXRob2RJZDogc3RyaW5nLFxuICAgIHVwZGF0ZXM6IHtcbiAgICAgIGV4cGlyeU1vbnRoPzogbnVtYmVyXG4gICAgICBleHBpcnlZZWFyPzogbnVtYmVyXG4gICAgICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cbiAgICB9XG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuXG4gICAgLy8gR2V0IHBheW1lbnQgbWV0aG9kXG4gICAgY29uc3QgeyBkYXRhOiBwYXltZW50TWV0aG9kUmVjb3JkIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3BheW1lbnRfbWV0aG9kcycpXG4gICAgICAuc2VsZWN0KCdzdHJpcGVfcGF5bWVudF9tZXRob2RfaWQnKVxuICAgICAgLmVxKCdpZCcsIHBheW1lbnRNZXRob2RJZClcbiAgICAgIC5lcSgnb3JnYW5pemF0aW9uX2lkJywgb3JnYW5pemF0aW9uSWQpXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmICghcGF5bWVudE1ldGhvZFJlY29yZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXltZW50IG1ldGhvZCBub3QgZm91bmQnKVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBpbiBTdHJpcGVcbiAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7fVxuICAgIGlmICh1cGRhdGVzLmV4cGlyeU1vbnRoIHx8IHVwZGF0ZXMuZXhwaXJ5WWVhcikge1xuICAgICAgdXBkYXRlRGF0YS5jYXJkID0ge1xuICAgICAgICBleHBfbW9udGg6IHVwZGF0ZXMuZXhwaXJ5TW9udGgsXG4gICAgICAgIGV4cF95ZWFyOiB1cGRhdGVzLmV4cGlyeVllYXIsXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh1cGRhdGVzLm1ldGFkYXRhKSB7XG4gICAgICB1cGRhdGVEYXRhLm1ldGFkYXRhID0gdXBkYXRlcy5tZXRhZGF0YVxuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVEYXRhKS5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCBzdHJpcGUucGF5bWVudE1ldGhvZHMudXBkYXRlKHBheW1lbnRNZXRob2RSZWNvcmQuc3RyaXBlX3BheW1lbnRfbWV0aG9kX2lkLCB1cGRhdGVEYXRhKVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBsb2NhbCByZWNvcmRcbiAgICBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3BheW1lbnRfbWV0aG9kcycpXG4gICAgICAudXBkYXRlKHtcbiAgICAgICAgZXhwaXJ5X21vbnRoOiB1cGRhdGVzLmV4cGlyeU1vbnRoLFxuICAgICAgICBleHBpcnlfeWVhcjogdXBkYXRlcy5leHBpcnlZZWFyLFxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9KVxuICAgICAgLmVxKCdpZCcsIHBheW1lbnRNZXRob2RJZClcbiAgfVxuXG4gIGFzeW5jIHJlY29yZFBheW1lbnRGYWlsdXJlKFxuICAgIHBheW1lbnRNZXRob2RJZDogc3RyaW5nLFxuICAgIGZhaWx1cmU6IHsgY29kZTogc3RyaW5nOyBtZXNzYWdlOiBzdHJpbmcgfVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcblxuICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncGF5bWVudF9tZXRob2RzJylcbiAgICAgIC51cGRhdGUoe1xuICAgICAgICBmYWlsdXJlX2NvdW50OiBzdXBhYmFzZS5mcm9tKCdwYXltZW50X21ldGhvZHMnKS5zZWxlY3QoJ2ZhaWx1cmVfY291bnQnKS50aGVuKGRhdGEgPT4gKGRhdGEgfHwgMCkgKyAxKSxcbiAgICAgICAgbGFzdF9mYWlsdXJlOiB7XG4gICAgICAgICAgY29kZTogZmFpbHVyZS5jb2RlLFxuICAgICAgICAgIG1lc3NhZ2U6IGZhaWx1cmUubWVzc2FnZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfSlcbiAgICAgIC5lcSgnc3RyaXBlX3BheW1lbnRfbWV0aG9kX2lkJywgcGF5bWVudE1ldGhvZElkKVxuICB9XG5cbiAgYXN5bmMgc2V0dXBQYXltZW50UmV0cnlTdHJhdGVneShcbiAgICBvcmdhbml6YXRpb25JZDogc3RyaW5nLFxuICAgIHN0cmF0ZWd5OiBQYXltZW50UmV0cnlTdHJhdGVneVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcblxuICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncGF5bWVudF9yZXRyeV9zdHJhdGVnaWVzJylcbiAgICAgIC51cHNlcnQoe1xuICAgICAgICBvcmdhbml6YXRpb25faWQ6IG9yZ2FuaXphdGlvbklkLFxuICAgICAgICBlbmFibGVkOiBzdHJhdGVneS5lbmFibGVkLFxuICAgICAgICBtYXhfcmV0cmllczogc3RyYXRlZ3kubWF4UmV0cmllcyxcbiAgICAgICAgcmV0cnlfaW50ZXJ2YWxzOiBzdHJhdGVneS5yZXRyeUludGVydmFscyxcbiAgICAgICAgZmFsbGJhY2tfbWV0aG9kczogc3RyYXRlZ3kuZmFsbGJhY2tNZXRob2RzLFxuICAgICAgICBub3RpZnlfY3VzdG9tZXI6IHN0cmF0ZWd5Lm5vdGlmeUN1c3RvbWVyLFxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9KVxuICB9XG5cbiAgYXN5bmMgZ2V0UGF5bWVudFJldHJ5U3RyYXRlZ3kob3JnYW5pemF0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8UGF5bWVudFJldHJ5U3RyYXRlZ3kgfCBudWxsPiB7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCB0aGlzLnN1cGFiYXNlXG5cbiAgICBjb25zdCB7IGRhdGE6IHN0cmF0ZWd5IH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3BheW1lbnRfcmV0cnlfc3RyYXRlZ2llcycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnb3JnYW5pemF0aW9uX2lkJywgb3JnYW5pemF0aW9uSWQpXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmICghc3RyYXRlZ3kpIHJldHVybiBudWxsXG5cbiAgICByZXR1cm4ge1xuICAgICAgZW5hYmxlZDogc3RyYXRlZ3kuZW5hYmxlZCxcbiAgICAgIG1heFJldHJpZXM6IHN0cmF0ZWd5Lm1heF9yZXRyaWVzLFxuICAgICAgcmV0cnlJbnRlcnZhbHM6IHN0cmF0ZWd5LnJldHJ5X2ludGVydmFscyxcbiAgICAgIGZhbGxiYWNrTWV0aG9kczogc3RyYXRlZ3kuZmFsbGJhY2tfbWV0aG9kcyxcbiAgICAgIG5vdGlmeUN1c3RvbWVyOiBzdHJhdGVneS5ub3RpZnlfY3VzdG9tZXIsXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcHJvY2Vzc0ZhaWxlZFBheW1lbnRSZXRyeShcbiAgICBvcmdhbml6YXRpb25JZDogc3RyaW5nLFxuICAgIGludm9pY2VJZDogc3RyaW5nLFxuICAgIGF0dGVtcHROdW1iZXI6IG51bWJlclxuICApOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBzdHJhdGVneSA9IGF3YWl0IHRoaXMuZ2V0UGF5bWVudFJldHJ5U3RyYXRlZ3kob3JnYW5pemF0aW9uSWQpXG5cbiAgICBpZiAoIXN0cmF0ZWd5Py5lbmFibGVkIHx8IGF0dGVtcHROdW1iZXIgPiBzdHJhdGVneS5tYXhSZXRyaWVzKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBwYXltZW50TWV0aG9kcyA9IGF3YWl0IHRoaXMuZ2V0UGF5bWVudE1ldGhvZHMob3JnYW5pemF0aW9uSWQpXG4gICAgY29uc3QgYWN0aXZlTWV0aG9kcyA9IHBheW1lbnRNZXRob2RzLmZpbHRlcihwbSA9PiBwbS5pc0FjdGl2ZSAmJiBwbS5mYWlsdXJlQ291bnQgPCAzKVxuXG4gICAgaWYgKGFjdGl2ZU1ldGhvZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICAvLyBUcnkgcHJpbWFyeSBtZXRob2QgZmlyc3QsIHRoZW4gZmFsbGJhY2sgbWV0aG9kc1xuICAgIGNvbnN0IG1ldGhvZHNUb1RyeSA9IFtcbiAgICAgIC4uLmFjdGl2ZU1ldGhvZHMuZmlsdGVyKHBtID0+IHBtLmlzRGVmYXVsdCksXG4gICAgICAuLi5hY3RpdmVNZXRob2RzLmZpbHRlcihwbSA9PiAhcG0uaXNEZWZhdWx0KSxcbiAgICBdXG5cbiAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzVG9UcnkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEF0dGVtcHQgcGF5bWVudCB3aXRoIHRoaXMgbWV0aG9kXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuYXR0ZW1wdEludm9pY2VQYXltZW50KGludm9pY2VJZCwgbWV0aG9kLnN0cmlwZVBheW1lbnRNZXRob2RJZClcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFBheW1lbnQgYXR0ZW1wdCBmYWlsZWQgd2l0aCBtZXRob2QgJHttZXRob2QuaWR9OmAsIGVycm9yKVxuICAgICAgICBhd2FpdCB0aGlzLnJlY29yZFBheW1lbnRGYWlsdXJlKG1ldGhvZC5zdHJpcGVQYXltZW50TWV0aG9kSWQsIHtcbiAgICAgICAgICBjb2RlOiAncGF5bWVudF9mYWlsZWQnLFxuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgdmFsaWRhdGVQYXltZW50TWV0aG9kKHBheW1lbnRNZXRob2RJZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgdmFsaWQ6IGJvb2xlYW5cbiAgICBpc3N1ZXM6IHN0cmluZ1tdXG4gIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IGF3YWl0IHN0cmlwZS5wYXltZW50TWV0aG9kcy5yZXRyaWV2ZShwYXltZW50TWV0aG9kSWQpXG4gICAgICBjb25zdCBpc3N1ZXM6IHN0cmluZ1tdID0gW11cblxuICAgICAgaWYgKHBheW1lbnRNZXRob2QuY2FyZCkge1xuICAgICAgICAvLyBDaGVjayBleHBpcnlcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgICAgICBjb25zdCBjdXJyZW50WWVhciA9IG5vdy5nZXRGdWxsWWVhcigpXG4gICAgICAgIGNvbnN0IGN1cnJlbnRNb250aCA9IG5vdy5nZXRNb250aCgpICsgMVxuXG4gICAgICAgIGlmIChwYXltZW50TWV0aG9kLmNhcmQuZXhwX3llYXIgPCBjdXJyZW50WWVhciB8fFxuICAgICAgICAgICAgKHBheW1lbnRNZXRob2QuY2FyZC5leHBfeWVhciA9PT0gY3VycmVudFllYXIgJiYgcGF5bWVudE1ldGhvZC5jYXJkLmV4cF9tb250aCA8IGN1cnJlbnRNb250aCkpIHtcbiAgICAgICAgICBpc3N1ZXMucHVzaCgnQ2FyZCBoYXMgZXhwaXJlZCcpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBmb3IgdXBjb21pbmcgZXhwaXJ5IChuZXh0IDIgbW9udGhzKVxuICAgICAgICBjb25zdCBleHBpcnlEYXRlID0gbmV3IERhdGUocGF5bWVudE1ldGhvZC5jYXJkLmV4cF95ZWFyLCBwYXltZW50TWV0aG9kLmNhcmQuZXhwX21vbnRoIC0gMSlcbiAgICAgICAgY29uc3QgdHdvTW9udGhzRnJvbU5vdyA9IG5ldyBEYXRlKClcbiAgICAgICAgdHdvTW9udGhzRnJvbU5vdy5zZXRNb250aCh0d29Nb250aHNGcm9tTm93LmdldE1vbnRoKCkgKyAyKVxuXG4gICAgICAgIGlmIChleHBpcnlEYXRlIDw9IHR3b01vbnRoc0Zyb21Ob3cpIHtcbiAgICAgICAgICBpc3N1ZXMucHVzaCgnQ2FyZCBleHBpcmVzIHNvb24nKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBpc3N1ZXMubGVuZ3RoID09PSAwLFxuICAgICAgICBpc3N1ZXMsXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgaXNzdWVzOiBbJ1BheW1lbnQgbWV0aG9kIG5vdCBmb3VuZCBvciBpbnZhbGlkJ10sXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0UGF5bWVudE1ldGhvZEFuYWx5dGljcyhvcmdhbml6YXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgdG90YWxNZXRob2RzOiBudW1iZXJcbiAgICBhY3RpdmVNZXRob2RzOiBudW1iZXJcbiAgICBkZWZhdWx0TWV0aG9kOiBQYXltZW50TWV0aG9kRGF0YSB8IG51bGxcbiAgICBmYWlsdXJlUmF0ZTogbnVtYmVyXG4gICAgbWV0aG9kVHlwZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj5cbiAgICByZWNlbnRGYWlsdXJlczogbnVtYmVyXG4gIH0+IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcblxuICAgIGNvbnN0IHsgZGF0YTogbWV0aG9kcyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwYXltZW50X21ldGhvZHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ29yZ2FuaXphdGlvbl9pZCcsIG9yZ2FuaXphdGlvbklkKVxuXG4gICAgaWYgKCFtZXRob2RzPy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsTWV0aG9kczogMCxcbiAgICAgICAgYWN0aXZlTWV0aG9kczogMCxcbiAgICAgICAgZGVmYXVsdE1ldGhvZDogbnVsbCxcbiAgICAgICAgZmFpbHVyZVJhdGU6IDAsXG4gICAgICAgIG1ldGhvZFR5cGVzOiB7fSxcbiAgICAgICAgcmVjZW50RmFpbHVyZXM6IDAsXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aXZlTWV0aG9kcyA9IG1ldGhvZHMuZmlsdGVyKG0gPT4gbS5pc19hY3RpdmUpXG4gICAgY29uc3QgZGVmYXVsdE1ldGhvZCA9IG1ldGhvZHMuZmluZChtID0+IG0uaXNfZGVmYXVsdCkgfHwgbnVsbFxuICAgIGNvbnN0IHRvdGFsRmFpbHVyZXMgPSBtZXRob2RzLnJlZHVjZSgoc3VtLCBtKSA9PiBzdW0gKyBtLmZhaWx1cmVfY291bnQsIDApXG4gICAgY29uc3QgZmFpbHVyZVJhdGUgPSB0b3RhbEZhaWx1cmVzIC8gbWV0aG9kcy5sZW5ndGhcblxuICAgIGNvbnN0IG1ldGhvZFR5cGVzID0gbWV0aG9kcy5yZWR1Y2UoKGFjYywgbWV0aG9kKSA9PiB7XG4gICAgICBhY2NbbWV0aG9kLnR5cGVdID0gKGFjY1ttZXRob2QudHlwZV0gfHwgMCkgKyAxXG4gICAgICByZXR1cm4gYWNjXG4gICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPilcblxuICAgIC8vIENvdW50IHJlY2VudCBmYWlsdXJlcyAobGFzdCAzMCBkYXlzKVxuICAgIGNvbnN0IHRoaXJ0eURheXNBZ28gPSBuZXcgRGF0ZSgpXG4gICAgdGhpcnR5RGF5c0Fnby5zZXREYXRlKHRoaXJ0eURheXNBZ28uZ2V0RGF0ZSgpIC0gMzApXG5cbiAgICBjb25zdCByZWNlbnRGYWlsdXJlcyA9IG1ldGhvZHMuZmlsdGVyKG0gPT5cbiAgICAgIG0ubGFzdF9mYWlsdXJlICYmIG5ldyBEYXRlKG0ubGFzdF9mYWlsdXJlLnRpbWVzdGFtcCkgPj0gdGhpcnR5RGF5c0Fnb1xuICAgICkubGVuZ3RoXG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxNZXRob2RzOiBtZXRob2RzLmxlbmd0aCxcbiAgICAgIGFjdGl2ZU1ldGhvZHM6IGFjdGl2ZU1ldGhvZHMubGVuZ3RoLFxuICAgICAgZGVmYXVsdE1ldGhvZCxcbiAgICAgIGZhaWx1cmVSYXRlLFxuICAgICAgbWV0aG9kVHlwZXMsXG4gICAgICByZWNlbnRGYWlsdXJlcyxcbiAgICB9XG4gIH1cblxuICAvLyBQcml2YXRlIGhlbHBlciBtZXRob2RzXG4gIHByaXZhdGUgZm9ybWF0UGF5bWVudE1ldGhvZERhdGEoXG4gICAgc3RyaXBlUGF5bWVudE1ldGhvZDogU3RyaXBlLlBheW1lbnRNZXRob2QsXG4gICAgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyxcbiAgICBpc0RlZmF1bHQ6IGJvb2xlYW5cbiAgKTogUGFydGlhbDxQYXltZW50TWV0aG9kRGF0YT4ge1xuICAgIGNvbnN0IGJhc2VEYXRhID0ge1xuICAgICAgb3JnYW5pemF0aW9uX2lkOiBvcmdhbml6YXRpb25JZCxcbiAgICAgIHN0cmlwZV9wYXltZW50X21ldGhvZF9pZDogc3RyaXBlUGF5bWVudE1ldGhvZC5pZCxcbiAgICAgIGN1c3RvbWVyX2lkOiBzdHJpcGVQYXltZW50TWV0aG9kLmN1c3RvbWVyIGFzIHN0cmluZyxcbiAgICAgIHR5cGU6IHN0cmlwZVBheW1lbnRNZXRob2QudHlwZSBhcyBQYXltZW50TWV0aG9kRGF0YVsndHlwZSddLFxuICAgICAgaXNfZGVmYXVsdDogaXNEZWZhdWx0LFxuICAgICAgaXNfYWN0aXZlOiB0cnVlLFxuICAgICAgZmFpbHVyZV9jb3VudDogMCxcbiAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKHN0cmlwZVBheW1lbnRNZXRob2QuY3JlYXRlZCAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfVxuXG4gICAgaWYgKHN0cmlwZVBheW1lbnRNZXRob2QuY2FyZCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uYmFzZURhdGEsXG4gICAgICAgIGJyYW5kOiBzdHJpcGVQYXltZW50TWV0aG9kLmNhcmQuYnJhbmQsXG4gICAgICAgIGxhc3Q0OiBzdHJpcGVQYXltZW50TWV0aG9kLmNhcmQubGFzdDQsXG4gICAgICAgIGV4cGlyeV9tb250aDogc3RyaXBlUGF5bWVudE1ldGhvZC5jYXJkLmV4cF9tb250aCxcbiAgICAgICAgZXhwaXJ5X3llYXI6IHN0cmlwZVBheW1lbnRNZXRob2QuY2FyZC5leHBfeWVhcixcbiAgICAgICAgY291bnRyeTogc3RyaXBlUGF5bWVudE1ldGhvZC5jYXJkLmNvdW50cnksXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN0cmlwZVBheW1lbnRNZXRob2QudXNfYmFua19hY2NvdW50KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5iYXNlRGF0YSxcbiAgICAgICAgbGFzdDQ6IHN0cmlwZVBheW1lbnRNZXRob2QudXNfYmFua19hY2NvdW50Lmxhc3Q0LFxuICAgICAgICBicmFuZDogc3RyaXBlUGF5bWVudE1ldGhvZC51c19iYW5rX2FjY291bnQuYmFua19uYW1lLFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBiYXNlRGF0YVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRPcmdhbml6YXRpb25Gcm9tQ3VzdG9tZXIoY3VzdG9tZXJJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCB0aGlzLnN1cGFiYXNlXG4gICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ29yZ2FuaXphdGlvbnMnKVxuICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgLmVxKCdzdHJpcGVfY3VzdG9tZXJfaWQnLCBjdXN0b21lcklkKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICByZXR1cm4gZGF0YT8uaWQgfHwgbnVsbFxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBhdHRlbXB0SW52b2ljZVBheW1lbnQoaW52b2ljZUlkOiBzdHJpbmcsIHBheW1lbnRNZXRob2RJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGludm9pY2UgPSBhd2FpdCBzdHJpcGUuaW52b2ljZXMucGF5KGludm9pY2VJZCwge1xuICAgICAgICBwYXltZW50X21ldGhvZDogcGF5bWVudE1ldGhvZElkLFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIGludm9pY2Uuc3RhdHVzID09PSAncGFpZCdcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignSW52b2ljZSBwYXltZW50IGF0dGVtcHQgZmFpbGVkOicsIGVycm9yKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFvREk7SUFBQUEsY0FBQSxZQUFBQSxDQUFBO01BQUEsT0FBQUMs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