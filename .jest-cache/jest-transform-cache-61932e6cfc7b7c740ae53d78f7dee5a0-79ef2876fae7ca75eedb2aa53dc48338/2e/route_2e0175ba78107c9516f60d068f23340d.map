{"version":3,"names":["DELETE","cov_1ldfx6ihdm","f","s","POST","request","params","middlewareResponse","_middleware","adminMiddleware","b","reason","json","id","_server","NextResponse","error","status","success","_superadmin","suspendOrganization","headers","get","undefined","console","reactivateOrganization"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\app\\api\\admin\\organizations\\[id]\\suspend\\route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { suspendOrganization, reactivateOrganization } from '@/lib/super-admin'\nimport { adminMiddleware } from '@/lib/middleware'\n\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  // Apply admin middleware (validates super admin access)\n  const middlewareResponse = await adminMiddleware(request);\n  if (middlewareResponse) return middlewareResponse;\n\n  try {\n    const { reason } = await request.json()\n    const { id } = await params;\n\n    if (!reason || typeof reason !== 'string') {\n      return NextResponse.json(\n        { error: 'Suspension reason is required' },\n        { status: 400 }\n      )\n    }\n\n    const success = await suspendOrganization(\n      id,\n      reason,\n      request.headers.get('x-forwarded-for') || request.headers.get('x-real-ip') || 'unknown',\n      request.headers.get('user-agent') || undefined\n    )\n\n    if (!success) {\n      return NextResponse.json(\n        { error: 'Failed to suspend organization' },\n        { status: 500 }\n      )\n    }\n\n    return NextResponse.json({ success: true })\n  } catch (error) {\n    console.error('Organization suspension API error:', error)\n    return NextResponse.json(\n      { error: 'Failed to suspend organization' },\n      { status: 500 }\n    )\n  }\n}\n\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  // Apply admin middleware (validates super admin access)\n  const middlewareResponse = await adminMiddleware(request);\n  if (middlewareResponse) return middlewareResponse;\n\n  try {\n    const { id } = await params;\n    const success = await reactivateOrganization(\n      id,\n      request.headers.get('x-forwarded-for') || request.headers.get('x-real-ip') || 'unknown',\n      request.headers.get('user-agent') || undefined\n    )\n\n    if (!success) {\n      return NextResponse.json(\n        { error: 'Failed to reactivate organization' },\n        { status: 500 }\n      )\n    }\n\n    return NextResponse.json({ success: true })\n  } catch (error) {\n    console.error('Organization reactivation API error:', error)\n    return NextResponse.json(\n      { error: 'Failed to reactivate organization' },\n      { status: 500 }\n    )\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MA+CsBA,OAAA;IAAA;IAAAC,cAAA,GAAAC,CAAA;IAAAD,cAAA,GAAAE,CAAA;WAAAH,MAAA;;MA3CAI,KAAA;IAAA;IAAAH,cAAA,GAAAC,CAAA;IAAAD,cAAA,GAAAE,CAAA;WAAAC,IAAA;;;;;kCAJoB;;;kCACkB;;;kCAC5B;AAEzB,eAAeA,KACpBC,OAAoB,EACpB;EAAEC;AAAM,CAAuC;EAAA;EAAAL,cAAA,GAAAC,CAAA;EAE/C;EACA,MAAMK,kBAAA;EAAA;EAAA,CAAAN,cAAA,GAAAE,CAAA,OAAqB,MAAM,IAAAK,WAAA,CAAAC,eAAe,EAACJ,OAAA;EAAA;EAAAJ,cAAA,GAAAE,CAAA;EACjD,IAAII,kBAAA,EAAoB;IAAA;IAAAN,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAE,CAAA;IAAA,OAAOI,kBAAA;EAAA;EAAA;EAAA;IAAAN,cAAA,GAAAS,CAAA;EAAA;EAAAT,cAAA,GAAAE,CAAA;EAE/B,IAAI;IACF,MAAM;MAAEQ;IAAM,CAAE;IAAA;IAAA,CAAAV,cAAA,GAAAE,CAAA,QAAG,MAAME,OAAA,CAAQO,IAAI;IACrC,MAAM;MAAEC;IAAE,CAAE;IAAA;IAAA,CAAAZ,cAAA,GAAAE,CAAA,QAAG,MAAMG,MAAA;IAAA;IAAAL,cAAA,GAAAE,CAAA;IAErB;IAAI;IAAA,CAAAF,cAAA,GAAAS,CAAA,WAACC,MAAA;IAAA;IAAA,CAAAV,cAAA,GAAAS,CAAA,UAAU,OAAOC,MAAA,KAAW,WAAU;MAAA;MAAAV,cAAA,GAAAS,CAAA;MAAAT,cAAA,GAAAE,CAAA;MACzC,OAAOW,OAAA,CAAAC,YAAY,CAACH,IAAI,CACtB;QAAEI,KAAA,EAAO;MAAgC,GACzC;QAAEC,MAAA,EAAQ;MAAI;IAElB;IAAA;IAAA;MAAAhB,cAAA,GAAAS,CAAA;IAAA;IAEA,MAAMQ,OAAA;IAAA;IAAA,CAAAjB,cAAA,GAAAE,CAAA,QAAU,MAAM,IAAAgB,WAAA,CAAAC,mBAAmB,EACvCP,EAAA,EACAF,MAAA;IACA;IAAA,CAAAV,cAAA,GAAAS,CAAA,UAAAL,OAAA,CAAQgB,OAAO,CAACC,GAAG,CAAC;IAAA;IAAA,CAAArB,cAAA,GAAAS,CAAA,UAAsBL,OAAA,CAAQgB,OAAO,CAACC,GAAG,CAAC;IAAA;IAAA,CAAArB,cAAA,GAAAS,CAAA,UAAgB;IAC9E;IAAA,CAAAT,cAAA,GAAAS,CAAA,UAAAL,OAAA,CAAQgB,OAAO,CAACC,GAAG,CAAC;IAAA;IAAA,CAAArB,cAAA,GAAAS,CAAA,UAAiBa,SAAA;IAAA;IAAAtB,cAAA,GAAAE,CAAA;IAGvC,IAAI,CAACe,OAAA,EAAS;MAAA;MAAAjB,cAAA,GAAAS,CAAA;MAAAT,cAAA,GAAAE,CAAA;MACZ,OAAOW,OAAA,CAAAC,YAAY,CAACH,IAAI,CACtB;QAAEI,KAAA,EAAO;MAAiC,GAC1C;QAAEC,MAAA,EAAQ;MAAI;IAElB;IAAA;IAAA;MAAAhB,cAAA,GAAAS,CAAA;IAAA;IAAAT,cAAA,GAAAE,CAAA;IAEA,OAAOW,OAAA,CAAAC,YAAY,CAACH,IAAI,CAAC;MAAEM,OAAA,EAAS;IAAK;EAC3C,EAAE,OAAOF,KAAA,EAAO;IAAA;IAAAf,cAAA,GAAAE,CAAA;IACdqB,OAAA,CAAQR,KAAK,CAAC,sCAAsCA,KAAA;IAAA;IAAAf,cAAA,GAAAE,CAAA;IACpD,OAAOW,OAAA,CAAAC,YAAY,CAACH,IAAI,CACtB;MAAEI,KAAA,EAAO;IAAiC,GAC1C;MAAEC,MAAA,EAAQ;IAAI;EAElB;AACF;AAEO,eAAejB,OACpBK,OAAoB,EACpB;EAAEC;AAAM,CAAuC;EAAA;EAAAL,cAAA,GAAAC,CAAA;EAE/C;EACA,MAAMK,kBAAA;EAAA;EAAA,CAAAN,cAAA,GAAAE,CAAA,QAAqB,MAAM,IAAAK,WAAA,CAAAC,eAAe,EAACJ,OAAA;EAAA;EAAAJ,cAAA,GAAAE,CAAA;EACjD,IAAII,kBAAA,EAAoB;IAAA;IAAAN,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAE,CAAA;IAAA,OAAOI,kBAAA;EAAA;EAAA;EAAA;IAAAN,cAAA,GAAAS,CAAA;EAAA;EAAAT,cAAA,GAAAE,CAAA;EAE/B,IAAI;IACF,MAAM;MAAEU;IAAE,CAAE;IAAA;IAAA,CAAAZ,cAAA,GAAAE,CAAA,QAAG,MAAMG,MAAA;IACrB,MAAMY,OAAA;IAAA;IAAA,CAAAjB,cAAA,GAAAE,CAAA,QAAU,MAAM,IAAAgB,WAAA,CAAAM,sBAAsB,EAC1CZ,EAAA;IACA;IAAA,CAAAZ,cAAA,GAAAS,CAAA,UAAAL,OAAA,CAAQgB,OAAO,CAACC,GAAG,CAAC;IAAA;IAAA,CAAArB,cAAA,GAAAS,CAAA,UAAsBL,OAAA,CAAQgB,OAAO,CAACC,GAAG,CAAC;IAAA;IAAA,CAAArB,cAAA,GAAAS,CAAA,UAAgB;IAC9E;IAAA,CAAAT,cAAA,GAAAS,CAAA,UAAAL,OAAA,CAAQgB,OAAO,CAACC,GAAG,CAAC;IAAA;IAAA,CAAArB,cAAA,GAAAS,CAAA,UAAiBa,SAAA;IAAA;IAAAtB,cAAA,GAAAE,CAAA;IAGvC,IAAI,CAACe,OAAA,EAAS;MAAA;MAAAjB,cAAA,GAAAS,CAAA;MAAAT,cAAA,GAAAE,CAAA;MACZ,OAAOW,OAAA,CAAAC,YAAY,CAACH,IAAI,CACtB;QAAEI,KAAA,EAAO;MAAoC,GAC7C;QAAEC,MAAA,EAAQ;MAAI;IAElB;IAAA;IAAA;MAAAhB,cAAA,GAAAS,CAAA;IAAA;IAAAT,cAAA,GAAAE,CAAA;IAEA,OAAOW,OAAA,CAAAC,YAAY,CAACH,IAAI,CAAC;MAAEM,OAAA,EAAS;IAAK;EAC3C,EAAE,OAAOF,KAAA,EAAO;IAAA;IAAAf,cAAA,GAAAE,CAAA;IACdqB,OAAA,CAAQR,KAAK,CAAC,wCAAwCA,KAAA;IAAA;IAAAf,cAAA,GAAAE,CAAA;IACtD,OAAOW,OAAA,CAAAC,YAAY,CAACH,IAAI,CACtB;MAAEI,KAAA,EAAO;IAAoC,GAC7C;MAAEC,MAAA,EAAQ;IAAI;EAElB;AACF","ignoreList":[]}