{"version":3,"names":["cov_1r2ei0aqos","actualCoverage","s","GET","_request","f","user","_apiutils","requireAuthenticatedUser","profile","getUserOrganization","id","supabase","_server","createClient","activeConversations","todayMessages","activeAgents","pendingConversations","unreadMessages","responseTimeData","Promise","all","getActiveConversations","organization_id","getTodayMessages","getActiveAgents","getPendingConversations","getUnreadMessages","getRecentResponseTimes","trends","calculateTrends","createSuccessResponse","timestamp","Date","toISOString","metrics","averageResponseTime","average","medianResponseTime","median","liveData","conversationsToday","conversations","messagesPerHour","getMessagesPerHour","topActiveAgents","getTopActiveAgents","recentActivity","getRecentActivity","error","console","createErrorResponse","organizationId","data","from","select","eq","in","b","length","today","split","gte","lte","messages","Set","map","m","conversation_id","total","inbound","filter","sender_type","outbound","size","fifteenMinutesAgo","now","oneHourAgo","agentMessages","order","ascending","responseTimes","agentMsg","contactMsg","lt","created_at","limit","single","responseTime","getTime","push","reduce","sum","time","sorted","sort","a","Math","floor","round","sampleSize","last24h","previous24h","currentPeriod","previousPeriod","getPeriodMetrics","calculatePercentageChange","startDate","endDate","messagesData","conversationsData","current","previous","last24Hours","hourlyData","i","hour","hourKey","getHours","message","Object","entries","count","parseInt","agents","agentStats","agent","name","full_name","messageCount","values","slice","thirtyMinutesAgo","activities","activity","type","preview","content","substring","contactName","contacts","agentName","profiles"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\app\\api\\analytics\\realtime\\route.ts"],"sourcesContent":["import { NextRequest } from 'next/server'\nimport { requireAuthenticatedUser, getUserOrganization, createErrorResponse, createSuccessResponse } from '@/lib/api-utils'\nimport { createClient } from '@/lib/supabase/server'\nimport { SupabaseClient } from '@supabase/supabase-js'\nimport { Database } from '@/types/database'\n\ntype TypedSupabaseClient = SupabaseClient<Database>\n\ninterface RealtimeMetrics {\n  activeConversations: number\n  todayMessages: {\n    total: number\n    inbound: number\n    outbound: number\n    conversations: number\n  }\n  activeAgents: number\n  pendingConversations: number\n  unreadMessages: number\n  averageResponseTime: number\n  medianResponseTime: number\n}\n\ninterface TrendData {\n  messages: number\n  conversations: number\n  responseTime: number\n}\n\ninterface HourlyData {\n  hour: number\n  count: number\n}\n\ninterface AgentStats {\n  id: string\n  name: string\n  messageCount: number\n}\n\ninterface ActivityItem {\n  id: string\n  type: 'incoming' | 'outgoing'\n  preview: string\n  contactName: string\n  agentName?: string\n  timestamp: string\n}\n\nexport async function GET(_request: NextRequest) {\n  try {\n    // Authenticate user\n    const user = await requireAuthenticatedUser()\n    const profile = await getUserOrganization(user.id)\n\n    const supabase = await createClient()\n\n    // Get real-time metrics\n    const [\n      activeConversations,\n      todayMessages,\n      activeAgents,\n      pendingConversations,\n      unreadMessages,\n      responseTimeData\n    ] = await Promise.all([\n      getActiveConversations(supabase, profile.organization_id!),\n      getTodayMessages(supabase, profile.organization_id!),\n      getActiveAgents(supabase, profile.organization_id!),\n      getPendingConversations(supabase, profile.organization_id!),\n      getUnreadMessages(supabase, profile.organization_id!),\n      getRecentResponseTimes(supabase, profile.organization_id!)\n    ])\n\n    // Calculate trends (last 24h vs previous 24h)\n    const trends = await calculateTrends(supabase, profile.organization_id!)\n\n    return createSuccessResponse({\n      timestamp: new Date().toISOString(),\n      metrics: {\n        activeConversations,\n        todayMessages,\n        activeAgents,\n        pendingConversations,\n        unreadMessages,\n        averageResponseTime: responseTimeData.average,\n        medianResponseTime: responseTimeData.median\n      },\n      trends,\n      liveData: {\n        conversationsToday: todayMessages.conversations,\n        messagesPerHour: await getMessagesPerHour(supabase, profile.organization_id!),\n        topActiveAgents: await getTopActiveAgents(supabase, profile.organization_id!),\n        recentActivity: await getRecentActivity(supabase, profile.organization_id!)\n      }\n    })\n\n  } catch (error) {\n    console.error('Real-time analytics error:', error)\n    return createErrorResponse(error)\n  }\n}\n\nasync function getActiveConversations(supabase: TypedSupabaseClient, organizationId: string): Promise<number> {\n  const { data, error } = await supabase\n    .from('conversations')\n    .select('id')\n    .eq('organization_id', organizationId)\n    .in('status', ['open', 'pending'])\n\n  if (error) throw error\n  return data?.length || 0\n}\n\nasync function getTodayMessages(supabase: TypedSupabaseClient, organizationId: string): Promise<{ total: number; inbound: number; outbound: number; conversations: number }> {\n  const today = new Date().toISOString().split('T')[0]\n\n  const { data, error } = await supabase\n    .from('messages')\n    .select('sender_type, conversation_id')\n    .eq('organization_id', organizationId)\n    .gte('created_at', `${today}T00:00:00.000Z`)\n    .lte('created_at', `${today}T23:59:59.999Z`)\n\n  if (error) throw error\n\n  const messages = data || []\n  const conversations = new Set(messages.map(m => m.conversation_id))\n\n  return {\n    total: messages.length,\n    inbound: messages.filter(m => m.sender_type === 'contact').length,\n    outbound: messages.filter(m => m.sender_type === 'agent').length,\n    conversations: conversations.size\n  }\n}\n\nasync function getActiveAgents(supabase: TypedSupabaseClient, organizationId: string): Promise<number> {\n  const fifteenMinutesAgo = new Date(Date.now() - 15 * 60 * 1000).toISOString()\n\n  const { data, error } = await supabase\n    .from('profiles')\n    .select('id, full_name, last_seen_at')\n    .eq('organization_id', organizationId)\n    .eq('is_active', true)\n    .gte('last_seen_at', fifteenMinutesAgo)\n\n  if (error) throw error\n  return data?.length || 0\n}\n\nasync function getPendingConversations(supabase: TypedSupabaseClient, organizationId: string): Promise<number> {\n  const { data, error } = await supabase\n    .from('conversations')\n    .select('id')\n    .eq('organization_id', organizationId)\n    .eq('status', 'pending')\n\n  if (error) throw error\n  return data?.length || 0\n}\n\nasync function getUnreadMessages(supabase: TypedSupabaseClient, organizationId: string): Promise<number> {\n  const { data, error } = await supabase\n    .from('messages')\n    .select('id')\n    .eq('organization_id', organizationId)\n    .eq('sender_type', 'contact')\n    .eq('is_read', false)\n\n  if (error) throw error\n  return data?.length || 0\n}\n\nasync function getRecentResponseTimes(supabase: TypedSupabaseClient, organizationId: string): Promise<{ average: number; median: number; sampleSize: number }> {\n  // Get recent agent responses with their corresponding incoming messages\n  const oneHourAgo = new Date(Date.now() - 60 * 60 * 1000).toISOString()\n\n  const { data: agentMessages, error } = await supabase\n    .from('messages')\n    .select('conversation_id, created_at')\n    .eq('organization_id', organizationId)\n    .eq('sender_type', 'agent')\n    .gte('created_at', oneHourAgo)\n    .order('created_at', { ascending: true })\n\n  if (error) throw error\n\n  const responseTimes = []\n\n  for (const agentMsg of agentMessages || []) {\n    // Find the most recent contact message before this agent message\n    const { data: contactMsg } = await supabase\n      .from('messages')\n      .select('created_at')\n      .eq('conversation_id', agentMsg.conversation_id)\n      .eq('sender_type', 'contact')\n      .lt('created_at', agentMsg.created_at)\n      .order('created_at', { ascending: false })\n      .limit(1)\n      .single()\n\n    if (contactMsg) {\n      const responseTime = new Date(agentMsg.created_at).getTime() - new Date(contactMsg.created_at).getTime()\n      responseTimes.push(responseTime)\n    }\n  }\n\n  const average = responseTimes.length > 0\n    ? responseTimes.reduce((sum, time) => sum + time, 0) / responseTimes.length\n    : 0\n\n  const sorted = [...responseTimes].sort((a, b) => a - b)\n  const median = sorted.length > 0\n    ? sorted[Math.floor(sorted.length / 2)]\n    : 0\n\n  return {\n    average: Math.round(average / (1000 * 60)), // minutes\n    median: Math.round(median / (1000 * 60)), // minutes\n    sampleSize: responseTimes.length\n  }\n}\n\nasync function calculateTrends(supabase: TypedSupabaseClient, organizationId: string): Promise<TrendData> {\n  const now = new Date()\n  const last24h = new Date(now.getTime() - 24 * 60 * 60 * 1000)\n  const previous24h = new Date(now.getTime() - 48 * 60 * 60 * 1000)\n\n  const [currentPeriod, previousPeriod] = await Promise.all([\n    getPeriodMetrics(supabase, organizationId, last24h, now),\n    getPeriodMetrics(supabase, organizationId, previous24h, last24h)\n  ])\n\n  return {\n    messages: calculatePercentageChange(currentPeriod.messages, previousPeriod.messages),\n    conversations: calculatePercentageChange(currentPeriod.conversations, previousPeriod.conversations),\n    responseTime: calculatePercentageChange(previousPeriod.responseTime, currentPeriod.responseTime) // Inverted for response time\n  }\n}\n\nasync function getPeriodMetrics(supabase: TypedSupabaseClient, organizationId: string, startDate: Date, endDate: Date): Promise<{ messages: number; conversations: number; responseTime: number }> {\n  const [messagesData, conversationsData] = await Promise.all([\n    supabase\n      .from('messages')\n      .select('id, conversation_id')\n      .eq('organization_id', organizationId)\n      .gte('created_at', startDate.toISOString())\n      .lt('created_at', endDate.toISOString()),\n\n    supabase\n      .from('conversations')\n      .select('id')\n      .eq('organization_id', organizationId)\n      .gte('created_at', startDate.toISOString())\n      .lt('created_at', endDate.toISOString())\n  ])\n\n  const messages = messagesData.data || []\n  const conversations = conversationsData.data || []\n\n  return {\n    messages: messages.length,\n    conversations: conversations.length,\n    responseTime: 0 // Simplified for now\n  }\n}\n\nfunction calculatePercentageChange(current: number, previous: number): number {\n  if (previous === 0) return current > 0 ? 100 : 0\n  return Math.round(((current - previous) / previous) * 100)\n}\n\nasync function getMessagesPerHour(supabase: TypedSupabaseClient, organizationId: string): Promise<HourlyData[]> {\n  const last24Hours = new Date(Date.now() - 24 * 60 * 60 * 1000)\n\n  const { data: messages } = await supabase\n    .from('messages')\n    .select('created_at')\n    .eq('organization_id', organizationId)\n    .gte('created_at', last24Hours.toISOString())\n\n  const hourlyData: Record<number, number> = {}\n  const now = new Date()\n\n  for (let i = 23; i >= 0; i--) {\n    const hour = new Date(now.getTime() - i * 60 * 60 * 1000)\n    const hourKey = hour.getHours()\n    hourlyData[hourKey] = 0\n  }\n\n  for (const message of messages || []) {\n    const hour = new Date(message.created_at).getHours()\n    hourlyData[hour] = (hourlyData[hour] || 0) + 1\n  }\n\n  return Object.entries(hourlyData).map(([hour, count]) => ({\n    hour: parseInt(hour),\n    count: count as number\n  }))\n}\n\nasync function getTopActiveAgents(supabase: TypedSupabaseClient, organizationId: string): Promise<AgentStats[]> {\n  const today = new Date().toISOString().split('T')[0]\n\n  const { data: agents } = await supabase\n    .from('profiles')\n    .select(`\n      id,\n      full_name,\n      messages!inner (\n        id\n      )\n    `)\n    .eq('organization_id', organizationId)\n    .gte('messages.created_at', `${today}T00:00:00.000Z`)\n    .eq('messages.sender_type', 'agent')\n\n  const agentStats: Record<string, AgentStats> = {}\n\n  for (const agent of agents || []) {\n    if (!agentStats[agent.id]) {\n      agentStats[agent.id] = {\n        id: agent.id,\n        name: agent.full_name || 'Unknown Agent',\n        messageCount: 0\n      }\n    }\n    agentStats[agent.id].messageCount += (agent.messages as unknown[]).length\n  }\n\n  return Object.values(agentStats)\n    .sort((a, b) => b.messageCount - a.messageCount)\n    .slice(0, 5)\n}\n\nasync function getRecentActivity(supabase: TypedSupabaseClient, organizationId: string): Promise<ActivityItem[]> {\n  const thirtyMinutesAgo = new Date(Date.now() - 30 * 60 * 1000)\n\n  const { data: activities } = await supabase\n    .from('messages')\n    .select(`\n      id,\n      content,\n      sender_type,\n      created_at,\n      conversations (\n        contacts (\n          name\n        )\n      ),\n      profiles (\n        full_name\n      )\n    `)\n    .eq('organization_id', organizationId)\n    .gte('created_at', thirtyMinutesAgo.toISOString())\n    .order('created_at', { ascending: false })\n    .limit(10)\n\n  return (activities || []).map(activity => ({\n    id: activity.id,\n    type: activity.sender_type === 'contact' ? 'incoming' : 'outgoing',\n    preview: activity.content.substring(0, 50) + (activity.content.length > 50 ? '...' : ''),\n    contactName: (activity.conversations as { contacts?: { name?: string } } | null)?.contacts?.name || 'Unknown',\n    agentName: (activity.profiles as { full_name?: string } | null)?.full_name,\n    timestamp: activity.created_at\n  }))\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}