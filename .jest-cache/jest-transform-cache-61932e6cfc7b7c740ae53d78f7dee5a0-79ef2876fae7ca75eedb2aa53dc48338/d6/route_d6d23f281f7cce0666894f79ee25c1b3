db6ea164a93242645d898ab85adc7445
"use strict";

/* istanbul ignore next */
function cov_1r2ei0aqos() {
  var path = "C:\\Ai Projecten\\ADSapp\\src\\app\\api\\analytics\\realtime\\route.ts";
  var hash = "c59c66d5bd49d605ce9c50a4d74bb94dcef2646e";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Ai Projecten\\ADSapp\\src\\app\\api\\analytics\\realtime\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 10,
          column: 3
        }
      },
      "2": {
        start: {
          line: 8,
          column: 8
        },
        end: {
          line: 8,
          column: 19
        }
      },
      "3": {
        start: {
          line: 11,
          column: 18
        },
        end: {
          line: 11,
          column: 54
        }
      },
      "4": {
        start: {
          line: 12,
          column: 16
        },
        end: {
          line: 12,
          column: 58
        }
      },
      "5": {
        start: {
          line: 14,
          column: 4
        },
        end: {
          line: 52,
          column: 5
        }
      },
      "6": {
        start: {
          line: 16,
          column: 21
        },
        end: {
          line: 16,
          column: 68
        }
      },
      "7": {
        start: {
          line: 17,
          column: 24
        },
        end: {
          line: 17,
          column: 73
        }
      },
      "8": {
        start: {
          line: 18,
          column: 25
        },
        end: {
          line: 18,
          column: 58
        }
      },
      "9": {
        start: {
          line: 20,
          column: 123
        },
        end: {
          line: 27,
          column: 10
        }
      },
      "10": {
        start: {
          line: 29,
          column: 23
        },
        end: {
          line: 29,
          column: 79
        }
      },
      "11": {
        start: {
          line: 30,
          column: 8
        },
        end: {
          line: 48,
          column: 11
        }
      },
      "12": {
        start: {
          line: 50,
          column: 8
        },
        end: {
          line: 50,
          column: 59
        }
      },
      "13": {
        start: {
          line: 51,
          column: 8
        },
        end: {
          line: 51,
          column: 57
        }
      },
      "14": {
        start: {
          line: 55,
          column: 28
        },
        end: {
          line: 58,
          column: 6
        }
      },
      "15": {
        start: {
          line: 59,
          column: 4
        },
        end: {
          line: 59,
          column: 27
        }
      },
      "16": {
        start: {
          line: 59,
          column: 15
        },
        end: {
          line: 59,
          column: 27
        }
      },
      "17": {
        start: {
          line: 60,
          column: 4
        },
        end: {
          line: 60,
          column: 29
        }
      },
      "18": {
        start: {
          line: 63,
          column: 18
        },
        end: {
          line: 63,
          column: 56
        }
      },
      "19": {
        start: {
          line: 64,
          column: 28
        },
        end: {
          line: 64,
          column: 224
        }
      },
      "20": {
        start: {
          line: 65,
          column: 4
        },
        end: {
          line: 65,
          column: 27
        }
      },
      "21": {
        start: {
          line: 65,
          column: 15
        },
        end: {
          line: 65,
          column: 27
        }
      },
      "22": {
        start: {
          line: 66,
          column: 21
        },
        end: {
          line: 66,
          column: 31
        }
      },
      "23": {
        start: {
          line: 67,
          column: 26
        },
        end: {
          line: 67,
          column: 71
        }
      },
      "24": {
        start: {
          line: 67,
          column: 52
        },
        end: {
          line: 67,
          column: 69
        }
      },
      "25": {
        start: {
          line: 68,
          column: 4
        },
        end: {
          line: 73,
          column: 6
        }
      },
      "26": {
        start: {
          line: 70,
          column: 38
        },
        end: {
          line: 70,
          column: 65
        }
      },
      "27": {
        start: {
          line: 71,
          column: 39
        },
        end: {
          line: 71,
          column: 64
        }
      },
      "28": {
        start: {
          line: 76,
          column: 30
        },
        end: {
          line: 76,
          column: 81
        }
      },
      "29": {
        start: {
          line: 77,
          column: 28
        },
        end: {
          line: 77,
          column: 196
        }
      },
      "30": {
        start: {
          line: 78,
          column: 4
        },
        end: {
          line: 78,
          column: 27
        }
      },
      "31": {
        start: {
          line: 78,
          column: 15
        },
        end: {
          line: 78,
          column: 27
        }
      },
      "32": {
        start: {
          line: 79,
          column: 4
        },
        end: {
          line: 79,
          column: 29
        }
      },
      "33": {
        start: {
          line: 82,
          column: 28
        },
        end: {
          line: 82,
          column: 139
        }
      },
      "34": {
        start: {
          line: 83,
          column: 4
        },
        end: {
          line: 83,
          column: 27
        }
      },
      "35": {
        start: {
          line: 83,
          column: 15
        },
        end: {
          line: 83,
          column: 27
        }
      },
      "36": {
        start: {
          line: 84,
          column: 4
        },
        end: {
          line: 84,
          column: 29
        }
      },
      "37": {
        start: {
          line: 87,
          column: 28
        },
        end: {
          line: 87,
          column: 160
        }
      },
      "38": {
        start: {
          line: 88,
          column: 4
        },
        end: {
          line: 88,
          column: 27
        }
      },
      "39": {
        start: {
          line: 88,
          column: 15
        },
        end: {
          line: 88,
          column: 27
        }
      },
      "40": {
        start: {
          line: 89,
          column: 4
        },
        end: {
          line: 89,
          column: 29
        }
      },
      "41": {
        start: {
          line: 93,
          column: 23
        },
        end: {
          line: 93,
          column: 74
        }
      },
      "42": {
        start: {
          line: 94,
          column: 43
        },
        end: {
          line: 96,
          column: 6
        }
      },
      "43": {
        start: {
          line: 97,
          column: 4
        },
        end: {
          line: 97,
          column: 27
        }
      },
      "44": {
        start: {
          line: 97,
          column: 15
        },
        end: {
          line: 97,
          column: 27
        }
      },
      "45": {
        start: {
          line: 98,
          column: 26
        },
        end: {
          line: 98,
          column: 28
        }
      },
      "46": {
        start: {
          line: 99,
          column: 4
        },
        end: {
          line: 108,
          column: 5
        }
      },
      "47": {
        start: {
          line: 101,
          column: 37
        },
        end: {
          line: 103,
          column: 28
        }
      },
      "48": {
        start: {
          line: 104,
          column: 8
        },
        end: {
          line: 107,
          column: 9
        }
      },
      "49": {
        start: {
          line: 105,
          column: 33
        },
        end: {
          line: 105,
          column: 116
        }
      },
      "50": {
        start: {
          line: 106,
          column: 12
        },
        end: {
          line: 106,
          column: 45
        }
      },
      "51": {
        start: {
          line: 109,
          column: 20
        },
        end: {
          line: 109,
          column: 122
        }
      },
      "52": {
        start: {
          line: 109,
          column: 81
        },
        end: {
          line: 109,
          column: 91
        }
      },
      "53": {
        start: {
          line: 110,
          column: 19
        },
        end: {
          line: 112,
          column: 25
        }
      },
      "54": {
        start: {
          line: 112,
          column: 19
        },
        end: {
          line: 112,
          column: 24
        }
      },
      "55": {
        start: {
          line: 113,
          column: 19
        },
        end: {
          line: 113,
          column: 80
        }
      },
      "56": {
        start: {
          line: 114,
          column: 4
        },
        end: {
          line: 118,
          column: 6
        }
      },
      "57": {
        start: {
          line: 121,
          column: 16
        },
        end: {
          line: 121,
          column: 26
        }
      },
      "58": {
        start: {
          line: 122,
          column: 20
        },
        end: {
          line: 122,
          column: 65
        }
      },
      "59": {
        start: {
          line: 123,
          column: 24
        },
        end: {
          line: 123,
          column: 69
        }
      },
      "60": {
        start: {
          line: 124,
          column: 44
        },
        end: {
          line: 127,
          column: 6
        }
      },
      "61": {
        start: {
          line: 128,
          column: 4
        },
        end: {
          line: 132,
          column: 6
        }
      },
      "62": {
        start: {
          line: 135,
          column: 46
        },
        end: {
          line: 138,
          column: 6
        }
      },
      "63": {
        start: {
          line: 139,
          column: 21
        },
        end: {
          line: 139,
          column: 44
        }
      },
      "64": {
        start: {
          line: 140,
          column: 26
        },
        end: {
          line: 140,
          column: 54
        }
      },
      "65": {
        start: {
          line: 141,
          column: 4
        },
        end: {
          line: 145,
          column: 6
        }
      },
      "66": {
        start: {
          line: 148,
          column: 4
        },
        end: {
          line: 148,
          column: 53
        }
      },
      "67": {
        start: {
          line: 148,
          column: 24
        },
        end: {
          line: 148,
          column: 53
        }
      },
      "68": {
        start: {
          line: 149,
          column: 4
        },
        end: {
          line: 149,
          column: 61
        }
      },
      "69": {
        start: {
          line: 152,
          column: 24
        },
        end: {
          line: 152,
          column: 66
        }
      },
      "70": {
        start: {
          line: 153,
          column: 31
        },
        end: {
          line: 153,
          column: 166
        }
      },
      "71": {
        start: {
          line: 154,
          column: 23
        },
        end: {
          line: 154,
          column: 25
        }
      },
      "72": {
        start: {
          line: 155,
          column: 16
        },
        end: {
          line: 155,
          column: 26
        }
      },
      "73": {
        start: {
          line: 156,
          column: 4
        },
        end: {
          line: 160,
          column: 5
        }
      },
      "74": {
        start: {
          line: 156,
          column: 16
        },
        end: {
          line: 156,
          column: 18
        }
      },
      "75": {
        start: {
          line: 157,
          column: 21
        },
        end: {
          line: 157,
          column: 65
        }
      },
      "76": {
        start: {
          line: 158,
          column: 24
        },
        end: {
          line: 158,
          column: 39
        }
      },
      "77": {
        start: {
          line: 159,
          column: 8
        },
        end: {
          line: 159,
          column: 32
        }
      },
      "78": {
        start: {
          line: 161,
          column: 4
        },
        end: {
          line: 164,
          column: 5
        }
      },
      "79": {
        start: {
          line: 162,
          column: 21
        },
        end: {
          line: 162,
          column: 60
        }
      },
      "80": {
        start: {
          line: 163,
          column: 8
        },
        end: {
          line: 163,
          column: 55
        }
      },
      "81": {
        start: {
          line: 165,
          column: 4
        },
        end: {
          line: 168,
          column: 12
        }
      },
      "82": {
        start: {
          line: 165,
          column: 60
        },
        end: {
          line: 168,
          column: 9
        }
      },
      "83": {
        start: {
          line: 171,
          column: 18
        },
        end: {
          line: 171,
          column: 56
        }
      },
      "84": {
        start: {
          line: 172,
          column: 29
        },
        end: {
          line: 178,
          column: 133
        }
      },
      "85": {
        start: {
          line: 179,
          column: 23
        },
        end: {
          line: 179,
          column: 25
        }
      },
      "86": {
        start: {
          line: 180,
          column: 4
        },
        end: {
          line: 189,
          column: 5
        }
      },
      "87": {
        start: {
          line: 181,
          column: 8
        },
        end: {
          line: 187,
          column: 9
        }
      },
      "88": {
        start: {
          line: 182,
          column: 12
        },
        end: {
          line: 186,
          column: 14
        }
      },
      "89": {
        start: {
          line: 188,
          column: 8
        },
        end: {
          line: 188,
          column: 67
        }
      },
      "90": {
        start: {
          line: 190,
          column: 4
        },
        end: {
          line: 190,
          column: 95
        }
      },
      "91": {
        start: {
          line: 190,
          column: 50
        },
        end: {
          line: 190,
          column: 81
        }
      },
      "92": {
        start: {
          line: 193,
          column: 29
        },
        end: {
          line: 193,
          column: 66
        }
      },
      "93": {
        start: {
          line: 194,
          column: 33
        },
        end: {
          line: 209,
          column: 16
        }
      },
      "94": {
        start: {
          line: 210,
          column: 4
        },
        end: {
          line: 217,
          column: 12
        }
      },
      "95": {
        start: {
          line: 210,
          column: 47
        },
        end: {
          line: 217,
          column: 9
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 9
          },
          end: {
            line: 7,
            column: 10
          }
        },
        loc: {
          start: {
            line: 7,
            column: 20
          },
          end: {
            line: 9,
            column: 5
          }
        },
        line: 7
      },
      "1": {
        name: "GET",
        decl: {
          start: {
            line: 13,
            column: 15
          },
          end: {
            line: 13,
            column: 18
          }
        },
        loc: {
          start: {
            line: 13,
            column: 29
          },
          end: {
            line: 53,
            column: 1
          }
        },
        line: 13
      },
      "2": {
        name: "getActiveConversations",
        decl: {
          start: {
            line: 54,
            column: 15
          },
          end: {
            line: 54,
            column: 37
          }
        },
        loc: {
          start: {
            line: 54,
            column: 64
          },
          end: {
            line: 61,
            column: 1
          }
        },
        line: 54
      },
      "3": {
        name: "getTodayMessages",
        decl: {
          start: {
            line: 62,
            column: 15
          },
          end: {
            line: 62,
            column: 31
          }
        },
        loc: {
          start: {
            line: 62,
            column: 58
          },
          end: {
            line: 74,
            column: 1
          }
        },
        line: 62
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 67,
            column: 47
          },
          end: {
            line: 67,
            column: 48
          }
        },
        loc: {
          start: {
            line: 67,
            column: 52
          },
          end: {
            line: 67,
            column: 69
          }
        },
        line: 67
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 70,
            column: 33
          },
          end: {
            line: 70,
            column: 34
          }
        },
        loc: {
          start: {
            line: 70,
            column: 38
          },
          end: {
            line: 70,
            column: 65
          }
        },
        line: 70
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 71,
            column: 34
          },
          end: {
            line: 71,
            column: 35
          }
        },
        loc: {
          start: {
            line: 71,
            column: 39
          },
          end: {
            line: 71,
            column: 64
          }
        },
        line: 71
      },
      "7": {
        name: "getActiveAgents",
        decl: {
          start: {
            line: 75,
            column: 15
          },
          end: {
            line: 75,
            column: 30
          }
        },
        loc: {
          start: {
            line: 75,
            column: 57
          },
          end: {
            line: 80,
            column: 1
          }
        },
        line: 75
      },
      "8": {
        name: "getPendingConversations",
        decl: {
          start: {
            line: 81,
            column: 15
          },
          end: {
            line: 81,
            column: 38
          }
        },
        loc: {
          start: {
            line: 81,
            column: 65
          },
          end: {
            line: 85,
            column: 1
          }
        },
        line: 81
      },
      "9": {
        name: "getUnreadMessages",
        decl: {
          start: {
            line: 86,
            column: 15
          },
          end: {
            line: 86,
            column: 32
          }
        },
        loc: {
          start: {
            line: 86,
            column: 59
          },
          end: {
            line: 90,
            column: 1
          }
        },
        line: 86
      },
      "10": {
        name: "getRecentResponseTimes",
        decl: {
          start: {
            line: 91,
            column: 15
          },
          end: {
            line: 91,
            column: 37
          }
        },
        loc: {
          start: {
            line: 91,
            column: 64
          },
          end: {
            line: 119,
            column: 1
          }
        },
        line: 91
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 109,
            column: 68
          },
          end: {
            line: 109,
            column: 69
          }
        },
        loc: {
          start: {
            line: 109,
            column: 81
          },
          end: {
            line: 109,
            column: 91
          }
        },
        line: 109
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 112,
            column: 11
          },
          end: {
            line: 112,
            column: 12
          }
        },
        loc: {
          start: {
            line: 112,
            column: 19
          },
          end: {
            line: 112,
            column: 24
          }
        },
        line: 112
      },
      "13": {
        name: "calculateTrends",
        decl: {
          start: {
            line: 120,
            column: 15
          },
          end: {
            line: 120,
            column: 30
          }
        },
        loc: {
          start: {
            line: 120,
            column: 57
          },
          end: {
            line: 133,
            column: 1
          }
        },
        line: 120
      },
      "14": {
        name: "getPeriodMetrics",
        decl: {
          start: {
            line: 134,
            column: 15
          },
          end: {
            line: 134,
            column: 31
          }
        },
        loc: {
          start: {
            line: 134,
            column: 78
          },
          end: {
            line: 146,
            column: 1
          }
        },
        line: 134
      },
      "15": {
        name: "calculatePercentageChange",
        decl: {
          start: {
            line: 147,
            column: 9
          },
          end: {
            line: 147,
            column: 34
          }
        },
        loc: {
          start: {
            line: 147,
            column: 54
          },
          end: {
            line: 150,
            column: 1
          }
        },
        line: 147
      },
      "16": {
        name: "getMessagesPerHour",
        decl: {
          start: {
            line: 151,
            column: 15
          },
          end: {
            line: 151,
            column: 33
          }
        },
        loc: {
          start: {
            line: 151,
            column: 60
          },
          end: {
            line: 169,
            column: 1
          }
        },
        line: 151
      },
      "17": {
        name: "(anonymous_17)",
        decl: {
          start: {
            line: 165,
            column: 42
          },
          end: {
            line: 165,
            column: 43
          }
        },
        loc: {
          start: {
            line: 165,
            column: 60
          },
          end: {
            line: 168,
            column: 9
          }
        },
        line: 165
      },
      "18": {
        name: "getTopActiveAgents",
        decl: {
          start: {
            line: 170,
            column: 15
          },
          end: {
            line: 170,
            column: 33
          }
        },
        loc: {
          start: {
            line: 170,
            column: 60
          },
          end: {
            line: 191,
            column: 1
          }
        },
        line: 170
      },
      "19": {
        name: "(anonymous_19)",
        decl: {
          start: {
            line: 190,
            column: 42
          },
          end: {
            line: 190,
            column: 43
          }
        },
        loc: {
          start: {
            line: 190,
            column: 50
          },
          end: {
            line: 190,
            column: 81
          }
        },
        line: 190
      },
      "20": {
        name: "getRecentActivity",
        decl: {
          start: {
            line: 192,
            column: 15
          },
          end: {
            line: 192,
            column: 32
          }
        },
        loc: {
          start: {
            line: 192,
            column: 59
          },
          end: {
            line: 218,
            column: 1
          }
        },
        line: 192
      },
      "21": {
        name: "(anonymous_21)",
        decl: {
          start: {
            line: 210,
            column: 34
          },
          end: {
            line: 210,
            column: 35
          }
        },
        loc: {
          start: {
            line: 210,
            column: 47
          },
          end: {
            line: 217,
            column: 9
          }
        },
        line: 210
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 59,
            column: 4
          },
          end: {
            line: 59,
            column: 27
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 59,
            column: 4
          },
          end: {
            line: 59,
            column: 27
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 59
      },
      "1": {
        loc: {
          start: {
            line: 60,
            column: 11
          },
          end: {
            line: 60,
            column: 28
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 60,
            column: 11
          },
          end: {
            line: 60,
            column: 23
          }
        }, {
          start: {
            line: 60,
            column: 27
          },
          end: {
            line: 60,
            column: 28
          }
        }],
        line: 60
      },
      "2": {
        loc: {
          start: {
            line: 65,
            column: 4
          },
          end: {
            line: 65,
            column: 27
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 65,
            column: 4
          },
          end: {
            line: 65,
            column: 27
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 65
      },
      "3": {
        loc: {
          start: {
            line: 66,
            column: 21
          },
          end: {
            line: 66,
            column: 31
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 66,
            column: 21
          },
          end: {
            line: 66,
            column: 25
          }
        }, {
          start: {
            line: 66,
            column: 29
          },
          end: {
            line: 66,
            column: 31
          }
        }],
        line: 66
      },
      "4": {
        loc: {
          start: {
            line: 78,
            column: 4
          },
          end: {
            line: 78,
            column: 27
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 78,
            column: 4
          },
          end: {
            line: 78,
            column: 27
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 78
      },
      "5": {
        loc: {
          start: {
            line: 79,
            column: 11
          },
          end: {
            line: 79,
            column: 28
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 79,
            column: 11
          },
          end: {
            line: 79,
            column: 23
          }
        }, {
          start: {
            line: 79,
            column: 27
          },
          end: {
            line: 79,
            column: 28
          }
        }],
        line: 79
      },
      "6": {
        loc: {
          start: {
            line: 83,
            column: 4
          },
          end: {
            line: 83,
            column: 27
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 83,
            column: 4
          },
          end: {
            line: 83,
            column: 27
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 83
      },
      "7": {
        loc: {
          start: {
            line: 84,
            column: 11
          },
          end: {
            line: 84,
            column: 28
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 84,
            column: 11
          },
          end: {
            line: 84,
            column: 23
          }
        }, {
          start: {
            line: 84,
            column: 27
          },
          end: {
            line: 84,
            column: 28
          }
        }],
        line: 84
      },
      "8": {
        loc: {
          start: {
            line: 88,
            column: 4
          },
          end: {
            line: 88,
            column: 27
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 88,
            column: 4
          },
          end: {
            line: 88,
            column: 27
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 88
      },
      "9": {
        loc: {
          start: {
            line: 89,
            column: 11
          },
          end: {
            line: 89,
            column: 28
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 89,
            column: 11
          },
          end: {
            line: 89,
            column: 23
          }
        }, {
          start: {
            line: 89,
            column: 27
          },
          end: {
            line: 89,
            column: 28
          }
        }],
        line: 89
      },
      "10": {
        loc: {
          start: {
            line: 97,
            column: 4
          },
          end: {
            line: 97,
            column: 27
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 97,
            column: 4
          },
          end: {
            line: 97,
            column: 27
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 97
      },
      "11": {
        loc: {
          start: {
            line: 99,
            column: 27
          },
          end: {
            line: 99,
            column: 46
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 99,
            column: 27
          },
          end: {
            line: 99,
            column: 40
          }
        }, {
          start: {
            line: 99,
            column: 44
          },
          end: {
            line: 99,
            column: 46
          }
        }],
        line: 99
      },
      "12": {
        loc: {
          start: {
            line: 104,
            column: 8
          },
          end: {
            line: 107,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 104,
            column: 8
          },
          end: {
            line: 107,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 104
      },
      "13": {
        loc: {
          start: {
            line: 109,
            column: 20
          },
          end: {
            line: 109,
            column: 122
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 109,
            column: 47
          },
          end: {
            line: 109,
            column: 118
          }
        }, {
          start: {
            line: 109,
            column: 121
          },
          end: {
            line: 109,
            column: 122
          }
        }],
        line: 109
      },
      "14": {
        loc: {
          start: {
            line: 113,
            column: 19
          },
          end: {
            line: 113,
            column: 80
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 113,
            column: 39
          },
          end: {
            line: 113,
            column: 76
          }
        }, {
          start: {
            line: 113,
            column: 79
          },
          end: {
            line: 113,
            column: 80
          }
        }],
        line: 113
      },
      "15": {
        loc: {
          start: {
            line: 139,
            column: 21
          },
          end: {
            line: 139,
            column: 44
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 139,
            column: 21
          },
          end: {
            line: 139,
            column: 38
          }
        }, {
          start: {
            line: 139,
            column: 42
          },
          end: {
            line: 139,
            column: 44
          }
        }],
        line: 139
      },
      "16": {
        loc: {
          start: {
            line: 140,
            column: 26
          },
          end: {
            line: 140,
            column: 54
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 140,
            column: 26
          },
          end: {
            line: 140,
            column: 48
          }
        }, {
          start: {
            line: 140,
            column: 52
          },
          end: {
            line: 140,
            column: 54
          }
        }],
        line: 140
      },
      "17": {
        loc: {
          start: {
            line: 148,
            column: 4
          },
          end: {
            line: 148,
            column: 53
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 148,
            column: 4
          },
          end: {
            line: 148,
            column: 53
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 148
      },
      "18": {
        loc: {
          start: {
            line: 148,
            column: 31
          },
          end: {
            line: 148,
            column: 52
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 148,
            column: 45
          },
          end: {
            line: 148,
            column: 48
          }
        }, {
          start: {
            line: 148,
            column: 51
          },
          end: {
            line: 148,
            column: 52
          }
        }],
        line: 148
      },
      "19": {
        loc: {
          start: {
            line: 161,
            column: 26
          },
          end: {
            line: 161,
            column: 40
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 161,
            column: 26
          },
          end: {
            line: 161,
            column: 34
          }
        }, {
          start: {
            line: 161,
            column: 38
          },
          end: {
            line: 161,
            column: 40
          }
        }],
        line: 161
      },
      "20": {
        loc: {
          start: {
            line: 163,
            column: 28
          },
          end: {
            line: 163,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 163,
            column: 28
          },
          end: {
            line: 163,
            column: 44
          }
        }, {
          start: {
            line: 163,
            column: 48
          },
          end: {
            line: 163,
            column: 49
          }
        }],
        line: 163
      },
      "21": {
        loc: {
          start: {
            line: 180,
            column: 24
          },
          end: {
            line: 180,
            column: 36
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 180,
            column: 24
          },
          end: {
            line: 180,
            column: 30
          }
        }, {
          start: {
            line: 180,
            column: 34
          },
          end: {
            line: 180,
            column: 36
          }
        }],
        line: 180
      },
      "22": {
        loc: {
          start: {
            line: 181,
            column: 8
          },
          end: {
            line: 187,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 181,
            column: 8
          },
          end: {
            line: 187,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 181
      },
      "23": {
        loc: {
          start: {
            line: 184,
            column: 22
          },
          end: {
            line: 184,
            column: 56
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 184,
            column: 22
          },
          end: {
            line: 184,
            column: 37
          }
        }, {
          start: {
            line: 184,
            column: 41
          },
          end: {
            line: 184,
            column: 56
          }
        }],
        line: 184
      },
      "24": {
        loc: {
          start: {
            line: 210,
            column: 12
          },
          end: {
            line: 210,
            column: 28
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 210,
            column: 12
          },
          end: {
            line: 210,
            column: 22
          }
        }, {
          start: {
            line: 210,
            column: 26
          },
          end: {
            line: 210,
            column: 28
          }
        }],
        line: 210
      },
      "25": {
        loc: {
          start: {
            line: 212,
            column: 18
          },
          end: {
            line: 212,
            column: 78
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 212,
            column: 55
          },
          end: {
            line: 212,
            column: 65
          }
        }, {
          start: {
            line: 212,
            column: 68
          },
          end: {
            line: 212,
            column: 78
          }
        }],
        line: 212
      },
      "26": {
        loc: {
          start: {
            line: 213,
            column: 58
          },
          end: {
            line: 213,
            column: 99
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 213,
            column: 89
          },
          end: {
            line: 213,
            column: 94
          }
        }, {
          start: {
            line: 213,
            column: 97
          },
          end: {
            line: 213,
            column: 99
          }
        }],
        line: 213
      },
      "27": {
        loc: {
          start: {
            line: 214,
            column: 25
          },
          end: {
            line: 214,
            column: 76
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 214,
            column: 25
          },
          end: {
            line: 214,
            column: 63
          }
        }, {
          start: {
            line: 214,
            column: 67
          },
          end: {
            line: 214,
            column: 76
          }
        }],
        line: 214
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0,
      "91": 0,
      "92": 0,
      "93": 0,
      "94": 0,
      "95": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0],
      "21": [0, 0],
      "22": [0, 0],
      "23": [0, 0],
      "24": [0, 0],
      "25": [0, 0],
      "26": [0, 0],
      "27": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Ai Projecten\\ADSapp\\src\\app\\api\\analytics\\realtime\\route.ts"],
      sourcesContent: ["import { NextRequest } from 'next/server'\nimport { requireAuthenticatedUser, getUserOrganization, createErrorResponse, createSuccessResponse } from '@/lib/api-utils'\nimport { createClient } from '@/lib/supabase/server'\nimport { SupabaseClient } from '@supabase/supabase-js'\nimport { Database } from '@/types/database'\n\ntype TypedSupabaseClient = SupabaseClient<Database>\n\ninterface RealtimeMetrics {\n  activeConversations: number\n  todayMessages: {\n    total: number\n    inbound: number\n    outbound: number\n    conversations: number\n  }\n  activeAgents: number\n  pendingConversations: number\n  unreadMessages: number\n  averageResponseTime: number\n  medianResponseTime: number\n}\n\ninterface TrendData {\n  messages: number\n  conversations: number\n  responseTime: number\n}\n\ninterface HourlyData {\n  hour: number\n  count: number\n}\n\ninterface AgentStats {\n  id: string\n  name: string\n  messageCount: number\n}\n\ninterface ActivityItem {\n  id: string\n  type: 'incoming' | 'outgoing'\n  preview: string\n  contactName: string\n  agentName?: string\n  timestamp: string\n}\n\nexport async function GET(_request: NextRequest) {\n  try {\n    // Authenticate user\n    const user = await requireAuthenticatedUser()\n    const profile = await getUserOrganization(user.id)\n\n    const supabase = await createClient()\n\n    // Get real-time metrics\n    const [\n      activeConversations,\n      todayMessages,\n      activeAgents,\n      pendingConversations,\n      unreadMessages,\n      responseTimeData\n    ] = await Promise.all([\n      getActiveConversations(supabase, profile.organization_id!),\n      getTodayMessages(supabase, profile.organization_id!),\n      getActiveAgents(supabase, profile.organization_id!),\n      getPendingConversations(supabase, profile.organization_id!),\n      getUnreadMessages(supabase, profile.organization_id!),\n      getRecentResponseTimes(supabase, profile.organization_id!)\n    ])\n\n    // Calculate trends (last 24h vs previous 24h)\n    const trends = await calculateTrends(supabase, profile.organization_id!)\n\n    return createSuccessResponse({\n      timestamp: new Date().toISOString(),\n      metrics: {\n        activeConversations,\n        todayMessages,\n        activeAgents,\n        pendingConversations,\n        unreadMessages,\n        averageResponseTime: responseTimeData.average,\n        medianResponseTime: responseTimeData.median\n      },\n      trends,\n      liveData: {\n        conversationsToday: todayMessages.conversations,\n        messagesPerHour: await getMessagesPerHour(supabase, profile.organization_id!),\n        topActiveAgents: await getTopActiveAgents(supabase, profile.organization_id!),\n        recentActivity: await getRecentActivity(supabase, profile.organization_id!)\n      }\n    })\n\n  } catch (error) {\n    console.error('Real-time analytics error:', error)\n    return createErrorResponse(error)\n  }\n}\n\nasync function getActiveConversations(supabase: TypedSupabaseClient, organizationId: string): Promise<number> {\n  const { data, error } = await supabase\n    .from('conversations')\n    .select('id')\n    .eq('organization_id', organizationId)\n    .in('status', ['open', 'pending'])\n\n  if (error) throw error\n  return data?.length || 0\n}\n\nasync function getTodayMessages(supabase: TypedSupabaseClient, organizationId: string): Promise<{ total: number; inbound: number; outbound: number; conversations: number }> {\n  const today = new Date().toISOString().split('T')[0]\n\n  const { data, error } = await supabase\n    .from('messages')\n    .select('sender_type, conversation_id')\n    .eq('organization_id', organizationId)\n    .gte('created_at', `${today}T00:00:00.000Z`)\n    .lte('created_at', `${today}T23:59:59.999Z`)\n\n  if (error) throw error\n\n  const messages = data || []\n  const conversations = new Set(messages.map(m => m.conversation_id))\n\n  return {\n    total: messages.length,\n    inbound: messages.filter(m => m.sender_type === 'contact').length,\n    outbound: messages.filter(m => m.sender_type === 'agent').length,\n    conversations: conversations.size\n  }\n}\n\nasync function getActiveAgents(supabase: TypedSupabaseClient, organizationId: string): Promise<number> {\n  const fifteenMinutesAgo = new Date(Date.now() - 15 * 60 * 1000).toISOString()\n\n  const { data, error } = await supabase\n    .from('profiles')\n    .select('id, full_name, last_seen_at')\n    .eq('organization_id', organizationId)\n    .eq('is_active', true)\n    .gte('last_seen_at', fifteenMinutesAgo)\n\n  if (error) throw error\n  return data?.length || 0\n}\n\nasync function getPendingConversations(supabase: TypedSupabaseClient, organizationId: string): Promise<number> {\n  const { data, error } = await supabase\n    .from('conversations')\n    .select('id')\n    .eq('organization_id', organizationId)\n    .eq('status', 'pending')\n\n  if (error) throw error\n  return data?.length || 0\n}\n\nasync function getUnreadMessages(supabase: TypedSupabaseClient, organizationId: string): Promise<number> {\n  const { data, error } = await supabase\n    .from('messages')\n    .select('id')\n    .eq('organization_id', organizationId)\n    .eq('sender_type', 'contact')\n    .eq('is_read', false)\n\n  if (error) throw error\n  return data?.length || 0\n}\n\nasync function getRecentResponseTimes(supabase: TypedSupabaseClient, organizationId: string): Promise<{ average: number; median: number; sampleSize: number }> {\n  // Get recent agent responses with their corresponding incoming messages\n  const oneHourAgo = new Date(Date.now() - 60 * 60 * 1000).toISOString()\n\n  const { data: agentMessages, error } = await supabase\n    .from('messages')\n    .select('conversation_id, created_at')\n    .eq('organization_id', organizationId)\n    .eq('sender_type', 'agent')\n    .gte('created_at', oneHourAgo)\n    .order('created_at', { ascending: true })\n\n  if (error) throw error\n\n  const responseTimes = []\n\n  for (const agentMsg of agentMessages || []) {\n    // Find the most recent contact message before this agent message\n    const { data: contactMsg } = await supabase\n      .from('messages')\n      .select('created_at')\n      .eq('conversation_id', agentMsg.conversation_id)\n      .eq('sender_type', 'contact')\n      .lt('created_at', agentMsg.created_at)\n      .order('created_at', { ascending: false })\n      .limit(1)\n      .single()\n\n    if (contactMsg) {\n      const responseTime = new Date(agentMsg.created_at).getTime() - new Date(contactMsg.created_at).getTime()\n      responseTimes.push(responseTime)\n    }\n  }\n\n  const average = responseTimes.length > 0\n    ? responseTimes.reduce((sum, time) => sum + time, 0) / responseTimes.length\n    : 0\n\n  const sorted = [...responseTimes].sort((a, b) => a - b)\n  const median = sorted.length > 0\n    ? sorted[Math.floor(sorted.length / 2)]\n    : 0\n\n  return {\n    average: Math.round(average / (1000 * 60)), // minutes\n    median: Math.round(median / (1000 * 60)), // minutes\n    sampleSize: responseTimes.length\n  }\n}\n\nasync function calculateTrends(supabase: TypedSupabaseClient, organizationId: string): Promise<TrendData> {\n  const now = new Date()\n  const last24h = new Date(now.getTime() - 24 * 60 * 60 * 1000)\n  const previous24h = new Date(now.getTime() - 48 * 60 * 60 * 1000)\n\n  const [currentPeriod, previousPeriod] = await Promise.all([\n    getPeriodMetrics(supabase, organizationId, last24h, now),\n    getPeriodMetrics(supabase, organizationId, previous24h, last24h)\n  ])\n\n  return {\n    messages: calculatePercentageChange(currentPeriod.messages, previousPeriod.messages),\n    conversations: calculatePercentageChange(currentPeriod.conversations, previousPeriod.conversations),\n    responseTime: calculatePercentageChange(previousPeriod.responseTime, currentPeriod.responseTime) // Inverted for response time\n  }\n}\n\nasync function getPeriodMetrics(supabase: TypedSupabaseClient, organizationId: string, startDate: Date, endDate: Date): Promise<{ messages: number; conversations: number; responseTime: number }> {\n  const [messagesData, conversationsData] = await Promise.all([\n    supabase\n      .from('messages')\n      .select('id, conversation_id')\n      .eq('organization_id', organizationId)\n      .gte('created_at', startDate.toISOString())\n      .lt('created_at', endDate.toISOString()),\n\n    supabase\n      .from('conversations')\n      .select('id')\n      .eq('organization_id', organizationId)\n      .gte('created_at', startDate.toISOString())\n      .lt('created_at', endDate.toISOString())\n  ])\n\n  const messages = messagesData.data || []\n  const conversations = conversationsData.data || []\n\n  return {\n    messages: messages.length,\n    conversations: conversations.length,\n    responseTime: 0 // Simplified for now\n  }\n}\n\nfunction calculatePercentageChange(current: number, previous: number): number {\n  if (previous === 0) return current > 0 ? 100 : 0\n  return Math.round(((current - previous) / previous) * 100)\n}\n\nasync function getMessagesPerHour(supabase: TypedSupabaseClient, organizationId: string): Promise<HourlyData[]> {\n  const last24Hours = new Date(Date.now() - 24 * 60 * 60 * 1000)\n\n  const { data: messages } = await supabase\n    .from('messages')\n    .select('created_at')\n    .eq('organization_id', organizationId)\n    .gte('created_at', last24Hours.toISOString())\n\n  const hourlyData: Record<number, number> = {}\n  const now = new Date()\n\n  for (let i = 23; i >= 0; i--) {\n    const hour = new Date(now.getTime() - i * 60 * 60 * 1000)\n    const hourKey = hour.getHours()\n    hourlyData[hourKey] = 0\n  }\n\n  for (const message of messages || []) {\n    const hour = new Date(message.created_at).getHours()\n    hourlyData[hour] = (hourlyData[hour] || 0) + 1\n  }\n\n  return Object.entries(hourlyData).map(([hour, count]) => ({\n    hour: parseInt(hour),\n    count: count as number\n  }))\n}\n\nasync function getTopActiveAgents(supabase: TypedSupabaseClient, organizationId: string): Promise<AgentStats[]> {\n  const today = new Date().toISOString().split('T')[0]\n\n  const { data: agents } = await supabase\n    .from('profiles')\n    .select(`\n      id,\n      full_name,\n      messages!inner (\n        id\n      )\n    `)\n    .eq('organization_id', organizationId)\n    .gte('messages.created_at', `${today}T00:00:00.000Z`)\n    .eq('messages.sender_type', 'agent')\n\n  const agentStats: Record<string, AgentStats> = {}\n\n  for (const agent of agents || []) {\n    if (!agentStats[agent.id]) {\n      agentStats[agent.id] = {\n        id: agent.id,\n        name: agent.full_name || 'Unknown Agent',\n        messageCount: 0\n      }\n    }\n    agentStats[agent.id].messageCount += (agent.messages as unknown[]).length\n  }\n\n  return Object.values(agentStats)\n    .sort((a, b) => b.messageCount - a.messageCount)\n    .slice(0, 5)\n}\n\nasync function getRecentActivity(supabase: TypedSupabaseClient, organizationId: string): Promise<ActivityItem[]> {\n  const thirtyMinutesAgo = new Date(Date.now() - 30 * 60 * 1000)\n\n  const { data: activities } = await supabase\n    .from('messages')\n    .select(`\n      id,\n      content,\n      sender_type,\n      created_at,\n      conversations (\n        contacts (\n          name\n        )\n      ),\n      profiles (\n        full_name\n      )\n    `)\n    .eq('organization_id', organizationId)\n    .gte('created_at', thirtyMinutesAgo.toISOString())\n    .order('created_at', { ascending: false })\n    .limit(10)\n\n  return (activities || []).map(activity => ({\n    id: activity.id,\n    type: activity.sender_type === 'contact' ? 'incoming' : 'outgoing',\n    preview: activity.content.substring(0, 50) + (activity.content.length > 50 ? '...' : ''),\n    contactName: (activity.conversations as { contacts?: { name?: string } } | null)?.contacts?.name || 'Unknown',\n    agentName: (activity.profiles as { full_name?: string } | null)?.full_name,\n    timestamp: activity.created_at\n  }))\n}"],
      names: ["GET", "_request", "user", "requireAuthenticatedUser", "profile", "getUserOrganization", "id", "supabase", "createClient", "activeConversations", "todayMessages", "activeAgents", "pendingConversations", "unreadMessages", "responseTimeData", "Promise", "all", "getActiveConversations", "organization_id", "getTodayMessages", "getActiveAgents", "getPendingConversations", "getUnreadMessages", "getRecentResponseTimes", "trends", "calculateTrends", "createSuccessResponse", "timestamp", "Date", "toISOString", "metrics", "averageResponseTime", "average", "medianResponseTime", "median", "liveData", "conversationsToday", "conversations", "messagesPerHour", "getMessagesPerHour", "topActiveAgents", "getTopActiveAgents", "recentActivity", "getRecentActivity", "error", "console", "createErrorResponse", "organizationId", "data", "from", "select", "eq", "in", "length", "today", "split", "gte", "lte", "messages", "Set", "map", "m", "conversation_id", "total", "inbound", "filter", "sender_type", "outbound", "size", "fifteenMinutesAgo", "now", "oneHourAgo", "agentMessages", "order", "ascending", "responseTimes", "agentMsg", "contactMsg", "lt", "created_at", "limit", "single", "responseTime", "getTime", "push", "reduce", "sum", "time", "sorted", "sort", "a", "b", "Math", "floor", "round", "sampleSize", "last24h", "previous24h", "currentPeriod", "previousPeriod", "getPeriodMetrics", "calculatePercentageChange", "startDate", "endDate", "messagesData", "conversationsData", "current", "previous", "last24Hours", "hourlyData", "i", "hour", "hourKey", "getHours", "message", "Object", "entries", "count", "parseInt", "agents", "agentStats", "agent", "name", "full_name", "messageCount", "values", "slice", "thirtyMinutesAgo", "activities", "activity", "type", "preview", "content", "substring", "contactName", "contacts", "agentName", "profiles"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "c59c66d5bd49d605ce9c50a4d74bb94dcef2646e"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1r2ei0aqos = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1r2ei0aqos();
cov_1r2ei0aqos().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_1r2ei0aqos().s[1]++;
Object.defineProperty(exports, "GET", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_1r2ei0aqos().f[0]++;
    cov_1r2ei0aqos().s[2]++;
    return GET;
  }
});
const _apiutils =
/* istanbul ignore next */
(cov_1r2ei0aqos().s[3]++, require("../../../../lib/api-utils"));
const _server =
/* istanbul ignore next */
(cov_1r2ei0aqos().s[4]++, require("../../../../lib/supabase/server"));
async function GET(_request) {
  /* istanbul ignore next */
  cov_1r2ei0aqos().f[1]++;
  cov_1r2ei0aqos().s[5]++;
  try {
    // Authenticate user
    const user =
    /* istanbul ignore next */
    (cov_1r2ei0aqos().s[6]++, await (0, _apiutils.requireAuthenticatedUser)());
    const profile =
    /* istanbul ignore next */
    (cov_1r2ei0aqos().s[7]++, await (0, _apiutils.getUserOrganization)(user.id));
    const supabase =
    /* istanbul ignore next */
    (cov_1r2ei0aqos().s[8]++, await (0, _server.createClient)());
    // Get real-time metrics
    const [activeConversations, todayMessages, activeAgents, pendingConversations, unreadMessages, responseTimeData] =
    /* istanbul ignore next */
    (cov_1r2ei0aqos().s[9]++, await Promise.all([getActiveConversations(supabase, profile.organization_id), getTodayMessages(supabase, profile.organization_id), getActiveAgents(supabase, profile.organization_id), getPendingConversations(supabase, profile.organization_id), getUnreadMessages(supabase, profile.organization_id), getRecentResponseTimes(supabase, profile.organization_id)]));
    // Calculate trends (last 24h vs previous 24h)
    const trends =
    /* istanbul ignore next */
    (cov_1r2ei0aqos().s[10]++, await calculateTrends(supabase, profile.organization_id));
    /* istanbul ignore next */
    cov_1r2ei0aqos().s[11]++;
    return (0, _apiutils.createSuccessResponse)({
      timestamp: new Date().toISOString(),
      metrics: {
        activeConversations,
        todayMessages,
        activeAgents,
        pendingConversations,
        unreadMessages,
        averageResponseTime: responseTimeData.average,
        medianResponseTime: responseTimeData.median
      },
      trends,
      liveData: {
        conversationsToday: todayMessages.conversations,
        messagesPerHour: await getMessagesPerHour(supabase, profile.organization_id),
        topActiveAgents: await getTopActiveAgents(supabase, profile.organization_id),
        recentActivity: await getRecentActivity(supabase, profile.organization_id)
      }
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_1r2ei0aqos().s[12]++;
    console.error('Real-time analytics error:', error);
    /* istanbul ignore next */
    cov_1r2ei0aqos().s[13]++;
    return (0, _apiutils.createErrorResponse)(error);
  }
}
async function getActiveConversations(supabase, organizationId) {
  /* istanbul ignore next */
  cov_1r2ei0aqos().f[2]++;
  const {
    data,
    error
  } =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[14]++, await supabase.from('conversations').select('id').eq('organization_id', organizationId).in('status', ['open', 'pending']));
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[15]++;
  if (error) {
    /* istanbul ignore next */
    cov_1r2ei0aqos().b[0][0]++;
    cov_1r2ei0aqos().s[16]++;
    throw error;
  } else
  /* istanbul ignore next */
  {
    cov_1r2ei0aqos().b[0][1]++;
  }
  cov_1r2ei0aqos().s[17]++;
  return /* istanbul ignore next */(cov_1r2ei0aqos().b[1][0]++, data?.length) ||
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[1][1]++, 0);
}
async function getTodayMessages(supabase, organizationId) {
  /* istanbul ignore next */
  cov_1r2ei0aqos().f[3]++;
  const today =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[18]++, new Date().toISOString().split('T')[0]);
  const {
    data,
    error
  } =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[19]++, await supabase.from('messages').select('sender_type, conversation_id').eq('organization_id', organizationId).gte('created_at', `${today}T00:00:00.000Z`).lte('created_at', `${today}T23:59:59.999Z`));
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[20]++;
  if (error) {
    /* istanbul ignore next */
    cov_1r2ei0aqos().b[2][0]++;
    cov_1r2ei0aqos().s[21]++;
    throw error;
  } else
  /* istanbul ignore next */
  {
    cov_1r2ei0aqos().b[2][1]++;
  }
  const messages =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[22]++,
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[3][0]++, data) ||
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[3][1]++, []));
  const conversations =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[23]++, new Set(messages.map(m => {
    /* istanbul ignore next */
    cov_1r2ei0aqos().f[4]++;
    cov_1r2ei0aqos().s[24]++;
    return m.conversation_id;
  })));
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[25]++;
  return {
    total: messages.length,
    inbound: messages.filter(m => {
      /* istanbul ignore next */
      cov_1r2ei0aqos().f[5]++;
      cov_1r2ei0aqos().s[26]++;
      return m.sender_type === 'contact';
    }).length,
    outbound: messages.filter(m => {
      /* istanbul ignore next */
      cov_1r2ei0aqos().f[6]++;
      cov_1r2ei0aqos().s[27]++;
      return m.sender_type === 'agent';
    }).length,
    conversations: conversations.size
  };
}
async function getActiveAgents(supabase, organizationId) {
  /* istanbul ignore next */
  cov_1r2ei0aqos().f[7]++;
  const fifteenMinutesAgo =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[28]++, new Date(Date.now() - 15 * 60 * 1000).toISOString());
  const {
    data,
    error
  } =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[29]++, await supabase.from('profiles').select('id, full_name, last_seen_at').eq('organization_id', organizationId).eq('is_active', true).gte('last_seen_at', fifteenMinutesAgo));
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[30]++;
  if (error) {
    /* istanbul ignore next */
    cov_1r2ei0aqos().b[4][0]++;
    cov_1r2ei0aqos().s[31]++;
    throw error;
  } else
  /* istanbul ignore next */
  {
    cov_1r2ei0aqos().b[4][1]++;
  }
  cov_1r2ei0aqos().s[32]++;
  return /* istanbul ignore next */(cov_1r2ei0aqos().b[5][0]++, data?.length) ||
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[5][1]++, 0);
}
async function getPendingConversations(supabase, organizationId) {
  /* istanbul ignore next */
  cov_1r2ei0aqos().f[8]++;
  const {
    data,
    error
  } =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[33]++, await supabase.from('conversations').select('id').eq('organization_id', organizationId).eq('status', 'pending'));
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[34]++;
  if (error) {
    /* istanbul ignore next */
    cov_1r2ei0aqos().b[6][0]++;
    cov_1r2ei0aqos().s[35]++;
    throw error;
  } else
  /* istanbul ignore next */
  {
    cov_1r2ei0aqos().b[6][1]++;
  }
  cov_1r2ei0aqos().s[36]++;
  return /* istanbul ignore next */(cov_1r2ei0aqos().b[7][0]++, data?.length) ||
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[7][1]++, 0);
}
async function getUnreadMessages(supabase, organizationId) {
  /* istanbul ignore next */
  cov_1r2ei0aqos().f[9]++;
  const {
    data,
    error
  } =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[37]++, await supabase.from('messages').select('id').eq('organization_id', organizationId).eq('sender_type', 'contact').eq('is_read', false));
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[38]++;
  if (error) {
    /* istanbul ignore next */
    cov_1r2ei0aqos().b[8][0]++;
    cov_1r2ei0aqos().s[39]++;
    throw error;
  } else
  /* istanbul ignore next */
  {
    cov_1r2ei0aqos().b[8][1]++;
  }
  cov_1r2ei0aqos().s[40]++;
  return /* istanbul ignore next */(cov_1r2ei0aqos().b[9][0]++, data?.length) ||
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[9][1]++, 0);
}
async function getRecentResponseTimes(supabase, organizationId) {
  /* istanbul ignore next */
  cov_1r2ei0aqos().f[10]++;
  // Get recent agent responses with their corresponding incoming messages
  const oneHourAgo =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[41]++, new Date(Date.now() - 60 * 60 * 1000).toISOString());
  const {
    data: agentMessages,
    error
  } =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[42]++, await supabase.from('messages').select('conversation_id, created_at').eq('organization_id', organizationId).eq('sender_type', 'agent').gte('created_at', oneHourAgo).order('created_at', {
    ascending: true
  }));
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[43]++;
  if (error) {
    /* istanbul ignore next */
    cov_1r2ei0aqos().b[10][0]++;
    cov_1r2ei0aqos().s[44]++;
    throw error;
  } else
  /* istanbul ignore next */
  {
    cov_1r2ei0aqos().b[10][1]++;
  }
  const responseTimes =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[45]++, []);
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[46]++;
  for (const agentMsg of
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[11][0]++, agentMessages) ||
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[11][1]++, [])) {
    // Find the most recent contact message before this agent message
    const {
      data: contactMsg
    } =
    /* istanbul ignore next */
    (cov_1r2ei0aqos().s[47]++, await supabase.from('messages').select('created_at').eq('conversation_id', agentMsg.conversation_id).eq('sender_type', 'contact').lt('created_at', agentMsg.created_at).order('created_at', {
      ascending: false
    }).limit(1).single());
    /* istanbul ignore next */
    cov_1r2ei0aqos().s[48]++;
    if (contactMsg) {
      /* istanbul ignore next */
      cov_1r2ei0aqos().b[12][0]++;
      const responseTime =
      /* istanbul ignore next */
      (cov_1r2ei0aqos().s[49]++, new Date(agentMsg.created_at).getTime() - new Date(contactMsg.created_at).getTime());
      /* istanbul ignore next */
      cov_1r2ei0aqos().s[50]++;
      responseTimes.push(responseTime);
    } else
    /* istanbul ignore next */
    {
      cov_1r2ei0aqos().b[12][1]++;
    }
  }
  const average =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[51]++, responseTimes.length > 0 ?
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[13][0]++, responseTimes.reduce((sum, time) => {
    /* istanbul ignore next */
    cov_1r2ei0aqos().f[11]++;
    cov_1r2ei0aqos().s[52]++;
    return sum + time;
  }, 0) / responseTimes.length) :
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[13][1]++, 0));
  const sorted =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[53]++, [...responseTimes].sort((a, b) => {
    /* istanbul ignore next */
    cov_1r2ei0aqos().f[12]++;
    cov_1r2ei0aqos().s[54]++;
    return a - b;
  }));
  const median =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[55]++, sorted.length > 0 ?
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[14][0]++, sorted[Math.floor(sorted.length / 2)]) :
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[14][1]++, 0));
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[56]++;
  return {
    average: Math.round(average / (1000 * 60)),
    median: Math.round(median / (1000 * 60)),
    sampleSize: responseTimes.length
  };
}
async function calculateTrends(supabase, organizationId) {
  /* istanbul ignore next */
  cov_1r2ei0aqos().f[13]++;
  const now =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[57]++, new Date());
  const last24h =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[58]++, new Date(now.getTime() - 24 * 60 * 60 * 1000));
  const previous24h =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[59]++, new Date(now.getTime() - 48 * 60 * 60 * 1000));
  const [currentPeriod, previousPeriod] =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[60]++, await Promise.all([getPeriodMetrics(supabase, organizationId, last24h, now), getPeriodMetrics(supabase, organizationId, previous24h, last24h)]));
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[61]++;
  return {
    messages: calculatePercentageChange(currentPeriod.messages, previousPeriod.messages),
    conversations: calculatePercentageChange(currentPeriod.conversations, previousPeriod.conversations),
    responseTime: calculatePercentageChange(previousPeriod.responseTime, currentPeriod.responseTime) // Inverted for response time
  };
}
async function getPeriodMetrics(supabase, organizationId, startDate, endDate) {
  /* istanbul ignore next */
  cov_1r2ei0aqos().f[14]++;
  const [messagesData, conversationsData] =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[62]++, await Promise.all([supabase.from('messages').select('id, conversation_id').eq('organization_id', organizationId).gte('created_at', startDate.toISOString()).lt('created_at', endDate.toISOString()), supabase.from('conversations').select('id').eq('organization_id', organizationId).gte('created_at', startDate.toISOString()).lt('created_at', endDate.toISOString())]));
  const messages =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[63]++,
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[15][0]++, messagesData.data) ||
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[15][1]++, []));
  const conversations =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[64]++,
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[16][0]++, conversationsData.data) ||
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[16][1]++, []));
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[65]++;
  return {
    messages: messages.length,
    conversations: conversations.length,
    responseTime: 0 // Simplified for now
  };
}
function calculatePercentageChange(current, previous) {
  /* istanbul ignore next */
  cov_1r2ei0aqos().f[15]++;
  cov_1r2ei0aqos().s[66]++;
  if (previous === 0) {
    /* istanbul ignore next */
    cov_1r2ei0aqos().b[17][0]++;
    cov_1r2ei0aqos().s[67]++;
    return current > 0 ?
    /* istanbul ignore next */
    (cov_1r2ei0aqos().b[18][0]++, 100) :
    /* istanbul ignore next */
    (cov_1r2ei0aqos().b[18][1]++, 0);
  } else
  /* istanbul ignore next */
  {
    cov_1r2ei0aqos().b[17][1]++;
  }
  cov_1r2ei0aqos().s[68]++;
  return Math.round((current - previous) / previous * 100);
}
async function getMessagesPerHour(supabase, organizationId) {
  /* istanbul ignore next */
  cov_1r2ei0aqos().f[16]++;
  const last24Hours =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[69]++, new Date(Date.now() - 24 * 60 * 60 * 1000));
  const {
    data: messages
  } =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[70]++, await supabase.from('messages').select('created_at').eq('organization_id', organizationId).gte('created_at', last24Hours.toISOString()));
  const hourlyData =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[71]++, {});
  const now =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[72]++, new Date());
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[73]++;
  for (let i =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[74]++, 23); i >= 0; i--) {
    const hour =
    /* istanbul ignore next */
    (cov_1r2ei0aqos().s[75]++, new Date(now.getTime() - i * 60 * 60 * 1000));
    const hourKey =
    /* istanbul ignore next */
    (cov_1r2ei0aqos().s[76]++, hour.getHours());
    /* istanbul ignore next */
    cov_1r2ei0aqos().s[77]++;
    hourlyData[hourKey] = 0;
  }
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[78]++;
  for (const message of
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[19][0]++, messages) ||
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[19][1]++, [])) {
    const hour =
    /* istanbul ignore next */
    (cov_1r2ei0aqos().s[79]++, new Date(message.created_at).getHours());
    /* istanbul ignore next */
    cov_1r2ei0aqos().s[80]++;
    hourlyData[hour] = (
    /* istanbul ignore next */
    (cov_1r2ei0aqos().b[20][0]++, hourlyData[hour]) ||
    /* istanbul ignore next */
    (cov_1r2ei0aqos().b[20][1]++, 0)) + 1;
  }
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[81]++;
  return Object.entries(hourlyData).map(([hour, count]) => {
    /* istanbul ignore next */
    cov_1r2ei0aqos().f[17]++;
    cov_1r2ei0aqos().s[82]++;
    return {
      hour: parseInt(hour),
      count: count
    };
  });
}
async function getTopActiveAgents(supabase, organizationId) {
  /* istanbul ignore next */
  cov_1r2ei0aqos().f[18]++;
  const today =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[83]++, new Date().toISOString().split('T')[0]);
  const {
    data: agents
  } =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[84]++, await supabase.from('profiles').select(`
      id,
      full_name,
      messages!inner (
        id
      )
    `).eq('organization_id', organizationId).gte('messages.created_at', `${today}T00:00:00.000Z`).eq('messages.sender_type', 'agent'));
  const agentStats =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[85]++, {});
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[86]++;
  for (const agent of
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[21][0]++, agents) ||
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[21][1]++, [])) {
    /* istanbul ignore next */
    cov_1r2ei0aqos().s[87]++;
    if (!agentStats[agent.id]) {
      /* istanbul ignore next */
      cov_1r2ei0aqos().b[22][0]++;
      cov_1r2ei0aqos().s[88]++;
      agentStats[agent.id] = {
        id: agent.id,
        name:
        /* istanbul ignore next */
        (cov_1r2ei0aqos().b[23][0]++, agent.full_name) ||
        /* istanbul ignore next */
        (cov_1r2ei0aqos().b[23][1]++, 'Unknown Agent'),
        messageCount: 0
      };
    } else
    /* istanbul ignore next */
    {
      cov_1r2ei0aqos().b[22][1]++;
    }
    cov_1r2ei0aqos().s[89]++;
    agentStats[agent.id].messageCount += agent.messages.length;
  }
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[90]++;
  return Object.values(agentStats).sort((a, b) => {
    /* istanbul ignore next */
    cov_1r2ei0aqos().f[19]++;
    cov_1r2ei0aqos().s[91]++;
    return b.messageCount - a.messageCount;
  }).slice(0, 5);
}
async function getRecentActivity(supabase, organizationId) {
  /* istanbul ignore next */
  cov_1r2ei0aqos().f[20]++;
  const thirtyMinutesAgo =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[92]++, new Date(Date.now() - 30 * 60 * 1000));
  const {
    data: activities
  } =
  /* istanbul ignore next */
  (cov_1r2ei0aqos().s[93]++, await supabase.from('messages').select(`
      id,
      content,
      sender_type,
      created_at,
      conversations (
        contacts (
          name
        )
      ),
      profiles (
        full_name
      )
    `).eq('organization_id', organizationId).gte('created_at', thirtyMinutesAgo.toISOString()).order('created_at', {
    ascending: false
  }).limit(10));
  /* istanbul ignore next */
  cov_1r2ei0aqos().s[94]++;
  return (
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[24][0]++, activities) ||
  /* istanbul ignore next */
  (cov_1r2ei0aqos().b[24][1]++, [])).map(activity => {
    /* istanbul ignore next */
    cov_1r2ei0aqos().f[21]++;
    cov_1r2ei0aqos().s[95]++;
    return {
      id: activity.id,
      type: activity.sender_type === 'contact' ?
      /* istanbul ignore next */
      (cov_1r2ei0aqos().b[25][0]++, 'incoming') :
      /* istanbul ignore next */
      (cov_1r2ei0aqos().b[25][1]++, 'outgoing'),
      preview: activity.content.substring(0, 50) + (activity.content.length > 50 ?
      /* istanbul ignore next */
      (cov_1r2ei0aqos().b[26][0]++, '...') :
      /* istanbul ignore next */
      (cov_1r2ei0aqos().b[26][1]++, '')),
      contactName:
      /* istanbul ignore next */
      (cov_1r2ei0aqos().b[27][0]++, activity.conversations?.contacts?.name) ||
      /* istanbul ignore next */
      (cov_1r2ei0aqos().b[27][1]++, 'Unknown'),
      agentName: activity.profiles?.full_name,
      timestamp: activity.created_at
    };
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXIyZWkwYXFvcyIsImFjdHVhbENvdmVyYWdlIiwicyIsIkdFVCIsIl9yZXF1ZXN0IiwiZiIsInVzZXIiLCJfYXBpdXRpbHMiLCJyZXF1aXJlQXV0aGVudGljYXRlZFVzZXIiLCJwcm9maWxlIiwiZ2V0VXNlck9yZ2FuaXphdGlvbiIsImlkIiwic3VwYWJhc2UiLCJfc2VydmVyIiwiY3JlYXRlQ2xpZW50IiwiYWN0aXZlQ29udmVyc2F0aW9ucyIsInRvZGF5TWVzc2FnZXMiLCJhY3RpdmVBZ2VudHMiLCJwZW5kaW5nQ29udmVyc2F0aW9ucyIsInVucmVhZE1lc3NhZ2VzIiwicmVzcG9uc2VUaW1lRGF0YSIsIlByb21pc2UiLCJhbGwiLCJnZXRBY3RpdmVDb252ZXJzYXRpb25zIiwib3JnYW5pemF0aW9uX2lkIiwiZ2V0VG9kYXlNZXNzYWdlcyIsImdldEFjdGl2ZUFnZW50cyIsImdldFBlbmRpbmdDb252ZXJzYXRpb25zIiwiZ2V0VW5yZWFkTWVzc2FnZXMiLCJnZXRSZWNlbnRSZXNwb25zZVRpbWVzIiwidHJlbmRzIiwiY2FsY3VsYXRlVHJlbmRzIiwiY3JlYXRlU3VjY2Vzc1Jlc3BvbnNlIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibWV0cmljcyIsImF2ZXJhZ2VSZXNwb25zZVRpbWUiLCJhdmVyYWdlIiwibWVkaWFuUmVzcG9uc2VUaW1lIiwibWVkaWFuIiwibGl2ZURhdGEiLCJjb252ZXJzYXRpb25zVG9kYXkiLCJjb252ZXJzYXRpb25zIiwibWVzc2FnZXNQZXJIb3VyIiwiZ2V0TWVzc2FnZXNQZXJIb3VyIiwidG9wQWN0aXZlQWdlbnRzIiwiZ2V0VG9wQWN0aXZlQWdlbnRzIiwicmVjZW50QWN0aXZpdHkiLCJnZXRSZWNlbnRBY3Rpdml0eSIsImVycm9yIiwiY29uc29sZSIsImNyZWF0ZUVycm9yUmVzcG9uc2UiLCJvcmdhbml6YXRpb25JZCIsImRhdGEiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJpbiIsImIiLCJsZW5ndGgiLCJ0b2RheSIsInNwbGl0IiwiZ3RlIiwibHRlIiwibWVzc2FnZXMiLCJTZXQiLCJtYXAiLCJtIiwiY29udmVyc2F0aW9uX2lkIiwidG90YWwiLCJpbmJvdW5kIiwiZmlsdGVyIiwic2VuZGVyX3R5cGUiLCJvdXRib3VuZCIsInNpemUiLCJmaWZ0ZWVuTWludXRlc0FnbyIsIm5vdyIsIm9uZUhvdXJBZ28iLCJhZ2VudE1lc3NhZ2VzIiwib3JkZXIiLCJhc2NlbmRpbmciLCJyZXNwb25zZVRpbWVzIiwiYWdlbnRNc2ciLCJjb250YWN0TXNnIiwibHQiLCJjcmVhdGVkX2F0IiwibGltaXQiLCJzaW5nbGUiLCJyZXNwb25zZVRpbWUiLCJnZXRUaW1lIiwicHVzaCIsInJlZHVjZSIsInN1bSIsInRpbWUiLCJzb3J0ZWQiLCJzb3J0IiwiYSIsIk1hdGgiLCJmbG9vciIsInJvdW5kIiwic2FtcGxlU2l6ZSIsImxhc3QyNGgiLCJwcmV2aW91czI0aCIsImN1cnJlbnRQZXJpb2QiLCJwcmV2aW91c1BlcmlvZCIsImdldFBlcmlvZE1ldHJpY3MiLCJjYWxjdWxhdGVQZXJjZW50YWdlQ2hhbmdlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsIm1lc3NhZ2VzRGF0YSIsImNvbnZlcnNhdGlvbnNEYXRhIiwiY3VycmVudCIsInByZXZpb3VzIiwibGFzdDI0SG91cnMiLCJob3VybHlEYXRhIiwiaSIsImhvdXIiLCJob3VyS2V5IiwiZ2V0SG91cnMiLCJtZXNzYWdlIiwiT2JqZWN0IiwiZW50cmllcyIsImNvdW50IiwicGFyc2VJbnQiLCJhZ2VudHMiLCJhZ2VudFN0YXRzIiwiYWdlbnQiLCJuYW1lIiwiZnVsbF9uYW1lIiwibWVzc2FnZUNvdW50IiwidmFsdWVzIiwic2xpY2UiLCJ0aGlydHlNaW51dGVzQWdvIiwiYWN0aXZpdGllcyIsImFjdGl2aXR5IiwidHlwZSIsInByZXZpZXciLCJjb250ZW50Iiwic3Vic3RyaW5nIiwiY29udGFjdE5hbWUiLCJjb250YWN0cyIsImFnZW50TmFtZSIsInByb2ZpbGVzIl0sInNvdXJjZXMiOlsiQzpcXEFpIFByb2plY3RlblxcQURTYXBwXFxzcmNcXGFwcFxcYXBpXFxhbmFseXRpY3NcXHJlYWx0aW1lXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgcmVxdWlyZUF1dGhlbnRpY2F0ZWRVc2VyLCBnZXRVc2VyT3JnYW5pemF0aW9uLCBjcmVhdGVFcnJvclJlc3BvbnNlLCBjcmVhdGVTdWNjZXNzUmVzcG9uc2UgfSBmcm9tICdAL2xpYi9hcGktdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9zZXJ2ZXInXG5pbXBvcnQgeyBTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcbmltcG9ydCB7IERhdGFiYXNlIH0gZnJvbSAnQC90eXBlcy9kYXRhYmFzZSdcblxudHlwZSBUeXBlZFN1cGFiYXNlQ2xpZW50ID0gU3VwYWJhc2VDbGllbnQ8RGF0YWJhc2U+XG5cbmludGVyZmFjZSBSZWFsdGltZU1ldHJpY3Mge1xuICBhY3RpdmVDb252ZXJzYXRpb25zOiBudW1iZXJcbiAgdG9kYXlNZXNzYWdlczoge1xuICAgIHRvdGFsOiBudW1iZXJcbiAgICBpbmJvdW5kOiBudW1iZXJcbiAgICBvdXRib3VuZDogbnVtYmVyXG4gICAgY29udmVyc2F0aW9uczogbnVtYmVyXG4gIH1cbiAgYWN0aXZlQWdlbnRzOiBudW1iZXJcbiAgcGVuZGluZ0NvbnZlcnNhdGlvbnM6IG51bWJlclxuICB1bnJlYWRNZXNzYWdlczogbnVtYmVyXG4gIGF2ZXJhZ2VSZXNwb25zZVRpbWU6IG51bWJlclxuICBtZWRpYW5SZXNwb25zZVRpbWU6IG51bWJlclxufVxuXG5pbnRlcmZhY2UgVHJlbmREYXRhIHtcbiAgbWVzc2FnZXM6IG51bWJlclxuICBjb252ZXJzYXRpb25zOiBudW1iZXJcbiAgcmVzcG9uc2VUaW1lOiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIEhvdXJseURhdGEge1xuICBob3VyOiBudW1iZXJcbiAgY291bnQ6IG51bWJlclxufVxuXG5pbnRlcmZhY2UgQWdlbnRTdGF0cyB7XG4gIGlkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIG1lc3NhZ2VDb3VudDogbnVtYmVyXG59XG5cbmludGVyZmFjZSBBY3Rpdml0eUl0ZW0ge1xuICBpZDogc3RyaW5nXG4gIHR5cGU6ICdpbmNvbWluZycgfCAnb3V0Z29pbmcnXG4gIHByZXZpZXc6IHN0cmluZ1xuICBjb250YWN0TmFtZTogc3RyaW5nXG4gIGFnZW50TmFtZT86IHN0cmluZ1xuICB0aW1lc3RhbXA6IHN0cmluZ1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKF9yZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIEF1dGhlbnRpY2F0ZSB1c2VyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHJlcXVpcmVBdXRoZW50aWNhdGVkVXNlcigpXG4gICAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IGdldFVzZXJPcmdhbml6YXRpb24odXNlci5pZClcblxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KClcblxuICAgIC8vIEdldCByZWFsLXRpbWUgbWV0cmljc1xuICAgIGNvbnN0IFtcbiAgICAgIGFjdGl2ZUNvbnZlcnNhdGlvbnMsXG4gICAgICB0b2RheU1lc3NhZ2VzLFxuICAgICAgYWN0aXZlQWdlbnRzLFxuICAgICAgcGVuZGluZ0NvbnZlcnNhdGlvbnMsXG4gICAgICB1bnJlYWRNZXNzYWdlcyxcbiAgICAgIHJlc3BvbnNlVGltZURhdGFcbiAgICBdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgZ2V0QWN0aXZlQ29udmVyc2F0aW9ucyhzdXBhYmFzZSwgcHJvZmlsZS5vcmdhbml6YXRpb25faWQhKSxcbiAgICAgIGdldFRvZGF5TWVzc2FnZXMoc3VwYWJhc2UsIHByb2ZpbGUub3JnYW5pemF0aW9uX2lkISksXG4gICAgICBnZXRBY3RpdmVBZ2VudHMoc3VwYWJhc2UsIHByb2ZpbGUub3JnYW5pemF0aW9uX2lkISksXG4gICAgICBnZXRQZW5kaW5nQ29udmVyc2F0aW9ucyhzdXBhYmFzZSwgcHJvZmlsZS5vcmdhbml6YXRpb25faWQhKSxcbiAgICAgIGdldFVucmVhZE1lc3NhZ2VzKHN1cGFiYXNlLCBwcm9maWxlLm9yZ2FuaXphdGlvbl9pZCEpLFxuICAgICAgZ2V0UmVjZW50UmVzcG9uc2VUaW1lcyhzdXBhYmFzZSwgcHJvZmlsZS5vcmdhbml6YXRpb25faWQhKVxuICAgIF0pXG5cbiAgICAvLyBDYWxjdWxhdGUgdHJlbmRzIChsYXN0IDI0aCB2cyBwcmV2aW91cyAyNGgpXG4gICAgY29uc3QgdHJlbmRzID0gYXdhaXQgY2FsY3VsYXRlVHJlbmRzKHN1cGFiYXNlLCBwcm9maWxlLm9yZ2FuaXphdGlvbl9pZCEpXG5cbiAgICByZXR1cm4gY3JlYXRlU3VjY2Vzc1Jlc3BvbnNlKHtcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgbWV0cmljczoge1xuICAgICAgICBhY3RpdmVDb252ZXJzYXRpb25zLFxuICAgICAgICB0b2RheU1lc3NhZ2VzLFxuICAgICAgICBhY3RpdmVBZ2VudHMsXG4gICAgICAgIHBlbmRpbmdDb252ZXJzYXRpb25zLFxuICAgICAgICB1bnJlYWRNZXNzYWdlcyxcbiAgICAgICAgYXZlcmFnZVJlc3BvbnNlVGltZTogcmVzcG9uc2VUaW1lRGF0YS5hdmVyYWdlLFxuICAgICAgICBtZWRpYW5SZXNwb25zZVRpbWU6IHJlc3BvbnNlVGltZURhdGEubWVkaWFuXG4gICAgICB9LFxuICAgICAgdHJlbmRzLFxuICAgICAgbGl2ZURhdGE6IHtcbiAgICAgICAgY29udmVyc2F0aW9uc1RvZGF5OiB0b2RheU1lc3NhZ2VzLmNvbnZlcnNhdGlvbnMsXG4gICAgICAgIG1lc3NhZ2VzUGVySG91cjogYXdhaXQgZ2V0TWVzc2FnZXNQZXJIb3VyKHN1cGFiYXNlLCBwcm9maWxlLm9yZ2FuaXphdGlvbl9pZCEpLFxuICAgICAgICB0b3BBY3RpdmVBZ2VudHM6IGF3YWl0IGdldFRvcEFjdGl2ZUFnZW50cyhzdXBhYmFzZSwgcHJvZmlsZS5vcmdhbml6YXRpb25faWQhKSxcbiAgICAgICAgcmVjZW50QWN0aXZpdHk6IGF3YWl0IGdldFJlY2VudEFjdGl2aXR5KHN1cGFiYXNlLCBwcm9maWxlLm9yZ2FuaXphdGlvbl9pZCEpXG4gICAgICB9XG4gICAgfSlcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1JlYWwtdGltZSBhbmFseXRpY3MgZXJyb3I6JywgZXJyb3IpXG4gICAgcmV0dXJuIGNyZWF0ZUVycm9yUmVzcG9uc2UoZXJyb3IpXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0QWN0aXZlQ29udmVyc2F0aW9ucyhzdXBhYmFzZTogVHlwZWRTdXBhYmFzZUNsaWVudCwgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyPiB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2NvbnZlcnNhdGlvbnMnKVxuICAgIC5zZWxlY3QoJ2lkJylcbiAgICAuZXEoJ29yZ2FuaXphdGlvbl9pZCcsIG9yZ2FuaXphdGlvbklkKVxuICAgIC5pbignc3RhdHVzJywgWydvcGVuJywgJ3BlbmRpbmcnXSlcblxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG4gIHJldHVybiBkYXRhPy5sZW5ndGggfHwgMFxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRUb2RheU1lc3NhZ2VzKHN1cGFiYXNlOiBUeXBlZFN1cGFiYXNlQ2xpZW50LCBvcmdhbml6YXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTx7IHRvdGFsOiBudW1iZXI7IGluYm91bmQ6IG51bWJlcjsgb3V0Ym91bmQ6IG51bWJlcjsgY29udmVyc2F0aW9uczogbnVtYmVyIH0+IHtcbiAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXVxuXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ21lc3NhZ2VzJylcbiAgICAuc2VsZWN0KCdzZW5kZXJfdHlwZSwgY29udmVyc2F0aW9uX2lkJylcbiAgICAuZXEoJ29yZ2FuaXphdGlvbl9pZCcsIG9yZ2FuaXphdGlvbklkKVxuICAgIC5ndGUoJ2NyZWF0ZWRfYXQnLCBgJHt0b2RheX1UMDA6MDA6MDAuMDAwWmApXG4gICAgLmx0ZSgnY3JlYXRlZF9hdCcsIGAke3RvZGF5fVQyMzo1OTo1OS45OTlaYClcblxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG5cbiAgY29uc3QgbWVzc2FnZXMgPSBkYXRhIHx8IFtdXG4gIGNvbnN0IGNvbnZlcnNhdGlvbnMgPSBuZXcgU2V0KG1lc3NhZ2VzLm1hcChtID0+IG0uY29udmVyc2F0aW9uX2lkKSlcblxuICByZXR1cm4ge1xuICAgIHRvdGFsOiBtZXNzYWdlcy5sZW5ndGgsXG4gICAgaW5ib3VuZDogbWVzc2FnZXMuZmlsdGVyKG0gPT4gbS5zZW5kZXJfdHlwZSA9PT0gJ2NvbnRhY3QnKS5sZW5ndGgsXG4gICAgb3V0Ym91bmQ6IG1lc3NhZ2VzLmZpbHRlcihtID0+IG0uc2VuZGVyX3R5cGUgPT09ICdhZ2VudCcpLmxlbmd0aCxcbiAgICBjb252ZXJzYXRpb25zOiBjb252ZXJzYXRpb25zLnNpemVcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRBY3RpdmVBZ2VudHMoc3VwYWJhc2U6IFR5cGVkU3VwYWJhc2VDbGllbnQsIG9yZ2FuaXphdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcj4ge1xuICBjb25zdCBmaWZ0ZWVuTWludXRlc0FnbyA9IG5ldyBEYXRlKERhdGUubm93KCkgLSAxNSAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKVxuXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3Byb2ZpbGVzJylcbiAgICAuc2VsZWN0KCdpZCwgZnVsbF9uYW1lLCBsYXN0X3NlZW5fYXQnKVxuICAgIC5lcSgnb3JnYW5pemF0aW9uX2lkJywgb3JnYW5pemF0aW9uSWQpXG4gICAgLmVxKCdpc19hY3RpdmUnLCB0cnVlKVxuICAgIC5ndGUoJ2xhc3Rfc2Vlbl9hdCcsIGZpZnRlZW5NaW51dGVzQWdvKVxuXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcbiAgcmV0dXJuIGRhdGE/Lmxlbmd0aCB8fCAwXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFBlbmRpbmdDb252ZXJzYXRpb25zKHN1cGFiYXNlOiBUeXBlZFN1cGFiYXNlQ2xpZW50LCBvcmdhbml6YXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnY29udmVyc2F0aW9ucycpXG4gICAgLnNlbGVjdCgnaWQnKVxuICAgIC5lcSgnb3JnYW5pemF0aW9uX2lkJywgb3JnYW5pemF0aW9uSWQpXG4gICAgLmVxKCdzdGF0dXMnLCAncGVuZGluZycpXG5cbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuICByZXR1cm4gZGF0YT8ubGVuZ3RoIHx8IDBcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0VW5yZWFkTWVzc2FnZXMoc3VwYWJhc2U6IFR5cGVkU3VwYWJhc2VDbGllbnQsIG9yZ2FuaXphdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcj4ge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdtZXNzYWdlcycpXG4gICAgLnNlbGVjdCgnaWQnKVxuICAgIC5lcSgnb3JnYW5pemF0aW9uX2lkJywgb3JnYW5pemF0aW9uSWQpXG4gICAgLmVxKCdzZW5kZXJfdHlwZScsICdjb250YWN0JylcbiAgICAuZXEoJ2lzX3JlYWQnLCBmYWxzZSlcblxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG4gIHJldHVybiBkYXRhPy5sZW5ndGggfHwgMFxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRSZWNlbnRSZXNwb25zZVRpbWVzKHN1cGFiYXNlOiBUeXBlZFN1cGFiYXNlQ2xpZW50LCBvcmdhbml6YXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTx7IGF2ZXJhZ2U6IG51bWJlcjsgbWVkaWFuOiBudW1iZXI7IHNhbXBsZVNpemU6IG51bWJlciB9PiB7XG4gIC8vIEdldCByZWNlbnQgYWdlbnQgcmVzcG9uc2VzIHdpdGggdGhlaXIgY29ycmVzcG9uZGluZyBpbmNvbWluZyBtZXNzYWdlc1xuICBjb25zdCBvbmVIb3VyQWdvID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpXG5cbiAgY29uc3QgeyBkYXRhOiBhZ2VudE1lc3NhZ2VzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnbWVzc2FnZXMnKVxuICAgIC5zZWxlY3QoJ2NvbnZlcnNhdGlvbl9pZCwgY3JlYXRlZF9hdCcpXG4gICAgLmVxKCdvcmdhbml6YXRpb25faWQnLCBvcmdhbml6YXRpb25JZClcbiAgICAuZXEoJ3NlbmRlcl90eXBlJywgJ2FnZW50JylcbiAgICAuZ3RlKCdjcmVhdGVkX2F0Jywgb25lSG91ckFnbylcbiAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxuXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcblxuICBjb25zdCByZXNwb25zZVRpbWVzID0gW11cblxuICBmb3IgKGNvbnN0IGFnZW50TXNnIG9mIGFnZW50TWVzc2FnZXMgfHwgW10pIHtcbiAgICAvLyBGaW5kIHRoZSBtb3N0IHJlY2VudCBjb250YWN0IG1lc3NhZ2UgYmVmb3JlIHRoaXMgYWdlbnQgbWVzc2FnZVxuICAgIGNvbnN0IHsgZGF0YTogY29udGFjdE1zZyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdtZXNzYWdlcycpXG4gICAgICAuc2VsZWN0KCdjcmVhdGVkX2F0JylcbiAgICAgIC5lcSgnY29udmVyc2F0aW9uX2lkJywgYWdlbnRNc2cuY29udmVyc2F0aW9uX2lkKVxuICAgICAgLmVxKCdzZW5kZXJfdHlwZScsICdjb250YWN0JylcbiAgICAgIC5sdCgnY3JlYXRlZF9hdCcsIGFnZW50TXNnLmNyZWF0ZWRfYXQpXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAgIC5saW1pdCgxKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAoY29udGFjdE1zZykge1xuICAgICAgY29uc3QgcmVzcG9uc2VUaW1lID0gbmV3IERhdGUoYWdlbnRNc2cuY3JlYXRlZF9hdCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoY29udGFjdE1zZy5jcmVhdGVkX2F0KS5nZXRUaW1lKClcbiAgICAgIHJlc3BvbnNlVGltZXMucHVzaChyZXNwb25zZVRpbWUpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgYXZlcmFnZSA9IHJlc3BvbnNlVGltZXMubGVuZ3RoID4gMFxuICAgID8gcmVzcG9uc2VUaW1lcy5yZWR1Y2UoKHN1bSwgdGltZSkgPT4gc3VtICsgdGltZSwgMCkgLyByZXNwb25zZVRpbWVzLmxlbmd0aFxuICAgIDogMFxuXG4gIGNvbnN0IHNvcnRlZCA9IFsuLi5yZXNwb25zZVRpbWVzXS5zb3J0KChhLCBiKSA9PiBhIC0gYilcbiAgY29uc3QgbWVkaWFuID0gc29ydGVkLmxlbmd0aCA+IDBcbiAgICA/IHNvcnRlZFtNYXRoLmZsb29yKHNvcnRlZC5sZW5ndGggLyAyKV1cbiAgICA6IDBcblxuICByZXR1cm4ge1xuICAgIGF2ZXJhZ2U6IE1hdGgucm91bmQoYXZlcmFnZSAvICgxMDAwICogNjApKSwgLy8gbWludXRlc1xuICAgIG1lZGlhbjogTWF0aC5yb3VuZChtZWRpYW4gLyAoMTAwMCAqIDYwKSksIC8vIG1pbnV0ZXNcbiAgICBzYW1wbGVTaXplOiByZXNwb25zZVRpbWVzLmxlbmd0aFxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNhbGN1bGF0ZVRyZW5kcyhzdXBhYmFzZTogVHlwZWRTdXBhYmFzZUNsaWVudCwgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8VHJlbmREYXRhPiB7XG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgY29uc3QgbGFzdDI0aCA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKVxuICBjb25zdCBwcmV2aW91czI0aCA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSA0OCAqIDYwICogNjAgKiAxMDAwKVxuXG4gIGNvbnN0IFtjdXJyZW50UGVyaW9kLCBwcmV2aW91c1BlcmlvZF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0UGVyaW9kTWV0cmljcyhzdXBhYmFzZSwgb3JnYW5pemF0aW9uSWQsIGxhc3QyNGgsIG5vdyksXG4gICAgZ2V0UGVyaW9kTWV0cmljcyhzdXBhYmFzZSwgb3JnYW5pemF0aW9uSWQsIHByZXZpb3VzMjRoLCBsYXN0MjRoKVxuICBdKVxuXG4gIHJldHVybiB7XG4gICAgbWVzc2FnZXM6IGNhbGN1bGF0ZVBlcmNlbnRhZ2VDaGFuZ2UoY3VycmVudFBlcmlvZC5tZXNzYWdlcywgcHJldmlvdXNQZXJpb2QubWVzc2FnZXMpLFxuICAgIGNvbnZlcnNhdGlvbnM6IGNhbGN1bGF0ZVBlcmNlbnRhZ2VDaGFuZ2UoY3VycmVudFBlcmlvZC5jb252ZXJzYXRpb25zLCBwcmV2aW91c1BlcmlvZC5jb252ZXJzYXRpb25zKSxcbiAgICByZXNwb25zZVRpbWU6IGNhbGN1bGF0ZVBlcmNlbnRhZ2VDaGFuZ2UocHJldmlvdXNQZXJpb2QucmVzcG9uc2VUaW1lLCBjdXJyZW50UGVyaW9kLnJlc3BvbnNlVGltZSkgLy8gSW52ZXJ0ZWQgZm9yIHJlc3BvbnNlIHRpbWVcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRQZXJpb2RNZXRyaWNzKHN1cGFiYXNlOiBUeXBlZFN1cGFiYXNlQ2xpZW50LCBvcmdhbml6YXRpb25JZDogc3RyaW5nLCBzdGFydERhdGU6IERhdGUsIGVuZERhdGU6IERhdGUpOiBQcm9taXNlPHsgbWVzc2FnZXM6IG51bWJlcjsgY29udmVyc2F0aW9uczogbnVtYmVyOyByZXNwb25zZVRpbWU6IG51bWJlciB9PiB7XG4gIGNvbnN0IFttZXNzYWdlc0RhdGEsIGNvbnZlcnNhdGlvbnNEYXRhXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBzdXBhYmFzZVxuICAgICAgLmZyb20oJ21lc3NhZ2VzJylcbiAgICAgIC5zZWxlY3QoJ2lkLCBjb252ZXJzYXRpb25faWQnKVxuICAgICAgLmVxKCdvcmdhbml6YXRpb25faWQnLCBvcmdhbml6YXRpb25JZClcbiAgICAgIC5ndGUoJ2NyZWF0ZWRfYXQnLCBzdGFydERhdGUudG9JU09TdHJpbmcoKSlcbiAgICAgIC5sdCgnY3JlYXRlZF9hdCcsIGVuZERhdGUudG9JU09TdHJpbmcoKSksXG5cbiAgICBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2NvbnZlcnNhdGlvbnMnKVxuICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgLmVxKCdvcmdhbml6YXRpb25faWQnLCBvcmdhbml6YXRpb25JZClcbiAgICAgIC5ndGUoJ2NyZWF0ZWRfYXQnLCBzdGFydERhdGUudG9JU09TdHJpbmcoKSlcbiAgICAgIC5sdCgnY3JlYXRlZF9hdCcsIGVuZERhdGUudG9JU09TdHJpbmcoKSlcbiAgXSlcblxuICBjb25zdCBtZXNzYWdlcyA9IG1lc3NhZ2VzRGF0YS5kYXRhIHx8IFtdXG4gIGNvbnN0IGNvbnZlcnNhdGlvbnMgPSBjb252ZXJzYXRpb25zRGF0YS5kYXRhIHx8IFtdXG5cbiAgcmV0dXJuIHtcbiAgICBtZXNzYWdlczogbWVzc2FnZXMubGVuZ3RoLFxuICAgIGNvbnZlcnNhdGlvbnM6IGNvbnZlcnNhdGlvbnMubGVuZ3RoLFxuICAgIHJlc3BvbnNlVGltZTogMCAvLyBTaW1wbGlmaWVkIGZvciBub3dcbiAgfVxufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVQZXJjZW50YWdlQ2hhbmdlKGN1cnJlbnQ6IG51bWJlciwgcHJldmlvdXM6IG51bWJlcik6IG51bWJlciB7XG4gIGlmIChwcmV2aW91cyA9PT0gMCkgcmV0dXJuIGN1cnJlbnQgPiAwID8gMTAwIDogMFxuICByZXR1cm4gTWF0aC5yb3VuZCgoKGN1cnJlbnQgLSBwcmV2aW91cykgLyBwcmV2aW91cykgKiAxMDApXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldE1lc3NhZ2VzUGVySG91cihzdXBhYmFzZTogVHlwZWRTdXBhYmFzZUNsaWVudCwgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8SG91cmx5RGF0YVtdPiB7XG4gIGNvbnN0IGxhc3QyNEhvdXJzID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDI0ICogNjAgKiA2MCAqIDEwMDApXG5cbiAgY29uc3QgeyBkYXRhOiBtZXNzYWdlcyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnbWVzc2FnZXMnKVxuICAgIC5zZWxlY3QoJ2NyZWF0ZWRfYXQnKVxuICAgIC5lcSgnb3JnYW5pemF0aW9uX2lkJywgb3JnYW5pemF0aW9uSWQpXG4gICAgLmd0ZSgnY3JlYXRlZF9hdCcsIGxhc3QyNEhvdXJzLnRvSVNPU3RyaW5nKCkpXG5cbiAgY29uc3QgaG91cmx5RGF0YTogUmVjb3JkPG51bWJlciwgbnVtYmVyPiA9IHt9XG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcblxuICBmb3IgKGxldCBpID0gMjM7IGkgPj0gMDsgaS0tKSB7XG4gICAgY29uc3QgaG91ciA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSBpICogNjAgKiA2MCAqIDEwMDApXG4gICAgY29uc3QgaG91cktleSA9IGhvdXIuZ2V0SG91cnMoKVxuICAgIGhvdXJseURhdGFbaG91cktleV0gPSAwXG4gIH1cblxuICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMgfHwgW10pIHtcbiAgICBjb25zdCBob3VyID0gbmV3IERhdGUobWVzc2FnZS5jcmVhdGVkX2F0KS5nZXRIb3VycygpXG4gICAgaG91cmx5RGF0YVtob3VyXSA9IChob3VybHlEYXRhW2hvdXJdIHx8IDApICsgMVxuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGhvdXJseURhdGEpLm1hcCgoW2hvdXIsIGNvdW50XSkgPT4gKHtcbiAgICBob3VyOiBwYXJzZUludChob3VyKSxcbiAgICBjb3VudDogY291bnQgYXMgbnVtYmVyXG4gIH0pKVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRUb3BBY3RpdmVBZ2VudHMoc3VwYWJhc2U6IFR5cGVkU3VwYWJhc2VDbGllbnQsIG9yZ2FuaXphdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPEFnZW50U3RhdHNbXT4ge1xuICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdXG5cbiAgY29uc3QgeyBkYXRhOiBhZ2VudHMgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3Byb2ZpbGVzJylcbiAgICAuc2VsZWN0KGBcbiAgICAgIGlkLFxuICAgICAgZnVsbF9uYW1lLFxuICAgICAgbWVzc2FnZXMhaW5uZXIgKFxuICAgICAgICBpZFxuICAgICAgKVxuICAgIGApXG4gICAgLmVxKCdvcmdhbml6YXRpb25faWQnLCBvcmdhbml6YXRpb25JZClcbiAgICAuZ3RlKCdtZXNzYWdlcy5jcmVhdGVkX2F0JywgYCR7dG9kYXl9VDAwOjAwOjAwLjAwMFpgKVxuICAgIC5lcSgnbWVzc2FnZXMuc2VuZGVyX3R5cGUnLCAnYWdlbnQnKVxuXG4gIGNvbnN0IGFnZW50U3RhdHM6IFJlY29yZDxzdHJpbmcsIEFnZW50U3RhdHM+ID0ge31cblxuICBmb3IgKGNvbnN0IGFnZW50IG9mIGFnZW50cyB8fCBbXSkge1xuICAgIGlmICghYWdlbnRTdGF0c1thZ2VudC5pZF0pIHtcbiAgICAgIGFnZW50U3RhdHNbYWdlbnQuaWRdID0ge1xuICAgICAgICBpZDogYWdlbnQuaWQsXG4gICAgICAgIG5hbWU6IGFnZW50LmZ1bGxfbmFtZSB8fCAnVW5rbm93biBBZ2VudCcsXG4gICAgICAgIG1lc3NhZ2VDb3VudDogMFxuICAgICAgfVxuICAgIH1cbiAgICBhZ2VudFN0YXRzW2FnZW50LmlkXS5tZXNzYWdlQ291bnQgKz0gKGFnZW50Lm1lc3NhZ2VzIGFzIHVua25vd25bXSkubGVuZ3RoXG4gIH1cblxuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhhZ2VudFN0YXRzKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLm1lc3NhZ2VDb3VudCAtIGEubWVzc2FnZUNvdW50KVxuICAgIC5zbGljZSgwLCA1KVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRSZWNlbnRBY3Rpdml0eShzdXBhYmFzZTogVHlwZWRTdXBhYmFzZUNsaWVudCwgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8QWN0aXZpdHlJdGVtW10+IHtcbiAgY29uc3QgdGhpcnR5TWludXRlc0FnbyA9IG5ldyBEYXRlKERhdGUubm93KCkgLSAzMCAqIDYwICogMTAwMClcblxuICBjb25zdCB7IGRhdGE6IGFjdGl2aXRpZXMgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ21lc3NhZ2VzJylcbiAgICAuc2VsZWN0KGBcbiAgICAgIGlkLFxuICAgICAgY29udGVudCxcbiAgICAgIHNlbmRlcl90eXBlLFxuICAgICAgY3JlYXRlZF9hdCxcbiAgICAgIGNvbnZlcnNhdGlvbnMgKFxuICAgICAgICBjb250YWN0cyAoXG4gICAgICAgICAgbmFtZVxuICAgICAgICApXG4gICAgICApLFxuICAgICAgcHJvZmlsZXMgKFxuICAgICAgICBmdWxsX25hbWVcbiAgICAgIClcbiAgICBgKVxuICAgIC5lcSgnb3JnYW5pemF0aW9uX2lkJywgb3JnYW5pemF0aW9uSWQpXG4gICAgLmd0ZSgnY3JlYXRlZF9hdCcsIHRoaXJ0eU1pbnV0ZXNBZ28udG9JU09TdHJpbmcoKSlcbiAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAubGltaXQoMTApXG5cbiAgcmV0dXJuIChhY3Rpdml0aWVzIHx8IFtdKS5tYXAoYWN0aXZpdHkgPT4gKHtcbiAgICBpZDogYWN0aXZpdHkuaWQsXG4gICAgdHlwZTogYWN0aXZpdHkuc2VuZGVyX3R5cGUgPT09ICdjb250YWN0JyA/ICdpbmNvbWluZycgOiAnb3V0Z29pbmcnLFxuICAgIHByZXZpZXc6IGFjdGl2aXR5LmNvbnRlbnQuc3Vic3RyaW5nKDAsIDUwKSArIChhY3Rpdml0eS5jb250ZW50Lmxlbmd0aCA+IDUwID8gJy4uLicgOiAnJyksXG4gICAgY29udGFjdE5hbWU6IChhY3Rpdml0eS5jb252ZXJzYXRpb25zIGFzIHsgY29udGFjdHM/OiB7IG5hbWU/OiBzdHJpbmcgfSB9IHwgbnVsbCk/LmNvbnRhY3RzPy5uYW1lIHx8ICdVbmtub3duJyxcbiAgICBhZ2VudE5hbWU6IChhY3Rpdml0eS5wcm9maWxlcyBhcyB7IGZ1bGxfbmFtZT86IHN0cmluZyB9IHwgbnVsbCk/LmZ1bGxfbmFtZSxcbiAgICB0aW1lc3RhbXA6IGFjdGl2aXR5LmNyZWF0ZWRfYXRcbiAgfSkpXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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SyxLQUFLLEtBQUs7RUFFekQsTUFBTTtJQUFFdkIsSUFBQSxFQUFNZ0Y7RUFBVSxDQUFFO0VBQUE7RUFBQSxDQUFBdEksY0FBQSxHQUFBRSxDQUFBLFFBQUcsTUFBTVUsUUFBQSxDQUNoQzJDLElBQUksQ0FBQyxZQUNMQyxNQUFNLENBQUM7Ozs7Ozs7Ozs7Ozs7S0FhUCxFQUNBQyxFQUFFLENBQUMsbUJBQW1CSixjQUFBLEVBQ3RCVSxHQUFHLENBQUMsY0FBY3NFLGdCQUFBLENBQWlCbEcsV0FBVyxJQUM5QzZDLEtBQUssQ0FBQyxjQUFjO0lBQUVDLFNBQUEsRUFBVztFQUFNLEdBQ3ZDTSxLQUFLLENBQUM7RUFBQTtFQUFBdkYsY0FBQSxHQUFBRSxDQUFBO0VBRVQsT0FBTztFQUFDO0VBQUEsQ0FBQUYsY0FBQSxHQUFBMkQsQ0FBQSxXQUFBMkUsVUFBQTtFQUFBO0VBQUEsQ0FBQXRJLGNBQUEsR0FBQTJELENBQUEsV0FBYyxFQUFFLEdBQUVRLEdBQUcsQ0FBQ29FLFFBQUEsSUFBYTtJQUFBO0lBQUF2SSxjQUFBLEdBQUFLLENBQUE7SUFBQUwsY0FBQSxHQUFBRSxDQUFBO0lBQUE7TUFDekNTLEVBQUEsRUFBSTRILFFBQUEsQ0FBUzVILEVBQUU7TUFDZjZILElBQUEsRUFBTUQsUUFBQSxDQUFTOUQsV0FBVyxLQUFLO01BQUE7TUFBQSxDQUFBekUsY0FBQSxHQUFBMkQsQ0FBQSxXQUFZO01BQUE7TUFBQSxDQUFBM0QsY0FBQSxHQUFBMkQsQ0FBQSxXQUFhO01BQ3hEOEUsT0FBQSxFQUFTRixRQUFBLENBQVNHLE9BQU8sQ0FBQ0MsU0FBUyxDQUFDLEdBQUcsT0FBT0osUUFBQSxDQUFTRyxPQUFPLENBQUM5RSxNQUFNLEdBQUc7TUFBQTtNQUFBLENBQUE1RCxjQUFBLEdBQUEyRCxDQUFBLFdBQUs7TUFBQTtNQUFBLENBQUEzRCxjQUFBLEdBQUEyRCxDQUFBLFdBQVEsRUFBQztNQUN0RmlGLFdBQUE7TUFBYTtNQUFBLENBQUE1SSxjQUFBLEdBQUEyRCxDQUFBLFdBQUE0RSxRQUFDLENBQVM1RixhQUFhLEVBQThDa0csUUFBQSxFQUFVYixJQUFBO01BQUE7TUFBQSxDQUFBaEksY0FBQSxHQUFBMkQsQ0FBQSxXQUFRO01BQ3BHbUYsU0FBQSxFQUFZUCxRQUFBLENBQVNRLFFBQVEsRUFBb0NkLFNBQUE7TUFDakVoRyxTQUFBLEVBQVdzRyxRQUFBLENBQVNqRDtJQUN0QjtFQUFBO0FBQ0YiLCJpZ25vcmVMaXN0IjpbXX0=