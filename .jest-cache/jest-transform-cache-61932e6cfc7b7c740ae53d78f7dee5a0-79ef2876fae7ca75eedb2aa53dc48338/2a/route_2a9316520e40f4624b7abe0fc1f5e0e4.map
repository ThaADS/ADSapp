{"version":3,"names":["DELETE","cov_31fu059r0","f","s","GET","OPTIONS","POST","request","params","token","b","length","_server","NextResponse","json","success","error","status","body","confirm","supabaseUrl","process","env","NEXT_PUBLIC_SUPABASE_URL","supabaseServiceKey","SUPABASE_SERVICE_ROLE_KEY","console","supabase","_supabasejs","createClient","sessionManager","_demo","DemoSessionManager","result","resetSessionData","response","data","reset_at","Date","toISOString","items_reset","itemsReset","contacts","conversations","messages","sessionResult","getSession","session","isValid","organizationId","organization_id","count","contactsCount","from","select","head","eq","conversationsCount","messagesCount","conversationIds","map","c","id","in","resetEvents","analytics","events","filter","event","action","session_info","scenario","business_scenario","created_at","progress","current_data","reset_history","times_reset","last_reset","timestamp","warning","adminKey","headers","get","DEMO_ADMIN_KEY","handleBulkExpiredReset","delete","deleted_at","session_token","demoOrganizations","like","deleted_sessions","message","twoHoursAgo","now","expiredOrganizations","org","deletedCount","total_found","expired_found","cleaned_at"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\app\\api\\demo\\reset\\[token]\\route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@supabase/supabase-js'\nimport { DemoSessionManager } from '@/lib/demo'\nimport { ResetDemoDataRequest, ResetDemoDataResponse } from '@/types/demo'\n\n/**\n * Reset demo data for a session\n * POST /api/demo/reset/[token]\n */\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: Promise<{ token: string }> }\n) {\n  try {\n    const { token } = await params\n\n    // Validate token\n    if (!token || token.length < 10) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: 'Invalid session token'\n        } as ResetDemoDataResponse,\n        { status: 400 }\n      )\n    }\n\n    // Parse request body\n    const body: ResetDemoDataRequest = await request.json()\n\n    // Validate confirmation\n    if (!body.confirm) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: 'Confirmation required. Set confirm: true to proceed with reset.'\n        } as ResetDemoDataResponse,\n        { status: 400 }\n      )\n    }\n\n    // Initialize Supabase client\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\n    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\n    if (!supabaseUrl || !supabaseServiceKey) {\n      console.error('Missing Supabase configuration')\n      return NextResponse.json(\n        {\n          success: false,\n          error: 'Service configuration error'\n        } as ResetDemoDataResponse,\n        { status: 500 }\n      )\n    }\n\n    const supabase = createClient(supabaseUrl, supabaseServiceKey)\n\n    // Reset demo session data\n    const sessionManager = new DemoSessionManager(supabase)\n    const result = await sessionManager.resetSessionData(token)\n\n    if (!result.success) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: result.error || 'Failed to reset demo data'\n        } as ResetDemoDataResponse,\n        { status: 400 }\n      )\n    }\n\n    const response: ResetDemoDataResponse = {\n      success: true,\n      data: {\n        reset_at: new Date().toISOString(),\n        items_reset: result.itemsReset || {\n          contacts: 0,\n          conversations: 0,\n          messages: 0\n        }\n      }\n    }\n\n    return NextResponse.json(response)\n\n  } catch (error) {\n    console.error('Error resetting demo data:', error)\n\n    return NextResponse.json(\n      {\n        success: false,\n        error: 'Failed to reset demo data. Please try again.'\n      } as ResetDemoDataResponse,\n      { status: 500 }\n    )\n  }\n}\n\n/**\n * Get reset information and preview what would be reset\n * GET /api/demo/reset/[token]\n */\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: Promise<{ token: string }> }\n) {\n  try {\n    const { token } = await params\n\n    // Validate token\n    if (!token || token.length < 10) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: 'Invalid session token'\n        },\n        { status: 400 }\n      )\n    }\n\n    // Initialize Supabase client\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\n    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\n    if (!supabaseUrl || !supabaseServiceKey) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: 'Service configuration error'\n        },\n        { status: 500 }\n      )\n    }\n\n    const supabase = createClient(supabaseUrl, supabaseServiceKey)\n\n    // Get session to verify it exists and get organization info\n    const sessionManager = new DemoSessionManager(supabase)\n    const sessionResult = await sessionManager.getSession(token)\n\n    if (!sessionResult.session || !sessionResult.isValid) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: 'Session not found or invalid'\n        },\n        { status: 404 }\n      )\n    }\n\n    // Get current data counts for the organization\n    const organizationId = sessionResult.session.organization_id\n\n    // Count contacts\n    const { count: contactsCount } = await supabase\n      .from('contacts')\n      .select('*', { count: 'exact', head: true })\n      .eq('organization_id', organizationId)\n\n    // Count conversations\n    const { count: conversationsCount } = await supabase\n      .from('conversations')\n      .select('*', { count: 'exact', head: true })\n      .eq('organization_id', organizationId)\n\n    // Count messages (through conversations)\n    const { data: conversations } = await supabase\n      .from('conversations')\n      .select('id')\n      .eq('organization_id', organizationId)\n\n    let messagesCount = 0\n    if (conversations && conversations.length > 0) {\n      const conversationIds = conversations.map(c => c.id)\n      const { count } = await supabase\n        .from('messages')\n        .select('*', { count: 'exact', head: true })\n        .in('conversation_id', conversationIds)\n\n      messagesCount = count || 0\n    }\n\n    // Get reset history for this session\n    const resetEvents = sessionResult.session.analytics.events.filter(\n      event => event.action === 'demo_data_reset'\n    )\n\n    return NextResponse.json({\n      success: true,\n      data: {\n        session_info: {\n          scenario: sessionResult.session.business_scenario,\n          organization_id: organizationId,\n          created_at: sessionResult.session.created_at,\n          progress: sessionResult.session.progress\n        },\n        current_data: {\n          contacts: contactsCount || 0,\n          conversations: conversationsCount || 0,\n          messages: messagesCount\n        },\n        reset_history: {\n          times_reset: resetEvents.length,\n          last_reset: resetEvents.length > 0\n            ? resetEvents[resetEvents.length - 1].timestamp\n            : null\n        },\n        warning: 'Resetting will permanently delete all demo data and restore original sample data for this scenario.'\n      }\n    })\n\n  } catch (error) {\n    console.error('Error getting reset information:', error)\n\n    return NextResponse.json(\n      {\n        success: false,\n        error: 'Failed to get reset information'\n      },\n      { status: 500 }\n    )\n  }\n}\n\n/**\n * Bulk reset multiple demo sessions (admin endpoint)\n * DELETE /api/demo/reset/[token]\n */\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: Promise<{ token: string }> }\n) {\n  try {\n    // This endpoint is for admin use to force-delete sessions\n    // Validate admin access here (check for admin API key, etc.)\n\n    const adminKey = request.headers.get('x-admin-key')\n\n    if (!adminKey || adminKey !== process.env.DEMO_ADMIN_KEY) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: 'Unauthorized - Admin access required'\n        },\n        { status: 401 }\n      )\n    }\n\n    const { token } = await params\n\n    // Special handling for bulk operations\n    if (token === 'all-expired') {\n      return await handleBulkExpiredReset(request)\n    }\n\n    // Validate token for single session deletion\n    if (!token || token.length < 10) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: 'Invalid session token'\n        },\n        { status: 400 }\n      )\n    }\n\n    // Initialize Supabase client\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\n    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\n    if (!supabaseUrl || !supabaseServiceKey) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: 'Service configuration error'\n        },\n        { status: 500 }\n      )\n    }\n\n    const supabase = createClient(supabaseUrl, supabaseServiceKey)\n\n    // Get session\n    const sessionManager = new DemoSessionManager(supabase)\n    const sessionResult = await sessionManager.getSession(token)\n\n    if (!sessionResult.session) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: 'Session not found'\n        },\n        { status: 404 }\n      )\n    }\n\n    // Delete organization and all related data\n    const organizationId = sessionResult.session.organization_id\n\n    // Delete in correct order due to foreign key constraints\n    // 1. Messages\n    const { data: conversations } = await supabase\n      .from('conversations')\n      .select('id')\n      .eq('organization_id', organizationId)\n\n    if (conversations && conversations.length > 0) {\n      const conversationIds = conversations.map(c => c.id)\n      await supabase\n        .from('messages')\n        .delete()\n        .in('conversation_id', conversationIds)\n    }\n\n    // 2. Conversations\n    await supabase\n      .from('conversations')\n      .delete()\n      .eq('organization_id', organizationId)\n\n    // 3. Contacts\n    await supabase\n      .from('contacts')\n      .delete()\n      .eq('organization_id', organizationId)\n\n    // 4. Profiles (if any demo users were created)\n    await supabase\n      .from('profiles')\n      .delete()\n      .eq('organization_id', organizationId)\n\n    // 5. Organization\n    await supabase\n      .from('organizations')\n      .delete()\n      .eq('id', organizationId)\n\n    return NextResponse.json({\n      success: true,\n      data: {\n        deleted_at: new Date().toISOString(),\n        organization_id: organizationId,\n        session_token: token\n      }\n    })\n\n  } catch (error) {\n    console.error('Error force deleting demo session:', error)\n\n    return NextResponse.json(\n      {\n        success: false,\n        error: 'Failed to delete demo session'\n      },\n      { status: 500 }\n    )\n  }\n}\n\n/**\n * Handle bulk cleanup of expired demo sessions\n */\nasync function handleBulkExpiredReset(request: NextRequest) {\n  try {\n    // Initialize Supabase client\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\n    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\n    if (!supabaseUrl || !supabaseServiceKey) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: 'Service configuration error'\n        },\n        { status: 500 }\n      )\n    }\n\n    const supabase = createClient(supabaseUrl, supabaseServiceKey)\n\n    // Find demo organizations (those with demo- prefix in slug)\n    const { data: demoOrganizations } = await supabase\n      .from('organizations')\n      .select('id, slug, created_at')\n      .like('slug', 'demo-%')\n\n    if (!demoOrganizations || demoOrganizations.length === 0) {\n      return NextResponse.json({\n        success: true,\n        data: {\n          deleted_sessions: 0,\n          message: 'No demo sessions found'\n        }\n      })\n    }\n\n    // Filter expired sessions (older than 2 hours)\n    const twoHoursAgo = new Date(Date.now() - 2 * 60 * 60 * 1000)\n    const expiredOrganizations = demoOrganizations.filter(org =>\n      new Date(org.created_at) < twoHoursAgo\n    )\n\n    let deletedCount = 0\n\n    // Delete expired demo organizations and their data\n    for (const org of expiredOrganizations) {\n      try {\n        // Delete in correct order\n        const { data: conversations } = await supabase\n          .from('conversations')\n          .select('id')\n          .eq('organization_id', org.id)\n\n        if (conversations && conversations.length > 0) {\n          const conversationIds = conversations.map(c => c.id)\n          await supabase\n            .from('messages')\n            .delete()\n            .in('conversation_id', conversationIds)\n        }\n\n        await supabase.from('conversations').delete().eq('organization_id', org.id)\n        await supabase.from('contacts').delete().eq('organization_id', org.id)\n        await supabase.from('profiles').delete().eq('organization_id', org.id)\n        await supabase.from('organizations').delete().eq('id', org.id)\n\n        deletedCount++\n      } catch (error) {\n        console.error(`Failed to delete demo organization ${org.id}:`, error)\n      }\n    }\n\n    return NextResponse.json({\n      success: true,\n      data: {\n        deleted_sessions: deletedCount,\n        total_found: demoOrganizations.length,\n        expired_found: expiredOrganizations.length,\n        cleaned_at: new Date().toISOString()\n      }\n    })\n\n  } catch (error) {\n    console.error('Error in bulk cleanup:', error)\n    return NextResponse.json(\n      {\n        success: false,\n        error: 'Failed to perform bulk cleanup'\n      },\n      { status: 500 }\n    )\n  }\n}\n\n/**\n * OPTIONS handler for CORS\n */\nexport async function OPTIONS(request: NextRequest) {\n  return new NextResponse(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, DELETE, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization, x-admin-key',\n    },\n  })\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}