{"version":3,"names":["GET","cov_1le8eum330","f","s","HEAD","request","startTime","Date","now","healthStatus","status","timestamp","toISOString","version","b","process","env","NEXT_PUBLIC_APP_VERSION","uptime","environment","NODE_ENV","services","system","memory","getMemoryUsage","nodeVersion","supabaseCheck","checkSupabase","supabase","REDIS_URL","redisCheck","checkRedis","redis","stripeCheck","checkStripe","stripe","WHATSAPP_ACCESS_TOKEN","whatsappCheck","checkWhatsApp","whatsapp","serviceStatuses","Object","values","map","hasDown","includes","hasDegraded","responseTime","statusCode","_server","NextResponse","json","headers","error","console","Error","message","checkStart","_server1","createClient","from","select","limit","single","lastCheck","response","fetch","method","signal","AbortSignal","timeout","ok","STRIPE_SECRET_KEY","undefined","WHATSAPP_PHONE_NUMBER_ID","memUsage","memoryUsage","totalMemory","heapTotal","external","usedMemory","heapUsed","used","Math","round","total","percentage"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\app\\api\\health\\route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\n\ninterface HealthStatus {\n  status: 'healthy' | 'unhealthy' | 'degraded'\n  timestamp: string\n  version: string\n  uptime: number\n  environment: string\n  services: {\n    [key: string]: {\n      status: 'up' | 'down' | 'degraded'\n      responseTime?: number\n      error?: string\n      lastCheck: string\n    }\n  }\n  system: {\n    memory: {\n      used: number\n      total: number\n      percentage: number\n    }\n    nodeVersion: string\n  }\n}\n\nexport async function GET(request: NextRequest) {\n  const startTime = Date.now()\n\n  try {\n    const healthStatus: HealthStatus = {\n      status: 'healthy',\n      timestamp: new Date().toISOString(),\n      version: process.env.NEXT_PUBLIC_APP_VERSION || '1.0.0',\n      uptime: process.uptime(),\n      environment: process.env.NODE_ENV || 'development',\n      services: {},\n      system: {\n        memory: getMemoryUsage(),\n        nodeVersion: process.version,\n      }\n    }\n\n    // Check Supabase connection\n    const supabaseCheck = await checkSupabase()\n    healthStatus.services.supabase = supabaseCheck\n\n    // Check Redis connection (if configured)\n    if (process.env.REDIS_URL) {\n      const redisCheck = await checkRedis()\n      healthStatus.services.redis = redisCheck\n    }\n\n    // Check external services\n    const stripeCheck = await checkStripe()\n    healthStatus.services.stripe = stripeCheck\n\n    // Check WhatsApp API\n    if (process.env.WHATSAPP_ACCESS_TOKEN) {\n      const whatsappCheck = await checkWhatsApp()\n      healthStatus.services.whatsapp = whatsappCheck\n    }\n\n    // Determine overall status\n    const serviceStatuses = Object.values(healthStatus.services).map(s => s.status)\n    const hasDown = serviceStatuses.includes('down')\n    const hasDegraded = serviceStatuses.includes('degraded')\n\n    if (hasDown) {\n      healthStatus.status = 'unhealthy'\n    } else if (hasDegraded) {\n      healthStatus.status = 'degraded'\n    }\n\n    const responseTime = Date.now() - startTime\n    const statusCode = healthStatus.status === 'healthy' ? 200 :\n                      healthStatus.status === 'degraded' ? 200 : 503\n\n    return NextResponse.json(\n      {\n        ...healthStatus,\n        responseTime: `${responseTime}ms`\n      },\n      {\n        status: statusCode,\n        headers: {\n          'Cache-Control': 'no-cache, no-store, must-revalidate',\n          'Content-Type': 'application/json'\n        }\n      }\n    )\n\n  } catch (error) {\n    console.error('Health check failed:', error)\n\n    return NextResponse.json(\n      {\n        status: 'unhealthy',\n        timestamp: new Date().toISOString(),\n        error: error instanceof Error ? error.message : 'Unknown error',\n        responseTime: `${Date.now() - startTime}ms`\n      },\n      {\n        status: 503,\n        headers: {\n          'Cache-Control': 'no-cache, no-store, must-revalidate',\n          'Content-Type': 'application/json'\n        }\n      }\n    )\n  }\n}\n\nasync function checkSupabase() {\n  const checkStart = Date.now()\n\n  try {\n    const supabase = await createClient()\n    const { error } = await supabase\n      .from('profiles')\n      .select('count')\n      .limit(1)\n      .single()\n\n    const responseTime = Date.now() - checkStart\n\n    if (error && !error.message.includes('PGRST116')) {\n      // PGRST116 is \"not found\" which is OK for health check\n      return {\n        status: 'down' as const,\n        responseTime,\n        error: error.message,\n        lastCheck: new Date().toISOString()\n      }\n    }\n\n    return {\n      status: responseTime < 1000 ? 'up' as const : 'degraded' as const,\n      responseTime,\n      lastCheck: new Date().toISOString()\n    }\n\n  } catch (error) {\n    return {\n      status: 'down' as const,\n      responseTime: Date.now() - checkStart,\n      error: error instanceof Error ? error.message : 'Connection failed',\n      lastCheck: new Date().toISOString()\n    }\n  }\n}\n\nasync function checkRedis() {\n  const checkStart = Date.now()\n\n  try {\n    // Simple Redis ping check\n    const response = await fetch('http://redis:6379', {\n      method: 'GET',\n      signal: AbortSignal.timeout(5000)\n    })\n\n    const responseTime = Date.now() - checkStart\n\n    return {\n      status: response.ok ? 'up' as const : 'down' as const,\n      responseTime,\n      lastCheck: new Date().toISOString()\n    }\n\n  } catch (error) {\n    return {\n      status: 'down' as const,\n      responseTime: Date.now() - checkStart,\n      error: error instanceof Error ? error.message : 'Connection failed',\n      lastCheck: new Date().toISOString()\n    }\n  }\n}\n\nasync function checkStripe() {\n  const checkStart = Date.now()\n\n  try {\n    if (!process.env.STRIPE_SECRET_KEY) {\n      return {\n        status: 'degraded' as const,\n        responseTime: 0,\n        error: 'Stripe not configured',\n        lastCheck: new Date().toISOString()\n      }\n    }\n\n    // Simple Stripe API call to verify connection\n    const response = await fetch('https://api.stripe.com/v1/account', {\n      headers: {\n        'Authorization': `Bearer ${process.env.STRIPE_SECRET_KEY}`,\n      },\n      signal: AbortSignal.timeout(5000)\n    })\n\n    const responseTime = Date.now() - checkStart\n\n    return {\n      status: response.ok ? 'up' as const : 'down' as const,\n      responseTime,\n      error: response.ok ? undefined : `HTTP ${response.status}`,\n      lastCheck: new Date().toISOString()\n    }\n\n  } catch (error) {\n    return {\n      status: 'down' as const,\n      responseTime: Date.now() - checkStart,\n      error: error instanceof Error ? error.message : 'Connection failed',\n      lastCheck: new Date().toISOString()\n    }\n  }\n}\n\nasync function checkWhatsApp() {\n  const checkStart = Date.now()\n\n  try {\n    if (!process.env.WHATSAPP_ACCESS_TOKEN || !process.env.WHATSAPP_PHONE_NUMBER_ID) {\n      return {\n        status: 'degraded' as const,\n        responseTime: 0,\n        error: 'WhatsApp not configured',\n        lastCheck: new Date().toISOString()\n      }\n    }\n\n    // Check WhatsApp Business API\n    const response = await fetch(\n      `https://graph.facebook.com/v18.0/${process.env.WHATSAPP_PHONE_NUMBER_ID}`,\n      {\n        headers: {\n          'Authorization': `Bearer ${process.env.WHATSAPP_ACCESS_TOKEN}`,\n        },\n        signal: AbortSignal.timeout(5000)\n      }\n    )\n\n    const responseTime = Date.now() - checkStart\n\n    return {\n      status: response.ok ? 'up' as const : 'down' as const,\n      responseTime,\n      error: response.ok ? undefined : `HTTP ${response.status}`,\n      lastCheck: new Date().toISOString()\n    }\n\n  } catch (error) {\n    return {\n      status: 'down' as const,\n      responseTime: Date.now() - checkStart,\n      error: error instanceof Error ? error.message : 'Connection failed',\n      lastCheck: new Date().toISOString()\n    }\n  }\n}\n\nfunction getMemoryUsage() {\n  const memUsage = process.memoryUsage()\n  const totalMemory = memUsage.heapTotal + memUsage.external\n  const usedMemory = memUsage.heapUsed\n\n  return {\n    used: Math.round(usedMemory / 1024 / 1024), // MB\n    total: Math.round(totalMemory / 1024 / 1024), // MB\n    percentage: Math.round((usedMemory / totalMemory) * 100)\n  }\n}\n\n// Liveness probe endpoint (simpler check)\nexport async function HEAD(request: NextRequest) {\n  try {\n    // Basic liveness check\n    return new NextResponse(null, { status: 200 })\n  } catch (error) {\n    return new NextResponse(null, { status: 503 })\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}