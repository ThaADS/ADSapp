561ab8a82cb97d0a45c3d911b08b689a
"use strict";

/* istanbul ignore next */
function cov_ug4f0omcg() {
  var path = "C:\\Ai Projecten\\ADSapp\\src\\lib\\whatsapp\\media-handler.ts";
  var hash = "8e86716e168b56ae2127c117b6cd05f581a87ed2";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Ai Projecten\\ADSapp\\src\\lib\\whatsapp\\media-handler.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "2": {
        start: {
          line: 6,
          column: 24
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "3": {
        start: {
          line: 11,
          column: 0
        },
        end: {
          line: 18,
          column: 3
        }
      },
      "4": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 35
        }
      },
      "5": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 36
        }
      },
      "6": {
        start: {
          line: 19,
          column: 16
        },
        end: {
          line: 19,
          column: 45
        }
      },
      "7": {
        start: {
          line: 20,
          column: 16
        },
        end: {
          line: 20,
          column: 35
        }
      },
      "8": {
        start: {
          line: 23,
          column: 8
        },
        end: {
          line: 23,
          column: 52
        }
      },
      "9": {
        start: {
          line: 24,
          column: 8
        },
        end: {
          line: 24,
          column: 77
        }
      },
      "10": {
        start: {
          line: 29,
          column: 8
        },
        end: {
          line: 87,
          column: 9
        }
      },
      "11": {
        start: {
          line: 31,
          column: 30
        },
        end: {
          line: 31,
          column: 62
        }
      },
      "12": {
        start: {
          line: 33,
          column: 34
        },
        end: {
          line: 33,
          column: 77
        }
      },
      "13": {
        start: {
          line: 34,
          column: 27
        },
        end: {
          line: 34,
          column: 60
        }
      },
      "14": {
        start: {
          line: 36,
          column: 29
        },
        end: {
          line: 36,
          column: 80
        }
      },
      "15": {
        start: {
          line: 38,
          column: 32
        },
        end: {
          line: 38,
          column: 80
        }
      },
      "16": {
        start: {
          line: 39,
          column: 61
        },
        end: {
          line: 42,
          column: 14
        }
      },
      "17": {
        start: {
          line: 43,
          column: 12
        },
        end: {
          line: 45,
          column: 13
        }
      },
      "18": {
        start: {
          line: 44,
          column: 16
        },
        end: {
          line: 44,
          column: 81
        }
      },
      "19": {
        start: {
          line: 47,
          column: 38
        },
        end: {
          line: 47,
          column: 108
        }
      },
      "20": {
        start: {
          line: 50,
          column: 12
        },
        end: {
          line: 52,
          column: 13
        }
      },
      "21": {
        start: {
          line: 51,
          column: 16
        },
        end: {
          line: 51,
          column: 102
        }
      },
      "22": {
        start: {
          line: 54,
          column: 30
        },
        end: {
          line: 66,
          column: 13
        }
      },
      "23": {
        start: {
          line: 68,
          column: 39
        },
        end: {
          line: 79,
          column: 14
        }
      },
      "24": {
        start: {
          line: 80,
          column: 12
        },
        end: {
          line: 83,
          column: 13
        }
      },
      "25": {
        start: {
          line: 81,
          column: 16
        },
        end: {
          line: 81,
          column: 70
        }
      },
      "26": {
        start: {
          line: 84,
          column: 12
        },
        end: {
          line: 84,
          column: 29
        }
      },
      "27": {
        start: {
          line: 86,
          column: 12
        },
        end: {
          line: 86,
          column: 114
        }
      },
      "28": {
        start: {
          line: 92,
          column: 8
        },
        end: {
          line: 128,
          column: 9
        }
      },
      "29": {
        start: {
          line: 93,
          column: 29
        },
        end: {
          line: 93,
          column: 43
        }
      },
      "30": {
        start: {
          line: 94,
          column: 12
        },
        end: {
          line: 103,
          column: 13
        }
      },
      "31": {
        start: {
          line: 95,
          column: 29
        },
        end: {
          line: 99,
          column: 18
        }
      },
      "32": {
        start: {
          line: 100,
          column: 16
        },
        end: {
          line: 100,
          column: 67
        }
      },
      "33": {
        start: {
          line: 102,
          column: 16
        },
        end: {
          line: 102,
          column: 46
        }
      },
      "34": {
        start: {
          line: 104,
          column: 12
        },
        end: {
          line: 104,
          column: 61
        }
      },
      "35": {
        start: {
          line: 105,
          column: 12
        },
        end: {
          line: 105,
          column: 65
        }
      },
      "36": {
        start: {
          line: 106,
          column: 29
        },
        end: {
          line: 112,
          column: 14
        }
      },
      "37": {
        start: {
          line: 113,
          column: 12
        },
        end: {
          line: 116,
          column: 13
        }
      },
      "38": {
        start: {
          line: 114,
          column: 30
        },
        end: {
          line: 114,
          column: 51
        }
      },
      "39": {
        start: {
          line: 115,
          column: 16
        },
        end: {
          line: 115,
          column: 93
        }
      },
      "40": {
        start: {
          line: 117,
          column: 27
        },
        end: {
          line: 117,
          column: 48
        }
      },
      "41": {
        start: {
          line: 118,
          column: 12
        },
        end: {
          line: 122,
          column: 14
        }
      },
      "42": {
        start: {
          line: 124,
          column: 12
        },
        end: {
          line: 127,
          column: 14
        }
      },
      "43": {
        start: {
          line: 133,
          column: 25
        },
        end: {
          line: 137,
          column: 10
        }
      },
      "44": {
        start: {
          line: 138,
          column: 8
        },
        end: {
          line: 141,
          column: 9
        }
      },
      "45": {
        start: {
          line: 139,
          column: 26
        },
        end: {
          line: 139,
          column: 47
        }
      },
      "46": {
        start: {
          line: 140,
          column: 12
        },
        end: {
          line: 140,
          column: 100
        }
      },
      "47": {
        start: {
          line: 142,
          column: 8
        },
        end: {
          line: 142,
          column: 37
        }
      },
      "48": {
        start: {
          line: 147,
          column: 25
        },
        end: {
          line: 151,
          column: 10
        }
      },
      "49": {
        start: {
          line: 152,
          column: 8
        },
        end: {
          line: 154,
          column: 9
        }
      },
      "50": {
        start: {
          line: 153,
          column: 12
        },
        end: {
          line: 153,
          column: 61
        }
      },
      "51": {
        start: {
          line: 155,
          column: 8
        },
        end: {
          line: 155,
          column: 24
        }
      },
      "52": {
        start: {
          line: 160,
          column: 8
        },
        end: {
          line: 180,
          column: 9
        }
      },
      "53": {
        start: {
          line: 161,
          column: 12
        },
        end: {
          line: 163,
          column: 13
        }
      },
      "54": {
        start: {
          line: 162,
          column: 16
        },
        end: {
          line: 162,
          column: 33
        }
      },
      "55": {
        start: {
          line: 166,
          column: 34
        },
        end: {
          line: 166,
          column: 80
        }
      },
      "56": {
        start: {
          line: 167,
          column: 51
        },
        end: {
          line: 170,
          column: 14
        }
      },
      "57": {
        start: {
          line: 171,
          column: 12
        },
        end: {
          line: 174,
          column: 13
        }
      },
      "58": {
        start: {
          line: 172,
          column: 16
        },
        end: {
          line: 172,
          column: 69
        }
      },
      "59": {
        start: {
          line: 173,
          column: 16
        },
        end: {
          line: 173,
          column: 33
        }
      },
      "60": {
        start: {
          line: 175,
          column: 38
        },
        end: {
          line: 175,
          column: 110
        }
      },
      "61": {
        start: {
          line: 176,
          column: 12
        },
        end: {
          line: 176,
          column: 37
        }
      },
      "62": {
        start: {
          line: 178,
          column: 12
        },
        end: {
          line: 178,
          column: 65
        }
      },
      "63": {
        start: {
          line: 179,
          column: 12
        },
        end: {
          line: 179,
          column: 29
        }
      },
      "64": {
        start: {
          line: 185,
          column: 26
        },
        end: {
          line: 185,
          column: 36
        }
      },
      "65": {
        start: {
          line: 186,
          column: 26
        },
        end: {
          line: 186,
          column: 57
        }
      },
      "66": {
        start: {
          line: 187,
          column: 8
        },
        end: {
          line: 187,
          column: 54
        }
      },
      "67": {
        start: {
          line: 192,
          column: 24
        },
        end: {
          line: 209,
          column: 9
        }
      },
      "68": {
        start: {
          line: 210,
          column: 8
        },
        end: {
          line: 210,
          column: 42
        }
      },
      "69": {
        start: {
          line: 215,
          column: 8
        },
        end: {
          line: 215,
          column: 58
        }
      },
      "70": {
        start: {
          line: 215,
          column: 43
        },
        end: {
          line: 215,
          column: 58
        }
      },
      "71": {
        start: {
          line: 216,
          column: 8
        },
        end: {
          line: 216,
          column: 58
        }
      },
      "72": {
        start: {
          line: 216,
          column: 43
        },
        end: {
          line: 216,
          column: 58
        }
      },
      "73": {
        start: {
          line: 217,
          column: 8
        },
        end: {
          line: 217,
          column: 58
        }
      },
      "74": {
        start: {
          line: 217,
          column: 43
        },
        end: {
          line: 217,
          column: 58
        }
      },
      "75": {
        start: {
          line: 218,
          column: 8
        },
        end: {
          line: 218,
          column: 26
        }
      },
      "76": {
        start: {
          line: 223,
          column: 8
        },
        end: {
          line: 223,
          column: 45
        }
      },
      "77": {
        start: {
          line: 228,
          column: 8
        },
        end: {
          line: 228,
          column: 45
        }
      },
      "78": {
        start: {
          line: 233,
          column: 8
        },
        end: {
          line: 233,
          column: 45
        }
      },
      "79": {
        start: {
          line: 238,
          column: 8
        },
        end: {
          line: 263,
          column: 9
        }
      },
      "80": {
        start: {
          line: 239,
          column: 36
        },
        end: {
          line: 244,
          column: 14
        }
      },
      "81": {
        start: {
          line: 245,
          column: 12
        },
        end: {
          line: 247,
          column: 13
        }
      },
      "82": {
        start: {
          line: 246,
          column: 16
        },
        end: {
          line: 246,
          column: 86
        }
      },
      "83": {
        start: {
          line: 248,
          column: 12
        },
        end: {
          line: 260,
          column: 26
        }
      },
      "84": {
        start: {
          line: 248,
          column: 38
        },
        end: {
          line: 260,
          column: 17
        }
      },
      "85": {
        start: {
          line: 262,
          column: 12
        },
        end: {
          line: 262,
          column: 125
        }
      },
      "86": {
        start: {
          line: 268,
          column: 8
        },
        end: {
          line: 323,
          column: 9
        }
      },
      "87": {
        start: {
          line: 269,
          column: 24
        },
        end: {
          line: 280,
          column: 73
        }
      },
      "88": {
        start: {
          line: 282,
          column: 12
        },
        end: {
          line: 285,
          column: 13
        }
      },
      "89": {
        start: {
          line: 283,
          column: 35
        },
        end: {
          line: 283,
          column: 100
        }
      },
      "90": {
        start: {
          line: 284,
          column: 16
        },
        end: {
          line: 284,
          column: 66
        }
      },
      "91": {
        start: {
          line: 286,
          column: 12
        },
        end: {
          line: 288,
          column: 13
        }
      },
      "92": {
        start: {
          line: 287,
          column: 16
        },
        end: {
          line: 287,
          column: 81
        }
      },
      "93": {
        start: {
          line: 289,
          column: 12
        },
        end: {
          line: 291,
          column: 13
        }
      },
      "94": {
        start: {
          line: 290,
          column: 16
        },
        end: {
          line: 290,
          column: 79
        }
      },
      "95": {
        start: {
          line: 293,
          column: 26
        },
        end: {
          line: 293,
          column: 46
        }
      },
      "96": {
        start: {
          line: 294,
          column: 27
        },
        end: {
          line: 294,
          column: 47
        }
      },
      "97": {
        start: {
          line: 295,
          column: 12
        },
        end: {
          line: 295,
          column: 60
        }
      },
      "98": {
        start: {
          line: 296,
          column: 12
        },
        end: {
          line: 298,
          column: 15
        }
      },
      "99": {
        start: {
          line: 299,
          column: 43
        },
        end: {
          line: 299,
          column: 54
        }
      },
      "100": {
        start: {
          line: 300,
          column: 12
        },
        end: {
          line: 302,
          column: 13
        }
      },
      "101": {
        start: {
          line: 301,
          column: 16
        },
        end: {
          line: 301,
          column: 81
        }
      },
      "102": {
        start: {
          line: 303,
          column: 26
        },
        end: {
          line: 315,
          column: 25
        }
      },
      "103": {
        start: {
          line: 303,
          column: 45
        },
        end: {
          line: 315,
          column: 17
        }
      },
      "104": {
        start: {
          line: 316,
          column: 12
        },
        end: {
          line: 320,
          column: 14
        }
      },
      "105": {
        start: {
          line: 322,
          column: 12
        },
        end: {
          line: 322,
          column: 120
        }
      },
      "106": {
        start: {
          line: 328,
          column: 8
        },
        end: {
          line: 355,
          column: 9
        }
      },
      "107": {
        start: {
          line: 329,
          column: 63
        },
        end: {
          line: 329,
          column: 174
        }
      },
      "108": {
        start: {
          line: 330,
          column: 12
        },
        end: {
          line: 332,
          column: 13
        }
      },
      "109": {
        start: {
          line: 331,
          column: 16
        },
        end: {
          line: 331,
          column: 87
        }
      },
      "110": {
        start: {
          line: 333,
          column: 12
        },
        end: {
          line: 337,
          column: 13
        }
      },
      "111": {
        start: {
          line: 334,
          column: 16
        },
        end: {
          line: 336,
          column: 18
        }
      },
      "112": {
        start: {
          line: 339,
          column: 33
        },
        end: {
          line: 339,
          column: 76
        }
      },
      "113": {
        start: {
          line: 339,
          column: 58
        },
        end: {
          line: 339,
          column: 75
        }
      },
      "114": {
        start: {
          line: 340,
          column: 44
        },
        end: {
          line: 340,
          column: 115
        }
      },
      "115": {
        start: {
          line: 341,
          column: 12
        },
        end: {
          line: 343,
          column: 13
        }
      },
      "116": {
        start: {
          line: 342,
          column: 16
        },
        end: {
          line: 342,
          column: 78
        }
      },
      "117": {
        start: {
          line: 345,
          column: 29
        },
        end: {
          line: 345,
          column: 62
        }
      },
      "118": {
        start: {
          line: 345,
          column: 54
        },
        end: {
          line: 345,
          column: 61
        }
      },
      "119": {
        start: {
          line: 346,
          column: 43
        },
        end: {
          line: 346,
          column: 112
        }
      },
      "120": {
        start: {
          line: 347,
          column: 12
        },
        end: {
          line: 349,
          column: 13
        }
      },
      "121": {
        start: {
          line: 348,
          column: 16
        },
        end: {
          line: 348,
          column: 90
        }
      },
      "122": {
        start: {
          line: 350,
          column: 12
        },
        end: {
          line: 352,
          column: 14
        }
      },
      "123": {
        start: {
          line: 354,
          column: 12
        },
        end: {
          line: 354,
          column: 107
        }
      },
      "124": {
        start: {
          line: 360,
          column: 8
        },
        end: {
          line: 365,
          column: 10
        }
      },
      "125": {
        start: {
          line: 370,
          column: 23
        },
        end: {
          line: 370,
          column: 25
        }
      },
      "126": {
        start: {
          line: 371,
          column: 23
        },
        end: {
          line: 371,
          column: 63
        }
      },
      "127": {
        start: {
          line: 373,
          column: 26
        },
        end: {
          line: 373,
          column: 165
        }
      },
      "128": {
        start: {
          line: 374,
          column: 8
        },
        end: {
          line: 376,
          column: 9
        }
      },
      "129": {
        start: {
          line: 375,
          column: 12
        },
        end: {
          line: 375,
          column: 93
        }
      },
      "130": {
        start: {
          line: 378,
          column: 31
        },
        end: {
          line: 402,
          column: 9
        }
      },
      "131": {
        start: {
          line: 403,
          column: 8
        },
        end: {
          line: 405,
          column: 9
        }
      },
      "132": {
        start: {
          line: 404,
          column: 12
        },
        end: {
          line: 404,
          column: 63
        }
      },
      "133": {
        start: {
          line: 406,
          column: 8
        },
        end: {
          line: 409,
          column: 10
        }
      },
      "134": {
        start: {
          line: 414,
          column: 8
        },
        end: {
          line: 453,
          column: 9
        }
      },
      "135": {
        start: {
          line: 415,
          column: 36
        },
        end: {
          line: 422,
          column: 69
        }
      },
      "136": {
        start: {
          line: 423,
          column: 12
        },
        end: {
          line: 425,
          column: 13
        }
      },
      "137": {
        start: {
          line: 424,
          column: 16
        },
        end: {
          line: 424,
          column: 79
        }
      },
      "138": {
        start: {
          line: 426,
          column: 26
        },
        end: {
          line: 437,
          column: 13
        }
      },
      "139": {
        start: {
          line: 428,
          column: 53
        },
        end: {
          line: 428,
          column: 73
        }
      },
      "140": {
        start: {
          line: 438,
          column: 28
        },
        end: {
          line: 438,
          column: 74
        }
      },
      "141": {
        start: {
          line: 439,
          column: 12
        },
        end: {
          line: 447,
          column: 15
        }
      },
      "142": {
        start: {
          line: 440,
          column: 16
        },
        end: {
          line: 443,
          column: 46
        }
      },
      "143": {
        start: {
          line: 440,
          column: 57
        },
        end: {
          line: 440,
          column: 79
        }
      },
      "144": {
        start: {
          line: 441,
          column: 21
        },
        end: {
          line: 443,
          column: 46
        }
      },
      "145": {
        start: {
          line: 441,
          column: 62
        },
        end: {
          line: 441,
          column: 84
        }
      },
      "146": {
        start: {
          line: 442,
          column: 21
        },
        end: {
          line: 443,
          column: 46
        }
      },
      "147": {
        start: {
          line: 442,
          column: 62
        },
        end: {
          line: 442,
          column: 83
        }
      },
      "148": {
        start: {
          line: 443,
          column: 21
        },
        end: {
          line: 443,
          column: 46
        }
      },
      "149": {
        start: {
          line: 444,
          column: 16
        },
        end: {
          line: 446,
          column: 17
        }
      },
      "150": {
        start: {
          line: 445,
          column: 20
        },
        end: {
          line: 445,
          column: 42
        }
      },
      "151": {
        start: {
          line: 449,
          column: 12
        },
        end: {
          line: 449,
          column: 69
        }
      },
      "152": {
        start: {
          line: 450,
          column: 12
        },
        end: {
          line: 450,
          column: 25
        }
      },
      "153": {
        start: {
          line: 452,
          column: 12
        },
        end: {
          line: 452,
          column: 118
        }
      },
      "154": {
        start: {
          line: 456,
          column: 8
        },
        end: {
          line: 456,
          column: 42
        }
      },
      "155": {
        start: {
          line: 456,
          column: 25
        },
        end: {
          line: 456,
          column: 42
        }
      },
      "156": {
        start: {
          line: 457,
          column: 18
        },
        end: {
          line: 457,
          column: 22
        }
      },
      "157": {
        start: {
          line: 458,
          column: 22
        },
        end: {
          line: 463,
          column: 9
        }
      },
      "158": {
        start: {
          line: 464,
          column: 18
        },
        end: {
          line: 464,
          column: 59
        }
      },
      "159": {
        start: {
          line: 465,
          column: 8
        },
        end: {
          line: 465,
          column: 80
        }
      },
      "160": {
        start: {
          line: 468,
          column: 8
        },
        end: {
          line: 468,
          column: 52
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 16
          }
        },
        loc: {
          start: {
            line: 5,
            column: 30
          },
          end: {
            line: 10,
            column: 1
          }
        },
        line: 5
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 12,
            column: 5
          }
        },
        loc: {
          start: {
            line: 12,
            column: 31
          },
          end: {
            line: 14,
            column: 5
          }
        },
        line: 12
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 15,
            column: 5
          }
        },
        loc: {
          start: {
            line: 15,
            column: 32
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 15
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 22,
            column: 4
          },
          end: {
            line: 22,
            column: 5
          }
        },
        loc: {
          start: {
            line: 22,
            column: 43
          },
          end: {
            line: 25,
            column: 5
          }
        },
        line: 22
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 28,
            column: 6
          },
          end: {
            line: 28,
            column: 7
          }
        },
        loc: {
          start: {
            line: 28,
            column: 71
          },
          end: {
            line: 88,
            column: 5
          }
        },
        line: 28
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 91,
            column: 6
          },
          end: {
            line: 91,
            column: 7
          }
        },
        loc: {
          start: {
            line: 91,
            column: 50
          },
          end: {
            line: 129,
            column: 5
          }
        },
        line: 91
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 132,
            column: 6
          },
          end: {
            line: 132,
            column: 7
          }
        },
        loc: {
          start: {
            line: 132,
            column: 34
          },
          end: {
            line: 143,
            column: 5
          }
        },
        line: 132
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 146,
            column: 6
          },
          end: {
            line: 146,
            column: 7
          }
        },
        loc: {
          start: {
            line: 146,
            column: 35
          },
          end: {
            line: 156,
            column: 5
          }
        },
        line: 146
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 159,
            column: 6
          },
          end: {
            line: 159,
            column: 7
          }
        },
        loc: {
          start: {
            line: 159,
            column: 62
          },
          end: {
            line: 181,
            column: 5
          }
        },
        line: 159
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 184,
            column: 6
          },
          end: {
            line: 184,
            column: 7
          }
        },
        loc: {
          start: {
            line: 184,
            column: 42
          },
          end: {
            line: 188,
            column: 5
          }
        },
        line: 184
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 191,
            column: 6
          },
          end: {
            line: 191,
            column: 7
          }
        },
        loc: {
          start: {
            line: 191,
            column: 33
          },
          end: {
            line: 211,
            column: 5
          }
        },
        line: 191
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 214,
            column: 6
          },
          end: {
            line: 214,
            column: 7
          }
        },
        loc: {
          start: {
            line: 214,
            column: 29
          },
          end: {
            line: 219,
            column: 5
          }
        },
        line: 214
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 222,
            column: 6
          },
          end: {
            line: 222,
            column: 7
          }
        },
        loc: {
          start: {
            line: 222,
            column: 24
          },
          end: {
            line: 224,
            column: 5
          }
        },
        line: 222
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 227,
            column: 6
          },
          end: {
            line: 227,
            column: 7
          }
        },
        loc: {
          start: {
            line: 227,
            column: 24
          },
          end: {
            line: 229,
            column: 5
          }
        },
        line: 227
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 232,
            column: 6
          },
          end: {
            line: 232,
            column: 7
          }
        },
        loc: {
          start: {
            line: 232,
            column: 24
          },
          end: {
            line: 234,
            column: 5
          }
        },
        line: 232
      },
      "15": {
        name: "(anonymous_15)",
        decl: {
          start: {
            line: 237,
            column: 6
          },
          end: {
            line: 237,
            column: 7
          }
        },
        loc: {
          start: {
            line: 237,
            column: 49
          },
          end: {
            line: 264,
            column: 5
          }
        },
        line: 237
      },
      "16": {
        name: "(anonymous_16)",
        decl: {
          start: {
            line: 248,
            column: 29
          },
          end: {
            line: 248,
            column: 30
          }
        },
        loc: {
          start: {
            line: 248,
            column: 38
          },
          end: {
            line: 260,
            column: 17
          }
        },
        line: 248
      },
      "17": {
        name: "(anonymous_17)",
        decl: {
          start: {
            line: 267,
            column: 6
          },
          end: {
            line: 267,
            column: 7
          }
        },
        loc: {
          start: {
            line: 267,
            column: 53
          },
          end: {
            line: 324,
            column: 5
          }
        },
        line: 267
      },
      "18": {
        name: "(anonymous_18)",
        decl: {
          start: {
            line: 303,
            column: 36
          },
          end: {
            line: 303,
            column: 37
          }
        },
        loc: {
          start: {
            line: 303,
            column: 45
          },
          end: {
            line: 315,
            column: 17
          }
        },
        line: 303
      },
      "19": {
        name: "(anonymous_19)",
        decl: {
          start: {
            line: 327,
            column: 6
          },
          end: {
            line: 327,
            column: 7
          }
        },
        loc: {
          start: {
            line: 327,
            column: 34
          },
          end: {
            line: 356,
            column: 5
          }
        },
        line: 327
      },
      "20": {
        name: "(anonymous_20)",
        decl: {
          start: {
            line: 339,
            column: 50
          },
          end: {
            line: 339,
            column: 51
          }
        },
        loc: {
          start: {
            line: 339,
            column: 58
          },
          end: {
            line: 339,
            column: 75
          }
        },
        line: 339
      },
      "21": {
        name: "(anonymous_21)",
        decl: {
          start: {
            line: 345,
            column: 46
          },
          end: {
            line: 345,
            column: 47
          }
        },
        loc: {
          start: {
            line: 345,
            column: 54
          },
          end: {
            line: 345,
            column: 61
          }
        },
        line: 345
      },
      "22": {
        name: "(anonymous_22)",
        decl: {
          start: {
            line: 359,
            column: 6
          },
          end: {
            line: 359,
            column: 7
          }
        },
        loc: {
          start: {
            line: 359,
            column: 33
          },
          end: {
            line: 366,
            column: 5
          }
        },
        line: 359
      },
      "23": {
        name: "(anonymous_23)",
        decl: {
          start: {
            line: 369,
            column: 6
          },
          end: {
            line: 369,
            column: 7
          }
        },
        loc: {
          start: {
            line: 369,
            column: 37
          },
          end: {
            line: 410,
            column: 5
          }
        },
        line: 369
      },
      "24": {
        name: "(anonymous_24)",
        decl: {
          start: {
            line: 413,
            column: 4
          },
          end: {
            line: 413,
            column: 5
          }
        },
        loc: {
          start: {
            line: 413,
            column: 40
          },
          end: {
            line: 454,
            column: 5
          }
        },
        line: 413
      },
      "25": {
        name: "(anonymous_25)",
        decl: {
          start: {
            line: 428,
            column: 40
          },
          end: {
            line: 428,
            column: 41
          }
        },
        loc: {
          start: {
            line: 428,
            column: 53
          },
          end: {
            line: 428,
            column: 73
          }
        },
        line: 428
      },
      "26": {
        name: "(anonymous_26)",
        decl: {
          start: {
            line: 439,
            column: 26
          },
          end: {
            line: 439,
            column: 27
          }
        },
        loc: {
          start: {
            line: 439,
            column: 34
          },
          end: {
            line: 447,
            column: 13
          }
        },
        line: 439
      },
      "27": {
        name: "(anonymous_27)",
        decl: {
          start: {
            line: 455,
            column: 4
          },
          end: {
            line: 455,
            column: 5
          }
        },
        loc: {
          start: {
            line: 455,
            column: 26
          },
          end: {
            line: 466,
            column: 5
          }
        },
        line: 455
      },
      "28": {
        name: "(anonymous_28)",
        decl: {
          start: {
            line: 467,
            column: 4
          },
          end: {
            line: 467,
            column: 5
          }
        },
        loc: {
          start: {
            line: 467,
            column: 17
          },
          end: {
            line: 469,
            column: 5
          }
        },
        line: 467
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 43,
            column: 12
          },
          end: {
            line: 45,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 43,
            column: 12
          },
          end: {
            line: 45,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 43
      },
      "1": {
        loc: {
          start: {
            line: 50,
            column: 12
          },
          end: {
            line: 52,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 50,
            column: 12
          },
          end: {
            line: 52,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 50
      },
      "2": {
        loc: {
          start: {
            line: 50,
            column: 16
          },
          end: {
            line: 50,
            column: 79
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 50,
            column: 16
          },
          end: {
            line: 50,
            column: 42
          }
        }, {
          start: {
            line: 50,
            column: 46
          },
          end: {
            line: 50,
            column: 79
          }
        }],
        line: 50
      },
      "3": {
        loc: {
          start: {
            line: 80,
            column: 12
          },
          end: {
            line: 83,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 80,
            column: 12
          },
          end: {
            line: 83,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 80
      },
      "4": {
        loc: {
          start: {
            line: 86,
            column: 54
          },
          end: {
            line: 86,
            column: 110
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 86,
            column: 79
          },
          end: {
            line: 86,
            column: 92
          }
        }, {
          start: {
            line: 86,
            column: 95
          },
          end: {
            line: 86,
            column: 110
          }
        }],
        line: 86
      },
      "5": {
        loc: {
          start: {
            line: 94,
            column: 12
          },
          end: {
            line: 103,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 94,
            column: 12
          },
          end: {
            line: 103,
            column: 13
          }
        }, {
          start: {
            line: 101,
            column: 19
          },
          end: {
            line: 103,
            column: 13
          }
        }],
        line: 94
      },
      "6": {
        loc: {
          start: {
            line: 100,
            column: 46
          },
          end: {
            line: 100,
            column: 65
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 100,
            column: 46
          },
          end: {
            line: 100,
            column: 54
          }
        }, {
          start: {
            line: 100,
            column: 58
          },
          end: {
            line: 100,
            column: 65
          }
        }],
        line: 100
      },
      "7": {
        loc: {
          start: {
            line: 113,
            column: 12
          },
          end: {
            line: 116,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 113,
            column: 12
          },
          end: {
            line: 116,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 113
      },
      "8": {
        loc: {
          start: {
            line: 115,
            column: 50
          },
          end: {
            line: 115,
            column: 89
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 115,
            column: 50
          },
          end: {
            line: 115,
            column: 70
          }
        }, {
          start: {
            line: 115,
            column: 74
          },
          end: {
            line: 115,
            column: 89
          }
        }],
        line: 115
      },
      "9": {
        loc: {
          start: {
            line: 126,
            column: 23
          },
          end: {
            line: 126,
            column: 79
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 126,
            column: 48
          },
          end: {
            line: 126,
            column: 61
          }
        }, {
          start: {
            line: 126,
            column: 64
          },
          end: {
            line: 126,
            column: 79
          }
        }],
        line: 126
      },
      "10": {
        loc: {
          start: {
            line: 138,
            column: 8
          },
          end: {
            line: 141,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 138,
            column: 8
          },
          end: {
            line: 141,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 138
      },
      "11": {
        loc: {
          start: {
            line: 140,
            column: 57
          },
          end: {
            line: 140,
            column: 96
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 140,
            column: 57
          },
          end: {
            line: 140,
            column: 77
          }
        }, {
          start: {
            line: 140,
            column: 81
          },
          end: {
            line: 140,
            column: 96
          }
        }],
        line: 140
      },
      "12": {
        loc: {
          start: {
            line: 152,
            column: 8
          },
          end: {
            line: 154,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 152,
            column: 8
          },
          end: {
            line: 154,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 152
      },
      "13": {
        loc: {
          start: {
            line: 161,
            column: 12
          },
          end: {
            line: 163,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 161,
            column: 12
          },
          end: {
            line: 163,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 161
      },
      "14": {
        loc: {
          start: {
            line: 171,
            column: 12
          },
          end: {
            line: 174,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 171,
            column: 12
          },
          end: {
            line: 174,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 171
      },
      "15": {
        loc: {
          start: {
            line: 210,
            column: 15
          },
          end: {
            line: 210,
            column: 41
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 210,
            column: 15
          },
          end: {
            line: 210,
            column: 32
          }
        }, {
          start: {
            line: 210,
            column: 36
          },
          end: {
            line: 210,
            column: 41
          }
        }],
        line: 210
      },
      "16": {
        loc: {
          start: {
            line: 215,
            column: 8
          },
          end: {
            line: 215,
            column: 58
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 215,
            column: 8
          },
          end: {
            line: 215,
            column: 58
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 215
      },
      "17": {
        loc: {
          start: {
            line: 216,
            column: 8
          },
          end: {
            line: 216,
            column: 58
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 216,
            column: 8
          },
          end: {
            line: 216,
            column: 58
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 216
      },
      "18": {
        loc: {
          start: {
            line: 217,
            column: 8
          },
          end: {
            line: 217,
            column: 58
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 217,
            column: 8
          },
          end: {
            line: 217,
            column: 58
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 217
      },
      "19": {
        loc: {
          start: {
            line: 245,
            column: 12
          },
          end: {
            line: 247,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 245,
            column: 12
          },
          end: {
            line: 247,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 245
      },
      "20": {
        loc: {
          start: {
            line: 248,
            column: 19
          },
          end: {
            line: 260,
            column: 25
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 248,
            column: 19
          },
          end: {
            line: 260,
            column: 19
          }
        }, {
          start: {
            line: 260,
            column: 23
          },
          end: {
            line: 260,
            column: 25
          }
        }],
        line: 248
      },
      "21": {
        loc: {
          start: {
            line: 259,
            column: 31
          },
          end: {
            line: 259,
            column: 86
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 259,
            column: 49
          },
          end: {
            line: 259,
            column: 74
          }
        }, {
          start: {
            line: 259,
            column: 77
          },
          end: {
            line: 259,
            column: 86
          }
        }],
        line: 259
      },
      "22": {
        loc: {
          start: {
            line: 262,
            column: 65
          },
          end: {
            line: 262,
            column: 121
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 262,
            column: 90
          },
          end: {
            line: 262,
            column: 103
          }
        }, {
          start: {
            line: 262,
            column: 106
          },
          end: {
            line: 262,
            column: 121
          }
        }],
        line: 262
      },
      "23": {
        loc: {
          start: {
            line: 282,
            column: 12
          },
          end: {
            line: 285,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 282,
            column: 12
          },
          end: {
            line: 285,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 282
      },
      "24": {
        loc: {
          start: {
            line: 283,
            column: 35
          },
          end: {
            line: 283,
            column: 100
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 283,
            column: 65
          },
          end: {
            line: 283,
            column: 79
          }
        }, {
          start: {
            line: 283,
            column: 82
          },
          end: {
            line: 283,
            column: 100
          }
        }],
        line: 283
      },
      "25": {
        loc: {
          start: {
            line: 286,
            column: 12
          },
          end: {
            line: 288,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 286,
            column: 12
          },
          end: {
            line: 288,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 286
      },
      "26": {
        loc: {
          start: {
            line: 289,
            column: 12
          },
          end: {
            line: 291,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 289,
            column: 12
          },
          end: {
            line: 291,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 289
      },
      "27": {
        loc: {
          start: {
            line: 293,
            column: 26
          },
          end: {
            line: 293,
            column: 46
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 293,
            column: 26
          },
          end: {
            line: 293,
            column: 40
          }
        }, {
          start: {
            line: 293,
            column: 44
          },
          end: {
            line: 293,
            column: 46
          }
        }],
        line: 293
      },
      "28": {
        loc: {
          start: {
            line: 294,
            column: 27
          },
          end: {
            line: 294,
            column: 47
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 294,
            column: 27
          },
          end: {
            line: 294,
            column: 42
          }
        }, {
          start: {
            line: 294,
            column: 46
          },
          end: {
            line: 294,
            column: 47
          }
        }],
        line: 294
      },
      "29": {
        loc: {
          start: {
            line: 300,
            column: 12
          },
          end: {
            line: 302,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 300,
            column: 12
          },
          end: {
            line: 302,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 300
      },
      "30": {
        loc: {
          start: {
            line: 303,
            column: 26
          },
          end: {
            line: 315,
            column: 25
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 303,
            column: 26
          },
          end: {
            line: 315,
            column: 19
          }
        }, {
          start: {
            line: 315,
            column: 23
          },
          end: {
            line: 315,
            column: 25
          }
        }],
        line: 303
      },
      "31": {
        loc: {
          start: {
            line: 314,
            column: 31
          },
          end: {
            line: 314,
            column: 86
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 314,
            column: 49
          },
          end: {
            line: 314,
            column: 74
          }
        }, {
          start: {
            line: 314,
            column: 77
          },
          end: {
            line: 314,
            column: 86
          }
        }],
        line: 314
      },
      "32": {
        loc: {
          start: {
            line: 318,
            column: 23
          },
          end: {
            line: 318,
            column: 33
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 318,
            column: 23
          },
          end: {
            line: 318,
            column: 28
          }
        }, {
          start: {
            line: 318,
            column: 32
          },
          end: {
            line: 318,
            column: 33
          }
        }],
        line: 318
      },
      "33": {
        loc: {
          start: {
            line: 319,
            column: 43
          },
          end: {
            line: 319,
            column: 53
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 319,
            column: 43
          },
          end: {
            line: 319,
            column: 48
          }
        }, {
          start: {
            line: 319,
            column: 52
          },
          end: {
            line: 319,
            column: 53
          }
        }],
        line: 319
      },
      "34": {
        loc: {
          start: {
            line: 322,
            column: 60
          },
          end: {
            line: 322,
            column: 116
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 322,
            column: 85
          },
          end: {
            line: 322,
            column: 98
          }
        }, {
          start: {
            line: 322,
            column: 101
          },
          end: {
            line: 322,
            column: 116
          }
        }],
        line: 322
      },
      "35": {
        loc: {
          start: {
            line: 330,
            column: 12
          },
          end: {
            line: 332,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 330,
            column: 12
          },
          end: {
            line: 332,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 330
      },
      "36": {
        loc: {
          start: {
            line: 333,
            column: 12
          },
          end: {
            line: 337,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 333,
            column: 12
          },
          end: {
            line: 337,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 333
      },
      "37": {
        loc: {
          start: {
            line: 333,
            column: 16
          },
          end: {
            line: 333,
            column: 58
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 333,
            column: 16
          },
          end: {
            line: 333,
            column: 29
          }
        }, {
          start: {
            line: 333,
            column: 33
          },
          end: {
            line: 333,
            column: 58
          }
        }],
        line: 333
      },
      "38": {
        loc: {
          start: {
            line: 341,
            column: 12
          },
          end: {
            line: 343,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 341,
            column: 12
          },
          end: {
            line: 343,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 341
      },
      "39": {
        loc: {
          start: {
            line: 347,
            column: 12
          },
          end: {
            line: 349,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 347,
            column: 12
          },
          end: {
            line: 349,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 347
      },
      "40": {
        loc: {
          start: {
            line: 354,
            column: 47
          },
          end: {
            line: 354,
            column: 103
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 354,
            column: 72
          },
          end: {
            line: 354,
            column: 85
          }
        }, {
          start: {
            line: 354,
            column: 88
          },
          end: {
            line: 354,
            column: 103
          }
        }],
        line: 354
      },
      "41": {
        loc: {
          start: {
            line: 373,
            column: 26
          },
          end: {
            line: 373,
            column: 165
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 373,
            column: 59
          },
          end: {
            line: 373,
            column: 66
          }
        }, {
          start: {
            line: 373,
            column: 69
          },
          end: {
            line: 373,
            column: 165
          }
        }],
        line: 373
      },
      "42": {
        loc: {
          start: {
            line: 373,
            column: 69
          },
          end: {
            line: 373,
            column: 165
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 373,
            column: 102
          },
          end: {
            line: 373,
            column: 109
          }
        }, {
          start: {
            line: 373,
            column: 112
          },
          end: {
            line: 373,
            column: 165
          }
        }],
        line: 373
      },
      "43": {
        loc: {
          start: {
            line: 373,
            column: 112
          },
          end: {
            line: 373,
            column: 165
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 373,
            column: 145
          },
          end: {
            line: 373,
            column: 152
          }
        }, {
          start: {
            line: 373,
            column: 155
          },
          end: {
            line: 373,
            column: 165
          }
        }],
        line: 373
      },
      "44": {
        loc: {
          start: {
            line: 374,
            column: 8
          },
          end: {
            line: 376,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 374,
            column: 8
          },
          end: {
            line: 376,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 374
      },
      "45": {
        loc: {
          start: {
            line: 403,
            column: 8
          },
          end: {
            line: 405,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 403,
            column: 8
          },
          end: {
            line: 405,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 403
      },
      "46": {
        loc: {
          start: {
            line: 423,
            column: 12
          },
          end: {
            line: 425,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 423,
            column: 12
          },
          end: {
            line: 425,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 423
      },
      "47": {
        loc: {
          start: {
            line: 427,
            column: 28
          },
          end: {
            line: 427,
            column: 45
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 427,
            column: 28
          },
          end: {
            line: 427,
            column: 40
          }
        }, {
          start: {
            line: 427,
            column: 44
          },
          end: {
            line: 427,
            column: 45
          }
        }],
        line: 427
      },
      "48": {
        loc: {
          start: {
            line: 428,
            column: 27
          },
          end: {
            line: 428,
            column: 82
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 428,
            column: 27
          },
          end: {
            line: 428,
            column: 77
          }
        }, {
          start: {
            line: 428,
            column: 81
          },
          end: {
            line: 428,
            column: 82
          }
        }],
        line: 428
      },
      "49": {
        loc: {
          start: {
            line: 440,
            column: 16
          },
          end: {
            line: 443,
            column: 46
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 440,
            column: 16
          },
          end: {
            line: 443,
            column: 46
          }
        }, {
          start: {
            line: 441,
            column: 21
          },
          end: {
            line: 443,
            column: 46
          }
        }],
        line: 440
      },
      "50": {
        loc: {
          start: {
            line: 441,
            column: 21
          },
          end: {
            line: 443,
            column: 46
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 441,
            column: 21
          },
          end: {
            line: 443,
            column: 46
          }
        }, {
          start: {
            line: 442,
            column: 21
          },
          end: {
            line: 443,
            column: 46
          }
        }],
        line: 441
      },
      "51": {
        loc: {
          start: {
            line: 442,
            column: 21
          },
          end: {
            line: 443,
            column: 46
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 442,
            column: 21
          },
          end: {
            line: 443,
            column: 46
          }
        }, {
          start: {
            line: 443,
            column: 21
          },
          end: {
            line: 443,
            column: 46
          }
        }],
        line: 442
      },
      "52": {
        loc: {
          start: {
            line: 444,
            column: 16
          },
          end: {
            line: 446,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 444,
            column: 16
          },
          end: {
            line: 446,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 444
      },
      "53": {
        loc: {
          start: {
            line: 452,
            column: 58
          },
          end: {
            line: 452,
            column: 114
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 452,
            column: 83
          },
          end: {
            line: 452,
            column: 96
          }
        }, {
          start: {
            line: 452,
            column: 99
          },
          end: {
            line: 452,
            column: 114
          }
        }],
        line: 452
      },
      "54": {
        loc: {
          start: {
            line: 456,
            column: 8
          },
          end: {
            line: 456,
            column: 42
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 456,
            column: 8
          },
          end: {
            line: 456,
            column: 42
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 456
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0,
      "91": 0,
      "92": 0,
      "93": 0,
      "94": 0,
      "95": 0,
      "96": 0,
      "97": 0,
      "98": 0,
      "99": 0,
      "100": 0,
      "101": 0,
      "102": 0,
      "103": 0,
      "104": 0,
      "105": 0,
      "106": 0,
      "107": 0,
      "108": 0,
      "109": 0,
      "110": 0,
      "111": 0,
      "112": 0,
      "113": 0,
      "114": 0,
      "115": 0,
      "116": 0,
      "117": 0,
      "118": 0,
      "119": 0,
      "120": 0,
      "121": 0,
      "122": 0,
      "123": 0,
      "124": 0,
      "125": 0,
      "126": 0,
      "127": 0,
      "128": 0,
      "129": 0,
      "130": 0,
      "131": 0,
      "132": 0,
      "133": 0,
      "134": 0,
      "135": 0,
      "136": 0,
      "137": 0,
      "138": 0,
      "139": 0,
      "140": 0,
      "141": 0,
      "142": 0,
      "143": 0,
      "144": 0,
      "145": 0,
      "146": 0,
      "147": 0,
      "148": 0,
      "149": 0,
      "150": 0,
      "151": 0,
      "152": 0,
      "153": 0,
      "154": 0,
      "155": 0,
      "156": 0,
      "157": 0,
      "158": 0,
      "159": 0,
      "160": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0],
      "21": [0, 0],
      "22": [0, 0],
      "23": [0, 0],
      "24": [0, 0],
      "25": [0, 0],
      "26": [0, 0],
      "27": [0, 0],
      "28": [0, 0],
      "29": [0, 0],
      "30": [0, 0],
      "31": [0, 0],
      "32": [0, 0],
      "33": [0, 0],
      "34": [0, 0],
      "35": [0, 0],
      "36": [0, 0],
      "37": [0, 0],
      "38": [0, 0],
      "39": [0, 0],
      "40": [0, 0],
      "41": [0, 0],
      "42": [0, 0],
      "43": [0, 0],
      "44": [0, 0],
      "45": [0, 0],
      "46": [0, 0],
      "47": [0, 0],
      "48": [0, 0],
      "49": [0, 0],
      "50": [0, 0],
      "51": [0, 0],
      "52": [0, 0],
      "53": [0, 0],
      "54": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Ai Projecten\\ADSapp\\src\\lib\\whatsapp\\media-handler.ts"],
      sourcesContent: ["import { createClient } from '@/lib/supabase/server'\nimport { WhatsAppClient } from './client'\n\nexport interface MediaFile {\n  id: string\n  messageId: string\n  whatsappMediaId: string\n  filename: string\n  mimeType: string\n  fileSize: number\n  url?: string\n  thumbnailUrl?: string\n  downloadUrl?: string\n  uploadedAt: Date\n  expiresAt?: Date\n}\n\nexport interface MediaUploadResult {\n  success: boolean\n  mediaId?: string\n  url?: string\n  error?: string\n}\n\nexport interface MediaProcessingOptions {\n  generateThumbnail?: boolean\n  compressionLevel?: 'low' | 'medium' | 'high'\n  maxWidth?: number\n  maxHeight?: number\n  quality?: number\n}\n\nexport class WhatsAppMediaHandler {\n  private client: WhatsAppClient\n  private supabase = createClient()\n\n  constructor(accessToken: string, phoneNumberId: string) {\n    this.client = new WhatsAppClient(accessToken, phoneNumberId)\n  }\n\n  /**\n   * Download media file from WhatsApp\n   */\n  async downloadMedia(\n    mediaId: string,\n    messageId: string,\n    organizationId: string,\n    options?: MediaProcessingOptions\n  ): Promise<MediaFile> {\n    try {\n      // Get media info from WhatsApp API\n      const mediaInfo = await this.getMediaInfo(mediaId)\n\n      // Download the actual media file\n      const mediaResponse = await this.downloadMediaFile(mediaInfo.url)\n      const buffer = await mediaResponse.arrayBuffer()\n\n      // Generate filename if not provided\n      const filename = this.generateFilename(mediaInfo.mime_type, mediaId)\n\n      // Upload to storage (Supabase Storage)\n      const storagePath = `media/${organizationId}/${mediaId}/${filename}`\n      const { data: uploadData, error: uploadError } = await this.supabase.storage\n        .from('whatsapp-media')\n        .upload(storagePath, buffer, {\n          contentType: mediaInfo.mime_type,\n          cacheControl: '3600'\n        })\n\n      if (uploadError) {\n        throw new Error(`Storage upload failed: ${uploadError.message}`)\n      }\n\n      // Get public URL\n      const { data: urlData } = this.supabase.storage\n        .from('whatsapp-media')\n        .getPublicUrl(storagePath)\n\n      // Process media if needed (thumbnails, compression)\n      let thumbnailUrl: string | undefined\n      if (options?.generateThumbnail && this.isImage(mediaInfo.mime_type)) {\n        thumbnailUrl = await this.generateThumbnail(buffer, mediaInfo.mime_type, storagePath)\n      }\n\n      // Create media record in database\n      const mediaFile: MediaFile = {\n        id: crypto.randomUUID(),\n        messageId,\n        whatsappMediaId: mediaId,\n        filename,\n        mimeType: mediaInfo.mime_type,\n        fileSize: buffer.byteLength,\n        url: urlData.publicUrl,\n        thumbnailUrl,\n        downloadUrl: urlData.publicUrl,\n        uploadedAt: new Date(),\n        expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000) // 30 days\n      }\n\n      // Store media info in database\n      const { error: dbError } = await this.supabase\n        .from('message_media')\n        .insert({\n          id: mediaFile.id,\n          message_id: messageId,\n          whatsapp_media_id: mediaId,\n          filename: mediaFile.filename,\n          mime_type: mediaFile.mimeType,\n          file_size: mediaFile.fileSize,\n          storage_path: storagePath,\n          url: mediaFile.url,\n          thumbnail_url: thumbnailUrl,\n          expires_at: mediaFile.expiresAt?.toISOString()\n        })\n\n      if (dbError) {\n        console.error('Failed to store media info:', dbError)\n        // Don't throw error, media is already uploaded\n      }\n\n      return mediaFile\n    } catch (error) {\n      throw new Error(`Media download failed: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  /**\n   * Upload media file to WhatsApp for sending\n   */\n  async uploadMedia(\n    file: File | Buffer,\n    mimeType: string,\n    filename?: string\n  ): Promise<MediaUploadResult> {\n    try {\n      const formData = new FormData()\n\n      if (file instanceof Buffer) {\n        const blob = new Blob([file], { type: mimeType })\n        formData.append('file', blob, filename || 'media')\n      } else {\n        formData.append('file', file)\n      }\n\n      formData.append('messaging_product', 'whatsapp')\n      formData.append('type', this.getMediaType(mimeType))\n\n      const response = await fetch(`https://graph.facebook.com/v18.0/${this.client.phoneNumberId}/media`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${this.client.accessToken}`,\n        },\n        body: formData,\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(`Upload failed: ${error.error?.message || 'Unknown error'}`)\n      }\n\n      const result = await response.json()\n      return {\n        success: true,\n        mediaId: result.id,\n        url: result.url\n      }\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error'\n      }\n    }\n  }\n\n  /**\n   * Get media information from WhatsApp API\n   */\n  private async getMediaInfo(mediaId: string): Promise<{ url: string; mime_type: string; sha256: string; file_size: number; id: string }> {\n    const response = await fetch(`https://graph.facebook.com/v18.0/${mediaId}`, {\n      headers: {\n        'Authorization': `Bearer ${this.client.accessToken}`,\n      },\n    })\n\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(`Failed to get media info: ${error.error?.message || 'Unknown error'}`)\n    }\n\n    return await response.json()\n  }\n\n  /**\n   * Download media file from WhatsApp URL\n   */\n  private async downloadMediaFile(url: string): Promise<Response> {\n    const response = await fetch(url, {\n      headers: {\n        'Authorization': `Bearer ${this.client.accessToken}`,\n      },\n    })\n\n    if (!response.ok) {\n      throw new Error('Failed to download media file')\n    }\n\n    return response\n  }\n\n  /**\n   * Generate thumbnail for images\n   */\n  private async generateThumbnail(\n    buffer: ArrayBuffer,\n    mimeType: string,\n    originalPath: string\n  ): Promise<string | undefined> {\n    try {\n      if (!this.isImage(mimeType)) {\n        return undefined\n      }\n\n      // This would use a proper image processing library like sharp\n      // For now, we'll just return the original image for thumbnails\n      const thumbnailPath = originalPath.replace(/(\\.[^.]+)$/, '_thumb$1')\n\n      const { data: thumbnailData, error } = await this.supabase.storage\n        .from('whatsapp-media')\n        .upload(thumbnailPath, buffer, {\n          contentType: mimeType,\n          cacheControl: '3600'\n        })\n\n      if (error) {\n        console.error('Thumbnail generation failed:', error)\n        return undefined\n      }\n\n      const { data: urlData } = this.supabase.storage\n        .from('whatsapp-media')\n        .getPublicUrl(thumbnailPath)\n\n      return urlData.publicUrl\n    } catch (error) {\n      console.error('Thumbnail generation failed:', error)\n      return undefined\n    }\n  }\n\n  /**\n   * Generate appropriate filename based on MIME type\n   */\n  private generateFilename(mimeType: string, mediaId: string): string {\n    const timestamp = Date.now()\n    const extension = this.getFileExtension(mimeType)\n    return `${mediaId}_${timestamp}.${extension}`\n  }\n\n  /**\n   * Get file extension from MIME type\n   */\n  private getFileExtension(mimeType: string): string {\n    const mimeMap: Record<string, string> = {\n      'image/jpeg': 'jpg',\n      'image/png': 'png',\n      'image/gif': 'gif',\n      'image/webp': 'webp',\n      'video/mp4': 'mp4',\n      'video/quicktime': 'mov',\n      'audio/mpeg': 'mp3',\n      'audio/ogg': 'ogg',\n      'audio/wav': 'wav',\n      'application/pdf': 'pdf',\n      'application/msword': 'doc',\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'docx',\n      'application/vnd.ms-excel': 'xls',\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'xlsx',\n      'text/plain': 'txt',\n      'text/csv': 'csv'\n    }\n\n    return mimeMap[mimeType] || 'bin'\n  }\n\n  /**\n   * Get WhatsApp media type from MIME type\n   */\n  private getMediaType(mimeType: string): string {\n    if (mimeType.startsWith('image/')) return 'image'\n    if (mimeType.startsWith('video/')) return 'video'\n    if (mimeType.startsWith('audio/')) return 'audio'\n    return 'document'\n  }\n\n  /**\n   * Check if MIME type is an image\n   */\n  private isImage(mimeType: string): boolean {\n    return mimeType.startsWith('image/')\n  }\n\n  /**\n   * Check if MIME type is a video\n   */\n  private isVideo(mimeType: string): boolean {\n    return mimeType.startsWith('video/')\n  }\n\n  /**\n   * Check if MIME type is audio\n   */\n  private isAudio(mimeType: string): boolean {\n    return mimeType.startsWith('audio/')\n  }\n\n  /**\n   * Get media files for a conversation\n   */\n  async getConversationMedia(conversationId: string): Promise<MediaFile[]> {\n    try {\n      const { data, error } = await this.supabase\n        .from('message_media')\n        .select(`\n          *,\n          message:messages(id, conversation_id, created_at)\n        `)\n        .eq('message.conversation_id', conversationId)\n        .order('created_at', { ascending: false })\n\n      if (error) {\n        throw new Error(`Failed to get conversation media: ${error.message}`)\n      }\n\n      return data?.map(item => ({\n        id: item.id,\n        messageId: item.message_id,\n        whatsappMediaId: item.whatsapp_media_id,\n        filename: item.filename,\n        mimeType: item.mime_type,\n        fileSize: item.file_size,\n        url: item.url,\n        thumbnailUrl: item.thumbnail_url,\n        downloadUrl: item.url,\n        uploadedAt: new Date(item.created_at),\n        expiresAt: item.expires_at ? new Date(item.expires_at) : undefined\n      })) || []\n    } catch (error) {\n      throw new Error(`Failed to get conversation media: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  /**\n   * Get media gallery for organization\n   */\n  async getMediaGallery(\n    organizationId: string,\n    options?: {\n      type?: 'image' | 'video' | 'audio' | 'document'\n      limit?: number\n      offset?: number\n      startDate?: Date\n      endDate?: Date\n    }\n  ): Promise<{\n    media: MediaFile[]\n    total: number\n    hasMore: boolean\n  }> {\n    try {\n      let query = this.supabase\n        .from('message_media')\n        .select(`\n          *,\n          message:messages!inner(\n            id,\n            conversation:conversations!inner(\n              id,\n              organization_id\n            )\n          )\n        `, { count: 'exact' })\n        .eq('message.conversation.organization_id', organizationId)\n\n      // Apply filters\n      if (options?.type) {\n        const mimePrefix = options.type === 'document' ? 'application/' : `${options.type}/`\n        query = query.like('mime_type', `${mimePrefix}%`)\n      }\n\n      if (options?.startDate) {\n        query = query.gte('created_at', options.startDate.toISOString())\n      }\n\n      if (options?.endDate) {\n        query = query.lte('created_at', options.endDate.toISOString())\n      }\n\n      // Apply pagination\n      const limit = options?.limit || 50\n      const offset = options?.offset || 0\n      query = query.range(offset, offset + limit - 1)\n      query = query.order('created_at', { ascending: false })\n\n      const { data, error, count } = await query\n\n      if (error) {\n        throw new Error(`Failed to get media gallery: ${error.message}`)\n      }\n\n      const media: MediaFile[] = data?.map(item => ({\n        id: item.id,\n        messageId: item.message_id,\n        whatsappMediaId: item.whatsapp_media_id,\n        filename: item.filename,\n        mimeType: item.mime_type,\n        fileSize: item.file_size,\n        url: item.url,\n        thumbnailUrl: item.thumbnail_url,\n        downloadUrl: item.url,\n        uploadedAt: new Date(item.created_at),\n        expiresAt: item.expires_at ? new Date(item.expires_at) : undefined\n      })) || []\n\n      return {\n        media,\n        total: count || 0,\n        hasMore: (offset + limit) < (count || 0)\n      }\n    } catch (error) {\n      throw new Error(`Failed to get media gallery: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  /**\n   * Delete expired media files\n   */\n  async cleanupExpiredMedia(): Promise<{ deletedCount: number }> {\n    try {\n      const { data: expiredMedia, error: selectError } = await this.supabase\n        .from('message_media')\n        .select('id, storage_path')\n        .lt('expires_at', new Date().toISOString())\n\n      if (selectError) {\n        throw new Error(`Failed to get expired media: ${selectError.message}`)\n      }\n\n      if (!expiredMedia || expiredMedia.length === 0) {\n        return { deletedCount: 0 }\n      }\n\n      // Delete from storage\n      const storagePaths = expiredMedia.map(item => item.storage_path)\n      const { error: storageError } = await this.supabase.storage\n        .from('whatsapp-media')\n        .remove(storagePaths)\n\n      if (storageError) {\n        console.error('Failed to delete from storage:', storageError)\n      }\n\n      // Delete from database\n      const mediaIds = expiredMedia.map(item => item.id)\n      const { error: deleteError } = await this.supabase\n        .from('message_media')\n        .delete()\n        .in('id', mediaIds)\n\n      if (deleteError) {\n        throw new Error(`Failed to delete from database: ${deleteError.message}`)\n      }\n\n      return { deletedCount: expiredMedia.length }\n    } catch (error) {\n      throw new Error(`Cleanup failed: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  /**\n   * Get media file size limits for WhatsApp\n   */\n  static getFileSizeLimits(): Record<string, number> {\n    return {\n      image: 5 * 1024 * 1024,     // 5MB\n      video: 16 * 1024 * 1024,    // 16MB\n      audio: 16 * 1024 * 1024,    // 16MB\n      document: 100 * 1024 * 1024  // 100MB\n    }\n  }\n\n  /**\n   * Validate media file before upload\n   */\n  static validateMediaFile(file: File): { valid: boolean, errors: string[] } {\n    const errors: string[] = []\n    const limits = WhatsAppMediaHandler.getFileSizeLimits()\n\n    // Check file size\n    const mediaType = file.type.startsWith('image/') ? 'image' :\n                     file.type.startsWith('video/') ? 'video' :\n                     file.type.startsWith('audio/') ? 'audio' : 'document'\n\n    if (file.size > limits[mediaType]) {\n      errors.push(`File size exceeds limit of ${limits[mediaType] / (1024 * 1024)}MB`)\n    }\n\n    // Check supported formats\n    const supportedTypes = [\n      // Images\n      'image/jpeg', 'image/png', 'image/webp',\n      // Videos\n      'video/mp4', 'video/3gpp',\n      // Audio\n      'audio/aac', 'audio/mp4', 'audio/mpeg', 'audio/amr', 'audio/ogg',\n      // Documents\n      'application/pdf', 'application/vnd.ms-powerpoint',\n      'application/msword', 'application/vnd.ms-excel',\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n      'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n      'text/plain', 'text/csv'\n    ]\n\n    if (!supportedTypes.includes(file.type)) {\n      errors.push(`Unsupported file type: ${file.type}`)\n    }\n\n    return {\n      valid: errors.length === 0,\n      errors\n    }\n  }\n}\n\n/**\n * Media Gallery Interface\n */\nexport interface MediaGalleryItem {\n  id: string\n  filename: string\n  mimeType: string\n  fileSize: number\n  url: string\n  thumbnailUrl?: string\n  uploadedAt: Date\n  conversationId: string\n  contactName?: string\n}\n\n/**\n * Media Statistics\n */\nexport interface MediaStats {\n  totalFiles: number\n  totalSize: number\n  byType: {\n    images: number\n    videos: number\n    audio: number\n    documents: number\n  }\n  recentUploads: number\n  storageUsed: string\n}\n\n/**\n * Media Gallery Manager\n */\nexport class MediaGalleryManager {\n  private supabase = createClient()\n\n  async getMediaStats(organizationId: string): Promise<MediaStats> {\n    try {\n      const { data, error } = await this.supabase\n        .from('message_media')\n        .select(`\n          mime_type,\n          file_size,\n          created_at,\n          message:messages!inner(\n            conversation:conversations!inner(organization_id)\n          )\n        `)\n        .eq('message.conversation.organization_id', organizationId)\n\n      if (error) {\n        throw new Error(`Failed to get media stats: ${error.message}`)\n      }\n\n      const stats: MediaStats = {\n        totalFiles: data?.length || 0,\n        totalSize: data?.reduce((sum, item) => sum + item.file_size, 0) || 0,\n        byType: {\n          images: 0,\n          videos: 0,\n          audio: 0,\n          documents: 0\n        },\n        recentUploads: 0,\n        storageUsed: ''\n      }\n\n      const weekAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)\n\n      data?.forEach(item => {\n        if (item.mime_type.startsWith('image/')) stats.byType.images++\n        else if (item.mime_type.startsWith('video/')) stats.byType.videos++\n        else if (item.mime_type.startsWith('audio/')) stats.byType.audio++\n        else stats.byType.documents++\n\n        if (new Date(item.created_at) > weekAgo) {\n          stats.recentUploads++\n        }\n      })\n\n      // Format storage used\n      stats.storageUsed = this.formatFileSize(stats.totalSize)\n\n      return stats\n    } catch (error) {\n      throw new Error(`Failed to get media stats: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  private formatFileSize(bytes: number): string {\n    if (bytes === 0) return '0 Bytes'\n    const k = 1024\n    const sizes = ['Bytes', 'KB', 'MB', 'GB']\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n  }\n}"],
      names: ["MediaGalleryManager", "WhatsAppMediaHandler", "accessToken", "phoneNumberId", "supabase", "createClient", "client", "WhatsAppClient", "downloadMedia", "mediaId", "messageId", "organizationId", "options", "mediaInfo", "getMediaInfo", "mediaResponse", "downloadMediaFile", "url", "buffer", "arrayBuffer", "filename", "generateFilename", "mime_type", "storagePath", "data", "uploadData", "error", "uploadError", "storage", "from", "upload", "contentType", "cacheControl", "Error", "message", "urlData", "getPublicUrl", "thumbnailUrl", "generateThumbnail", "isImage", "mediaFile", "id", "crypto", "randomUUID", "whatsappMediaId", "mimeType", "fileSize", "byteLength", "publicUrl", "downloadUrl", "uploadedAt", "Date", "expiresAt", "now", "dbError", "insert", "message_id", "whatsapp_media_id", "file_size", "storage_path", "thumbnail_url", "expires_at", "toISOString", "console", "uploadMedia", "file", "formData", "FormData", "Buffer", "blob", "Blob", "type", "append", "getMediaType", "response", "fetch", "method", "headers", "body", "ok", "json", "result", "success", "originalPath", "undefined", "thumbnailPath", "replace", "thumbnailData", "timestamp", "extension", "getFileExtension", "mimeMap", "startsWith", "isVideo", "isAudio", "getConversationMedia", "conversationId", "select", "eq", "order", "ascending", "map", "item", "created_at", "getMediaGallery", "query", "count", "mimePrefix", "like", "startDate", "gte", "endDate", "lte", "limit", "offset", "range", "media", "total", "hasMore", "cleanupExpiredMedia", "expiredMedia", "selectError", "lt", "length", "deletedCount", "storagePaths", "storageError", "remove", "mediaIds", "deleteError", "delete", "in", "getFileSizeLimits", "image", "video", "audio", "document", "validateMediaFile", "errors", "limits", "mediaType", "size", "push", "supportedTypes", "includes", "valid", "getMediaStats", "stats", "totalFiles", "totalSize", "reduce", "sum", "byType", "images", "videos", "documents", "recentUploads", "storageUsed", "weekAgo", "forEach", "formatFileSize", "bytes", "k", "sizes", "i", "Math", "floor", "log", "parseFloat", "pow", "toFixed"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "8e86716e168b56ae2127c117b6cd05f581a87ed2"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_ug4f0omcg = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_ug4f0omcg();
cov_ug4f0omcg().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_ug4f0omcg().f[0]++;
  cov_ug4f0omcg().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_ug4f0omcg().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_ug4f0omcg().s[3]++;
_export(exports, {
  get MediaGalleryManager() {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[1]++;
    cov_ug4f0omcg().s[4]++;
    return MediaGalleryManager;
  },
  get WhatsAppMediaHandler() {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[2]++;
    cov_ug4f0omcg().s[5]++;
    return WhatsAppMediaHandler;
  }
});
const _server =
/* istanbul ignore next */
(cov_ug4f0omcg().s[6]++, require("../supabase/server"));
const _client =
/* istanbul ignore next */
(cov_ug4f0omcg().s[7]++, require("./client"));
class WhatsAppMediaHandler {
  constructor(accessToken, phoneNumberId) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[3]++;
    cov_ug4f0omcg().s[8]++;
    this.supabase = (0, _server.createClient)();
    /* istanbul ignore next */
    cov_ug4f0omcg().s[9]++;
    this.client = new _client.WhatsAppClient(accessToken, phoneNumberId);
  }
  /**
  * Download media file from WhatsApp
  */
  async downloadMedia(mediaId, messageId, organizationId, options) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[4]++;
    cov_ug4f0omcg().s[10]++;
    try {
      // Get media info from WhatsApp API
      const mediaInfo =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[11]++, await this.getMediaInfo(mediaId));
      // Download the actual media file
      const mediaResponse =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[12]++, await this.downloadMediaFile(mediaInfo.url));
      const buffer =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[13]++, await mediaResponse.arrayBuffer());
      // Generate filename if not provided
      const filename =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[14]++, this.generateFilename(mediaInfo.mime_type, mediaId));
      // Upload to storage (Supabase Storage)
      const storagePath =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[15]++, `media/${organizationId}/${mediaId}/${filename}`);
      const {
        data: uploadData,
        error: uploadError
      } =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[16]++, await this.supabase.storage.from('whatsapp-media').upload(storagePath, buffer, {
        contentType: mediaInfo.mime_type,
        cacheControl: '3600'
      }));
      /* istanbul ignore next */
      cov_ug4f0omcg().s[17]++;
      if (uploadError) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[0][0]++;
        cov_ug4f0omcg().s[18]++;
        throw new Error(`Storage upload failed: ${uploadError.message}`);
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[0][1]++;
      }
      // Get public URL
      const {
        data: urlData
      } =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[19]++, this.supabase.storage.from('whatsapp-media').getPublicUrl(storagePath));
      // Process media if needed (thumbnails, compression)
      let thumbnailUrl;
      /* istanbul ignore next */
      cov_ug4f0omcg().s[20]++;
      if (
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[2][0]++, options?.generateThumbnail) &&
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[2][1]++, this.isImage(mediaInfo.mime_type))) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[1][0]++;
        cov_ug4f0omcg().s[21]++;
        thumbnailUrl = await this.generateThumbnail(buffer, mediaInfo.mime_type, storagePath);
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[1][1]++;
      }
      // Create media record in database
      const mediaFile =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[22]++, {
        id: crypto.randomUUID(),
        messageId,
        whatsappMediaId: mediaId,
        filename,
        mimeType: mediaInfo.mime_type,
        fileSize: buffer.byteLength,
        url: urlData.publicUrl,
        thumbnailUrl,
        downloadUrl: urlData.publicUrl,
        uploadedAt: new Date(),
        expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000) // 30 days
      });
      // Store media info in database
      const {
        error: dbError
      } =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[23]++, await this.supabase.from('message_media').insert({
        id: mediaFile.id,
        message_id: messageId,
        whatsapp_media_id: mediaId,
        filename: mediaFile.filename,
        mime_type: mediaFile.mimeType,
        file_size: mediaFile.fileSize,
        storage_path: storagePath,
        url: mediaFile.url,
        thumbnail_url: thumbnailUrl,
        expires_at: mediaFile.expiresAt?.toISOString()
      }));
      /* istanbul ignore next */
      cov_ug4f0omcg().s[24]++;
      if (dbError) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[3][0]++;
        cov_ug4f0omcg().s[25]++;
        console.error('Failed to store media info:', dbError);
        // Don't throw error, media is already uploaded
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[3][1]++;
      }
      cov_ug4f0omcg().s[26]++;
      return mediaFile;
    } catch (error) {
      /* istanbul ignore next */
      cov_ug4f0omcg().s[27]++;
      throw new Error(`Media download failed: ${error instanceof Error ?
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[4][0]++, error.message) :
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[4][1]++, 'Unknown error')}`);
    }
  }
  /**
  * Upload media file to WhatsApp for sending
  */
  async uploadMedia(file, mimeType, filename) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[5]++;
    cov_ug4f0omcg().s[28]++;
    try {
      const formData =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[29]++, new FormData());
      /* istanbul ignore next */
      cov_ug4f0omcg().s[30]++;
      if (file instanceof Buffer) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[5][0]++;
        const blob =
        /* istanbul ignore next */
        (cov_ug4f0omcg().s[31]++, new Blob([file], {
          type: mimeType
        }));
        /* istanbul ignore next */
        cov_ug4f0omcg().s[32]++;
        formData.append('file', blob,
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[6][0]++, filename) ||
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[6][1]++, 'media'));
      } else {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[5][1]++;
        cov_ug4f0omcg().s[33]++;
        formData.append('file', file);
      }
      /* istanbul ignore next */
      cov_ug4f0omcg().s[34]++;
      formData.append('messaging_product', 'whatsapp');
      /* istanbul ignore next */
      cov_ug4f0omcg().s[35]++;
      formData.append('type', this.getMediaType(mimeType));
      const response =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[36]++, await fetch(`https://graph.facebook.com/v18.0/${this.client.phoneNumberId}/media`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${this.client.accessToken}`
        },
        body: formData
      }));
      /* istanbul ignore next */
      cov_ug4f0omcg().s[37]++;
      if (!response.ok) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[7][0]++;
        const error =
        /* istanbul ignore next */
        (cov_ug4f0omcg().s[38]++, await response.json());
        /* istanbul ignore next */
        cov_ug4f0omcg().s[39]++;
        throw new Error(`Upload failed: ${
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[8][0]++, error.error?.message) ||
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[8][1]++, 'Unknown error')}`);
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[7][1]++;
      }
      const result =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[40]++, await response.json());
      /* istanbul ignore next */
      cov_ug4f0omcg().s[41]++;
      return {
        success: true,
        mediaId: result.id,
        url: result.url
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_ug4f0omcg().s[42]++;
      return {
        success: false,
        error: error instanceof Error ?
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[9][0]++, error.message) :
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[9][1]++, 'Unknown error')
      };
    }
  }
  /**
  * Get media information from WhatsApp API
  */
  async getMediaInfo(mediaId) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[6]++;
    const response =
    /* istanbul ignore next */
    (cov_ug4f0omcg().s[43]++, await fetch(`https://graph.facebook.com/v18.0/${mediaId}`, {
      headers: {
        'Authorization': `Bearer ${this.client.accessToken}`
      }
    }));
    /* istanbul ignore next */
    cov_ug4f0omcg().s[44]++;
    if (!response.ok) {
      /* istanbul ignore next */
      cov_ug4f0omcg().b[10][0]++;
      const error =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[45]++, await response.json());
      /* istanbul ignore next */
      cov_ug4f0omcg().s[46]++;
      throw new Error(`Failed to get media info: ${
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[11][0]++, error.error?.message) ||
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[11][1]++, 'Unknown error')}`);
    } else
    /* istanbul ignore next */
    {
      cov_ug4f0omcg().b[10][1]++;
    }
    cov_ug4f0omcg().s[47]++;
    return await response.json();
  }
  /**
  * Download media file from WhatsApp URL
  */
  async downloadMediaFile(url) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[7]++;
    const response =
    /* istanbul ignore next */
    (cov_ug4f0omcg().s[48]++, await fetch(url, {
      headers: {
        'Authorization': `Bearer ${this.client.accessToken}`
      }
    }));
    /* istanbul ignore next */
    cov_ug4f0omcg().s[49]++;
    if (!response.ok) {
      /* istanbul ignore next */
      cov_ug4f0omcg().b[12][0]++;
      cov_ug4f0omcg().s[50]++;
      throw new Error('Failed to download media file');
    } else
    /* istanbul ignore next */
    {
      cov_ug4f0omcg().b[12][1]++;
    }
    cov_ug4f0omcg().s[51]++;
    return response;
  }
  /**
  * Generate thumbnail for images
  */
  async generateThumbnail(buffer, mimeType, originalPath) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[8]++;
    cov_ug4f0omcg().s[52]++;
    try {
      /* istanbul ignore next */
      cov_ug4f0omcg().s[53]++;
      if (!this.isImage(mimeType)) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[13][0]++;
        cov_ug4f0omcg().s[54]++;
        return undefined;
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[13][1]++;
      }
      // This would use a proper image processing library like sharp
      // For now, we'll just return the original image for thumbnails
      const thumbnailPath =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[55]++, originalPath.replace(/(\.[^.]+)$/, '_thumb$1'));
      const {
        data: thumbnailData,
        error
      } =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[56]++, await this.supabase.storage.from('whatsapp-media').upload(thumbnailPath, buffer, {
        contentType: mimeType,
        cacheControl: '3600'
      }));
      /* istanbul ignore next */
      cov_ug4f0omcg().s[57]++;
      if (error) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[14][0]++;
        cov_ug4f0omcg().s[58]++;
        console.error('Thumbnail generation failed:', error);
        /* istanbul ignore next */
        cov_ug4f0omcg().s[59]++;
        return undefined;
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[14][1]++;
      }
      const {
        data: urlData
      } =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[60]++, this.supabase.storage.from('whatsapp-media').getPublicUrl(thumbnailPath));
      /* istanbul ignore next */
      cov_ug4f0omcg().s[61]++;
      return urlData.publicUrl;
    } catch (error) {
      /* istanbul ignore next */
      cov_ug4f0omcg().s[62]++;
      console.error('Thumbnail generation failed:', error);
      /* istanbul ignore next */
      cov_ug4f0omcg().s[63]++;
      return undefined;
    }
  }
  /**
  * Generate appropriate filename based on MIME type
  */
  generateFilename(mimeType, mediaId) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[9]++;
    const timestamp =
    /* istanbul ignore next */
    (cov_ug4f0omcg().s[64]++, Date.now());
    const extension =
    /* istanbul ignore next */
    (cov_ug4f0omcg().s[65]++, this.getFileExtension(mimeType));
    /* istanbul ignore next */
    cov_ug4f0omcg().s[66]++;
    return `${mediaId}_${timestamp}.${extension}`;
  }
  /**
  * Get file extension from MIME type
  */
  getFileExtension(mimeType) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[10]++;
    const mimeMap =
    /* istanbul ignore next */
    (cov_ug4f0omcg().s[67]++, {
      'image/jpeg': 'jpg',
      'image/png': 'png',
      'image/gif': 'gif',
      'image/webp': 'webp',
      'video/mp4': 'mp4',
      'video/quicktime': 'mov',
      'audio/mpeg': 'mp3',
      'audio/ogg': 'ogg',
      'audio/wav': 'wav',
      'application/pdf': 'pdf',
      'application/msword': 'doc',
      'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'docx',
      'application/vnd.ms-excel': 'xls',
      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'xlsx',
      'text/plain': 'txt',
      'text/csv': 'csv'
    });
    /* istanbul ignore next */
    cov_ug4f0omcg().s[68]++;
    return /* istanbul ignore next */(cov_ug4f0omcg().b[15][0]++, mimeMap[mimeType]) ||
    /* istanbul ignore next */
    (cov_ug4f0omcg().b[15][1]++, 'bin');
  }
  /**
  * Get WhatsApp media type from MIME type
  */
  getMediaType(mimeType) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[11]++;
    cov_ug4f0omcg().s[69]++;
    if (mimeType.startsWith('image/')) {
      /* istanbul ignore next */
      cov_ug4f0omcg().b[16][0]++;
      cov_ug4f0omcg().s[70]++;
      return 'image';
    } else
    /* istanbul ignore next */
    {
      cov_ug4f0omcg().b[16][1]++;
    }
    cov_ug4f0omcg().s[71]++;
    if (mimeType.startsWith('video/')) {
      /* istanbul ignore next */
      cov_ug4f0omcg().b[17][0]++;
      cov_ug4f0omcg().s[72]++;
      return 'video';
    } else
    /* istanbul ignore next */
    {
      cov_ug4f0omcg().b[17][1]++;
    }
    cov_ug4f0omcg().s[73]++;
    if (mimeType.startsWith('audio/')) {
      /* istanbul ignore next */
      cov_ug4f0omcg().b[18][0]++;
      cov_ug4f0omcg().s[74]++;
      return 'audio';
    } else
    /* istanbul ignore next */
    {
      cov_ug4f0omcg().b[18][1]++;
    }
    cov_ug4f0omcg().s[75]++;
    return 'document';
  }
  /**
  * Check if MIME type is an image
  */
  isImage(mimeType) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[12]++;
    cov_ug4f0omcg().s[76]++;
    return mimeType.startsWith('image/');
  }
  /**
  * Check if MIME type is a video
  */
  isVideo(mimeType) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[13]++;
    cov_ug4f0omcg().s[77]++;
    return mimeType.startsWith('video/');
  }
  /**
  * Check if MIME type is audio
  */
  isAudio(mimeType) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[14]++;
    cov_ug4f0omcg().s[78]++;
    return mimeType.startsWith('audio/');
  }
  /**
  * Get media files for a conversation
  */
  async getConversationMedia(conversationId) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[15]++;
    cov_ug4f0omcg().s[79]++;
    try {
      const {
        data,
        error
      } =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[80]++, await this.supabase.from('message_media').select(`
          *,
          message:messages(id, conversation_id, created_at)
        `).eq('message.conversation_id', conversationId).order('created_at', {
        ascending: false
      }));
      /* istanbul ignore next */
      cov_ug4f0omcg().s[81]++;
      if (error) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[19][0]++;
        cov_ug4f0omcg().s[82]++;
        throw new Error(`Failed to get conversation media: ${error.message}`);
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[19][1]++;
      }
      cov_ug4f0omcg().s[83]++;
      return /* istanbul ignore next */(cov_ug4f0omcg().b[20][0]++, data?.map(item => {
        /* istanbul ignore next */
        cov_ug4f0omcg().f[16]++;
        cov_ug4f0omcg().s[84]++;
        return {
          id: item.id,
          messageId: item.message_id,
          whatsappMediaId: item.whatsapp_media_id,
          filename: item.filename,
          mimeType: item.mime_type,
          fileSize: item.file_size,
          url: item.url,
          thumbnailUrl: item.thumbnail_url,
          downloadUrl: item.url,
          uploadedAt: new Date(item.created_at),
          expiresAt: item.expires_at ?
          /* istanbul ignore next */
          (cov_ug4f0omcg().b[21][0]++, new Date(item.expires_at)) :
          /* istanbul ignore next */
          (cov_ug4f0omcg().b[21][1]++, undefined)
        };
      })) ||
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[20][1]++, []);
    } catch (error) {
      /* istanbul ignore next */
      cov_ug4f0omcg().s[85]++;
      throw new Error(`Failed to get conversation media: ${error instanceof Error ?
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[22][0]++, error.message) :
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[22][1]++, 'Unknown error')}`);
    }
  }
  /**
  * Get media gallery for organization
  */
  async getMediaGallery(organizationId, options) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[17]++;
    cov_ug4f0omcg().s[86]++;
    try {
      let query =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[87]++, this.supabase.from('message_media').select(`
          *,
          message:messages!inner(
            id,
            conversation:conversations!inner(
              id,
              organization_id
            )
          )
        `, {
        count: 'exact'
      }).eq('message.conversation.organization_id', organizationId));
      // Apply filters
      /* istanbul ignore next */
      cov_ug4f0omcg().s[88]++;
      if (options?.type) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[23][0]++;
        const mimePrefix =
        /* istanbul ignore next */
        (cov_ug4f0omcg().s[89]++, options.type === 'document' ?
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[24][0]++, 'application/') :
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[24][1]++, `${options.type}/`));
        /* istanbul ignore next */
        cov_ug4f0omcg().s[90]++;
        query = query.like('mime_type', `${mimePrefix}%`);
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[23][1]++;
      }
      cov_ug4f0omcg().s[91]++;
      if (options?.startDate) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[25][0]++;
        cov_ug4f0omcg().s[92]++;
        query = query.gte('created_at', options.startDate.toISOString());
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[25][1]++;
      }
      cov_ug4f0omcg().s[93]++;
      if (options?.endDate) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[26][0]++;
        cov_ug4f0omcg().s[94]++;
        query = query.lte('created_at', options.endDate.toISOString());
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[26][1]++;
      }
      // Apply pagination
      const limit =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[95]++,
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[27][0]++, options?.limit) ||
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[27][1]++, 50));
      const offset =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[96]++,
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[28][0]++, options?.offset) ||
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[28][1]++, 0));
      /* istanbul ignore next */
      cov_ug4f0omcg().s[97]++;
      query = query.range(offset, offset + limit - 1);
      /* istanbul ignore next */
      cov_ug4f0omcg().s[98]++;
      query = query.order('created_at', {
        ascending: false
      });
      const {
        data,
        error,
        count
      } =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[99]++, await query);
      /* istanbul ignore next */
      cov_ug4f0omcg().s[100]++;
      if (error) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[29][0]++;
        cov_ug4f0omcg().s[101]++;
        throw new Error(`Failed to get media gallery: ${error.message}`);
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[29][1]++;
      }
      const media =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[102]++,
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[30][0]++, data?.map(item => {
        /* istanbul ignore next */
        cov_ug4f0omcg().f[18]++;
        cov_ug4f0omcg().s[103]++;
        return {
          id: item.id,
          messageId: item.message_id,
          whatsappMediaId: item.whatsapp_media_id,
          filename: item.filename,
          mimeType: item.mime_type,
          fileSize: item.file_size,
          url: item.url,
          thumbnailUrl: item.thumbnail_url,
          downloadUrl: item.url,
          uploadedAt: new Date(item.created_at),
          expiresAt: item.expires_at ?
          /* istanbul ignore next */
          (cov_ug4f0omcg().b[31][0]++, new Date(item.expires_at)) :
          /* istanbul ignore next */
          (cov_ug4f0omcg().b[31][1]++, undefined)
        };
      })) ||
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[30][1]++, []));
      /* istanbul ignore next */
      cov_ug4f0omcg().s[104]++;
      return {
        media,
        total:
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[32][0]++, count) ||
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[32][1]++, 0),
        hasMore: offset + limit < (
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[33][0]++, count) ||
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[33][1]++, 0))
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_ug4f0omcg().s[105]++;
      throw new Error(`Failed to get media gallery: ${error instanceof Error ?
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[34][0]++, error.message) :
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[34][1]++, 'Unknown error')}`);
    }
  }
  /**
  * Delete expired media files
  */
  async cleanupExpiredMedia() {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[19]++;
    cov_ug4f0omcg().s[106]++;
    try {
      const {
        data: expiredMedia,
        error: selectError
      } =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[107]++, await this.supabase.from('message_media').select('id, storage_path').lt('expires_at', new Date().toISOString()));
      /* istanbul ignore next */
      cov_ug4f0omcg().s[108]++;
      if (selectError) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[35][0]++;
        cov_ug4f0omcg().s[109]++;
        throw new Error(`Failed to get expired media: ${selectError.message}`);
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[35][1]++;
      }
      cov_ug4f0omcg().s[110]++;
      if (
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[37][0]++, !expiredMedia) ||
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[37][1]++, expiredMedia.length === 0)) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[36][0]++;
        cov_ug4f0omcg().s[111]++;
        return {
          deletedCount: 0
        };
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[36][1]++;
      }
      // Delete from storage
      const storagePaths =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[112]++, expiredMedia.map(item => {
        /* istanbul ignore next */
        cov_ug4f0omcg().f[20]++;
        cov_ug4f0omcg().s[113]++;
        return item.storage_path;
      }));
      const {
        error: storageError
      } =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[114]++, await this.supabase.storage.from('whatsapp-media').remove(storagePaths));
      /* istanbul ignore next */
      cov_ug4f0omcg().s[115]++;
      if (storageError) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[38][0]++;
        cov_ug4f0omcg().s[116]++;
        console.error('Failed to delete from storage:', storageError);
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[38][1]++;
      }
      // Delete from database
      const mediaIds =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[117]++, expiredMedia.map(item => {
        /* istanbul ignore next */
        cov_ug4f0omcg().f[21]++;
        cov_ug4f0omcg().s[118]++;
        return item.id;
      }));
      const {
        error: deleteError
      } =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[119]++, await this.supabase.from('message_media').delete().in('id', mediaIds));
      /* istanbul ignore next */
      cov_ug4f0omcg().s[120]++;
      if (deleteError) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[39][0]++;
        cov_ug4f0omcg().s[121]++;
        throw new Error(`Failed to delete from database: ${deleteError.message}`);
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[39][1]++;
      }
      cov_ug4f0omcg().s[122]++;
      return {
        deletedCount: expiredMedia.length
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_ug4f0omcg().s[123]++;
      throw new Error(`Cleanup failed: ${error instanceof Error ?
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[40][0]++, error.message) :
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[40][1]++, 'Unknown error')}`);
    }
  }
  /**
  * Get media file size limits for WhatsApp
  */
  static getFileSizeLimits() {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[22]++;
    cov_ug4f0omcg().s[124]++;
    return {
      image: 5 * 1024 * 1024,
      video: 16 * 1024 * 1024,
      audio: 16 * 1024 * 1024,
      document: 100 * 1024 * 1024 // 100MB
    };
  }
  /**
  * Validate media file before upload
  */
  static validateMediaFile(file) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[23]++;
    const errors =
    /* istanbul ignore next */
    (cov_ug4f0omcg().s[125]++, []);
    const limits =
    /* istanbul ignore next */
    (cov_ug4f0omcg().s[126]++, WhatsAppMediaHandler.getFileSizeLimits());
    // Check file size
    const mediaType =
    /* istanbul ignore next */
    (cov_ug4f0omcg().s[127]++, file.type.startsWith('image/') ?
    /* istanbul ignore next */
    (cov_ug4f0omcg().b[41][0]++, 'image') :
    /* istanbul ignore next */
    (cov_ug4f0omcg().b[41][1]++, file.type.startsWith('video/') ?
    /* istanbul ignore next */
    (cov_ug4f0omcg().b[42][0]++, 'video') :
    /* istanbul ignore next */
    (cov_ug4f0omcg().b[42][1]++, file.type.startsWith('audio/') ?
    /* istanbul ignore next */
    (cov_ug4f0omcg().b[43][0]++, 'audio') :
    /* istanbul ignore next */
    (cov_ug4f0omcg().b[43][1]++, 'document'))));
    /* istanbul ignore next */
    cov_ug4f0omcg().s[128]++;
    if (file.size > limits[mediaType]) {
      /* istanbul ignore next */
      cov_ug4f0omcg().b[44][0]++;
      cov_ug4f0omcg().s[129]++;
      errors.push(`File size exceeds limit of ${limits[mediaType] / (1024 * 1024)}MB`);
    } else
    /* istanbul ignore next */
    {
      cov_ug4f0omcg().b[44][1]++;
    }
    // Check supported formats
    const supportedTypes =
    /* istanbul ignore next */
    (cov_ug4f0omcg().s[130]++, [
    // Images
    'image/jpeg', 'image/png', 'image/webp',
    // Videos
    'video/mp4', 'video/3gpp',
    // Audio
    'audio/aac', 'audio/mp4', 'audio/mpeg', 'audio/amr', 'audio/ogg',
    // Documents
    'application/pdf', 'application/vnd.ms-powerpoint', 'application/msword', 'application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'application/vnd.openxmlformats-officedocument.presentationml.presentation', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'text/plain', 'text/csv']);
    /* istanbul ignore next */
    cov_ug4f0omcg().s[131]++;
    if (!supportedTypes.includes(file.type)) {
      /* istanbul ignore next */
      cov_ug4f0omcg().b[45][0]++;
      cov_ug4f0omcg().s[132]++;
      errors.push(`Unsupported file type: ${file.type}`);
    } else
    /* istanbul ignore next */
    {
      cov_ug4f0omcg().b[45][1]++;
    }
    cov_ug4f0omcg().s[133]++;
    return {
      valid: errors.length === 0,
      errors
    };
  }
}
class MediaGalleryManager {
  async getMediaStats(organizationId) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[24]++;
    cov_ug4f0omcg().s[134]++;
    try {
      const {
        data,
        error
      } =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[135]++, await this.supabase.from('message_media').select(`
          mime_type,
          file_size,
          created_at,
          message:messages!inner(
            conversation:conversations!inner(organization_id)
          )
        `).eq('message.conversation.organization_id', organizationId));
      /* istanbul ignore next */
      cov_ug4f0omcg().s[136]++;
      if (error) {
        /* istanbul ignore next */
        cov_ug4f0omcg().b[46][0]++;
        cov_ug4f0omcg().s[137]++;
        throw new Error(`Failed to get media stats: ${error.message}`);
      } else
      /* istanbul ignore next */
      {
        cov_ug4f0omcg().b[46][1]++;
      }
      const stats =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[138]++, {
        totalFiles:
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[47][0]++, data?.length) ||
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[47][1]++, 0),
        totalSize:
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[48][0]++, data?.reduce((sum, item) => {
          /* istanbul ignore next */
          cov_ug4f0omcg().f[25]++;
          cov_ug4f0omcg().s[139]++;
          return sum + item.file_size;
        }, 0)) ||
        /* istanbul ignore next */
        (cov_ug4f0omcg().b[48][1]++, 0),
        byType: {
          images: 0,
          videos: 0,
          audio: 0,
          documents: 0
        },
        recentUploads: 0,
        storageUsed: ''
      });
      const weekAgo =
      /* istanbul ignore next */
      (cov_ug4f0omcg().s[140]++, new Date(Date.now() - 7 * 24 * 60 * 60 * 1000));
      /* istanbul ignore next */
      cov_ug4f0omcg().s[141]++;
      data?.forEach(item => {
        /* istanbul ignore next */
        cov_ug4f0omcg().f[26]++;
        cov_ug4f0omcg().s[142]++;
        if (item.mime_type.startsWith('image/')) {
          /* istanbul ignore next */
          cov_ug4f0omcg().b[49][0]++;
          cov_ug4f0omcg().s[143]++;
          stats.byType.images++;
        } else {
          /* istanbul ignore next */
          cov_ug4f0omcg().b[49][1]++;
          cov_ug4f0omcg().s[144]++;
          if (item.mime_type.startsWith('video/')) {
            /* istanbul ignore next */
            cov_ug4f0omcg().b[50][0]++;
            cov_ug4f0omcg().s[145]++;
            stats.byType.videos++;
          } else {
            /* istanbul ignore next */
            cov_ug4f0omcg().b[50][1]++;
            cov_ug4f0omcg().s[146]++;
            if (item.mime_type.startsWith('audio/')) {
              /* istanbul ignore next */
              cov_ug4f0omcg().b[51][0]++;
              cov_ug4f0omcg().s[147]++;
              stats.byType.audio++;
            } else {
              /* istanbul ignore next */
              cov_ug4f0omcg().b[51][1]++;
              cov_ug4f0omcg().s[148]++;
              stats.byType.documents++;
            }
          }
        }
        /* istanbul ignore next */
        cov_ug4f0omcg().s[149]++;
        if (new Date(item.created_at) > weekAgo) {
          /* istanbul ignore next */
          cov_ug4f0omcg().b[52][0]++;
          cov_ug4f0omcg().s[150]++;
          stats.recentUploads++;
        } else
        /* istanbul ignore next */
        {
          cov_ug4f0omcg().b[52][1]++;
        }
      });
      // Format storage used
      /* istanbul ignore next */
      cov_ug4f0omcg().s[151]++;
      stats.storageUsed = this.formatFileSize(stats.totalSize);
      /* istanbul ignore next */
      cov_ug4f0omcg().s[152]++;
      return stats;
    } catch (error) {
      /* istanbul ignore next */
      cov_ug4f0omcg().s[153]++;
      throw new Error(`Failed to get media stats: ${error instanceof Error ?
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[53][0]++, error.message) :
      /* istanbul ignore next */
      (cov_ug4f0omcg().b[53][1]++, 'Unknown error')}`);
    }
  }
  formatFileSize(bytes) {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[27]++;
    cov_ug4f0omcg().s[154]++;
    if (bytes === 0) {
      /* istanbul ignore next */
      cov_ug4f0omcg().b[54][0]++;
      cov_ug4f0omcg().s[155]++;
      return '0 Bytes';
    } else
    /* istanbul ignore next */
    {
      cov_ug4f0omcg().b[54][1]++;
    }
    const k =
    /* istanbul ignore next */
    (cov_ug4f0omcg().s[156]++, 1024);
    const sizes =
    /* istanbul ignore next */
    (cov_ug4f0omcg().s[157]++, ['Bytes', 'KB', 'MB', 'GB']);
    const i =
    /* istanbul ignore next */
    (cov_ug4f0omcg().s[158]++, Math.floor(Math.log(bytes) / Math.log(k)));
    /* istanbul ignore next */
    cov_ug4f0omcg().s[159]++;
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
  }
  constructor() {
    /* istanbul ignore next */
    cov_ug4f0omcg().f[28]++;
    cov_ug4f0omcg().s[160]++;
    this.supabase = (0, _server.createClient)();
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNZWRpYUdhbGxlcnlNYW5hZ2VyIiwiY292X3VnNGYwb21jZyIsImYiLCJzIiwiV2hhdHNBcHBNZWRpYUhhbmRsZXIiLCJjb25zdHJ1Y3RvciIsImFjY2Vzc1Rva2VuIiwicGhvbmVOdW1iZXJJZCIsInN1cGFiYXNlIiwiX3NlcnZlciIsImNyZWF0ZUNsaWVudCIsImNsaWVudCIsIl9jbGllbnQiLCJXaGF0c0FwcENsaWVudCIsImRvd25sb2FkTWVkaWEiLCJtZWRpYUlkIiwibWVzc2FnZUlkIiwib3JnYW5pemF0aW9uSWQiLCJvcHRpb25zIiwibWVkaWFJbmZvIiwiZ2V0TWVkaWFJbmZvIiwibWVkaWFSZXNwb25zZSIsImRvd25sb2FkTWVkaWFGaWxlIiwidXJsIiwiYnVmZmVyIiwiYXJyYXlCdWZmZXIiLCJmaWxlbmFtZSIsImdlbmVyYXRlRmlsZW5hbWUiLCJtaW1lX3R5cGUiLCJzdG9yYWdlUGF0aCIsImRhdGEiLCJ1cGxvYWREYXRhIiwiZXJyb3IiLCJ1cGxvYWRFcnJvciIsInN0b3JhZ2UiLCJmcm9tIiwidXBsb2FkIiwiY29udGVudFR5cGUiLCJjYWNoZUNvbnRyb2wiLCJiIiwiRXJyb3IiLCJtZXNzYWdlIiwidXJsRGF0YSIsImdldFB1YmxpY1VybCIsInRodW1ibmFpbFVybCIsImdlbmVyYXRlVGh1bWJuYWlsIiwiaXNJbWFnZSIsIm1lZGlhRmlsZSIsImlkIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsIndoYXRzYXBwTWVkaWFJZCIsIm1pbWVUeXBlIiwiZmlsZVNpemUiLCJieXRlTGVuZ3RoIiwicHVibGljVXJsIiwiZG93bmxvYWRVcmwiLCJ1cGxvYWRlZEF0IiwiRGF0ZSIsImV4cGlyZXNBdCIsIm5vdyIsImRiRXJyb3IiLCJpbnNlcnQiLCJtZXNzYWdlX2lkIiwid2hhdHNhcHBfbWVkaWFfaWQiLCJmaWxlX3NpemUiLCJzdG9yYWdlX3BhdGgiLCJ0aHVtYm5haWxfdXJsIiwiZXhwaXJlc19hdCIsInRvSVNPU3RyaW5nIiwiY29uc29sZSIsInVwbG9hZE1lZGlhIiwiZmlsZSIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJCdWZmZXIiLCJibG9iIiwiQmxvYiIsInR5cGUiLCJhcHBlbmQiLCJnZXRNZWRpYVR5cGUiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJvayIsImpzb24iLCJyZXN1bHQiLCJzdWNjZXNzIiwib3JpZ2luYWxQYXRoIiwidW5kZWZpbmVkIiwidGh1bWJuYWlsUGF0aCIsInJlcGxhY2UiLCJ0aHVtYm5haWxEYXRhIiwidGltZXN0YW1wIiwiZXh0ZW5zaW9uIiwiZ2V0RmlsZUV4dGVuc2lvbiIsIm1pbWVNYXAiLCJzdGFydHNXaXRoIiwiaXNWaWRlbyIsImlzQXVkaW8iLCJnZXRDb252ZXJzYXRpb25NZWRpYSIsImNvbnZlcnNhdGlvbklkIiwic2VsZWN0IiwiZXEiLCJvcmRlciIsImFzY2VuZGluZyIsIm1hcCIsIml0ZW0iLCJjcmVhdGVkX2F0IiwiZ2V0TWVkaWFHYWxsZXJ5IiwicXVlcnkiLCJjb3VudCIsIm1pbWVQcmVmaXgiLCJsaWtlIiwic3RhcnREYXRlIiwiZ3RlIiwiZW5kRGF0ZSIsImx0ZSIsImxpbWl0Iiwib2Zmc2V0IiwicmFuZ2UiLCJtZWRpYSIsInRvdGFsIiwiaGFzTW9yZSIsImNsZWFudXBFeHBpcmVkTWVkaWEiLCJleHBpcmVkTWVkaWEiLCJzZWxlY3RFcnJvciIsImx0IiwibGVuZ3RoIiwiZGVsZXRlZENvdW50Iiwic3RvcmFnZVBhdGhzIiwic3RvcmFnZUVycm9yIiwicmVtb3ZlIiwibWVkaWFJZHMiLCJkZWxldGVFcnJvciIsImRlbGV0ZSIsImluIiwiZ2V0RmlsZVNpemVMaW1pdHMiLCJpbWFnZSIsInZpZGVvIiwiYXVkaW8iLCJkb2N1bWVudCIsInZhbGlkYXRlTWVkaWFGaWxlIiwiZXJyb3JzIiwibGltaXRzIiwibWVkaWFUeXBlIiwic2l6ZSIsInB1c2giLCJzdXBwb3J0ZWRUeXBlcyIsImluY2x1ZGVzIiwidmFsaWQiLCJnZXRNZWRpYVN0YXRzIiwic3RhdHMiLCJ0b3RhbEZpbGVzIiwidG90YWxTaXplIiwicmVkdWNlIiwic3VtIiwiYnlUeXBlIiwiaW1hZ2VzIiwidmlkZW9zIiwiZG9jdW1lbnRzIiwicmVjZW50VXBsb2FkcyIsInN0b3JhZ2VVc2VkIiwid2Vla0FnbyIsImZvckVhY2giLCJmb3JtYXRGaWxlU2l6ZSIsImJ5dGVzIiwiayIsInNpemVzIiwiaSIsIk1hdGgiLCJmbG9vciIsImxvZyIsInBhcnNlRmxvYXQiLCJwb3ciLCJ0b0ZpeGVkIl0sInNvdXJjZXMiOlsiQzpcXEFpIFByb2plY3RlblxcQURTYXBwXFxzcmNcXGxpYlxcd2hhdHNhcHBcXG1lZGlhLWhhbmRsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2Uvc2VydmVyJ1xuaW1wb3J0IHsgV2hhdHNBcHBDbGllbnQgfSBmcm9tICcuL2NsaWVudCdcblxuZXhwb3J0IGludGVyZmFjZSBNZWRpYUZpbGUge1xuICBpZDogc3RyaW5nXG4gIG1lc3NhZ2VJZDogc3RyaW5nXG4gIHdoYXRzYXBwTWVkaWFJZDogc3RyaW5nXG4gIGZpbGVuYW1lOiBzdHJpbmdcbiAgbWltZVR5cGU6IHN0cmluZ1xuICBmaWxlU2l6ZTogbnVtYmVyXG4gIHVybD86IHN0cmluZ1xuICB0aHVtYm5haWxVcmw/OiBzdHJpbmdcbiAgZG93bmxvYWRVcmw/OiBzdHJpbmdcbiAgdXBsb2FkZWRBdDogRGF0ZVxuICBleHBpcmVzQXQ/OiBEYXRlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWFVcGxvYWRSZXN1bHQge1xuICBzdWNjZXNzOiBib29sZWFuXG4gIG1lZGlhSWQ/OiBzdHJpbmdcbiAgdXJsPzogc3RyaW5nXG4gIGVycm9yPzogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWFQcm9jZXNzaW5nT3B0aW9ucyB7XG4gIGdlbmVyYXRlVGh1bWJuYWlsPzogYm9vbGVhblxuICBjb21wcmVzc2lvbkxldmVsPzogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJ1xuICBtYXhXaWR0aD86IG51bWJlclxuICBtYXhIZWlnaHQ/OiBudW1iZXJcbiAgcXVhbGl0eT86IG51bWJlclxufVxuXG5leHBvcnQgY2xhc3MgV2hhdHNBcHBNZWRpYUhhbmRsZXIge1xuICBwcml2YXRlIGNsaWVudDogV2hhdHNBcHBDbGllbnRcbiAgcHJpdmF0ZSBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpXG5cbiAgY29uc3RydWN0b3IoYWNjZXNzVG9rZW46IHN0cmluZywgcGhvbmVOdW1iZXJJZDogc3RyaW5nKSB7XG4gICAgdGhpcy5jbGllbnQgPSBuZXcgV2hhdHNBcHBDbGllbnQoYWNjZXNzVG9rZW4sIHBob25lTnVtYmVySWQpXG4gIH1cblxuICAvKipcbiAgICogRG93bmxvYWQgbWVkaWEgZmlsZSBmcm9tIFdoYXRzQXBwXG4gICAqL1xuICBhc3luYyBkb3dubG9hZE1lZGlhKFxuICAgIG1lZGlhSWQ6IHN0cmluZyxcbiAgICBtZXNzYWdlSWQ6IHN0cmluZyxcbiAgICBvcmdhbml6YXRpb25JZDogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBNZWRpYVByb2Nlc3NpbmdPcHRpb25zXG4gICk6IFByb21pc2U8TWVkaWFGaWxlPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBtZWRpYSBpbmZvIGZyb20gV2hhdHNBcHAgQVBJXG4gICAgICBjb25zdCBtZWRpYUluZm8gPSBhd2FpdCB0aGlzLmdldE1lZGlhSW5mbyhtZWRpYUlkKVxuXG4gICAgICAvLyBEb3dubG9hZCB0aGUgYWN0dWFsIG1lZGlhIGZpbGVcbiAgICAgIGNvbnN0IG1lZGlhUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmRvd25sb2FkTWVkaWFGaWxlKG1lZGlhSW5mby51cmwpXG4gICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCBtZWRpYVJlc3BvbnNlLmFycmF5QnVmZmVyKClcblxuICAgICAgLy8gR2VuZXJhdGUgZmlsZW5hbWUgaWYgbm90IHByb3ZpZGVkXG4gICAgICBjb25zdCBmaWxlbmFtZSA9IHRoaXMuZ2VuZXJhdGVGaWxlbmFtZShtZWRpYUluZm8ubWltZV90eXBlLCBtZWRpYUlkKVxuXG4gICAgICAvLyBVcGxvYWQgdG8gc3RvcmFnZSAoU3VwYWJhc2UgU3RvcmFnZSlcbiAgICAgIGNvbnN0IHN0b3JhZ2VQYXRoID0gYG1lZGlhLyR7b3JnYW5pemF0aW9uSWR9LyR7bWVkaWFJZH0vJHtmaWxlbmFtZX1gXG4gICAgICBjb25zdCB7IGRhdGE6IHVwbG9hZERhdGEsIGVycm9yOiB1cGxvYWRFcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZS5zdG9yYWdlXG4gICAgICAgIC5mcm9tKCd3aGF0c2FwcC1tZWRpYScpXG4gICAgICAgIC51cGxvYWQoc3RvcmFnZVBhdGgsIGJ1ZmZlciwge1xuICAgICAgICAgIGNvbnRlbnRUeXBlOiBtZWRpYUluZm8ubWltZV90eXBlLFxuICAgICAgICAgIGNhY2hlQ29udHJvbDogJzM2MDAnXG4gICAgICAgIH0pXG5cbiAgICAgIGlmICh1cGxvYWRFcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFN0b3JhZ2UgdXBsb2FkIGZhaWxlZDogJHt1cGxvYWRFcnJvci5tZXNzYWdlfWApXG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBwdWJsaWMgVVJMXG4gICAgICBjb25zdCB7IGRhdGE6IHVybERhdGEgfSA9IHRoaXMuc3VwYWJhc2Uuc3RvcmFnZVxuICAgICAgICAuZnJvbSgnd2hhdHNhcHAtbWVkaWEnKVxuICAgICAgICAuZ2V0UHVibGljVXJsKHN0b3JhZ2VQYXRoKVxuXG4gICAgICAvLyBQcm9jZXNzIG1lZGlhIGlmIG5lZWRlZCAodGh1bWJuYWlscywgY29tcHJlc3Npb24pXG4gICAgICBsZXQgdGh1bWJuYWlsVXJsOiBzdHJpbmcgfCB1bmRlZmluZWRcbiAgICAgIGlmIChvcHRpb25zPy5nZW5lcmF0ZVRodW1ibmFpbCAmJiB0aGlzLmlzSW1hZ2UobWVkaWFJbmZvLm1pbWVfdHlwZSkpIHtcbiAgICAgICAgdGh1bWJuYWlsVXJsID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVRodW1ibmFpbChidWZmZXIsIG1lZGlhSW5mby5taW1lX3R5cGUsIHN0b3JhZ2VQYXRoKVxuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgbWVkaWEgcmVjb3JkIGluIGRhdGFiYXNlXG4gICAgICBjb25zdCBtZWRpYUZpbGU6IE1lZGlhRmlsZSA9IHtcbiAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgIG1lc3NhZ2VJZCxcbiAgICAgICAgd2hhdHNhcHBNZWRpYUlkOiBtZWRpYUlkLFxuICAgICAgICBmaWxlbmFtZSxcbiAgICAgICAgbWltZVR5cGU6IG1lZGlhSW5mby5taW1lX3R5cGUsXG4gICAgICAgIGZpbGVTaXplOiBidWZmZXIuYnl0ZUxlbmd0aCxcbiAgICAgICAgdXJsOiB1cmxEYXRhLnB1YmxpY1VybCxcbiAgICAgICAgdGh1bWJuYWlsVXJsLFxuICAgICAgICBkb3dubG9hZFVybDogdXJsRGF0YS5wdWJsaWNVcmwsXG4gICAgICAgIHVwbG9hZGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGV4cGlyZXNBdDogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCkgLy8gMzAgZGF5c1xuICAgICAgfVxuXG4gICAgICAvLyBTdG9yZSBtZWRpYSBpbmZvIGluIGRhdGFiYXNlXG4gICAgICBjb25zdCB7IGVycm9yOiBkYkVycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdtZXNzYWdlX21lZGlhJylcbiAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgaWQ6IG1lZGlhRmlsZS5pZCxcbiAgICAgICAgICBtZXNzYWdlX2lkOiBtZXNzYWdlSWQsXG4gICAgICAgICAgd2hhdHNhcHBfbWVkaWFfaWQ6IG1lZGlhSWQsXG4gICAgICAgICAgZmlsZW5hbWU6IG1lZGlhRmlsZS5maWxlbmFtZSxcbiAgICAgICAgICBtaW1lX3R5cGU6IG1lZGlhRmlsZS5taW1lVHlwZSxcbiAgICAgICAgICBmaWxlX3NpemU6IG1lZGlhRmlsZS5maWxlU2l6ZSxcbiAgICAgICAgICBzdG9yYWdlX3BhdGg6IHN0b3JhZ2VQYXRoLFxuICAgICAgICAgIHVybDogbWVkaWFGaWxlLnVybCxcbiAgICAgICAgICB0aHVtYm5haWxfdXJsOiB0aHVtYm5haWxVcmwsXG4gICAgICAgICAgZXhwaXJlc19hdDogbWVkaWFGaWxlLmV4cGlyZXNBdD8udG9JU09TdHJpbmcoKVxuICAgICAgICB9KVxuXG4gICAgICBpZiAoZGJFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc3RvcmUgbWVkaWEgaW5mbzonLCBkYkVycm9yKVxuICAgICAgICAvLyBEb24ndCB0aHJvdyBlcnJvciwgbWVkaWEgaXMgYWxyZWFkeSB1cGxvYWRlZFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbWVkaWFGaWxlXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTWVkaWEgZG93bmxvYWQgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwbG9hZCBtZWRpYSBmaWxlIHRvIFdoYXRzQXBwIGZvciBzZW5kaW5nXG4gICAqL1xuICBhc3luYyB1cGxvYWRNZWRpYShcbiAgICBmaWxlOiBGaWxlIHwgQnVmZmVyLFxuICAgIG1pbWVUeXBlOiBzdHJpbmcsXG4gICAgZmlsZW5hbWU/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxNZWRpYVVwbG9hZFJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpXG5cbiAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgQnVmZmVyKSB7XG4gICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZmlsZV0sIHsgdHlwZTogbWltZVR5cGUgfSlcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgYmxvYiwgZmlsZW5hbWUgfHwgJ21lZGlhJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpXG4gICAgICB9XG5cbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnbWVzc2FnaW5nX3Byb2R1Y3QnLCAnd2hhdHNhcHAnKVxuICAgICAgZm9ybURhdGEuYXBwZW5kKCd0eXBlJywgdGhpcy5nZXRNZWRpYVR5cGUobWltZVR5cGUpKVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92MTguMC8ke3RoaXMuY2xpZW50LnBob25lTnVtYmVySWR9L21lZGlhYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuY2xpZW50LmFjY2Vzc1Rva2VufWAsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICAgICAgfSlcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVwbG9hZCBmYWlsZWQ6ICR7ZXJyb3IuZXJyb3I/Lm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVkaWFJZDogcmVzdWx0LmlkLFxuICAgICAgICB1cmw6IHJlc3VsdC51cmxcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbWVkaWEgaW5mb3JtYXRpb24gZnJvbSBXaGF0c0FwcCBBUElcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0TWVkaWFJbmZvKG1lZGlhSWQ6IHN0cmluZyk6IFByb21pc2U8eyB1cmw6IHN0cmluZzsgbWltZV90eXBlOiBzdHJpbmc7IHNoYTI1Njogc3RyaW5nOyBmaWxlX3NpemU6IG51bWJlcjsgaWQ6IHN0cmluZyB9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjE4LjAvJHttZWRpYUlkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5jbGllbnQuYWNjZXNzVG9rZW59YCxcbiAgICAgIH0sXG4gICAgfSlcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgbWVkaWEgaW5mbzogJHtlcnJvci5lcnJvcj8ubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YClcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gIH1cblxuICAvKipcbiAgICogRG93bmxvYWQgbWVkaWEgZmlsZSBmcm9tIFdoYXRzQXBwIFVSTFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBkb3dubG9hZE1lZGlhRmlsZSh1cmw6IHN0cmluZyk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmNsaWVudC5hY2Nlc3NUb2tlbn1gLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZG93bmxvYWQgbWVkaWEgZmlsZScpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgdGh1bWJuYWlsIGZvciBpbWFnZXNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVUaHVtYm5haWwoXG4gICAgYnVmZmVyOiBBcnJheUJ1ZmZlcixcbiAgICBtaW1lVHlwZTogc3RyaW5nLFxuICAgIG9yaWdpbmFsUGF0aDogc3RyaW5nXG4gICk6IFByb21pc2U8c3RyaW5nIHwgdW5kZWZpbmVkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy5pc0ltYWdlKG1pbWVUeXBlKSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG5cbiAgICAgIC8vIFRoaXMgd291bGQgdXNlIGEgcHJvcGVyIGltYWdlIHByb2Nlc3NpbmcgbGlicmFyeSBsaWtlIHNoYXJwXG4gICAgICAvLyBGb3Igbm93LCB3ZSdsbCBqdXN0IHJldHVybiB0aGUgb3JpZ2luYWwgaW1hZ2UgZm9yIHRodW1ibmFpbHNcbiAgICAgIGNvbnN0IHRodW1ibmFpbFBhdGggPSBvcmlnaW5hbFBhdGgucmVwbGFjZSgvKFxcLlteLl0rKSQvLCAnX3RodW1iJDEnKVxuXG4gICAgICBjb25zdCB7IGRhdGE6IHRodW1ibmFpbERhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlLnN0b3JhZ2VcbiAgICAgICAgLmZyb20oJ3doYXRzYXBwLW1lZGlhJylcbiAgICAgICAgLnVwbG9hZCh0aHVtYm5haWxQYXRoLCBidWZmZXIsIHtcbiAgICAgICAgICBjb250ZW50VHlwZTogbWltZVR5cGUsXG4gICAgICAgICAgY2FjaGVDb250cm9sOiAnMzYwMCdcbiAgICAgICAgfSlcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RodW1ibmFpbCBnZW5lcmF0aW9uIGZhaWxlZDonLCBlcnJvcilcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgfVxuXG4gICAgICBjb25zdCB7IGRhdGE6IHVybERhdGEgfSA9IHRoaXMuc3VwYWJhc2Uuc3RvcmFnZVxuICAgICAgICAuZnJvbSgnd2hhdHNhcHAtbWVkaWEnKVxuICAgICAgICAuZ2V0UHVibGljVXJsKHRodW1ibmFpbFBhdGgpXG5cbiAgICAgIHJldHVybiB1cmxEYXRhLnB1YmxpY1VybFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdUaHVtYm5haWwgZ2VuZXJhdGlvbiBmYWlsZWQ6JywgZXJyb3IpXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGFwcHJvcHJpYXRlIGZpbGVuYW1lIGJhc2VkIG9uIE1JTUUgdHlwZVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUZpbGVuYW1lKG1pbWVUeXBlOiBzdHJpbmcsIG1lZGlhSWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKVxuICAgIGNvbnN0IGV4dGVuc2lvbiA9IHRoaXMuZ2V0RmlsZUV4dGVuc2lvbihtaW1lVHlwZSlcbiAgICByZXR1cm4gYCR7bWVkaWFJZH1fJHt0aW1lc3RhbXB9LiR7ZXh0ZW5zaW9ufWBcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZmlsZSBleHRlbnNpb24gZnJvbSBNSU1FIHR5cGVcbiAgICovXG4gIHByaXZhdGUgZ2V0RmlsZUV4dGVuc2lvbihtaW1lVHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBtaW1lTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ2ltYWdlL2pwZWcnOiAnanBnJyxcbiAgICAgICdpbWFnZS9wbmcnOiAncG5nJyxcbiAgICAgICdpbWFnZS9naWYnOiAnZ2lmJyxcbiAgICAgICdpbWFnZS93ZWJwJzogJ3dlYnAnLFxuICAgICAgJ3ZpZGVvL21wNCc6ICdtcDQnLFxuICAgICAgJ3ZpZGVvL3F1aWNrdGltZSc6ICdtb3YnLFxuICAgICAgJ2F1ZGlvL21wZWcnOiAnbXAzJyxcbiAgICAgICdhdWRpby9vZ2cnOiAnb2dnJyxcbiAgICAgICdhdWRpby93YXYnOiAnd2F2JyxcbiAgICAgICdhcHBsaWNhdGlvbi9wZGYnOiAncGRmJyxcbiAgICAgICdhcHBsaWNhdGlvbi9tc3dvcmQnOiAnZG9jJyxcbiAgICAgICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCc6ICdkb2N4JyxcbiAgICAgICdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwnOiAneGxzJyxcbiAgICAgICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCc6ICd4bHN4JyxcbiAgICAgICd0ZXh0L3BsYWluJzogJ3R4dCcsXG4gICAgICAndGV4dC9jc3YnOiAnY3N2J1xuICAgIH1cblxuICAgIHJldHVybiBtaW1lTWFwW21pbWVUeXBlXSB8fCAnYmluJ1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBXaGF0c0FwcCBtZWRpYSB0eXBlIGZyb20gTUlNRSB0eXBlXG4gICAqL1xuICBwcml2YXRlIGdldE1lZGlhVHlwZShtaW1lVHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAobWltZVR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHJldHVybiAnaW1hZ2UnXG4gICAgaWYgKG1pbWVUeXBlLnN0YXJ0c1dpdGgoJ3ZpZGVvLycpKSByZXR1cm4gJ3ZpZGVvJ1xuICAgIGlmIChtaW1lVHlwZS5zdGFydHNXaXRoKCdhdWRpby8nKSkgcmV0dXJuICdhdWRpbydcbiAgICByZXR1cm4gJ2RvY3VtZW50J1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIE1JTUUgdHlwZSBpcyBhbiBpbWFnZVxuICAgKi9cbiAgcHJpdmF0ZSBpc0ltYWdlKG1pbWVUeXBlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gbWltZVR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJylcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBNSU1FIHR5cGUgaXMgYSB2aWRlb1xuICAgKi9cbiAgcHJpdmF0ZSBpc1ZpZGVvKG1pbWVUeXBlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gbWltZVR5cGUuc3RhcnRzV2l0aCgndmlkZW8vJylcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBNSU1FIHR5cGUgaXMgYXVkaW9cbiAgICovXG4gIHByaXZhdGUgaXNBdWRpbyhtaW1lVHlwZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIG1pbWVUeXBlLnN0YXJ0c1dpdGgoJ2F1ZGlvLycpXG4gIH1cblxuICAvKipcbiAgICogR2V0IG1lZGlhIGZpbGVzIGZvciBhIGNvbnZlcnNhdGlvblxuICAgKi9cbiAgYXN5bmMgZ2V0Q29udmVyc2F0aW9uTWVkaWEoY29udmVyc2F0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8TWVkaWFGaWxlW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuICAgICAgICAuZnJvbSgnbWVzc2FnZV9tZWRpYScpXG4gICAgICAgIC5zZWxlY3QoYFxuICAgICAgICAgICosXG4gICAgICAgICAgbWVzc2FnZTptZXNzYWdlcyhpZCwgY29udmVyc2F0aW9uX2lkLCBjcmVhdGVkX2F0KVxuICAgICAgICBgKVxuICAgICAgICAuZXEoJ21lc3NhZ2UuY29udmVyc2F0aW9uX2lkJywgY29udmVyc2F0aW9uSWQpXG4gICAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IGNvbnZlcnNhdGlvbiBtZWRpYTogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhPy5tYXAoaXRlbSA9PiAoe1xuICAgICAgICBpZDogaXRlbS5pZCxcbiAgICAgICAgbWVzc2FnZUlkOiBpdGVtLm1lc3NhZ2VfaWQsXG4gICAgICAgIHdoYXRzYXBwTWVkaWFJZDogaXRlbS53aGF0c2FwcF9tZWRpYV9pZCxcbiAgICAgICAgZmlsZW5hbWU6IGl0ZW0uZmlsZW5hbWUsXG4gICAgICAgIG1pbWVUeXBlOiBpdGVtLm1pbWVfdHlwZSxcbiAgICAgICAgZmlsZVNpemU6IGl0ZW0uZmlsZV9zaXplLFxuICAgICAgICB1cmw6IGl0ZW0udXJsLFxuICAgICAgICB0aHVtYm5haWxVcmw6IGl0ZW0udGh1bWJuYWlsX3VybCxcbiAgICAgICAgZG93bmxvYWRVcmw6IGl0ZW0udXJsLFxuICAgICAgICB1cGxvYWRlZEF0OiBuZXcgRGF0ZShpdGVtLmNyZWF0ZWRfYXQpLFxuICAgICAgICBleHBpcmVzQXQ6IGl0ZW0uZXhwaXJlc19hdCA/IG5ldyBEYXRlKGl0ZW0uZXhwaXJlc19hdCkgOiB1bmRlZmluZWRcbiAgICAgIH0pKSB8fCBbXVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgY29udmVyc2F0aW9uIG1lZGlhOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBtZWRpYSBnYWxsZXJ5IGZvciBvcmdhbml6YXRpb25cbiAgICovXG4gIGFzeW5jIGdldE1lZGlhR2FsbGVyeShcbiAgICBvcmdhbml6YXRpb25JZDogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICB0eXBlPzogJ2ltYWdlJyB8ICd2aWRlbycgfCAnYXVkaW8nIHwgJ2RvY3VtZW50J1xuICAgICAgbGltaXQ/OiBudW1iZXJcbiAgICAgIG9mZnNldD86IG51bWJlclxuICAgICAgc3RhcnREYXRlPzogRGF0ZVxuICAgICAgZW5kRGF0ZT86IERhdGVcbiAgICB9XG4gICk6IFByb21pc2U8e1xuICAgIG1lZGlhOiBNZWRpYUZpbGVbXVxuICAgIHRvdGFsOiBudW1iZXJcbiAgICBoYXNNb3JlOiBib29sZWFuXG4gIH0+IHtcbiAgICB0cnkge1xuICAgICAgbGV0IHF1ZXJ5ID0gdGhpcy5zdXBhYmFzZVxuICAgICAgICAuZnJvbSgnbWVzc2FnZV9tZWRpYScpXG4gICAgICAgIC5zZWxlY3QoYFxuICAgICAgICAgICosXG4gICAgICAgICAgbWVzc2FnZTptZXNzYWdlcyFpbm5lcihcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgY29udmVyc2F0aW9uOmNvbnZlcnNhdGlvbnMhaW5uZXIoXG4gICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICBvcmdhbml6YXRpb25faWRcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIGAsIHsgY291bnQ6ICdleGFjdCcgfSlcbiAgICAgICAgLmVxKCdtZXNzYWdlLmNvbnZlcnNhdGlvbi5vcmdhbml6YXRpb25faWQnLCBvcmdhbml6YXRpb25JZClcblxuICAgICAgLy8gQXBwbHkgZmlsdGVyc1xuICAgICAgaWYgKG9wdGlvbnM/LnR5cGUpIHtcbiAgICAgICAgY29uc3QgbWltZVByZWZpeCA9IG9wdGlvbnMudHlwZSA9PT0gJ2RvY3VtZW50JyA/ICdhcHBsaWNhdGlvbi8nIDogYCR7b3B0aW9ucy50eXBlfS9gXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkubGlrZSgnbWltZV90eXBlJywgYCR7bWltZVByZWZpeH0lYClcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnM/LnN0YXJ0RGF0ZSkge1xuICAgICAgICBxdWVyeSA9IHF1ZXJ5Lmd0ZSgnY3JlYXRlZF9hdCcsIG9wdGlvbnMuc3RhcnREYXRlLnRvSVNPU3RyaW5nKCkpXG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zPy5lbmREYXRlKSB7XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkubHRlKCdjcmVhdGVkX2F0Jywgb3B0aW9ucy5lbmREYXRlLnRvSVNPU3RyaW5nKCkpXG4gICAgICB9XG5cbiAgICAgIC8vIEFwcGx5IHBhZ2luYXRpb25cbiAgICAgIGNvbnN0IGxpbWl0ID0gb3B0aW9ucz8ubGltaXQgfHwgNTBcbiAgICAgIGNvbnN0IG9mZnNldCA9IG9wdGlvbnM/Lm9mZnNldCB8fCAwXG4gICAgICBxdWVyeSA9IHF1ZXJ5LnJhbmdlKG9mZnNldCwgb2Zmc2V0ICsgbGltaXQgLSAxKVxuICAgICAgcXVlcnkgPSBxdWVyeS5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yLCBjb3VudCB9ID0gYXdhaXQgcXVlcnlcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBtZWRpYSBnYWxsZXJ5OiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICAgIH1cblxuICAgICAgY29uc3QgbWVkaWE6IE1lZGlhRmlsZVtdID0gZGF0YT8ubWFwKGl0ZW0gPT4gKHtcbiAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgIG1lc3NhZ2VJZDogaXRlbS5tZXNzYWdlX2lkLFxuICAgICAgICB3aGF0c2FwcE1lZGlhSWQ6IGl0ZW0ud2hhdHNhcHBfbWVkaWFfaWQsXG4gICAgICAgIGZpbGVuYW1lOiBpdGVtLmZpbGVuYW1lLFxuICAgICAgICBtaW1lVHlwZTogaXRlbS5taW1lX3R5cGUsXG4gICAgICAgIGZpbGVTaXplOiBpdGVtLmZpbGVfc2l6ZSxcbiAgICAgICAgdXJsOiBpdGVtLnVybCxcbiAgICAgICAgdGh1bWJuYWlsVXJsOiBpdGVtLnRodW1ibmFpbF91cmwsXG4gICAgICAgIGRvd25sb2FkVXJsOiBpdGVtLnVybCxcbiAgICAgICAgdXBsb2FkZWRBdDogbmV3IERhdGUoaXRlbS5jcmVhdGVkX2F0KSxcbiAgICAgICAgZXhwaXJlc0F0OiBpdGVtLmV4cGlyZXNfYXQgPyBuZXcgRGF0ZShpdGVtLmV4cGlyZXNfYXQpIDogdW5kZWZpbmVkXG4gICAgICB9KSkgfHwgW11cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbWVkaWEsXG4gICAgICAgIHRvdGFsOiBjb3VudCB8fCAwLFxuICAgICAgICBoYXNNb3JlOiAob2Zmc2V0ICsgbGltaXQpIDwgKGNvdW50IHx8IDApXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBtZWRpYSBnYWxsZXJ5OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBleHBpcmVkIG1lZGlhIGZpbGVzXG4gICAqL1xuICBhc3luYyBjbGVhbnVwRXhwaXJlZE1lZGlhKCk6IFByb21pc2U8eyBkZWxldGVkQ291bnQ6IG51bWJlciB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YTogZXhwaXJlZE1lZGlhLCBlcnJvcjogc2VsZWN0RXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ21lc3NhZ2VfbWVkaWEnKVxuICAgICAgICAuc2VsZWN0KCdpZCwgc3RvcmFnZV9wYXRoJylcbiAgICAgICAgLmx0KCdleHBpcmVzX2F0JywgbmV3IERhdGUoKS50b0lTT1N0cmluZygpKVxuXG4gICAgICBpZiAoc2VsZWN0RXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IGV4cGlyZWQgbWVkaWE6ICR7c2VsZWN0RXJyb3IubWVzc2FnZX1gKVxuICAgICAgfVxuXG4gICAgICBpZiAoIWV4cGlyZWRNZWRpYSB8fCBleHBpcmVkTWVkaWEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7IGRlbGV0ZWRDb3VudDogMCB9XG4gICAgICB9XG5cbiAgICAgIC8vIERlbGV0ZSBmcm9tIHN0b3JhZ2VcbiAgICAgIGNvbnN0IHN0b3JhZ2VQYXRocyA9IGV4cGlyZWRNZWRpYS5tYXAoaXRlbSA9PiBpdGVtLnN0b3JhZ2VfcGF0aClcbiAgICAgIGNvbnN0IHsgZXJyb3I6IHN0b3JhZ2VFcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZS5zdG9yYWdlXG4gICAgICAgIC5mcm9tKCd3aGF0c2FwcC1tZWRpYScpXG4gICAgICAgIC5yZW1vdmUoc3RvcmFnZVBhdGhzKVxuXG4gICAgICBpZiAoc3RvcmFnZUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgZnJvbSBzdG9yYWdlOicsIHN0b3JhZ2VFcnJvcilcbiAgICAgIH1cblxuICAgICAgLy8gRGVsZXRlIGZyb20gZGF0YWJhc2VcbiAgICAgIGNvbnN0IG1lZGlhSWRzID0gZXhwaXJlZE1lZGlhLm1hcChpdGVtID0+IGl0ZW0uaWQpXG4gICAgICBjb25zdCB7IGVycm9yOiBkZWxldGVFcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuICAgICAgICAuZnJvbSgnbWVzc2FnZV9tZWRpYScpXG4gICAgICAgIC5kZWxldGUoKVxuICAgICAgICAuaW4oJ2lkJywgbWVkaWFJZHMpXG5cbiAgICAgIGlmIChkZWxldGVFcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBkZWxldGUgZnJvbSBkYXRhYmFzZTogJHtkZWxldGVFcnJvci5tZXNzYWdlfWApXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IGRlbGV0ZWRDb3VudDogZXhwaXJlZE1lZGlhLmxlbmd0aCB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2xlYW51cCBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IG1lZGlhIGZpbGUgc2l6ZSBsaW1pdHMgZm9yIFdoYXRzQXBwXG4gICAqL1xuICBzdGF0aWMgZ2V0RmlsZVNpemVMaW1pdHMoKTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGltYWdlOiA1ICogMTAyNCAqIDEwMjQsICAgICAvLyA1TUJcbiAgICAgIHZpZGVvOiAxNiAqIDEwMjQgKiAxMDI0LCAgICAvLyAxNk1CXG4gICAgICBhdWRpbzogMTYgKiAxMDI0ICogMTAyNCwgICAgLy8gMTZNQlxuICAgICAgZG9jdW1lbnQ6IDEwMCAqIDEwMjQgKiAxMDI0ICAvLyAxMDBNQlxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBtZWRpYSBmaWxlIGJlZm9yZSB1cGxvYWRcbiAgICovXG4gIHN0YXRpYyB2YWxpZGF0ZU1lZGlhRmlsZShmaWxlOiBGaWxlKTogeyB2YWxpZDogYm9vbGVhbiwgZXJyb3JzOiBzdHJpbmdbXSB9IHtcbiAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW11cbiAgICBjb25zdCBsaW1pdHMgPSBXaGF0c0FwcE1lZGlhSGFuZGxlci5nZXRGaWxlU2l6ZUxpbWl0cygpXG5cbiAgICAvLyBDaGVjayBmaWxlIHNpemVcbiAgICBjb25zdCBtZWRpYVR5cGUgPSBmaWxlLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykgPyAnaW1hZ2UnIDpcbiAgICAgICAgICAgICAgICAgICAgIGZpbGUudHlwZS5zdGFydHNXaXRoKCd2aWRlby8nKSA/ICd2aWRlbycgOlxuICAgICAgICAgICAgICAgICAgICAgZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2F1ZGlvLycpID8gJ2F1ZGlvJyA6ICdkb2N1bWVudCdcblxuICAgIGlmIChmaWxlLnNpemUgPiBsaW1pdHNbbWVkaWFUeXBlXSkge1xuICAgICAgZXJyb3JzLnB1c2goYEZpbGUgc2l6ZSBleGNlZWRzIGxpbWl0IG9mICR7bGltaXRzW21lZGlhVHlwZV0gLyAoMTAyNCAqIDEwMjQpfU1CYClcbiAgICB9XG5cbiAgICAvLyBDaGVjayBzdXBwb3J0ZWQgZm9ybWF0c1xuICAgIGNvbnN0IHN1cHBvcnRlZFR5cGVzID0gW1xuICAgICAgLy8gSW1hZ2VzXG4gICAgICAnaW1hZ2UvanBlZycsICdpbWFnZS9wbmcnLCAnaW1hZ2Uvd2VicCcsXG4gICAgICAvLyBWaWRlb3NcbiAgICAgICd2aWRlby9tcDQnLCAndmlkZW8vM2dwcCcsXG4gICAgICAvLyBBdWRpb1xuICAgICAgJ2F1ZGlvL2FhYycsICdhdWRpby9tcDQnLCAnYXVkaW8vbXBlZycsICdhdWRpby9hbXInLCAnYXVkaW8vb2dnJyxcbiAgICAgIC8vIERvY3VtZW50c1xuICAgICAgJ2FwcGxpY2F0aW9uL3BkZicsICdhcHBsaWNhdGlvbi92bmQubXMtcG93ZXJwb2ludCcsXG4gICAgICAnYXBwbGljYXRpb24vbXN3b3JkJywgJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCcsXG4gICAgICAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQnLFxuICAgICAgJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5wcmVzZW50YXRpb25tbC5wcmVzZW50YXRpb24nLFxuICAgICAgJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0JyxcbiAgICAgICd0ZXh0L3BsYWluJywgJ3RleHQvY3N2J1xuICAgIF1cblxuICAgIGlmICghc3VwcG9ydGVkVHlwZXMuaW5jbHVkZXMoZmlsZS50eXBlKSkge1xuICAgICAgZXJyb3JzLnB1c2goYFVuc3VwcG9ydGVkIGZpbGUgdHlwZTogJHtmaWxlLnR5cGV9YClcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgICBlcnJvcnNcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBNZWRpYSBHYWxsZXJ5IEludGVyZmFjZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1lZGlhR2FsbGVyeUl0ZW0ge1xuICBpZDogc3RyaW5nXG4gIGZpbGVuYW1lOiBzdHJpbmdcbiAgbWltZVR5cGU6IHN0cmluZ1xuICBmaWxlU2l6ZTogbnVtYmVyXG4gIHVybDogc3RyaW5nXG4gIHRodW1ibmFpbFVybD86IHN0cmluZ1xuICB1cGxvYWRlZEF0OiBEYXRlXG4gIGNvbnZlcnNhdGlvbklkOiBzdHJpbmdcbiAgY29udGFjdE5hbWU/OiBzdHJpbmdcbn1cblxuLyoqXG4gKiBNZWRpYSBTdGF0aXN0aWNzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWFTdGF0cyB7XG4gIHRvdGFsRmlsZXM6IG51bWJlclxuICB0b3RhbFNpemU6IG51bWJlclxuICBieVR5cGU6IHtcbiAgICBpbWFnZXM6IG51bWJlclxuICAgIHZpZGVvczogbnVtYmVyXG4gICAgYXVkaW86IG51bWJlclxuICAgIGRvY3VtZW50czogbnVtYmVyXG4gIH1cbiAgcmVjZW50VXBsb2FkczogbnVtYmVyXG4gIHN0b3JhZ2VVc2VkOiBzdHJpbmdcbn1cblxuLyoqXG4gKiBNZWRpYSBHYWxsZXJ5IE1hbmFnZXJcbiAqL1xuZXhwb3J0IGNsYXNzIE1lZGlhR2FsbGVyeU1hbmFnZXIge1xuICBwcml2YXRlIHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KClcblxuICBhc3luYyBnZXRNZWRpYVN0YXRzKG9yZ2FuaXphdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPE1lZGlhU3RhdHM+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuICAgICAgICAuZnJvbSgnbWVzc2FnZV9tZWRpYScpXG4gICAgICAgIC5zZWxlY3QoYFxuICAgICAgICAgIG1pbWVfdHlwZSxcbiAgICAgICAgICBmaWxlX3NpemUsXG4gICAgICAgICAgY3JlYXRlZF9hdCxcbiAgICAgICAgICBtZXNzYWdlOm1lc3NhZ2VzIWlubmVyKFxuICAgICAgICAgICAgY29udmVyc2F0aW9uOmNvbnZlcnNhdGlvbnMhaW5uZXIob3JnYW5pemF0aW9uX2lkKVxuICAgICAgICAgIClcbiAgICAgICAgYClcbiAgICAgICAgLmVxKCdtZXNzYWdlLmNvbnZlcnNhdGlvbi5vcmdhbml6YXRpb25faWQnLCBvcmdhbml6YXRpb25JZClcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBtZWRpYSBzdGF0czogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN0YXRzOiBNZWRpYVN0YXRzID0ge1xuICAgICAgICB0b3RhbEZpbGVzOiBkYXRhPy5sZW5ndGggfHwgMCxcbiAgICAgICAgdG90YWxTaXplOiBkYXRhPy5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4gc3VtICsgaXRlbS5maWxlX3NpemUsIDApIHx8IDAsXG4gICAgICAgIGJ5VHlwZToge1xuICAgICAgICAgIGltYWdlczogMCxcbiAgICAgICAgICB2aWRlb3M6IDAsXG4gICAgICAgICAgYXVkaW86IDAsXG4gICAgICAgICAgZG9jdW1lbnRzOiAwXG4gICAgICAgIH0sXG4gICAgICAgIHJlY2VudFVwbG9hZHM6IDAsXG4gICAgICAgIHN0b3JhZ2VVc2VkOiAnJ1xuICAgICAgfVxuXG4gICAgICBjb25zdCB3ZWVrQWdvID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKVxuXG4gICAgICBkYXRhPy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpZiAoaXRlbS5taW1lX3R5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHN0YXRzLmJ5VHlwZS5pbWFnZXMrK1xuICAgICAgICBlbHNlIGlmIChpdGVtLm1pbWVfdHlwZS5zdGFydHNXaXRoKCd2aWRlby8nKSkgc3RhdHMuYnlUeXBlLnZpZGVvcysrXG4gICAgICAgIGVsc2UgaWYgKGl0ZW0ubWltZV90eXBlLnN0YXJ0c1dpdGgoJ2F1ZGlvLycpKSBzdGF0cy5ieVR5cGUuYXVkaW8rK1xuICAgICAgICBlbHNlIHN0YXRzLmJ5VHlwZS5kb2N1bWVudHMrK1xuXG4gICAgICAgIGlmIChuZXcgRGF0ZShpdGVtLmNyZWF0ZWRfYXQpID4gd2Vla0Fnbykge1xuICAgICAgICAgIHN0YXRzLnJlY2VudFVwbG9hZHMrK1xuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICAvLyBGb3JtYXQgc3RvcmFnZSB1c2VkXG4gICAgICBzdGF0cy5zdG9yYWdlVXNlZCA9IHRoaXMuZm9ybWF0RmlsZVNpemUoc3RhdHMudG90YWxTaXplKVxuXG4gICAgICByZXR1cm4gc3RhdHNcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IG1lZGlhIHN0YXRzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRGaWxlU2l6ZShieXRlczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoYnl0ZXMgPT09IDApIHJldHVybiAnMCBCeXRlcydcbiAgICBjb25zdCBrID0gMTAyNFxuICAgIGNvbnN0IHNpemVzID0gWydCeXRlcycsICdLQicsICdNQicsICdHQiddXG4gICAgY29uc3QgaSA9IE1hdGguZmxvb3IoTWF0aC5sb2coYnl0ZXMpIC8gTWF0aC5sb2coaykpXG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoKGJ5dGVzIC8gTWF0aC5wb3coaywgaSkpLnRvRml4ZWQoMikpICsgJyAnICsgc2l6ZXNbaV1cbiAgfVxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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