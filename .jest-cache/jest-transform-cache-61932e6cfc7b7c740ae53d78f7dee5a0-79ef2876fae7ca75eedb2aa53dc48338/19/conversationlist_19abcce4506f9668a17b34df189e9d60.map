{"version":3,"names":["cov_fqxdme3i4","actualCoverage","s","ConversationList","formatTime","date","f","now","Date","diffMs","getTime","diffHours","Math","floor","diffDays","b","diffMins","toLocaleDateString","conversations","selectedConversationId","onSelectConversation","getStatusColor","status","length","_jsxruntime","jsx","className","jsxs","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","map","conversation","isSelected","id","hasUnread","unread_count","onClick","contact","name","charAt","toUpperCase","phone_number","slice","last_message_at","last_message","sender_type","content","assigned_agent","full_name"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\components\\inbox\\conversation-list.tsx"],"sourcesContent":["import type { ConversationWithDetails } from '@/types'\n\n// Simple time formatter\nfunction formatTime(date: Date) {\n  const now = new Date()\n  const diffMs = now.getTime() - date.getTime()\n  const diffHours = Math.floor(diffMs / (1000 * 60 * 60))\n  const diffDays = Math.floor(diffHours / 24)\n\n  if (diffHours < 1) {\n    const diffMins = Math.floor(diffMs / (1000 * 60))\n    return diffMins < 1 ? 'now' : `${diffMins}m`\n  }\n  if (diffHours < 24) {\n    return `${diffHours}h`\n  }\n  if (diffDays < 7) {\n    return `${diffDays}d`\n  }\n  return date.toLocaleDateString()\n}\n\ninterface ConversationListProps {\n  conversations: ConversationWithDetails[]\n  selectedConversationId: string | null\n  onSelectConversation: (id: string) => void\n}\n\nexport function ConversationList({\n  conversations,\n  selectedConversationId,\n  onSelectConversation,\n}: ConversationListProps) {\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'open':\n        return 'bg-green-100 text-green-800'\n      case 'pending':\n        return 'bg-yellow-100 text-yellow-800'\n      case 'resolved':\n        return 'bg-blue-100 text-blue-800'\n      case 'closed':\n        return 'bg-gray-100 text-gray-800'\n      default:\n        return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  if (conversations.length === 0) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center p-8\">\n        <div className=\"text-center\">\n          <svg\n            className=\"mx-auto h-12 w-12 text-gray-400\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n            />\n          </svg>\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No conversations</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Connect your WhatsApp to start receiving messages.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"flex-1 overflow-y-auto\">\n      <div className=\"divide-y divide-gray-200\">\n        {conversations.map((conversation) => {\n          const isSelected = conversation.id === selectedConversationId\n          const hasUnread = conversation.unread_count > 0\n\n          return (\n            <div\n              key={conversation.id}\n              className={`\n                p-4 cursor-pointer hover:bg-gray-50 transition-colors\n                ${isSelected ? 'bg-green-50 border-r-2 border-green-500' : ''}\n              `}\n              onClick={() => onSelectConversation(conversation.id)}\n            >\n              <div className=\"flex items-start space-x-3\">\n                {/* Contact Avatar */}\n                <div className=\"flex-shrink-0\">\n                  <div className=\"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center\">\n                    <span className=\"text-sm font-medium text-white\">\n                      {conversation.contact.name?.charAt(0).toUpperCase() ||\n                       conversation.contact.phone_number.slice(-2).toUpperCase()}\n                    </span>\n                  </div>\n                </div>\n\n                {/* Conversation Content */}\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center justify-between\">\n                    <p className={`text-sm font-medium text-gray-900 truncate ${hasUnread ? 'font-semibold' : ''}`}>\n                      {conversation.contact.name || conversation.contact.phone_number}\n                    </p>\n                    <div className=\"flex items-center space-x-2\">\n                      {hasUnread && (\n                        <span className=\"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-green-600 rounded-full\">\n                          {conversation.unread_count}\n                        </span>\n                      )}\n                      <span className=\"text-xs text-gray-500\">\n                        {conversation.last_message_at &&\n                         formatTime(new Date(conversation.last_message_at))}\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* Last Message */}\n                  {conversation.last_message && (\n                    <p className={`mt-1 text-sm text-gray-500 truncate ${hasUnread ? 'font-medium text-gray-700' : ''}`}>\n                      {conversation.last_message.sender_type === 'agent' && (\n                        <span className=\"text-blue-600\">You: </span>\n                      )}\n                      {conversation.last_message.content}\n                    </p>\n                  )}\n\n                  {/* Status and Assignment */}\n                  <div className=\"mt-2 flex items-center justify-between\">\n                    <span\n                      className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(\n                        conversation.status\n                      )}`}\n                    >\n                      {conversation.status}\n                    </span>\n\n                    {conversation.assigned_agent && (\n                      <div className=\"flex items-center text-xs text-gray-500\">\n                        <svg className=\"w-3 h-3 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                        </svg>\n                        {conversation.assigned_agent.full_name}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}"],"mappings":"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","ignoreList":[]}