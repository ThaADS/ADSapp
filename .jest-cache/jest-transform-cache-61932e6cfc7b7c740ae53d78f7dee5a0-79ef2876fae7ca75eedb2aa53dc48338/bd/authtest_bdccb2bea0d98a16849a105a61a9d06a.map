{"version":3,"sources":["C:\\Ai Projecten\\ADSapp\\tests\\components\\auth.test.tsx"],"sourcesContent":["import { describe, it, expect, jest, beforeEach } from '@jest/globals';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { SignInForm } from '@/components/auth/signin-form';\nimport { SignUpForm } from '@/components/auth/signup-form';\nimport { ForgotPasswordForm } from '@/components/auth/forgot-password-form';\nimport { ResetPasswordForm } from '@/components/auth/reset-password-form';\n\n// Mock Next.js router\nconst mockPush = jest.fn();\nconst mockRefresh = jest.fn();\njest.mock('next/navigation', () => ({\n  useRouter: () => ({\n    push: mockPush,\n    refresh: mockRefresh,\n  }),\n}));\n\n// Mock Supabase client\nconst mockSignIn = jest.fn();\nconst mockSignUp = jest.fn();\nconst mockResetPasswordForEmail = jest.fn();\nconst mockUpdateUser = jest.fn();\nconst mockFrom = jest.fn();\n\njest.mock('@/lib/supabase/client', () => ({\n  createClient: () => ({\n    auth: {\n      signInWithPassword: mockSignIn,\n      signUp: mockSignUp,\n      resetPasswordForEmail: mockResetPasswordForEmail,\n      updateUser: mockUpdateUser,\n    },\n    from: mockFrom,\n  }),\n}));\n\ndescribe('Authentication Components', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('SignInForm', () => {\n    it('should render email and password fields with proper accessibility', () => {\n      render(<SignInForm />);\n\n      const emailInput = screen.getByLabelText(/email address/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n      const submitButton = screen.getByRole('button', { name: /sign in/i });\n\n      expect(emailInput).toBeInTheDocument();\n      expect(emailInput).toHaveAttribute('type', 'email');\n      expect(emailInput).toHaveAttribute('required');\n      expect(emailInput).toHaveAttribute('autoComplete', 'email');\n\n      expect(passwordInput).toBeInTheDocument();\n      expect(passwordInput).toHaveAttribute('type', 'password');\n      expect(passwordInput).toHaveAttribute('required');\n      expect(passwordInput).toHaveAttribute('autoComplete', 'current-password');\n\n      expect(submitButton).toBeInTheDocument();\n      expect(submitButton).not.toBeDisabled();\n    });\n\n    it('should handle successful login and redirect based on user role', async () => {\n      const user = userEvent.setup();\n\n      mockSignIn.mockResolvedValue({\n        data: { user: { id: 'user-123' } },\n        error: null,\n      });\n\n      mockFrom.mockReturnValue({\n        select: jest.fn().mockReturnValue({\n          eq: jest.fn().mockReturnValue({\n            single: jest.fn().mockResolvedValue({\n              data: { is_super_admin: false, organization_id: 'org-123' },\n            }),\n          }),\n        }),\n      });\n\n      render(<SignInForm />);\n\n      await user.type(screen.getByLabelText(/email address/i), 'user@example.com');\n      await user.type(screen.getByLabelText(/password/i), 'password123');\n      await user.click(screen.getByRole('button', { name: /sign in/i }));\n\n      await waitFor(() => {\n        expect(mockSignIn).toHaveBeenCalledWith({\n          email: 'user@example.com',\n          password: 'password123',\n        });\n        expect(mockPush).toHaveBeenCalledWith('/dashboard');\n      });\n    });\n\n    it('should redirect super admin to admin dashboard', async () => {\n      const user = userEvent.setup();\n\n      mockSignIn.mockResolvedValue({\n        data: { user: { id: 'admin-123' } },\n        error: null,\n      });\n\n      mockFrom.mockReturnValue({\n        select: jest.fn().mockReturnValue({\n          eq: jest.fn().mockReturnValue({\n            single: jest.fn().mockResolvedValue({\n              data: { is_super_admin: true, organization_id: null },\n            }),\n          }),\n        }),\n      });\n\n      render(<SignInForm />);\n\n      await user.type(screen.getByLabelText(/email address/i), 'admin@example.com');\n      await user.type(screen.getByLabelText(/password/i), 'adminpass');\n      await user.click(screen.getByRole('button', { name: /sign in/i }));\n\n      await waitFor(() => {\n        expect(mockPush).toHaveBeenCalledWith('/admin');\n      });\n    });\n\n    it('should display error message on failed login', async () => {\n      const user = userEvent.setup();\n      const errorMessage = 'Invalid login credentials';\n\n      mockSignIn.mockResolvedValue({\n        data: { user: null },\n        error: { message: errorMessage },\n      });\n\n      render(<SignInForm />);\n\n      await user.type(screen.getByLabelText(/email address/i), 'wrong@example.com');\n      await user.type(screen.getByLabelText(/password/i), 'wrongpass');\n      await user.click(screen.getByRole('button', { name: /sign in/i }));\n\n      await waitFor(() => {\n        expect(screen.getByText(/authentication error/i)).toBeInTheDocument();\n        expect(screen.getByText(errorMessage)).toBeInTheDocument();\n      });\n    });\n\n    it('should show loading state during submission', async () => {\n      const user = userEvent.setup();\n\n      mockSignIn.mockImplementation(() => new Promise(resolve => setTimeout(resolve, 1000)));\n\n      render(<SignInForm />);\n\n      await user.type(screen.getByLabelText(/email address/i), 'user@example.com');\n      await user.type(screen.getByLabelText(/password/i), 'password123');\n\n      const submitButton = screen.getByRole('button', { name: /sign in/i });\n      await user.click(submitButton);\n\n      expect(submitButton).toBeDisabled();\n      expect(screen.getByRole('button', { name: '' })).toBeInTheDocument(); // Loading spinner\n    });\n  });\n\n  describe('SignUpForm', () => {\n    beforeEach(() => {\n      global.fetch = jest.fn() as jest.Mock;\n    });\n\n    it('should render all required fields with proper validation', () => {\n      render(<SignUpForm />);\n\n      expect(screen.getByLabelText(/full name/i)).toBeInTheDocument();\n      expect(screen.getByLabelText(/email address/i)).toBeInTheDocument();\n\n      const passwordInput = screen.getByLabelText(/password/i);\n      expect(passwordInput).toBeInTheDocument();\n      expect(passwordInput).toHaveAttribute('minLength', '6');\n\n      expect(screen.getByLabelText(/organization name/i)).toBeInTheDocument();\n      expect(screen.getByRole('button', { name: /create account/i })).toBeInTheDocument();\n    });\n\n    it('should enforce password minimum length validation', () => {\n      render(<SignUpForm />);\n\n      const passwordInput = screen.getByLabelText(/password/i) as HTMLInputElement;\n\n      fireEvent.change(passwordInput, { target: { value: '12345' } });\n      expect(passwordInput.validity.valid).toBe(false);\n\n      fireEvent.change(passwordInput, { target: { value: '123456' } });\n      expect(passwordInput.validity.valid).toBe(true);\n    });\n\n    it('should submit form with all data and redirect on success', async () => {\n      const user = userEvent.setup();\n\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: true,\n        json: async () => ({ user: { id: 'new-user-123' }, confirmationRequired: false }),\n      });\n\n      render(<SignUpForm />);\n\n      await user.type(screen.getByLabelText(/full name/i), 'John Doe');\n      await user.type(screen.getByLabelText(/email address/i), 'john@example.com');\n      await user.type(screen.getByLabelText(/password/i), 'password123');\n      await user.type(screen.getByLabelText(/organization name/i), 'Acme Corp');\n      await user.click(screen.getByRole('button', { name: /create account/i }));\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalledWith('/api/auth/signup', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            email: 'john@example.com',\n            password: 'password123',\n            fullName: 'John Doe',\n            organizationName: 'Acme Corp',\n          }),\n        });\n        expect(mockPush).toHaveBeenCalledWith('/dashboard');\n      });\n    });\n\n    it('should display error on duplicate email registration', async () => {\n      const user = userEvent.setup();\n      const errorMessage = 'User already exists';\n\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: false,\n        json: async () => ({ error: errorMessage }),\n      });\n\n      render(<SignUpForm />);\n\n      await user.type(screen.getByLabelText(/full name/i), 'Jane Doe');\n      await user.type(screen.getByLabelText(/email address/i), 'existing@example.com');\n      await user.type(screen.getByLabelText(/password/i), 'password123');\n      await user.type(screen.getByLabelText(/organization name/i), 'Test Org');\n      await user.click(screen.getByRole('button', { name: /create account/i }));\n\n      await waitFor(() => {\n        expect(screen.getByText(/registration error/i)).toBeInTheDocument();\n        expect(screen.getByText(errorMessage)).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('ForgotPasswordForm', () => {\n    it('should render email input with proper attributes', () => {\n      render(<ForgotPasswordForm />);\n\n      const emailInput = screen.getByLabelText(/email address/i);\n      expect(emailInput).toBeInTheDocument();\n      expect(emailInput).toHaveAttribute('type', 'email');\n      expect(emailInput).toHaveAttribute('required');\n      expect(screen.getByRole('button', { name: /send reset link/i })).toBeInTheDocument();\n    });\n\n    it('should validate email format before submission', async () => {\n      const user = userEvent.setup();\n\n      render(<ForgotPasswordForm />);\n\n      const emailInput = screen.getByLabelText(/email address/i) as HTMLInputElement;\n\n      await user.type(emailInput, 'invalid-email');\n      expect(emailInput.validity.valid).toBe(false);\n\n      await user.clear(emailInput);\n      await user.type(emailInput, 'valid@example.com');\n      expect(emailInput.validity.valid).toBe(true);\n    });\n\n    it('should submit email and display success message', async () => {\n      const user = userEvent.setup();\n\n      mockResetPasswordForEmail.mockResolvedValue({ error: null });\n\n      render(<ForgotPasswordForm />);\n\n      await user.type(screen.getByLabelText(/email address/i), 'user@example.com');\n      await user.click(screen.getByRole('button', { name: /send reset link/i }));\n\n      await waitFor(() => {\n        expect(mockResetPasswordForEmail).toHaveBeenCalledWith(\n          'user@example.com',\n          expect.objectContaining({\n            redirectTo: expect.stringContaining('/auth/reset-password'),\n          })\n        );\n        expect(screen.getByText(/check your email for the password reset link/i)).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('ResetPasswordForm', () => {\n    it('should render password and confirmation fields', () => {\n      render(<ResetPasswordForm />);\n\n      expect(screen.getByLabelText(/new password/i)).toBeInTheDocument();\n      expect(screen.getByLabelText(/confirm password/i)).toBeInTheDocument();\n      expect(screen.getByRole('button', { name: /update password/i })).toBeInTheDocument();\n    });\n\n    it('should validate password match before submission', async () => {\n      const user = userEvent.setup();\n\n      render(<ResetPasswordForm />);\n\n      await user.type(screen.getByLabelText(/new password/i), 'newpass123');\n      await user.type(screen.getByLabelText(/confirm password/i), 'different123');\n      await user.click(screen.getByRole('button', { name: /update password/i }));\n\n      await waitFor(() => {\n        expect(screen.getByText(/passwords do not match/i)).toBeInTheDocument();\n        expect(mockUpdateUser).not.toHaveBeenCalled();\n      });\n    });\n\n    it('should validate minimum password length', async () => {\n      const user = userEvent.setup();\n\n      render(<ResetPasswordForm />);\n\n      await user.type(screen.getByLabelText(/new password/i), '12345');\n      await user.type(screen.getByLabelText(/confirm password/i), '12345');\n      await user.click(screen.getByRole('button', { name: /update password/i }));\n\n      await waitFor(() => {\n        expect(screen.getByText(/password must be at least 6 characters/i)).toBeInTheDocument();\n        expect(mockUpdateUser).not.toHaveBeenCalled();\n      });\n    });\n\n    it('should submit matching passwords and redirect on success', async () => {\n      const user = userEvent.setup();\n\n      mockUpdateUser.mockResolvedValue({ error: null });\n\n      render(<ResetPasswordForm />);\n\n      await user.type(screen.getByLabelText(/new password/i), 'newpass123');\n      await user.type(screen.getByLabelText(/confirm password/i), 'newpass123');\n      await user.click(screen.getByRole('button', { name: /update password/i }));\n\n      await waitFor(() => {\n        expect(mockUpdateUser).toHaveBeenCalledWith({ password: 'newpass123' });\n        expect(mockPush).toHaveBeenCalledWith(\n          expect.stringContaining('/auth/signin')\n        );\n      });\n    });\n  });\n\n  describe('Accessibility Tests', () => {\n    it('should support keyboard navigation in SignInForm', async () => {\n      const user = userEvent.setup();\n\n      render(<SignInForm />);\n\n      await user.tab();\n      expect(screen.getByLabelText(/email address/i)).toHaveFocus();\n\n      await user.tab();\n      expect(screen.getByLabelText(/password/i)).toHaveFocus();\n    });\n\n    it('should have proper ARIA labels for all form inputs', () => {\n      render(<SignInForm />);\n\n      const emailInput = screen.getByLabelText(/email address/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n\n      expect(emailInput).toHaveAccessibleName();\n      expect(passwordInput).toHaveAccessibleName();\n    });\n\n    it('should announce errors to screen readers', async () => {\n      const user = userEvent.setup();\n\n      mockSignIn.mockResolvedValue({\n        data: { user: null },\n        error: { message: 'Invalid credentials' },\n      });\n\n      render(<SignInForm />);\n\n      await user.type(screen.getByLabelText(/email address/i), 'test@example.com');\n      await user.type(screen.getByLabelText(/password/i), 'wrong');\n      await user.click(screen.getByRole('button', { name: /sign in/i }));\n\n      await waitFor(() => {\n        const errorElement = screen.getByText(/invalid credentials/i);\n        expect(errorElement).toBeVisible();\n      });\n    });\n  });\n});\n"],"names":["mockPush","jest","fn","mockRefresh","mock","useRouter","push","refresh","mockSignIn","mockSignUp","mockResetPasswordForEmail","mockUpdateUser","mockFrom","createClient","auth","signInWithPassword","signUp","resetPasswordForEmail","updateUser","from","describe","beforeEach","clearAllMocks","it","render","SignInForm","emailInput","screen","getByLabelText","passwordInput","submitButton","getByRole","name","expect","toBeInTheDocument","toHaveAttribute","not","toBeDisabled","user","userEvent","setup","mockResolvedValue","data","id","error","mockReturnValue","select","eq","single","is_super_admin","organization_id","type","click","waitFor","toHaveBeenCalledWith","email","password","errorMessage","message","getByText","mockImplementation","Promise","resolve","setTimeout","global","fetch","SignUpForm","fireEvent","change","target","value","validity","valid","toBe","ok","json","confirmationRequired","method","headers","body","JSON","stringify","fullName","organizationName","ForgotPasswordForm","clear","objectContaining","redirectTo","stringContaining","ResetPasswordForm","toHaveBeenCalled","tab","toHaveFocus","toHaveAccessibleName","errorElement","toBeVisible"],"mappings":"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"}