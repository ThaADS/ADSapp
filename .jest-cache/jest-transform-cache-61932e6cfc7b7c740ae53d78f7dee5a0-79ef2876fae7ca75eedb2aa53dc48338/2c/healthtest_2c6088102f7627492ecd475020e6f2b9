33fecdb857d504ea97d4036e5d8c80e4
/**
 * Health Check API Integration Tests
 *
 * Tests for /api/health/* endpoints including overall health,
 * database, Stripe, and WhatsApp API connectivity.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _apitesthelpers = require("../../utils/api-test-helpers");
const _testhelpers = require("../../utils/test-helpers");
_globals.jest.mock('@/lib/supabase/server');
(0, _globals.describe)('GET /api/health', ()=>{
    (0, _globals.it)('should return overall application health status', async ()=>{
        const request = (0, _apitesthelpers.createMockRequest)('GET', '/api/health');
        const response = await simulateHealthCheck(request);
        const { status, data } = await (0, _apitesthelpers.parseResponse)(response);
        (0, _globals.expect)(status).toBe(200);
        (0, _globals.expect)(data).toHaveProperty('status');
        (0, _globals.expect)(data).toHaveProperty('timestamp');
        (0, _globals.expect)(data).toHaveProperty('services');
        (0, _globals.expect)(data.status).toBe('healthy');
    });
});
(0, _globals.describe)('GET /api/health/db', ()=>{
    let mockSupabase;
    (0, _globals.beforeEach)(()=>{
        mockSupabase = (0, _testhelpers.createMockSupabaseClient)();
        _globals.jest.clearAllMocks();
    });
    (0, _globals.it)('should return healthy when database is connected', async ()=>{
        mockSupabase.from = _globals.jest.fn().mockReturnValue({
            select: _globals.jest.fn().mockReturnThis(),
            limit: _globals.jest.fn().mockResolvedValue({
                data: [],
                error: null
            })
        });
        const request = (0, _apitesthelpers.createMockRequest)('GET', '/api/health/db');
        const response = await simulateDbHealthCheck(request, mockSupabase);
        const { status, data } = await (0, _apitesthelpers.parseResponse)(response);
        (0, _globals.expect)(status).toBe(200);
        (0, _globals.expect)(data.status).toBe('healthy');
        (0, _globals.expect)(data.service).toBe('database');
        (0, _globals.expect)(data).toHaveProperty('latency');
    });
    (0, _globals.it)('should return unhealthy when database connection fails', async ()=>{
        mockSupabase.from = _globals.jest.fn().mockReturnValue({
            select: _globals.jest.fn().mockReturnThis(),
            limit: _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    message: 'Connection failed'
                }
            })
        });
        const request = (0, _apitesthelpers.createMockRequest)('GET', '/api/health/db');
        const response = await simulateDbHealthCheck(request, mockSupabase);
        const { status, data } = await (0, _apitesthelpers.parseResponse)(response);
        (0, _globals.expect)(status).toBe(503);
        (0, _globals.expect)(data.status).toBe('unhealthy');
        (0, _globals.expect)(data).toHaveProperty('error');
    });
});
(0, _globals.describe)('GET /api/health/stripe', ()=>{
    (0, _globals.it)('should return healthy when Stripe is configured', async ()=>{
        // Mock environment variable
        process.env.STRIPE_SECRET_KEY = 'sk_test_mock_key';
        const mockStripe = {
            customers: {
                list: _globals.jest.fn().mockResolvedValue({
                    data: []
                })
            }
        };
        const request = (0, _apitesthelpers.createMockRequest)('GET', '/api/health/stripe');
        const response = await simulateStripeHealthCheck(request, mockStripe);
        const { status, data } = await (0, _apitesthelpers.parseResponse)(response);
        (0, _globals.expect)(status).toBe(200);
        (0, _globals.expect)(data.status).toBe('healthy');
        (0, _globals.expect)(data.service).toBe('stripe');
        // Clean up
        delete process.env.STRIPE_SECRET_KEY;
    });
    (0, _globals.it)('should return unhealthy when Stripe is not configured', async ()=>{
        // Ensure no env variable
        delete process.env.STRIPE_SECRET_KEY;
        const mockStripe = null;
        const request = (0, _apitesthelpers.createMockRequest)('GET', '/api/health/stripe');
        const response = await simulateStripeHealthCheck(request, mockStripe);
        const { status, data } = await (0, _apitesthelpers.parseResponse)(response);
        (0, _globals.expect)(status).toBe(503);
        (0, _globals.expect)(data.status).toBe('unhealthy');
        (0, _globals.expect)(data.error).toContain('not configured');
    });
});
(0, _globals.describe)('GET /api/health/whatsapp', ()=>{
    (0, _globals.it)('should return healthy when WhatsApp API is accessible', async ()=>{
        // Mock environment variables
        process.env.WHATSAPP_ACCESS_TOKEN = 'mock_access_token';
        process.env.WHATSAPP_PHONE_NUMBER_ID = '123456789';
        global.fetch = _globals.jest.fn().mockResolvedValue({
            ok: true,
            json: async ()=>({
                    success: true
                })
        });
        const request = (0, _apitesthelpers.createMockRequest)('GET', '/api/health/whatsapp');
        const response = await simulateWhatsAppHealthCheck(request);
        const { status, data } = await (0, _apitesthelpers.parseResponse)(response);
        (0, _globals.expect)(status).toBe(200);
        (0, _globals.expect)(data.status).toBe('healthy');
        (0, _globals.expect)(data.service).toBe('whatsapp');
        // Clean up
        delete process.env.WHATSAPP_ACCESS_TOKEN;
        delete process.env.WHATSAPP_PHONE_NUMBER_ID;
    });
    (0, _globals.it)('should return unhealthy when WhatsApp API is not accessible', async ()=>{
        // Ensure environment variables are set but fetch fails
        process.env.WHATSAPP_ACCESS_TOKEN = 'mock_access_token';
        process.env.WHATSAPP_PHONE_NUMBER_ID = '123456789';
        global.fetch = _globals.jest.fn().mockRejectedValue(new Error('Network error'));
        const request = (0, _apitesthelpers.createMockRequest)('GET', '/api/health/whatsapp');
        const response = await simulateWhatsAppHealthCheck(request);
        const { status, data } = await (0, _apitesthelpers.parseResponse)(response);
        (0, _globals.expect)(status).toBe(503);
        (0, _globals.expect)(data.status).toBe('unhealthy');
        (0, _globals.expect)(data).toHaveProperty('error');
        // Clean up
        delete process.env.WHATSAPP_ACCESS_TOKEN;
        delete process.env.WHATSAPP_PHONE_NUMBER_ID;
    });
});
// =============================================================================
// Helper Functions to Simulate API Route Handlers
// =============================================================================
async function simulateHealthCheck(request) {
    try {
        return new Response(JSON.stringify({
            status: 'healthy',
            timestamp: new Date().toISOString(),
            services: {
                database: 'healthy',
                stripe: 'healthy',
                whatsapp: 'healthy'
            }
        }), {
            status: 200,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    } catch (error) {
        return new Response(JSON.stringify({
            status: 'unhealthy',
            error: error.message
        }), {
            status: 503,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }
}
async function simulateDbHealthCheck(request, supabase) {
    try {
        const startTime = Date.now();
        const { data, error } = await supabase.from('organizations').select('id').limit(1);
        if (error) {
            return new Response(JSON.stringify({
                status: 'unhealthy',
                service: 'database',
                error: error.message
            }), {
                status: 503,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        const latency = Date.now() - startTime;
        return new Response(JSON.stringify({
            status: 'healthy',
            service: 'database',
            latency: `${latency}ms`
        }), {
            status: 200,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    } catch (error) {
        return new Response(JSON.stringify({
            status: 'unhealthy',
            service: 'database',
            error: error.message
        }), {
            status: 503,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }
}
async function simulateStripeHealthCheck(request, stripe) {
    try {
        if (!stripe || !process.env.STRIPE_SECRET_KEY) {
            return new Response(JSON.stringify({
                status: 'unhealthy',
                service: 'stripe',
                error: 'Stripe not configured'
            }), {
                status: 503,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        await stripe.customers.list({
            limit: 1
        });
        return new Response(JSON.stringify({
            status: 'healthy',
            service: 'stripe'
        }), {
            status: 200,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    } catch (error) {
        return new Response(JSON.stringify({
            status: 'unhealthy',
            service: 'stripe',
            error: error.message
        }), {
            status: 503,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }
}
async function simulateWhatsAppHealthCheck(request) {
    try {
        if (!process.env.WHATSAPP_ACCESS_TOKEN) {
            return new Response(JSON.stringify({
                status: 'unhealthy',
                service: 'whatsapp',
                error: 'WhatsApp not configured'
            }), {
                status: 503,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        const response = await fetch(`https://graph.facebook.com/v18.0/${process.env.WHATSAPP_PHONE_NUMBER_ID}`, {
            headers: {
                Authorization: `Bearer ${process.env.WHATSAPP_ACCESS_TOKEN}`
            }
        });
        if (!response.ok) {
            throw new Error('WhatsApp API not accessible');
        }
        return new Response(JSON.stringify({
            status: 'healthy',
            service: 'whatsapp'
        }), {
            status: 200,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    } catch (error) {
        return new Response(JSON.stringify({
            status: 'unhealthy',
            service: 'whatsapp',
            error: error.message
        }), {
            status: 503,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxBaSBQcm9qZWN0ZW5cXEFEU2FwcFxcdGVzdHNcXGludGVncmF0aW9uXFxhcGlcXGhlYWx0aC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSGVhbHRoIENoZWNrIEFQSSBJbnRlZ3JhdGlvbiBUZXN0c1xuICpcbiAqIFRlc3RzIGZvciAvYXBpL2hlYWx0aC8qIGVuZHBvaW50cyBpbmNsdWRpbmcgb3ZlcmFsbCBoZWFsdGgsXG4gKiBkYXRhYmFzZSwgU3RyaXBlLCBhbmQgV2hhdHNBcHAgQVBJIGNvbm5lY3Rpdml0eS5cbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgYmVmb3JlRWFjaCwgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgY3JlYXRlTW9ja1JlcXVlc3QsIHBhcnNlUmVzcG9uc2UgfSBmcm9tICcuLi8uLi91dGlscy9hcGktdGVzdC1oZWxwZXJzJ1xuaW1wb3J0IHsgY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvdGVzdC1oZWxwZXJzJ1xuXG5qZXN0Lm1vY2soJ0AvbGliL3N1cGFiYXNlL3NlcnZlcicpXG5cbmRlc2NyaWJlKCdHRVQgL2FwaS9oZWFsdGgnLCAoKSA9PiB7XG4gIGl0KCdzaG91bGQgcmV0dXJuIG92ZXJhbGwgYXBwbGljYXRpb24gaGVhbHRoIHN0YXR1cycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3QoJ0dFVCcsICcvYXBpL2hlYWx0aCcpXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaW11bGF0ZUhlYWx0aENoZWNrKHJlcXVlc3QpXG4gICAgY29uc3QgeyBzdGF0dXMsIGRhdGEgfSA9IGF3YWl0IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICBleHBlY3Qoc3RhdHVzKS50b0JlKDIwMClcbiAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ3N0YXR1cycpXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCd0aW1lc3RhbXAnKVxuICAgIGV4cGVjdChkYXRhKS50b0hhdmVQcm9wZXJ0eSgnc2VydmljZXMnKVxuICAgIGV4cGVjdChkYXRhLnN0YXR1cykudG9CZSgnaGVhbHRoeScpXG4gIH0pXG59KVxuXG5kZXNjcmliZSgnR0VUIC9hcGkvaGVhbHRoL2RiJywgKCkgPT4ge1xuICBsZXQgbW9ja1N1cGFiYXNlOiBhbnlcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBtb2NrU3VwYWJhc2UgPSBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQoKVxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCByZXR1cm4gaGVhbHRoeSB3aGVuIGRhdGFiYXNlIGlzIGNvbm5lY3RlZCcsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrU3VwYWJhc2UuZnJvbSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGxpbWl0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBbXSwgZXJyb3I6IG51bGwgfSksXG4gICAgfSlcblxuICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCgnR0VUJywgJy9hcGkvaGVhbHRoL2RiJylcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpbXVsYXRlRGJIZWFsdGhDaGVjayhyZXF1ZXN0LCBtb2NrU3VwYWJhc2UpXG4gICAgY29uc3QgeyBzdGF0dXMsIGRhdGEgfSA9IGF3YWl0IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICBleHBlY3Qoc3RhdHVzKS50b0JlKDIwMClcbiAgICBleHBlY3QoZGF0YS5zdGF0dXMpLnRvQmUoJ2hlYWx0aHknKVxuICAgIGV4cGVjdChkYXRhLnNlcnZpY2UpLnRvQmUoJ2RhdGFiYXNlJylcbiAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ2xhdGVuY3knKVxuICB9KVxuXG4gIGl0KCdzaG91bGQgcmV0dXJuIHVuaGVhbHRoeSB3aGVuIGRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja1N1cGFiYXNlLmZyb20gPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICBsaW1pdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0Nvbm5lY3Rpb24gZmFpbGVkJyB9LFxuICAgICAgfSksXG4gICAgfSlcblxuICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCgnR0VUJywgJy9hcGkvaGVhbHRoL2RiJylcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpbXVsYXRlRGJIZWFsdGhDaGVjayhyZXF1ZXN0LCBtb2NrU3VwYWJhc2UpXG4gICAgY29uc3QgeyBzdGF0dXMsIGRhdGEgfSA9IGF3YWl0IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICBleHBlY3Qoc3RhdHVzKS50b0JlKDUwMylcbiAgICBleHBlY3QoZGF0YS5zdGF0dXMpLnRvQmUoJ3VuaGVhbHRoeScpXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdlcnJvcicpXG4gIH0pXG59KVxuXG5kZXNjcmliZSgnR0VUIC9hcGkvaGVhbHRoL3N0cmlwZScsICgpID0+IHtcbiAgaXQoJ3Nob3VsZCByZXR1cm4gaGVhbHRoeSB3aGVuIFN0cmlwZSBpcyBjb25maWd1cmVkJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIE1vY2sgZW52aXJvbm1lbnQgdmFyaWFibGVcbiAgICBwcm9jZXNzLmVudi5TVFJJUEVfU0VDUkVUX0tFWSA9ICdza190ZXN0X21vY2tfa2V5J1xuXG4gICAgY29uc3QgbW9ja1N0cmlwZSA9IHtcbiAgICAgIGN1c3RvbWVyczoge1xuICAgICAgICBsaXN0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBbXSB9KSxcbiAgICAgIH0sXG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KCdHRVQnLCAnL2FwaS9oZWFsdGgvc3RyaXBlJylcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpbXVsYXRlU3RyaXBlSGVhbHRoQ2hlY2socmVxdWVzdCwgbW9ja1N0cmlwZSlcbiAgICBjb25zdCB7IHN0YXR1cywgZGF0YSB9ID0gYXdhaXQgcGFyc2VSZXNwb25zZShyZXNwb25zZSlcblxuICAgIGV4cGVjdChzdGF0dXMpLnRvQmUoMjAwKVxuICAgIGV4cGVjdChkYXRhLnN0YXR1cykudG9CZSgnaGVhbHRoeScpXG4gICAgZXhwZWN0KGRhdGEuc2VydmljZSkudG9CZSgnc3RyaXBlJylcblxuICAgIC8vIENsZWFuIHVwXG4gICAgZGVsZXRlIHByb2Nlc3MuZW52LlNUUklQRV9TRUNSRVRfS0VZXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCByZXR1cm4gdW5oZWFsdGh5IHdoZW4gU3RyaXBlIGlzIG5vdCBjb25maWd1cmVkJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIEVuc3VyZSBubyBlbnYgdmFyaWFibGVcbiAgICBkZWxldGUgcHJvY2Vzcy5lbnYuU1RSSVBFX1NFQ1JFVF9LRVlcblxuICAgIGNvbnN0IG1vY2tTdHJpcGUgPSBudWxsXG5cbiAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3QoJ0dFVCcsICcvYXBpL2hlYWx0aC9zdHJpcGUnKVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2ltdWxhdGVTdHJpcGVIZWFsdGhDaGVjayhyZXF1ZXN0LCBtb2NrU3RyaXBlKVxuICAgIGNvbnN0IHsgc3RhdHVzLCBkYXRhIH0gPSBhd2FpdCBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlKVxuXG4gICAgZXhwZWN0KHN0YXR1cykudG9CZSg1MDMpXG4gICAgZXhwZWN0KGRhdGEuc3RhdHVzKS50b0JlKCd1bmhlYWx0aHknKVxuICAgIGV4cGVjdChkYXRhLmVycm9yKS50b0NvbnRhaW4oJ25vdCBjb25maWd1cmVkJylcbiAgfSlcbn0pXG5cbmRlc2NyaWJlKCdHRVQgL2FwaS9oZWFsdGgvd2hhdHNhcHAnLCAoKSA9PiB7XG4gIGl0KCdzaG91bGQgcmV0dXJuIGhlYWx0aHkgd2hlbiBXaGF0c0FwcCBBUEkgaXMgYWNjZXNzaWJsZScsIGFzeW5jICgpID0+IHtcbiAgICAvLyBNb2NrIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICAgIHByb2Nlc3MuZW52LldIQVRTQVBQX0FDQ0VTU19UT0tFTiA9ICdtb2NrX2FjY2Vzc190b2tlbidcbiAgICBwcm9jZXNzLmVudi5XSEFUU0FQUF9QSE9ORV9OVU1CRVJfSUQgPSAnMTIzNDU2Nzg5J1xuXG4gICAgZ2xvYmFsLmZldGNoID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIG9rOiB0cnVlLFxuICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSB9KSxcbiAgICB9KSBhcyBqZXN0Lk1vY2tcblxuICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCgnR0VUJywgJy9hcGkvaGVhbHRoL3doYXRzYXBwJylcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpbXVsYXRlV2hhdHNBcHBIZWFsdGhDaGVjayhyZXF1ZXN0KVxuICAgIGNvbnN0IHsgc3RhdHVzLCBkYXRhIH0gPSBhd2FpdCBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlKVxuXG4gICAgZXhwZWN0KHN0YXR1cykudG9CZSgyMDApXG4gICAgZXhwZWN0KGRhdGEuc3RhdHVzKS50b0JlKCdoZWFsdGh5JylcbiAgICBleHBlY3QoZGF0YS5zZXJ2aWNlKS50b0JlKCd3aGF0c2FwcCcpXG5cbiAgICAvLyBDbGVhbiB1cFxuICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5XSEFUU0FQUF9BQ0NFU1NfVE9LRU5cbiAgICBkZWxldGUgcHJvY2Vzcy5lbnYuV0hBVFNBUFBfUEhPTkVfTlVNQkVSX0lEXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCByZXR1cm4gdW5oZWFsdGh5IHdoZW4gV2hhdHNBcHAgQVBJIGlzIG5vdCBhY2Nlc3NpYmxlJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIEVuc3VyZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHNldCBidXQgZmV0Y2ggZmFpbHNcbiAgICBwcm9jZXNzLmVudi5XSEFUU0FQUF9BQ0NFU1NfVE9LRU4gPSAnbW9ja19hY2Nlc3NfdG9rZW4nXG4gICAgcHJvY2Vzcy5lbnYuV0hBVFNBUFBfUEhPTkVfTlVNQkVSX0lEID0gJzEyMzQ1Njc4OSdcblxuICAgIGdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKSkgYXMgamVzdC5Nb2NrXG5cbiAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3QoJ0dFVCcsICcvYXBpL2hlYWx0aC93aGF0c2FwcCcpXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaW11bGF0ZVdoYXRzQXBwSGVhbHRoQ2hlY2socmVxdWVzdClcbiAgICBjb25zdCB7IHN0YXR1cywgZGF0YSB9ID0gYXdhaXQgcGFyc2VSZXNwb25zZShyZXNwb25zZSlcblxuICAgIGV4cGVjdChzdGF0dXMpLnRvQmUoNTAzKVxuICAgIGV4cGVjdChkYXRhLnN0YXR1cykudG9CZSgndW5oZWFsdGh5JylcbiAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ2Vycm9yJylcblxuICAgIC8vIENsZWFuIHVwXG4gICAgZGVsZXRlIHByb2Nlc3MuZW52LldIQVRTQVBQX0FDQ0VTU19UT0tFTlxuICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5XSEFUU0FQUF9QSE9ORV9OVU1CRVJfSURcbiAgfSlcbn0pXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBIZWxwZXIgRnVuY3Rpb25zIHRvIFNpbXVsYXRlIEFQSSBSb3V0ZSBIYW5kbGVyc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuYXN5bmMgZnVuY3Rpb24gc2ltdWxhdGVIZWFsdGhDaGVjayhyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IFByb21pc2U8YW55PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShcbiAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiAnaGVhbHRoeScsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzZXJ2aWNlczoge1xuICAgICAgICAgIGRhdGFiYXNlOiAnaGVhbHRoeScsXG4gICAgICAgICAgc3RyaXBlOiAnaGVhbHRoeScsXG4gICAgICAgICAgd2hhdHNhcHA6ICdoZWFsdGh5JyxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgICAgeyBzdGF0dXM6IDIwMCwgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0gfVxuICAgIClcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBzdGF0dXM6ICd1bmhlYWx0aHknLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KSwge1xuICAgICAgc3RhdHVzOiA1MDMsXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICB9KVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNpbXVsYXRlRGJIZWFsdGhDaGVjayhyZXF1ZXN0OiBOZXh0UmVxdWVzdCwgc3VwYWJhc2U6IGFueSk6IFByb21pc2U8YW55PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnb3JnYW5pemF0aW9ucycpLnNlbGVjdCgnaWQnKS5saW1pdCgxKVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgc3RhdHVzOiAndW5oZWFsdGh5JyxcbiAgICAgICAgICBzZXJ2aWNlOiAnZGF0YWJhc2UnLFxuICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICB9KSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMywgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0gfVxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IGxhdGVuY3kgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6ICdoZWFsdGh5JyxcbiAgICAgICAgc2VydmljZTogJ2RhdGFiYXNlJyxcbiAgICAgICAgbGF0ZW5jeTogYCR7bGF0ZW5jeX1tc2AsXG4gICAgICB9KSxcbiAgICAgIHsgc3RhdHVzOiAyMDAsIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9IH1cbiAgICApXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6ICd1bmhlYWx0aHknLFxuICAgICAgICBzZXJ2aWNlOiAnZGF0YWJhc2UnLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgIH0pLFxuICAgICAgeyBzdGF0dXM6IDUwMywgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0gfVxuICAgIClcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBzaW11bGF0ZVN0cmlwZUhlYWx0aENoZWNrKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCBzdHJpcGU6IGFueSk6IFByb21pc2U8YW55PiB7XG4gIHRyeSB7XG4gICAgaWYgKCFzdHJpcGUgfHwgIXByb2Nlc3MuZW52LlNUUklQRV9TRUNSRVRfS0VZKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgc3RhdHVzOiAndW5oZWFsdGh5JyxcbiAgICAgICAgICBzZXJ2aWNlOiAnc3RyaXBlJyxcbiAgICAgICAgICBlcnJvcjogJ1N0cmlwZSBub3QgY29uZmlndXJlZCcsXG4gICAgICAgIH0pLFxuICAgICAgICB7IHN0YXR1czogNTAzLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSB9XG4gICAgICApXG4gICAgfVxuXG4gICAgYXdhaXQgc3RyaXBlLmN1c3RvbWVycy5saXN0KHsgbGltaXQ6IDEgfSlcblxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXG4gICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogJ2hlYWx0aHknLFxuICAgICAgICBzZXJ2aWNlOiAnc3RyaXBlJyxcbiAgICAgIH0pLFxuICAgICAgeyBzdGF0dXM6IDIwMCwgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0gfVxuICAgIClcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXG4gICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogJ3VuaGVhbHRoeScsXG4gICAgICAgIHNlcnZpY2U6ICdzdHJpcGUnLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgIH0pLFxuICAgICAgeyBzdGF0dXM6IDUwMywgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0gfVxuICAgIClcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBzaW11bGF0ZVdoYXRzQXBwSGVhbHRoQ2hlY2socmVxdWVzdDogTmV4dFJlcXVlc3QpOiBQcm9taXNlPGFueT4ge1xuICB0cnkge1xuICAgIGlmICghcHJvY2Vzcy5lbnYuV0hBVFNBUFBfQUNDRVNTX1RPS0VOKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgc3RhdHVzOiAndW5oZWFsdGh5JyxcbiAgICAgICAgICBzZXJ2aWNlOiAnd2hhdHNhcHAnLFxuICAgICAgICAgIGVycm9yOiAnV2hhdHNBcHAgbm90IGNvbmZpZ3VyZWQnLFxuICAgICAgICB9KSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMywgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0gfVxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjE4LjAvJHtwcm9jZXNzLmVudi5XSEFUU0FQUF9QSE9ORV9OVU1CRVJfSUR9YCxcbiAgICAgIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtwcm9jZXNzLmVudi5XSEFUU0FQUF9BQ0NFU1NfVE9LRU59YCxcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICApXG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1doYXRzQXBwIEFQSSBub3QgYWNjZXNzaWJsZScpXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShcbiAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiAnaGVhbHRoeScsXG4gICAgICAgIHNlcnZpY2U6ICd3aGF0c2FwcCcsXG4gICAgICB9KSxcbiAgICAgIHsgc3RhdHVzOiAyMDAsIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9IH1cbiAgICApXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6ICd1bmhlYWx0aHknLFxuICAgICAgICBzZXJ2aWNlOiAnd2hhdHNhcHAnLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgIH0pLFxuICAgICAgeyBzdGF0dXM6IDUwMywgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0gfVxuICAgIClcbiAgfVxufVxuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwiZGVzY3JpYmUiLCJpdCIsInJlcXVlc3QiLCJjcmVhdGVNb2NrUmVxdWVzdCIsInJlc3BvbnNlIiwic2ltdWxhdGVIZWFsdGhDaGVjayIsInN0YXR1cyIsImRhdGEiLCJwYXJzZVJlc3BvbnNlIiwiZXhwZWN0IiwidG9CZSIsInRvSGF2ZVByb3BlcnR5IiwibW9ja1N1cGFiYXNlIiwiYmVmb3JlRWFjaCIsImNyZWF0ZU1vY2tTdXBhYmFzZUNsaWVudCIsImNsZWFyQWxsTW9ja3MiLCJmcm9tIiwiZm4iLCJtb2NrUmV0dXJuVmFsdWUiLCJzZWxlY3QiLCJtb2NrUmV0dXJuVGhpcyIsImxpbWl0IiwibW9ja1Jlc29sdmVkVmFsdWUiLCJlcnJvciIsInNpbXVsYXRlRGJIZWFsdGhDaGVjayIsInNlcnZpY2UiLCJtZXNzYWdlIiwicHJvY2VzcyIsImVudiIsIlNUUklQRV9TRUNSRVRfS0VZIiwibW9ja1N0cmlwZSIsImN1c3RvbWVycyIsImxpc3QiLCJzaW11bGF0ZVN0cmlwZUhlYWx0aENoZWNrIiwidG9Db250YWluIiwiV0hBVFNBUFBfQUNDRVNTX1RPS0VOIiwiV0hBVFNBUFBfUEhPTkVfTlVNQkVSX0lEIiwiZ2xvYmFsIiwiZmV0Y2giLCJvayIsImpzb24iLCJzdWNjZXNzIiwic2ltdWxhdGVXaGF0c0FwcEhlYWx0aENoZWNrIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsIlJlc3BvbnNlIiwiSlNPTiIsInN0cmluZ2lmeSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNlcnZpY2VzIiwiZGF0YWJhc2UiLCJzdHJpcGUiLCJ3aGF0c2FwcCIsImhlYWRlcnMiLCJzdXBhYmFzZSIsInN0YXJ0VGltZSIsIm5vdyIsImxhdGVuY3kiLCJBdXRob3JpemF0aW9uIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Q0FLQzs7Ozt5QkFFc0Q7Z0NBRU47NkJBQ1I7QUFFekNBLGFBQUksQ0FBQ0MsSUFBSSxDQUFDO0FBRVZDLElBQUFBLGlCQUFRLEVBQUMsbUJBQW1CO0lBQzFCQyxJQUFBQSxXQUFFLEVBQUMsbURBQW1EO1FBQ3BELE1BQU1DLFVBQVVDLElBQUFBLGlDQUFpQixFQUFDLE9BQU87UUFDekMsTUFBTUMsV0FBVyxNQUFNQyxvQkFBb0JIO1FBQzNDLE1BQU0sRUFBRUksTUFBTSxFQUFFQyxJQUFJLEVBQUUsR0FBRyxNQUFNQyxJQUFBQSw2QkFBYSxFQUFDSjtRQUU3Q0ssSUFBQUEsZUFBTSxFQUFDSCxRQUFRSSxJQUFJLENBQUM7UUFDcEJELElBQUFBLGVBQU0sRUFBQ0YsTUFBTUksY0FBYyxDQUFDO1FBQzVCRixJQUFBQSxlQUFNLEVBQUNGLE1BQU1JLGNBQWMsQ0FBQztRQUM1QkYsSUFBQUEsZUFBTSxFQUFDRixNQUFNSSxjQUFjLENBQUM7UUFDNUJGLElBQUFBLGVBQU0sRUFBQ0YsS0FBS0QsTUFBTSxFQUFFSSxJQUFJLENBQUM7SUFDM0I7QUFDRjtBQUVBVixJQUFBQSxpQkFBUSxFQUFDLHNCQUFzQjtJQUM3QixJQUFJWTtJQUVKQyxJQUFBQSxtQkFBVSxFQUFDO1FBQ1RELGVB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