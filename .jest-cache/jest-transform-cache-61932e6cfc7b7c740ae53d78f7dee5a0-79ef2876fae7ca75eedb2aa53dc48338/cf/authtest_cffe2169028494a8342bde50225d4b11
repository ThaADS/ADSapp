b54e34706f454677f0e3813c68853cf5
/**
 * Authentication API Integration Tests
 *
 * Tests for /api/auth/* endpoints including signin, signup,
 * password reset, and multi-factor authentication.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _apitesthelpers = require("../../utils/api-test-helpers");
const _testhelpers = require("../../utils/test-helpers");
// Mock Next.js and Supabase
_globals.jest.mock('@/lib/supabase/server');
_globals.jest.mock('next/server');
// Helper to parse Response
async function parseResponse(response) {
    const text = await response.text();
    let data;
    try {
        data = JSON.parse(text);
    } catch  {
        data = text;
    }
    return {
        status: response.status,
        data,
        headers: response.headers
    };
}
// Helper to expect error response
function expectErrorResponse(data, status, message) {
    (0, _globals.expect)(data).toHaveProperty('error');
    if (status) (0, _globals.expect)(data.statusCode || data.status || status).toBe(status);
    if (message) (0, _globals.expect)(data.message || data.error).toContain(message);
}
// Helper to create mock request
function createMockRequest(method, url, body, headers) {
    // Ensure URL is absolute
    const fullUrl = url.startsWith('http') ? url : `http://localhost:3000${url}`;
    return (0, _apitesthelpers.mockApiRequest)({
        method,
        url: fullUrl,
        body,
        headers
    });
}
(0, _globals.describe)('POST /api/auth/signin', ()=>{
    let mockSupabase;
    (0, _globals.beforeEach)(()=>{
        mockSupabase = (0, _testhelpers.createMockSupabaseClient)();
        _globals.jest.clearAllMocks();
    });
    (0, _globals.it)('should authenticate valid user and return session', async ()=>{
        const mockUser = (0, _testhelpers.createMockUser)();
        const mockOrg = (0, _testhelpers.createMockOrganization)({
            id: mockUser.organization_id
        });
        mockSupabase.auth.signInWithPassword = _globals.jest.fn().mockResolvedValue({
            data: {
                user: {
                    id: mockUser.id,
                    email: mockUser.email
                },
                session: {
                    access_token: 'mock-token',
                    refresh_token: 'mock-refresh'
                }
            },
            error: null
        });
        mockSupabase.from = _globals.jest.fn().mockReturnValue({
            select: _globals.jest.fn().mockReturnThis(),
            eq: _globals.jest.fn().mockReturnThis(),
            single: _globals.jest.fn().mockResolvedValue({
                data: {
                    ...mockUser,
                    organization: mockOrg
                },
                error: null
            })
        });
        const request = createMockRequest('POST', '/api/auth/signin', {
            email: mockUser.email,
            password: 'validpassword123'
        });
        // Simulate API route handler
        const response = await simulateSignIn(request, mockSupabase);
        const { status, data } = await parseResponse(response);
        (0, _globals.expect)(status).toBe(200);
        (0, _globals.expect)(data).toHaveProperty('user');
        (0, _globals.expect)(data).toHaveProperty('session');
        (0, _globals.expect)(data.user.email).toBe(mockUser.email);
        (0, _globals.expect)(data.session.access_token).toBe('mock-token');
    });
    (0, _globals.it)('should reject invalid credentials', async ()=>{
        mockSupabase.auth.signInWithPassword = _globals.jest.fn().mockResolvedValue({
            data: {
                user: null,
                session: null
            },
            error: {
                message: 'Invalid login credentials'
            }
        });
        const request = createMockRequest('POST', '/api/auth/signin', {
            email: 'wrong@example.com',
            password: 'wrongpassword'
        });
        const response = await simulateSignIn(request, mockSupabase);
        const { status, data } = await parseResponse(response);
        (0, _globals.expect)(status).toBe(401);
        expectErrorResponse(data, 401, 'Invalid login credentials');
    });
    (0, _globals.it)('should validate email format', async ()=>{
        const request = createMockRequest('POST', '/api/auth/signin', {
            email: 'invalid-email',
            password: 'password123'
        });
        const response = await simulateSignIn(request, mockSupabase);
        const { status, data } = await parseResponse(response);
        (0, _globals.expect)(status).toBe(400);
        expectErrorResponse(data, 400, 'Invalid email format');
    });
    (0, _globals.it)('should require password field', async ()=>{
        const request = createMockRequest('POST', '/api/auth/signin', {
            email: 'test@example.com'
        });
        const response = await simulateSignIn(request, mockSupabase);
        const { status, data } = await parseResponse(response);
        (0, _globals.expect)(status).toBe(400);
        expectErrorResponse(data, 400, 'Password is required');
    });
});
(0, _globals.describe)('POST /api/auth/signup', ()=>{
    let mockSupabase;
    (0, _globals.beforeEach)(()=>{
        mockSupabase = (0, _testhelpers.createMockSupabaseClient)();
        _globals.jest.clearAllMocks();
    });
    (0, _globals.it)('should create new user with organization', async ()=>{
        const newUser = {
            email: 'newuser@example.com',
            password: 'SecurePass123!',
            full_name: 'New User',
            organization_name: 'New Organization'
        };
        mockSupabase.auth.signUp = _globals.jest.fn().mockResolvedValue({
            data: {
                user: {
                    id: 'new-user-id',
                    email: newUser.email
                },
                session: {
                    access_token: 'new-token'
                }
            },
            error: null
        });
        mockSupabase.from = _globals.jest.fn().mockReturnValue({
            insert: _globals.jest.fn().mockReturnThis(),
            select: _globals.jest.fn().mockReturnThis(),
            single: _globals.jest.fn().mockResolvedValue({
                data: {
                    id: 'new-org-id',
                    name: newUser.organization_name
                },
                error: null
            })
        });
        const request = createMockRequest('POST', '/api/auth/signup', newUser);
        const response = await simulateSignUp(request, mockSupabase);
        const { status, data } = await parseResponse(response);
        (0, _globals.expect)(status).toBe(201);
        (0, _globals.expect)(data).toHaveProperty('user');
        (0, _globals.expect)(data).toHaveProperty('organization');
        (0, _globals.expect)(data.user.email).toBe(newUser.email);
        (0, _globals.expect)(data.organization.name).toBe(newUser.organization_name);
    });
    (0, _globals.it)('should reject duplicate email', async ()=>{
        mockSupabase.auth.signUp = _globals.jest.fn().mockResolvedValue({
            data: {
                user: null,
                session: null
            },
            error: {
                message: 'User already registered'
            }
        });
        const request = createMockRequest('POST', '/api/auth/signup', {
            email: 'existing@example.com',
            password: 'password123',
            full_name: 'Duplicate User',
            organization_name: 'Test Org'
        });
        const response = await simulateSignUp(request, mockSupabase);
        const { status, data } = await parseResponse(response);
        (0, _globals.expect)(status).toBe(409);
        expectErrorResponse(data, 409, 'already registered');
    });
    (0, _globals.it)('should validate password strength', async ()=>{
        const request = createMockRequest('POST', '/api/auth/signup', {
            email: 'test@example.com',
            password: 'weak',
            full_name: 'Test User',
            organization_name: 'Test Org'
        });
        const response = await simulateSignUp(request, mockSupabase);
        const { status, data } = await parseResponse(response);
        (0, _globals.expect)(status).toBe(400);
        expectErrorResponse(data, 400, 'Password must be at least 8 characters');
    });
    (0, _globals.it)('should require organization name', async ()=>{
        const request = createMockRequest('POST', '/api/auth/signup', {
            email: 'test@example.com',
            password: 'SecurePass123!',
            full_name: 'Test User'
        });
        const response = await simulateSignUp(request, mockSupabase);
        const { status, data } = await parseResponse(response);
        (0, _globals.expect)(status).toBe(400);
        expectErrorResponse(data, 400, 'Organization name is required');
    });
});
(0, _globals.describe)('POST /api/auth/forgot-password', ()=>{
    let mockSupabase;
    (0, _globals.beforeEach)(()=>{
        mockSupabase = (0, _testhelpers.createMockSupabaseClient)();
        _globals.jest.clearAllMocks();
    });
    (0, _globals.it)('should send password reset email for valid email', async ()=>{
        mockSupabase.auth.resetPasswordForEmail = _globals.jest.fn().mockResolvedValue({
            data: {},
            error: null
        });
        const request = createMockRequest('POST', '/api/auth/forgot-password', {
            email: 'user@example.com'
        });
        const response = await simulateForgotPassword(request, mockSupabase);
        const { status, data } = await parseResponse(response);
        (0, _globals.expect)(status).toBe(200);
        (0, _globals.expect)(data.message).toContain('Password reset email sent');
        (0, _globals.expect)(mockSupabase.auth.resetPasswordForEmail).toHaveBeenCalledWith('user@example.com', _globals.expect.any(Object));
    });
    (0, _globals.it)('should return success even for non-existent email (security)', async ()=>{
        mockSupabase.auth.resetPasswordForEmail = _globals.jest.fn().mockResolvedValue({
            data: {},
            error: null
        });
        const request = createMockRequest('POST', '/api/auth/forgot-password', {
            email: 'nonexistent@example.com'
        });
        const response = await simulateForgotPassword(request, mockSupabase);
        const { status, data } = await parseResponse(response);
        // Should return success to prevent email enumeration
        (0, _globals.expect)(status).toBe(200);
        (0, _globals.expect)(data.message).toContain('Password reset email sent');
    });
});
(0, _globals.describe)('POST /api/auth/reset-password', ()=>{
    let mockSupabase;
    (0, _globals.beforeEach)(()=>{
        mockSupabase = (0, _testhelpers.createMockSupabaseClient)();
        _globals.jest.clearAllMocks();
    });
    (0, _globals.it)('should reset password with valid token', async ()=>{
        mockSupabase.auth.updateUser = _globals.jest.fn().mockResolvedValue({
            data: {
                user: {
                    id: 'user-id'
                }
            },
            error: null
        });
        const request = createMockRequest('POST', '/api/auth/reset-password', {
            token: 'valid-reset-token',
            password: 'NewSecurePass123!'
        });
        const response = await simulateResetPassword(request, mockSupabase);
        const { status, data } = await parseResponse(response);
        (0, _globals.expect)(status).toBe(200);
        (0, _globals.expect)(data.message).toContain('Password updated successfully');
    });
    (0, _globals.it)('should reject expired or invalid token', async ()=>{
        mockSupabase.auth.updateUser = _globals.jest.fn().mockResolvedValue({
            data: {
                user: null
            },
            error: {
                message: 'Invalid or expired token'
            }
        });
        const request = createMockRequest('POST', '/api/auth/reset-password', {
            token: 'expired-token',
            password: 'NewSecurePass123!'
        });
        const response = await simulateResetPassword(request, mockSupabase);
        const { status, data } = await parseResponse(response);
        (0, _globals.expect)(status).toBe(400);
        expectErrorResponse(data, 400, 'Invalid or expired token');
    });
});
// =============================================================================
// Helper Functions to Simulate API Route Handlers
// =============================================================================
async function simulateSignIn(request, supabase) {
    try {
        const body = await request.json();
        const { email, password } = body;
        // Validation
        if (!email || !password) {
            return new Response(JSON.stringify({
                error: 'Email and password are required'
            }), {
                status: 400,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            return new Response(JSON.stringify({
                error: 'Invalid email format'
            }), {
                status: 400,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        if (!password) {
            return new Response(JSON.stringify({
                error: 'Password is required'
            }), {
                status: 400,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        // Attempt sign in
        const { data, error } = await supabase.auth.signInWithPassword({
            email,
            password
        });
        if (error || !data.session) {
            return new Response(JSON.stringify({
                error: 'Invalid login credentials'
            }), {
                status: 401,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        // Get user profile
        const { data: profile } = await supabase.from('profiles').select('*, organization:organizations(*)').eq('id', data.user.id).single();
        return new Response(JSON.stringify({
            user: {
                ...data.user,
                ...profile
            },
            session: data.session
        }), {
            status: 200,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    } catch (error) {
        return new Response(JSON.stringify({
            error: error.message
        }), {
            status: 500,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }
}
async function simulateSignUp(request, supabase) {
    try {
        const body = await request.json();
        const { email, password, full_name, organization_name } = body;
        // Validation
        if (!email || !password || !full_name || !organization_name) {
            let errorMsg = 'Missing required fields: ';
            if (!email) errorMsg += 'email ';
            if (!password) errorMsg += 'password ';
            if (!full_name) errorMsg += 'full_name ';
            if (!organization_name) errorMsg += 'Organization name is required';
            return new Response(JSON.stringify({
                error: errorMsg
            }), {
                status: 400,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        if (password.length < 8) {
            return new Response(JSON.stringify({
                error: 'Password must be at least 8 characters'
            }), {
                status: 400,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        // Attempt sign up
        const { data, error } = await supabase.auth.signUp({
            email,
            password
        });
        if (error) {
            const status = error.message.includes('already registered') ? 409 : 400;
            return new Response(JSON.stringify({
                error: error.message
            }), {
                status,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        // Create organization
        const { data: org } = await supabase.from('organizations').insert({
            name: organization_name
        }).select().single();
        return new Response(JSON.stringify({
            user: data.user,
            organization: org,
            session: data.session
        }), {
            status: 201,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    } catch (error) {
        return new Response(JSON.stringify({
            error: error.message
        }), {
            status: 500,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }
}
async function simulateForgotPassword(request, supabase) {
    try {
        const body = await request.json();
        const { email } = body;
        if (!email) {
            return new Response(JSON.stringify({
                error: 'Email is required'
            }), {
                status: 400,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        await supabase.auth.resetPasswordForEmail(email, {
            redirectTo: `${process.env.NEXT_PUBLIC_APP_URL}/auth/reset-password`
        });
        // Always return success (security best practice)
        return new Response(JSON.stringify({
            message: 'Password reset email sent if account exists'
        }), {
            status: 200,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    } catch (error) {
        return new Response(JSON.stringify({
            error: error.message
        }), {
            status: 500,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }
}
async function simulateResetPassword(request, supabase) {
    try {
        const body = await request.json();
        const { token, password } = body;
        if (!token || !password) {
            return new Response(JSON.stringify({
                error: 'Token and password are required'
            }), {
                status: 400,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        const { data, error } = await supabase.auth.updateUser({
            password
        });
        if (error) {
            return new Response(JSON.stringify({
                error: error.message
            }), {
                status: 400,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        return new Response(JSON.stringify({
            message: 'Password updated successfully'
        }), {
            status: 200,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    } catch (error) {
        return new Response(JSON.stringify({
            error: error.message
        }), {
            status: 500,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxBaSBQcm9qZWN0ZW5cXEFEU2FwcFxcdGVzdHNcXGludGVncmF0aW9uXFxhcGlcXGF1dGgudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEF1dGhlbnRpY2F0aW9uIEFQSSBJbnRlZ3JhdGlvbiBUZXN0c1xuICpcbiAqIFRlc3RzIGZvciAvYXBpL2F1dGgvKiBlbmRwb2ludHMgaW5jbHVkaW5nIHNpZ25pbiwgc2lnbnVwLFxuICogcGFzc3dvcmQgcmVzZXQsIGFuZCBtdWx0aS1mYWN0b3IgYXV0aGVudGljYXRpb24uXG4gKi9cblxuaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGJlZm9yZUVhY2gsIGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJ1xuaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7XG4gIG1vY2tBcGlSZXF1ZXN0LFxuICBjcmVhdGVBdXRoZW50aWNhdGVkUmVxdWVzdCxcbiAgZXh0cmFjdFJlc3BvbnNlRGF0YSxcbiAgZXhwZWN0RXJyb3JSZXNwb25zZSBhcyBleHBlY3RFcnJvclJlc3BvbnNlSGVscGVyLFxuICBleHBlY3RTdWNjZXNzUmVzcG9uc2UgYXMgZXhwZWN0U3VjY2Vzc1Jlc3BvbnNlSGVscGVyLFxufSBmcm9tICcuLi8uLi91dGlscy9hcGktdGVzdC1oZWxwZXJzJ1xuaW1wb3J0IHtcbiAgY3JlYXRlTW9ja1VzZXIsXG4gIGNyZWF0ZU1vY2tPcmdhbml6YXRpb24sXG4gIGNyZWF0ZU1vY2tTdXBhYmFzZUNsaWVudCxcbn0gZnJvbSAnLi4vLi4vdXRpbHMvdGVzdC1oZWxwZXJzJ1xuXG4vLyBNb2NrIE5leHQuanMgYW5kIFN1cGFiYXNlXG5qZXN0Lm1vY2soJ0AvbGliL3N1cGFiYXNlL3NlcnZlcicpXG5qZXN0Lm1vY2soJ25leHQvc2VydmVyJylcblxuLy8gSGVscGVyIHRvIHBhcnNlIFJlc3BvbnNlXG5hc3luYyBmdW5jdGlvbiBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlOiBhbnkpIHtcbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICBsZXQgZGF0YTogYW55XG4gIHRyeSB7XG4gICAgZGF0YSA9IEpTT04ucGFyc2UodGV4dClcbiAgfSBjYXRjaCB7XG4gICAgZGF0YSA9IHRleHRcbiAgfVxuICByZXR1cm4geyBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cywgZGF0YSwgaGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyB9XG59XG5cbi8vIEhlbHBlciB0byBleHBlY3QgZXJyb3IgcmVzcG9uc2VcbmZ1bmN0aW9uIGV4cGVjdEVycm9yUmVzcG9uc2UoZGF0YTogYW55LCBzdGF0dXM/OiBudW1iZXIsIG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdlcnJvcicpXG4gIGlmIChzdGF0dXMpIGV4cGVjdChkYXRhLnN0YXR1c0NvZGUgfHwgZGF0YS5zdGF0dXMgfHwgc3RhdHVzKS50b0JlKHN0YXR1cylcbiAgaWYgKG1lc3NhZ2UpIGV4cGVjdChkYXRhLm1lc3NhZ2UgfHwgZGF0YS5lcnJvcikudG9Db250YWluKG1lc3NhZ2UpXG59XG5cbi8vIEhlbHBlciB0byBjcmVhdGUgbW9jayByZXF1ZXN0XG5mdW5jdGlvbiBjcmVhdGVNb2NrUmVxdWVzdChtZXRob2Q6IHN0cmluZywgdXJsOiBzdHJpbmcsIGJvZHk/OiBhbnksIGhlYWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KSB7XG4gIC8vIEVuc3VyZSBVUkwgaXMgYWJzb2x1dGVcbiAgY29uc3QgZnVsbFVybCA9IHVybC5zdGFydHNXaXRoKCdodHRwJykgPyB1cmwgOiBgaHR0cDovL2xvY2FsaG9zdDozMDAwJHt1cmx9YFxuICByZXR1cm4gbW9ja0FwaVJlcXVlc3Qoe1xuICAgIG1ldGhvZCxcbiAgICB1cmw6IGZ1bGxVcmwsXG4gICAgYm9keSxcbiAgICBoZWFkZXJzLFxuICB9KVxufVxuXG5kZXNjcmliZSgnUE9TVCAvYXBpL2F1dGgvc2lnbmluJywgKCkgPT4ge1xuICBsZXQgbW9ja1N1cGFiYXNlOiBhbnlcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBtb2NrU3VwYWJhc2UgPSBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQoKVxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCBhdXRoZW50aWNhdGUgdmFsaWQgdXNlciBhbmQgcmV0dXJuIHNlc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1VzZXIgPSBjcmVhdGVNb2NrVXNlcigpXG4gICAgY29uc3QgbW9ja09yZyA9IGNyZWF0ZU1vY2tPcmdhbml6YXRpb24oeyBpZDogbW9ja1VzZXIub3JnYW5pemF0aW9uX2lkIH0pXG5cbiAgICBtb2NrU3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB1c2VyOiB7IGlkOiBtb2NrVXNlci5pZCwgZW1haWw6IG1vY2tVc2VyLmVtYWlsIH0sXG4gICAgICAgIHNlc3Npb246IHsgYWNjZXNzX3Rva2VuOiAnbW9jay10b2tlbicsIHJlZnJlc2hfdG9rZW46ICdtb2NrLXJlZnJlc2gnIH0sXG4gICAgICB9LFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgfSlcblxuICAgIG1vY2tTdXBhYmFzZS5mcm9tID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IC4uLm1vY2tVc2VyLCBvcmdhbml6YXRpb246IG1vY2tPcmcgfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KSxcbiAgICB9KVxuXG4gICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KCdQT1NUJywgJy9hcGkvYXV0aC9zaWduaW4nLCB7XG4gICAgICBlbWFpbDogbW9ja1VzZXIuZW1haWwsXG4gICAgICBwYXNzd29yZDogJ3ZhbGlkcGFzc3dvcmQxMjMnLFxuICAgIH0pXG5cbiAgICAvLyBTaW11bGF0ZSBBUEkgcm91dGUgaGFuZGxlclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2ltdWxhdGVTaWduSW4ocmVxdWVzdCwgbW9ja1N1cGFiYXNlKVxuICAgIGNvbnN0IHsgc3RhdHVzLCBkYXRhIH0gPSBhd2FpdCBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlKVxuXG4gICAgZXhwZWN0KHN0YXR1cykudG9CZSgyMDApXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCd1c2VyJylcbiAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ3Nlc3Npb24nKVxuICAgIGV4cGVjdChkYXRhLnVzZXIuZW1haWwpLnRvQmUobW9ja1VzZXIuZW1haWwpXG4gICAgZXhwZWN0KGRhdGEuc2Vzc2lvbi5hY2Nlc3NfdG9rZW4pLnRvQmUoJ21vY2stdG9rZW4nKVxuICB9KVxuXG4gIGl0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgY3JlZGVudGlhbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja1N1cGFiYXNlLmF1dGguc2lnbkluV2l0aFBhc3N3b3JkID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIGRhdGE6IHsgdXNlcjogbnVsbCwgc2Vzc2lvbjogbnVsbCB9LFxuICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0ludmFsaWQgbG9naW4gY3JlZGVudGlhbHMnIH0sXG4gICAgfSlcblxuICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCgnUE9TVCcsICcvYXBpL2F1dGgvc2lnbmluJywge1xuICAgICAgZW1haWw6ICd3cm9uZ0BleGFtcGxlLmNvbScsXG4gICAgICBwYXNzd29yZDogJ3dyb25ncGFzc3dvcmQnLFxuICAgIH0pXG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpbXVsYXRlU2lnbkluKHJlcXVlc3QsIG1vY2tTdXBhYmFzZSlcbiAgICBjb25zdCB7IHN0YXR1cywgZGF0YSB9ID0gYXdhaXQgcGFyc2VSZXNwb25zZShyZXNwb25zZSlcblxuICAgIGV4cGVjdChzdGF0dXMpLnRvQmUoNDAxKVxuICAgIGV4cGVjdEVycm9yUmVzcG9uc2UoZGF0YSwgNDAxLCAnSW52YWxpZCBsb2dpbiBjcmVkZW50aWFscycpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBlbWFpbCBmb3JtYXQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KCdQT1NUJywgJy9hcGkvYXV0aC9zaWduaW4nLCB7XG4gICAgICBlbWFpbDogJ2ludmFsaWQtZW1haWwnLFxuICAgICAgcGFzc3dvcmQ6ICdwYXNzd29yZDEyMycsXG4gICAgfSlcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2ltdWxhdGVTaWduSW4ocmVxdWVzdCwgbW9ja1N1cGFiYXNlKVxuICAgIGNvbnN0IHsgc3RhdHVzLCBkYXRhIH0gPSBhd2FpdCBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlKVxuXG4gICAgZXhwZWN0KHN0YXR1cykudG9CZSg0MDApXG4gICAgZXhwZWN0RXJyb3JSZXNwb25zZShkYXRhLCA0MDAsICdJbnZhbGlkIGVtYWlsIGZvcm1hdCcpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCByZXF1aXJlIHBhc3N3b3JkIGZpZWxkJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCgnUE9TVCcsICcvYXBpL2F1dGgvc2lnbmluJywge1xuICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICB9KVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaW11bGF0ZVNpZ25JbihyZXF1ZXN0LCBtb2NrU3VwYWJhc2UpXG4gICAgY29uc3QgeyBzdGF0dXMsIGRhdGEgfSA9IGF3YWl0IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICBleHBlY3Qoc3RhdHVzKS50b0JlKDQwMClcbiAgICBleHBlY3RFcnJvclJlc3BvbnNlKGRhdGEsIDQwMCwgJ1Bhc3N3b3JkIGlzIHJlcXVpcmVkJylcbiAgfSlcbn0pXG5cbmRlc2NyaWJlKCdQT1NUIC9hcGkvYXV0aC9zaWdudXAnLCAoKSA9PiB7XG4gIGxldCBtb2NrU3VwYWJhc2U6IGFueVxuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIG1vY2tTdXBhYmFzZSA9IGNyZWF0ZU1vY2tTdXBhYmFzZUNsaWVudCgpXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKClcbiAgfSlcblxuICBpdCgnc2hvdWxkIGNyZWF0ZSBuZXcgdXNlciB3aXRoIG9yZ2FuaXphdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBuZXdVc2VyID0ge1xuICAgICAgZW1haWw6ICduZXd1c2VyQGV4YW1wbGUuY29tJyxcbiAgICAgIHBhc3N3b3JkOiAnU2VjdXJlUGFzczEyMyEnLFxuICAgICAgZnVsbF9uYW1lOiAnTmV3IFVzZXInLFxuICAgICAgb3JnYW5pemF0aW9uX25hbWU6ICdOZXcgT3JnYW5pemF0aW9uJyxcbiAgICB9XG5cbiAgICBtb2NrU3VwYWJhc2UuYXV0aC5zaWduVXAgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB1c2VyOiB7IGlkOiAnbmV3LXVzZXItaWQnLCBlbWFpbDogbmV3VXNlci5lbWFpbCB9LFxuICAgICAgICBzZXNzaW9uOiB7IGFjY2Vzc190b2tlbjogJ25ldy10b2tlbicgfSxcbiAgICAgIH0sXG4gICAgICBlcnJvcjogbnVsbCxcbiAgICB9KVxuXG4gICAgbW9ja1N1cGFiYXNlLmZyb20gPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIGluc2VydDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IGlkOiAnbmV3LW9yZy1pZCcsIG5hbWU6IG5ld1VzZXIub3JnYW5pemF0aW9uX25hbWUgfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KSxcbiAgICB9KVxuXG4gICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KCdQT1NUJywgJy9hcGkvYXV0aC9zaWdudXAnLCBuZXdVc2VyKVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaW11bGF0ZVNpZ25VcChyZXF1ZXN0LCBtb2NrU3VwYWJhc2UpXG4gICAgY29uc3QgeyBzdGF0dXMsIGRhdGEgfSA9IGF3YWl0IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICBleHBlY3Qoc3RhdHVzKS50b0JlKDIwMSlcbiAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ3VzZXInKVxuICAgIGV4cGVjdChkYXRhKS50b0hhdmVQcm9wZXJ0eSgnb3JnYW5pemF0aW9uJylcbiAgICBleHBlY3QoZGF0YS51c2VyLmVtYWlsKS50b0JlKG5ld1VzZXIuZW1haWwpXG4gICAgZXhwZWN0KGRhdGEub3JnYW5pemF0aW9uLm5hbWUpLnRvQmUobmV3VXNlci5vcmdhbml6YXRpb25fbmFtZSlcbiAgfSlcblxuICBpdCgnc2hvdWxkIHJlamVjdCBkdXBsaWNhdGUgZW1haWwnLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja1N1cGFiYXNlLmF1dGguc2lnblVwID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIGRhdGE6IHsgdXNlcjogbnVsbCwgc2Vzc2lvbjogbnVsbCB9LFxuICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ1VzZXIgYWxyZWFkeSByZWdpc3RlcmVkJyB9LFxuICAgIH0pXG5cbiAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3QoJ1BPU1QnLCAnL2FwaS9hdXRoL3NpZ251cCcsIHtcbiAgICAgIGVtYWlsOiAnZXhpc3RpbmdAZXhhbXBsZS5jb20nLFxuICAgICAgcGFzc3dvcmQ6ICdwYXNzd29yZDEyMycsXG4gICAgICBmdWxsX25hbWU6ICdEdXBsaWNhdGUgVXNlcicsXG4gICAgICBvcmdhbml6YXRpb25fbmFtZTogJ1Rlc3QgT3JnJyxcbiAgICB9KVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaW11bGF0ZVNpZ25VcChyZXF1ZXN0LCBtb2NrU3VwYWJhc2UpXG4gICAgY29uc3QgeyBzdGF0dXMsIGRhdGEgfSA9IGF3YWl0IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICBleHBlY3Qoc3RhdHVzKS50b0JlKDQwOSlcbiAgICBleHBlY3RFcnJvclJlc3BvbnNlKGRhdGEsIDQwOSwgJ2FscmVhZHkgcmVnaXN0ZXJlZCcpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBwYXNzd29yZCBzdHJlbmd0aCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3QoJ1BPU1QnLCAnL2FwaS9hdXRoL3NpZ251cCcsIHtcbiAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICBwYXNzd29yZDogJ3dlYWsnLFxuICAgICAgZnVsbF9uYW1lOiAnVGVzdCBVc2VyJyxcbiAgICAgIG9yZ2FuaXphdGlvbl9uYW1lOiAnVGVzdCBPcmcnLFxuICAgIH0pXG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpbXVsYXRlU2lnblVwKHJlcXVlc3QsIG1vY2tTdXBhYmFzZSlcbiAgICBjb25zdCB7IHN0YXR1cywgZGF0YSB9ID0gYXdhaXQgcGFyc2VSZXNwb25zZShyZXNwb25zZSlcblxuICAgIGV4cGVjdChzdGF0dXMpLnRvQmUoNDAwKVxuICAgIGV4cGVjdEVycm9yUmVzcG9uc2UoZGF0YSwgNDAwLCAnUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMnKVxuICB9KVxuXG4gIGl0KCdzaG91bGQgcmVxdWlyZSBvcmdhbml6YXRpb24gbmFtZScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3QoJ1BPU1QnLCAnL2FwaS9hdXRoL3NpZ251cCcsIHtcbiAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICBwYXNzd29yZDogJ1NlY3VyZVBhc3MxMjMhJyxcbiAgICAgIGZ1bGxfbmFtZTogJ1Rlc3QgVXNlcicsXG4gICAgfSlcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2ltdWxhdGVTaWduVXAocmVxdWVzdCwgbW9ja1N1cGFiYXNlKVxuICAgIGNvbnN0IHsgc3RhdHVzLCBkYXRhIH0gPSBhd2FpdCBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlKVxuXG4gICAgZXhwZWN0KHN0YXR1cykudG9CZSg0MDApXG4gICAgZXhwZWN0RXJyb3JSZXNwb25zZShkYXRhLCA0MDAsICdPcmdhbml6YXRpb24gbmFtZSBpcyByZXF1aXJlZCcpXG4gIH0pXG59KVxuXG5kZXNjcmliZSgnUE9TVCAvYXBpL2F1dGgvZm9yZ290LXBhc3N3b3JkJywgKCkgPT4ge1xuICBsZXQgbW9ja1N1cGFiYXNlOiBhbnlcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBtb2NrU3VwYWJhc2UgPSBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQoKVxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCBzZW5kIHBhc3N3b3JkIHJlc2V0IGVtYWlsIGZvciB2YWxpZCBlbWFpbCcsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrU3VwYWJhc2UuYXV0aC5yZXNldFBhc3N3b3JkRm9yRW1haWwgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgZGF0YToge30sXG4gICAgICBlcnJvcjogbnVsbCxcbiAgICB9KVxuXG4gICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KCdQT1NUJywgJy9hcGkvYXV0aC9mb3Jnb3QtcGFzc3dvcmQnLCB7XG4gICAgICBlbWFpbDogJ3VzZXJAZXhhbXBsZS5jb20nLFxuICAgIH0pXG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpbXVsYXRlRm9yZ290UGFzc3dvcmQocmVxdWVzdCwgbW9ja1N1cGFiYXNlKVxuICAgIGNvbnN0IHsgc3RhdHVzLCBkYXRhIH0gPSBhd2FpdCBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlKVxuXG4gICAgZXhwZWN0KHN0YXR1cykudG9CZSgyMDApXG4gICAgZXhwZWN0KGRhdGEubWVzc2FnZSkudG9Db250YWluKCdQYXNzd29yZCByZXNldCBlbWFpbCBzZW50JylcbiAgICBleHBlY3QobW9ja1N1cGFiYXNlLmF1dGgucmVzZXRQYXNzd29yZEZvckVtYWlsKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgndXNlckBleGFtcGxlLmNvbScsIGV4cGVjdC5hbnkoT2JqZWN0KSlcbiAgfSlcblxuICBpdCgnc2hvdWxkIHJldHVybiBzdWNjZXNzIGV2ZW4gZm9yIG5vbi1leGlzdGVudCBlbWFpbCAoc2VjdXJpdHkpJywgYXN5bmMgKCkgPT4ge1xuICAgIG1vY2tTdXBhYmFzZS5hdXRoLnJlc2V0UGFzc3dvcmRGb3JFbWFpbCA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiB7fSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgIH0pXG5cbiAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3QoJ1BPU1QnLCAnL2FwaS9hdXRoL2ZvcmdvdC1wYXNzd29yZCcsIHtcbiAgICAgIGVtYWlsOiAnbm9uZXhpc3RlbnRAZXhhbXBsZS5jb20nLFxuICAgIH0pXG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpbXVsYXRlRm9yZ290UGFzc3dvcmQocmVxdWVzdCwgbW9ja1N1cGFiYXNlKVxuICAgIGNvbnN0IHsgc3RhdHVzLCBkYXRhIH0gPSBhd2FpdCBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlKVxuXG4gICAgLy8gU2hvdWxkIHJldHVybiBzdWNjZXNzIHRvIHByZXZlbnQgZW1haWwgZW51bWVyYXRpb25cbiAgICBleHBlY3Qoc3RhdHVzKS50b0JlKDIwMClcbiAgICBleHBlY3QoZGF0YS5tZXNzYWdlKS50b0NvbnRhaW4oJ1Bhc3N3b3JkIHJlc2V0IGVtYWlsIHNlbnQnKVxuICB9KVxufSlcblxuZGVzY3JpYmUoJ1BPU1QgL2FwaS9hdXRoL3Jlc2V0LXBhc3N3b3JkJywgKCkgPT4ge1xuICBsZXQgbW9ja1N1cGFiYXNlOiBhbnlcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBtb2NrU3VwYWJhc2UgPSBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQoKVxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCByZXNldCBwYXNzd29yZCB3aXRoIHZhbGlkIHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgIG1vY2tTdXBhYmFzZS5hdXRoLnVwZGF0ZVVzZXIgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgZGF0YTogeyB1c2VyOiB7IGlkOiAndXNlci1pZCcgfSB9LFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgfSlcblxuICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCgnUE9TVCcsICcvYXBpL2F1dGgvcmVzZXQtcGFzc3dvcmQnLCB7XG4gICAgICB0b2tlbjogJ3ZhbGlkLXJlc2V0LXRva2VuJyxcbiAgICAgIHBhc3N3b3JkOiAnTmV3U2VjdXJlUGFzczEyMyEnLFxuICAgIH0pXG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpbXVsYXRlUmVzZXRQYXNzd29yZChyZXF1ZXN0LCBtb2NrU3VwYWJhc2UpXG4gICAgY29uc3QgeyBzdGF0dXMsIGRhdGEgfSA9IGF3YWl0IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICBleHBlY3Qoc3RhdHVzKS50b0JlKDIwMClcbiAgICBleHBlY3QoZGF0YS5tZXNzYWdlKS50b0NvbnRhaW4oJ1Bhc3N3b3JkIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JylcbiAgfSlcblxuICBpdCgnc2hvdWxkIHJlamVjdCBleHBpcmVkIG9yIGludmFsaWQgdG9rZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja1N1cGFiYXNlLmF1dGgudXBkYXRlVXNlciA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiB7IHVzZXI6IG51bGwgfSxcbiAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdJbnZhbGlkIG9yIGV4cGlyZWQgdG9rZW4nIH0sXG4gICAgfSlcblxuICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCgnUE9TVCcsICcvYXBpL2F1dGgvcmVzZXQtcGFzc3dvcmQnLCB7XG4gICAgICB0b2tlbjogJ2V4cGlyZWQtdG9rZW4nLFxuICAgICAgcGFzc3dvcmQ6ICdOZXdTZWN1cmVQYXNzMTIzIScsXG4gICAgfSlcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2ltdWxhdGVSZXNldFBhc3N3b3JkKHJlcXVlc3QsIG1vY2tTdXBhYmFzZSlcbiAgICBjb25zdCB7IHN0YXR1cywgZGF0YSB9ID0gYXdhaXQgcGFyc2VSZXNwb25zZShyZXNwb25zZSlcblxuICAgIGV4cGVjdChzdGF0dXMpLnRvQmUoNDAwKVxuICAgIGV4cGVjdEVycm9yUmVzcG9uc2UoZGF0YSwgNDAwLCAnSW52YWxpZCBvciBleHBpcmVkIHRva2VuJylcbiAgfSlcbn0pXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBIZWxwZXIgRnVuY3Rpb25zIHRvIFNpbXVsYXRlIEFQSSBSb3V0ZSBIYW5kbGVyc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuYXN5bmMgZnVuY3Rpb24gc2ltdWxhdGVTaWduSW4ocmVxdWVzdDogTmV4dFJlcXVlc3QsIHN1cGFiYXNlOiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSBib2R5XG5cbiAgICAvLyBWYWxpZGF0aW9uXG4gICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ0VtYWlsIGFuZCBwYXNzd29yZCBhcmUgcmVxdWlyZWQnIH0pLCB7XG4gICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvXG4gICAgaWYgKCFlbWFpbFJlZ2V4LnRlc3QoZW1haWwpKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdJbnZhbGlkIGVtYWlsIGZvcm1hdCcgfSksIHtcbiAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoIXBhc3N3b3JkKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdQYXNzd29yZCBpcyByZXF1aXJlZCcgfSksIHtcbiAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBBdHRlbXB0IHNpZ24gaW5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25JbldpdGhQYXNzd29yZCh7IGVtYWlsLCBwYXNzd29yZCB9KVxuXG4gICAgaWYgKGVycm9yIHx8ICFkYXRhLnNlc3Npb24pIHtcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ0ludmFsaWQgbG9naW4gY3JlZGVudGlhbHMnIH0pLCB7XG4gICAgICAgIHN0YXR1czogNDAxLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gR2V0IHVzZXIgcHJvZmlsZVxuICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwcm9maWxlcycpXG4gICAgICAuc2VsZWN0KCcqLCBvcmdhbml6YXRpb246b3JnYW5pemF0aW9ucygqKScpXG4gICAgICAuZXEoJ2lkJywgZGF0YS51c2VyLmlkKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB1c2VyOiB7IC4uLmRhdGEudXNlciwgLi4ucHJvZmlsZSB9LFxuICAgICAgICBzZXNzaW9uOiBkYXRhLnNlc3Npb24sXG4gICAgICB9KSxcbiAgICAgIHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfVxuICAgIClcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KSwge1xuICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICB9KVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNpbXVsYXRlU2lnblVwKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCBzdXBhYmFzZTogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCwgZnVsbF9uYW1lLCBvcmdhbml6YXRpb25fbmFtZSB9ID0gYm9keVxuXG4gICAgLy8gVmFsaWRhdGlvblxuICAgIGlmICghZW1haWwgfHwgIXBhc3N3b3JkIHx8ICFmdWxsX25hbWUgfHwgIW9yZ2FuaXphdGlvbl9uYW1lKSB7XG4gICAgICBsZXQgZXJyb3JNc2cgPSAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHM6ICdcbiAgICAgIGlmICghZW1haWwpIGVycm9yTXNnICs9ICdlbWFpbCAnXG4gICAgICBpZiAoIXBhc3N3b3JkKSBlcnJvck1zZyArPSAncGFzc3dvcmQgJ1xuICAgICAgaWYgKCFmdWxsX25hbWUpIGVycm9yTXNnICs9ICdmdWxsX25hbWUgJ1xuICAgICAgaWYgKCFvcmdhbml6YXRpb25fbmFtZSkgZXJyb3JNc2cgKz0gJ09yZ2FuaXphdGlvbiBuYW1lIGlzIHJlcXVpcmVkJ1xuXG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6IGVycm9yTXNnIH0pLCB7XG4gICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHBhc3N3b3JkLmxlbmd0aCA8IDgpIHtcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ1Bhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzJyB9KSwge1xuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIEF0dGVtcHQgc2lnbiB1cFxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnblVwKHsgZW1haWwsIHBhc3N3b3JkIH0pXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IHN0YXR1cyA9IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2FscmVhZHkgcmVnaXN0ZXJlZCcpID8gNDA5IDogNDAwXG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSksIHtcbiAgICAgICAgc3RhdHVzLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIG9yZ2FuaXphdGlvblxuICAgIGNvbnN0IHsgZGF0YTogb3JnIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ29yZ2FuaXphdGlvbnMnKVxuICAgICAgLmluc2VydCh7IG5hbWU6IG9yZ2FuaXphdGlvbl9uYW1lIH0pXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKVxuXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShcbiAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdXNlcjogZGF0YS51c2VyLFxuICAgICAgICBvcmdhbml6YXRpb246IG9yZyxcbiAgICAgICAgc2Vzc2lvbjogZGF0YS5zZXNzaW9uLFxuICAgICAgfSksXG4gICAgICB7XG4gICAgICAgIHN0YXR1czogMjAxLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH1cbiAgICApXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSksIHtcbiAgICAgIHN0YXR1czogNTAwLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgfSlcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBzaW11bGF0ZUZvcmdvdFBhc3N3b3JkKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCBzdXBhYmFzZTogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zdCB7IGVtYWlsIH0gPSBib2R5XG5cbiAgICBpZiAoIWVtYWlsKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdFbWFpbCBpcyByZXF1aXJlZCcgfSksIHtcbiAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBhd2FpdCBzdXBhYmFzZS5hdXRoLnJlc2V0UGFzc3dvcmRGb3JFbWFpbChlbWFpbCwge1xuICAgICAgcmVkaXJlY3RUbzogYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTH0vYXV0aC9yZXNldC1wYXNzd29yZGAsXG4gICAgfSlcblxuICAgIC8vIEFsd2F5cyByZXR1cm4gc3VjY2VzcyAoc2VjdXJpdHkgYmVzdCBwcmFjdGljZSlcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiAnUGFzc3dvcmQgcmVzZXQgZW1haWwgc2VudCBpZiBhY2NvdW50IGV4aXN0cycgfSksXG4gICAgICB7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH1cbiAgICApXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSksIHtcbiAgICAgIHN0YXR1czogNTAwLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgfSlcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBzaW11bGF0ZVJlc2V0UGFzc3dvcmQocmVxdWVzdDogTmV4dFJlcXVlc3QsIHN1cGFiYXNlOiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIGNvbnN0IHsgdG9rZW4sIHBhc3N3b3JkIH0gPSBib2R5XG5cbiAgICBpZiAoIXRva2VuIHx8ICFwYXNzd29yZCkge1xuICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IGVycm9yOiAnVG9rZW4gYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZCcgfSksIHtcbiAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnVwZGF0ZVVzZXIoeyBwYXNzd29yZCB9KVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSksIHtcbiAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiAnUGFzc3dvcmQgdXBkYXRlZCBzdWNjZXNzZnVsbHknIH0pLFxuICAgICAge1xuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICB9XG4gICAgKVxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pLCB7XG4gICAgICBzdGF0dXM6IDUwMCxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgIH0pXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInBhcnNlUmVzcG9uc2UiLCJyZXNwb25zZSIsInRleHQiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwic3RhdHVzIiwiaGVhZGVycyIsImV4cGVjdEVycm9yUmVzcG9uc2UiLCJtZXNzYWdlIiwiZXhwZWN0IiwidG9IYXZlUHJvcGVydHkiLCJzdGF0dXNDb2RlIiwidG9CZSIsImVycm9yIiwidG9Db250YWluIiwiY3JlYXRlTW9ja1JlcXVlc3QiLCJtZXRob2QiLCJ1cmwiLCJib2R5IiwiZnVsbFVybCIsInN0YXJ0c1dpdGgiLCJtb2NrQXBpUmVxdWVzdCIsImRlc2NyaWJlIiwibW9ja1N1cGFiYXNlIiwiYmVmb3JlRWFjaCIsImNyZWF0ZU1vY2tTdXBhYmFzZUNsaWVudCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsIm1vY2tVc2VyIiwiY3JlYXRlTW9ja1VzZXIiLCJtb2NrT3JnIiwiY3JlYXRlTW9ja09yZ2FuaXphdGlvbiIsImlkIiwib3JnYW5pemF0aW9uX2lkIiwiYXV0aCIsInNpZ25JbldpdGhQYXNzd29yZCIsImZuIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJ1c2VyIiwiZW1haWwiLCJzZXNzaW9uIiwiYWNjZXNzX3Rva2VuIiwicmVmcmVzaF90b2tlbiIsImZyb20iLCJtb2NrUmV0dXJuVmFsdWUiLCJzZWxlY3QiLCJtb2NrUmV0dXJuVGhpcyIsImVxIiwic2luZ2xlIiwib3JnYW5pemF0aW9uIiwicmVxdWVzdCIsInBhc3N3b3JkIiwic2ltdWxhdGVTaWduSW4iLCJuZXdVc2VyIiwiZnVsbF9uYW1lIiwib3JnYW5pemF0aW9uX25hbWUiLCJzaWduVXAiLCJpbnNlcnQiLCJuYW1lIiwic2ltdWxhdGVTaWduVXAiLCJyZXNldFBhc3N3b3JkRm9yRW1haWwiLCJzaW11bGF0ZUZvcmdvdFBhc3N3b3JkIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJhbnkiLCJPYmplY3QiLCJ1cGRhdGVVc2VyIiwidG9rZW4iLCJzaW11bGF0ZVJlc2V0UGFzc3dvcmQiLCJzdXBhYmFzZSIsImpzb24iLCJSZXNwb25zZSIsInN0cmluZ2lmeSIsImVtYWlsUmVnZXgiLCJ0ZXN0IiwicHJvZmlsZSIsImVycm9yTXNnIiwibGVuZ3RoIiwiaW5jbHVkZXMiLCJvcmciLCJyZWRpcmVjdFRvIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQUF9VUkwiXSwibWFwcGluZ3MiOiJBQUFBOzs7OztDQUtDOzs7O3lCQUVzRDtnQ0FRaEQ7NkJBS0E7QUFFUCw0QkFBNEI7QUFDNUJBLGFBQUksQ0FBQ0MsSUFBSSxDQUFDO0FBQ1ZELGFBQUksQ0FBQ0MsSUFBSSxDQUFDO0FBRVYsMkJBQTJCO0FBQzNCLGVBQWVDLGNBQWNDLFFBQWE7SUFDeEMsTUFBTUMsT0FBTyxNQUFNRCxTQUFTQyxJQUFJO0lBQ2hDLElBQUlDO0lBQ0osSUFBSTtRQUNGQSxPQUFPQyxLQUFLQyxLQUFLLENBQUNIO0lBQ3BCLEVBQUUsT0FBTTtRQUNOQyxPQUFPRDtJQUNUO0lBQ0EsT0FBTztRQUFFSSxRQUFRTCxTQUFTSyxNQUFNO1FBQUVIO1FBQU1JLFNBQVNOLFNBQVNNLE9B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