fdcd4a4291cc82d6f70a13f57e3230ae
"use strict";

/* istanbul ignore next */
function cov_medqfgh3d() {
  var path = "C:\\Ai Projecten\\ADSapp\\src\\lib\\middleware\\session.ts";
  var hash = "9369da33d481fe906e462d747c6f38d1100814a8";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Ai Projecten\\ADSapp\\src\\lib\\middleware\\session.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "2": {
        start: {
          line: 6,
          column: 24
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "3": {
        start: {
          line: 11,
          column: 0
        },
        end: {
          line: 36,
          column: 3
        }
      },
      "4": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 40
        }
      },
      "5": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 34
        }
      },
      "6": {
        start: {
          line: 19,
          column: 8
        },
        end: {
          line: 19,
          column: 34
        }
      },
      "7": {
        start: {
          line: 22,
          column: 8
        },
        end: {
          line: 22,
          column: 33
        }
      },
      "8": {
        start: {
          line: 25,
          column: 8
        },
        end: {
          line: 25,
          column: 37
        }
      },
      "9": {
        start: {
          line: 28,
          column: 8
        },
        end: {
          line: 28,
          column: 32
        }
      },
      "10": {
        start: {
          line: 31,
          column: 8
        },
        end: {
          line: 31,
          column: 31
        }
      },
      "11": {
        start: {
          line: 34,
          column: 8
        },
        end: {
          line: 34,
          column: 40
        }
      },
      "12": {
        start: {
          line: 37,
          column: 16
        },
        end: {
          line: 37,
          column: 38
        }
      },
      "13": {
        start: {
          line: 38,
          column: 17
        },
        end: {
          line: 38,
          column: 46
        }
      },
      "14": {
        start: {
          line: 39,
          column: 17
        },
        end: {
          line: 39,
          column: 46
        }
      },
      "15": {
        start: {
          line: 41,
          column: 4
        },
        end: {
          line: 41,
          column: 51
        }
      },
      "16": {
        start: {
          line: 41,
          column: 39
        },
        end: {
          line: 41,
          column: 51
        }
      },
      "17": {
        start: {
          line: 42,
          column: 28
        },
        end: {
          line: 42,
          column: 41
        }
      },
      "18": {
        start: {
          line: 43,
          column: 27
        },
        end: {
          line: 43,
          column: 40
        }
      },
      "19": {
        start: {
          line: 44,
          column: 4
        },
        end: {
          line: 46,
          column: 20
        }
      },
      "20": {
        start: {
          line: 45,
          column: 8
        },
        end: {
          line: 45,
          column: 66
        }
      },
      "21": {
        start: {
          line: 49,
          column: 4
        },
        end: {
          line: 51,
          column: 5
        }
      },
      "22": {
        start: {
          line: 50,
          column: 8
        },
        end: {
          line: 50,
          column: 19
        }
      },
      "23": {
        start: {
          line: 52,
          column: 4
        },
        end: {
          line: 56,
          column: 5
        }
      },
      "24": {
        start: {
          line: 53,
          column: 8
        },
        end: {
          line: 55,
          column: 10
        }
      },
      "25": {
        start: {
          line: 57,
          column: 16
        },
        end: {
          line: 57,
          column: 53
        }
      },
      "26": {
        start: {
          line: 58,
          column: 4
        },
        end: {
          line: 60,
          column: 5
        }
      },
      "27": {
        start: {
          line: 59,
          column: 8
        },
        end: {
          line: 59,
          column: 30
        }
      },
      "28": {
        start: {
          line: 61,
          column: 17
        },
        end: {
          line: 63,
          column: 5
        }
      },
      "29": {
        start: {
          line: 64,
          column: 32
        },
        end: {
          line: 64,
          column: 88
        }
      },
      "30": {
        start: {
          line: 65,
          column: 4
        },
        end: {
          line: 74,
          column: 5
        }
      },
      "31": {
        start: {
          line: 66,
          column: 8
        },
        end: {
          line: 73,
          column: 9
        }
      },
      "32": {
        start: {
          line: 67,
          column: 23
        },
        end: {
          line: 67,
          column: 95
        }
      },
      "33": {
        start: {
          line: 68,
          column: 12
        },
        end: {
          line: 72,
          column: 13
        }
      },
      "34": {
        start: {
          line: 69,
          column: 16
        },
        end: {
          line: 69,
          column: 57
        }
      },
      "35": {
        start: {
          line: 71,
          column: 16
        },
        end: {
          line: 71,
          column: 39
        }
      },
      "36": {
        start: {
          line: 75,
          column: 4
        },
        end: {
          line: 75,
          column: 25
        }
      },
      "37": {
        start: {
          line: 76,
          column: 4
        },
        end: {
          line: 78,
          column: 5
        }
      },
      "38": {
        start: {
          line: 77,
          column: 8
        },
        end: {
          line: 77,
          column: 31
        }
      },
      "39": {
        start: {
          line: 79,
          column: 4
        },
        end: {
          line: 79,
          column: 18
        }
      },
      "40": {
        start: {
          line: 83,
          column: 27
        },
        end: {
          line: 95,
          column: 1
        }
      },
      "41": {
        start: {
          line: 97,
          column: 23
        },
        end: {
          line: 100,
          column: 5
        }
      },
      "42": {
        start: {
          line: 101,
          column: 21
        },
        end: {
          line: 101,
          column: 45
        }
      },
      "43": {
        start: {
          line: 103,
          column: 4
        },
        end: {
          line: 105,
          column: 5
        }
      },
      "44": {
        start: {
          line: 104,
          column: 8
        },
        end: {
          line: 104,
          column: 20
        }
      },
      "45": {
        start: {
          line: 106,
          column: 4
        },
        end: {
          line: 191,
          column: 5
        }
      },
      "46": {
        start: {
          line: 108,
          column: 29
        },
        end: {
          line: 108,
          column: 80
        }
      },
      "47": {
        start: {
          line: 109,
          column: 8
        },
        end: {
          line: 111,
          column: 9
        }
      },
      "48": {
        start: {
          line: 110,
          column: 12
        },
        end: {
          line: 110,
          column: 75
        }
      },
      "49": {
        start: {
          line: 113,
          column: 23
        },
        end: {
          line: 113,
          column: 51
        }
      },
      "50": {
        start: {
          line: 114,
          column: 8
        },
        end: {
          line: 116,
          column: 9
        }
      },
      "51": {
        start: {
          line: 115,
          column: 12
        },
        end: {
          line: 115,
          column: 72
        }
      },
      "52": {
        start: {
          line: 118,
          column: 31
        },
        end: {
          line: 118,
          column: 56
        }
      },
      "53": {
        start: {
          line: 119,
          column: 27
        },
        end: {
          line: 119,
          column: 85
        }
      },
      "54": {
        start: {
          line: 120,
          column: 8
        },
        end: {
          line: 125,
          column: 9
        }
      },
      "55": {
        start: {
          line: 122,
          column: 29
        },
        end: {
          line: 122,
          column: 95
        }
      },
      "56": {
        start: {
          line: 123,
          column: 12
        },
        end: {
          line: 123,
          column: 59
        }
      },
      "57": {
        start: {
          line: 124,
          column: 12
        },
        end: {
          line: 124,
          column: 28
        }
      },
      "58": {
        start: {
          line: 126,
          column: 24
        },
        end: {
          line: 126,
          column: 42
        }
      },
      "59": {
        start: {
          line: 128,
          column: 8
        },
        end: {
          line: 151,
          column: 9
        }
      },
      "60": {
        start: {
          line: 129,
          column: 35
        },
        end: {
          line: 129,
          column: 98
        }
      },
      "61": {
        start: {
          line: 130,
          column: 12
        },
        end: {
          line: 150,
          column: 13
        }
      },
      "62": {
        start: {
          line: 132,
          column: 44
        },
        end: {
          line: 132,
          column: 104
        }
      },
      "63": {
        start: {
          line: 134,
          column: 33
        },
        end: {
          line: 140,
          column: 18
        }
      },
      "64": {
        start: {
          line: 142,
          column: 16
        },
        end: {
          line: 148,
          column: 19
        }
      },
      "65": {
        start: {
          line: 149,
          column: 16
        },
        end: {
          line: 149,
          column: 32
        }
      },
      "66": {
        start: {
          line: 153,
          column: 30
        },
        end: {
          line: 153,
          column: 87
        }
      },
      "67": {
        start: {
          line: 154,
          column: 8
        },
        end: {
          line: 156,
          column: 9
        }
      },
      "68": {
        start: {
          line: 155,
          column: 12
        },
        end: {
          line: 155,
          column: 98
        }
      },
      "69": {
        start: {
          line: 158,
          column: 31
        },
        end: {
          line: 158,
          column: 59
        }
      },
      "70": {
        start: {
          line: 159,
          column: 8
        },
        end: {
          line: 159,
          column: 64
        }
      },
      "71": {
        start: {
          line: 160,
          column: 8
        },
        end: {
          line: 160,
          column: 71
        }
      },
      "72": {
        start: {
          line: 161,
          column: 8
        },
        end: {
          line: 161,
          column: 60
        }
      },
      "73": {
        start: {
          line: 162,
          column: 8
        },
        end: {
          line: 162,
          column: 76
        }
      },
      "74": {
        start: {
          line: 163,
          column: 8
        },
        end: {
          line: 163,
          column: 70
        }
      },
      "75": {
        start: {
          line: 165,
          column: 8
        },
        end: {
          line: 169,
          column: 11
        }
      },
      "76": {
        start: {
          line: 171,
          column: 8
        },
        end: {
          line: 171,
          column: 70
        }
      },
      "77": {
        start: {
          line: 173,
          column: 8
        },
        end: {
          line: 184,
          column: 9
        }
      },
      "78": {
        start: {
          line: 174,
          column: 12
        },
        end: {
          line: 183,
          column: 13
        }
      },
      "79": {
        start: {
          line: 175,
          column: 31
        },
        end: {
          line: 175,
          column: 131
        }
      },
      "80": {
        start: {
          line: 175,
          column: 78
        },
        end: {
          line: 175,
          column: 130
        }
      },
      "81": {
        start: {
          line: 176,
          column: 16
        },
        end: {
          line: 180,
          column: 19
        }
      },
      "82": {
        start: {
          line: 182,
          column: 16
        },
        end: {
          line: 182,
          column: 87
        }
      },
      "83": {
        start: {
          line: 185,
          column: 8
        },
        end: {
          line: 190,
          column: 11
        }
      },
      "84": {
        start: {
          line: 194,
          column: 4
        },
        end: {
          line: 202,
          column: 6
        }
      },
      "85": {
        start: {
          line: 205,
          column: 22
        },
        end: {
          line: 205,
          column: 65
        }
      },
      "86": {
        start: {
          line: 206,
          column: 4
        },
        end: {
          line: 208,
          column: 5
        }
      },
      "87": {
        start: {
          line: 207,
          column: 8
        },
        end: {
          line: 207,
          column: 21
        }
      },
      "88": {
        start: {
          line: 209,
          column: 27
        },
        end: {
          line: 209,
          column: 56
        }
      },
      "89": {
        start: {
          line: 210,
          column: 24
        },
        end: {
          line: 210,
          column: 34
        }
      },
      "90": {
        start: {
          line: 211,
          column: 24
        },
        end: {
          line: 211,
          column: 50
        }
      },
      "91": {
        start: {
          line: 212,
          column: 4
        },
        end: {
          line: 212,
          column: 55
        }
      },
      "92": {
        start: {
          line: 215,
          column: 4
        },
        end: {
          line: 221,
          column: 7
        }
      },
      "93": {
        start: {
          line: 224,
          column: 4
        },
        end: {
          line: 224,
          column: 40
        }
      },
      "94": {
        start: {
          line: 233,
          column: 4
        },
        end: {
          line: 233,
          column: 58
        }
      },
      "95": {
        start: {
          line: 241,
          column: 4
        },
        end: {
          line: 251,
          column: 5
        }
      },
      "96": {
        start: {
          line: 242,
          column: 25
        },
        end: {
          line: 242,
          column: 59
        }
      },
      "97": {
        start: {
          line: 243,
          column: 42
        },
        end: {
          line: 243,
          column: 71
        }
      },
      "98": {
        start: {
          line: 244,
          column: 8
        },
        end: {
          line: 246,
          column: 9
        }
      },
      "99": {
        start: {
          line: 245,
          column: 12
        },
        end: {
          line: 245,
          column: 24
        }
      },
      "100": {
        start: {
          line: 247,
          column: 8
        },
        end: {
          line: 247,
          column: 23
        }
      },
      "101": {
        start: {
          line: 249,
          column: 8
        },
        end: {
          line: 249,
          column: 79
        }
      },
      "102": {
        start: {
          line: 250,
          column: 8
        },
        end: {
          line: 250,
          column: 20
        }
      },
      "103": {
        start: {
          line: 260,
          column: 4
        },
        end: {
          line: 267,
          column: 7
        }
      },
      "104": {
        start: {
          line: 261,
          column: 8
        },
        end: {
          line: 265,
          column: 9
        }
      },
      "105": {
        start: {
          line: 263,
          column: 27
        },
        end: {
          line: 263,
          column: 44
        }
      },
      "106": {
        start: {
          line: 264,
          column: 12
        },
        end: {
          line: 264,
          column: 47
        }
      },
      "107": {
        start: {
          line: 266,
          column: 8
        },
        end: {
          line: 266,
          column: 33
        }
      },
      "108": {
        start: {
          line: 277,
          column: 22
        },
        end: {
          line: 277,
          column: 68
        }
      },
      "109": {
        start: {
          line: 278,
          column: 27
        },
        end: {
          line: 278,
          column: 78
        }
      },
      "110": {
        start: {
          line: 279,
          column: 27
        },
        end: {
          line: 279,
          column: 78
        }
      },
      "111": {
        start: {
          line: 281,
          column: 24
        },
        end: {
          line: 281,
          column: 106
        }
      },
      "112": {
        start: {
          line: 282,
          column: 4
        },
        end: {
          line: 282,
          column: 36
        }
      },
      "113": {
        start: {
          line: 290,
          column: 4
        },
        end: {
          line: 295,
          column: 7
        }
      },
      "114": {
        start: {
          line: 298,
          column: 4
        },
        end: {
          line: 303,
          column: 5
        }
      },
      "115": {
        start: {
          line: 299,
          column: 26
        },
        end: {
          line: 299,
          column: 75
        }
      },
      "116": {
        start: {
          line: 300,
          column: 26
        },
        end: {
          line: 300,
          column: 102
        }
      },
      "117": {
        start: {
          line: 301,
          column: 8
        },
        end: {
          line: 301,
          column: 63
        }
      },
      "118": {
        start: {
          line: 302,
          column: 8
        },
        end: {
          line: 302,
          column: 75
        }
      },
      "119": {
        start: {
          line: 307,
          column: 30
        },
        end: {
          line: 307,
          column: 60
        }
      },
      "120": {
        start: {
          line: 308,
          column: 4
        },
        end: {
          line: 308,
          column: 52
        }
      },
      "121": {
        start: {
          line: 308,
          column: 27
        },
        end: {
          line: 308,
          column: 52
        }
      },
      "122": {
        start: {
          line: 310,
          column: 37
        },
        end: {
          line: 310,
          column: 142
        }
      },
      "123": {
        start: {
          line: 310,
          column: 84
        },
        end: {
          line: 310,
          column: 141
        }
      },
      "124": {
        start: {
          line: 311,
          column: 29
        },
        end: {
          line: 311,
          column: 64
        }
      },
      "125": {
        start: {
          line: 312,
          column: 4
        },
        end: {
          line: 312,
          column: 50
        }
      },
      "126": {
        start: {
          line: 312,
          column: 26
        },
        end: {
          line: 312,
          column: 50
        }
      },
      "127": {
        start: {
          line: 313,
          column: 4
        },
        end: {
          line: 313,
          column: 16
        }
      },
      "128": {
        start: {
          line: 316,
          column: 4
        },
        end: {
          line: 327,
          column: 5
        }
      },
      "129": {
        start: {
          line: 317,
          column: 24
        },
        end: {
          line: 317,
          column: 57
        }
      },
      "130": {
        start: {
          line: 318,
          column: 22
        },
        end: {
          line: 318,
          column: 40
        }
      },
      "131": {
        start: {
          line: 319,
          column: 8
        },
        end: {
          line: 319,
          column: 45
        }
      },
      "132": {
        start: {
          line: 321,
          column: 24
        },
        end: {
          line: 321,
          column: 80
        }
      },
      "133": {
        start: {
          line: 322,
          column: 8
        },
        end: {
          line: 326,
          column: 10
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 16
          }
        },
        loc: {
          start: {
            line: 5,
            column: 30
          },
          end: {
            line: 10,
            column: 1
          }
        },
        line: 5
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 12,
            column: 5
          }
        },
        loc: {
          start: {
            line: 12,
            column: 36
          },
          end: {
            line: 14,
            column: 5
          }
        },
        line: 12
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 15,
            column: 5
          }
        },
        loc: {
          start: {
            line: 15,
            column: 30
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 15
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 18,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        },
        loc: {
          start: {
            line: 18,
            column: 30
          },
          end: {
            line: 20,
            column: 5
          }
        },
        line: 18
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 21,
            column: 4
          },
          end: {
            line: 21,
            column: 5
          }
        },
        loc: {
          start: {
            line: 21,
            column: 29
          },
          end: {
            line: 23,
            column: 5
          }
        },
        line: 21
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 24,
            column: 4
          },
          end: {
            line: 24,
            column: 5
          }
        },
        loc: {
          start: {
            line: 24,
            column: 33
          },
          end: {
            line: 26,
            column: 5
          }
        },
        line: 24
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 27,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        },
        loc: {
          start: {
            line: 27,
            column: 28
          },
          end: {
            line: 29,
            column: 5
          }
        },
        line: 27
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 30,
            column: 4
          },
          end: {
            line: 30,
            column: 5
          }
        },
        loc: {
          start: {
            line: 30,
            column: 27
          },
          end: {
            line: 32,
            column: 5
          }
        },
        line: 30
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 33,
            column: 4
          },
          end: {
            line: 33,
            column: 5
          }
        },
        loc: {
          start: {
            line: 33,
            column: 36
          },
          end: {
            line: 35,
            column: 5
          }
        },
        line: 33
      },
      "9": {
        name: "_getRequireWildcardCache",
        decl: {
          start: {
            line: 40,
            column: 9
          },
          end: {
            line: 40,
            column: 33
          }
        },
        loc: {
          start: {
            line: 40,
            column: 47
          },
          end: {
            line: 47,
            column: 1
          }
        },
        line: 40
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 44,
            column: 39
          },
          end: {
            line: 44,
            column: 40
          }
        },
        loc: {
          start: {
            line: 44,
            column: 61
          },
          end: {
            line: 46,
            column: 5
          }
        },
        line: 44
      },
      "11": {
        name: "_interop_require_wildcard",
        decl: {
          start: {
            line: 48,
            column: 9
          },
          end: {
            line: 48,
            column: 34
          }
        },
        loc: {
          start: {
            line: 48,
            column: 53
          },
          end: {
            line: 80,
            column: 1
          }
        },
        line: 48
      },
      "12": {
        name: "validateSession",
        decl: {
          start: {
            line: 96,
            column: 15
          },
          end: {
            line: 96,
            column: 30
          }
        },
        loc: {
          start: {
            line: 96,
            column: 53
          },
          end: {
            line: 192,
            column: 1
          }
        },
        line: 96
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 175,
            column: 60
          },
          end: {
            line: 175,
            column: 61
          }
        },
        loc: {
          start: {
            line: 175,
            column: 78
          },
          end: {
            line: 175,
            column: 130
          }
        },
        line: 175
      },
      "14": {
        name: "getSessionContext",
        decl: {
          start: {
            line: 193,
            column: 9
          },
          end: {
            line: 193,
            column: 26
          }
        },
        loc: {
          start: {
            line: 193,
            column: 36
          },
          end: {
            line: 203,
            column: 1
          }
        },
        line: 193
      },
      "15": {
        name: "isSessionExpiringSoon",
        decl: {
          start: {
            line: 204,
            column: 9
          },
          end: {
            line: 204,
            column: 30
          }
        },
        loc: {
          start: {
            line: 204,
            column: 60
          },
          end: {
            line: 213,
            column: 1
          }
        },
        line: 204
      },
      "16": {
        name: "setSessionCookie",
        decl: {
          start: {
            line: 214,
            column: 9
          },
          end: {
            line: 214,
            column: 25
          }
        },
        loc: {
          start: {
            line: 214,
            column: 99
          },
          end: {
            line: 222,
            column: 1
          }
        },
        line: 214
      },
      "17": {
        name: "clearSessionCookie",
        decl: {
          start: {
            line: 223,
            column: 9
          },
          end: {
            line: 223,
            column: 27
          }
        },
        loc: {
          start: {
            line: 223,
            column: 69
          },
          end: {
            line: 225,
            column: 1
          }
        },
        line: 223
      },
      "18": {
        name: "extractSessionToken",
        decl: {
          start: {
            line: 232,
            column: 13
          },
          end: {
            line: 232,
            column: 32
          }
        },
        loc: {
          start: {
            line: 232,
            column: 54
          },
          end: {
            line: 234,
            column: 1
          }
        },
        line: 232
      },
      "19": {
        name: "extractUserId",
        decl: {
          start: {
            line: 240,
            column: 19
          },
          end: {
            line: 240,
            column: 32
          }
        },
        loc: {
          start: {
            line: 240,
            column: 42
          },
          end: {
            line: 252,
            column: 1
          }
        },
        line: 240
      },
      "20": {
        name: "isPathExcluded",
        decl: {
          start: {
            line: 259,
            column: 13
          },
          end: {
            line: 259,
            column: 27
          }
        },
        loc: {
          start: {
            line: 259,
            column: 52
          },
          end: {
            line: 268,
            column: 1
          }
        },
        line: 259
      },
      "21": {
        name: "(anonymous_21)",
        decl: {
          start: {
            line: 260,
            column: 29
          },
          end: {
            line: 260,
            column: 30
          }
        },
        loc: {
          start: {
            line: 260,
            column: 37
          },
          end: {
            line: 267,
            column: 5
          }
        },
        line: 260
      },
      "22": {
        name: "generateDeviceFingerprint",
        decl: {
          start: {
            line: 276,
            column: 13
          },
          end: {
            line: 276,
            column: 38
          }
        },
        loc: {
          start: {
            line: 276,
            column: 48
          },
          end: {
            line: 283,
            column: 1
          }
        },
        line: 276
      },
      "23": {
        name: "createUnauthorizedResponse",
        decl: {
          start: {
            line: 289,
            column: 13
          },
          end: {
            line: 289,
            column: 39
          }
        },
        loc: {
          start: {
            line: 289,
            column: 49
          },
          end: {
            line: 296,
            column: 1
          }
        },
        line: 289
      },
      "24": {
        name: "addSessionTimeoutWarning",
        decl: {
          start: {
            line: 297,
            column: 9
          },
          end: {
            line: 297,
            column: 33
          }
        },
        loc: {
          start: {
            line: 297,
            column: 73
          },
          end: {
            line: 304,
            column: 1
          }
        },
        line: 297
      },
      "25": {
        name: "validateSessionAndTenant",
        decl: {
          start: {
            line: 305,
            column: 15
          },
          end: {
            line: 305,
            column: 39
          }
        },
        loc: {
          start: {
            line: 305,
            column: 49
          },
          end: {
            line: 314,
            column: 1
          }
        },
        line: 305
      },
      "26": {
        name: "(anonymous_26)",
        decl: {
          start: {
            line: 310,
            column: 66
          },
          end: {
            line: 310,
            column: 67
          }
        },
        loc: {
          start: {
            line: 310,
            column: 84
          },
          end: {
            line: 310,
            column: 141
          }
        },
        line: 310
      },
      "27": {
        name: "checkSessionHealth",
        decl: {
          start: {
            line: 315,
            column: 15
          },
          end: {
            line: 315,
            column: 33
          }
        },
        loc: {
          start: {
            line: 315,
            column: 36
          },
          end: {
            line: 328,
            column: 1
          }
        },
        line: 315
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 41,
            column: 4
          },
          end: {
            line: 41,
            column: 51
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 41,
            column: 4
          },
          end: {
            line: 41,
            column: 51
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 41
      },
      "1": {
        loc: {
          start: {
            line: 45,
            column: 15
          },
          end: {
            line: 45,
            column: 65
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 45,
            column: 29
          },
          end: {
            line: 45,
            column: 45
          }
        }, {
          start: {
            line: 45,
            column: 48
          },
          end: {
            line: 45,
            column: 65
          }
        }],
        line: 45
      },
      "2": {
        loc: {
          start: {
            line: 49,
            column: 4
          },
          end: {
            line: 51,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 49,
            column: 4
          },
          end: {
            line: 51,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 49
      },
      "3": {
        loc: {
          start: {
            line: 49,
            column: 8
          },
          end: {
            line: 49,
            column: 45
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 49,
            column: 8
          },
          end: {
            line: 49,
            column: 20
          }
        }, {
          start: {
            line: 49,
            column: 24
          },
          end: {
            line: 49,
            column: 27
          }
        }, {
          start: {
            line: 49,
            column: 31
          },
          end: {
            line: 49,
            column: 45
          }
        }],
        line: 49
      },
      "4": {
        loc: {
          start: {
            line: 52,
            column: 4
          },
          end: {
            line: 56,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 52,
            column: 4
          },
          end: {
            line: 56,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 52
      },
      "5": {
        loc: {
          start: {
            line: 52,
            column: 8
          },
          end: {
            line: 52,
            column: 76
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 52,
            column: 8
          },
          end: {
            line: 52,
            column: 20
          }
        }, {
          start: {
            line: 52,
            column: 24
          },
          end: {
            line: 52,
            column: 47
          }
        }, {
          start: {
            line: 52,
            column: 51
          },
          end: {
            line: 52,
            column: 76
          }
        }],
        line: 52
      },
      "6": {
        loc: {
          start: {
            line: 58,
            column: 4
          },
          end: {
            line: 60,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 58,
            column: 4
          },
          end: {
            line: 60,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 58
      },
      "7": {
        loc: {
          start: {
            line: 58,
            column: 8
          },
          end: {
            line: 58,
            column: 31
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 58,
            column: 8
          },
          end: {
            line: 58,
            column: 13
          }
        }, {
          start: {
            line: 58,
            column: 17
          },
          end: {
            line: 58,
            column: 31
          }
        }],
        line: 58
      },
      "8": {
        loc: {
          start: {
            line: 64,
            column: 32
          },
          end: {
            line: 64,
            column: 88
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 64,
            column: 32
          },
          end: {
            line: 64,
            column: 53
          }
        }, {
          start: {
            line: 64,
            column: 57
          },
          end: {
            line: 64,
            column: 88
          }
        }],
        line: 64
      },
      "9": {
        loc: {
          start: {
            line: 66,
            column: 8
          },
          end: {
            line: 73,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 66,
            column: 8
          },
          end: {
            line: 73,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 66
      },
      "10": {
        loc: {
          start: {
            line: 66,
            column: 12
          },
          end: {
            line: 66,
            column: 79
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 66,
            column: 12
          },
          end: {
            line: 66,
            column: 29
          }
        }, {
          start: {
            line: 66,
            column: 33
          },
          end: {
            line: 66,
            column: 79
          }
        }],
        line: 66
      },
      "11": {
        loc: {
          start: {
            line: 67,
            column: 23
          },
          end: {
            line: 67,
            column: 95
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 67,
            column: 47
          },
          end: {
            line: 67,
            column: 88
          }
        }, {
          start: {
            line: 67,
            column: 91
          },
          end: {
            line: 67,
            column: 95
          }
        }],
        line: 67
      },
      "12": {
        loc: {
          start: {
            line: 68,
            column: 12
          },
          end: {
            line: 72,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 68,
            column: 12
          },
          end: {
            line: 72,
            column: 13
          }
        }, {
          start: {
            line: 70,
            column: 19
          },
          end: {
            line: 72,
            column: 13
          }
        }],
        line: 68
      },
      "13": {
        loc: {
          start: {
            line: 68,
            column: 16
          },
          end: {
            line: 68,
            column: 46
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 68,
            column: 16
          },
          end: {
            line: 68,
            column: 20
          }
        }, {
          start: {
            line: 68,
            column: 25
          },
          end: {
            line: 68,
            column: 33
          }
        }, {
          start: {
            line: 68,
            column: 37
          },
          end: {
            line: 68,
            column: 45
          }
        }],
        line: 68
      },
      "14": {
        loc: {
          start: {
            line: 76,
            column: 4
          },
          end: {
            line: 78,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 76,
            column: 4
          },
          end: {
            line: 78,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 76
      },
      "15": {
        loc: {
          start: {
            line: 96,
            column: 40
          },
          end: {
            line: 96,
            column: 51
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 96,
            column: 49
          },
          end: {
            line: 96,
            column: 51
          }
        }],
        line: 96
      },
      "16": {
        loc: {
          start: {
            line: 103,
            column: 4
          },
          end: {
            line: 105,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 103,
            column: 4
          },
          end: {
            line: 105,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 103
      },
      "17": {
        loc: {
          start: {
            line: 109,
            column: 8
          },
          end: {
            line: 111,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 109,
            column: 8
          },
          end: {
            line: 111,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 109
      },
      "18": {
        loc: {
          start: {
            line: 114,
            column: 8
          },
          end: {
            line: 116,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 114,
            column: 8
          },
          end: {
            line: 116,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 114
      },
      "19": {
        loc: {
          start: {
            line: 120,
            column: 8
          },
          end: {
            line: 125,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 120,
            column: 8
          },
          end: {
            line: 125,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 120
      },
      "20": {
        loc: {
          start: {
            line: 122,
            column: 56
          },
          end: {
            line: 122,
            column: 94
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 122,
            column: 56
          },
          end: {
            line: 122,
            column: 73
          }
        }, {
          start: {
            line: 122,
            column: 77
          },
          end: {
            line: 122,
            column: 94
          }
        }],
        line: 122
      },
      "21": {
        loc: {
          start: {
            line: 128,
            column: 8
          },
          end: {
            line: 151,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 128,
            column: 8
          },
          end: {
            line: 151,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 128
      },
      "22": {
        loc: {
          start: {
            line: 130,
            column: 12
          },
          end: {
            line: 150,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 130,
            column: 12
          },
          end: {
            line: 150,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 130
      },
      "23": {
        loc: {
          start: {
            line: 154,
            column: 8
          },
          end: {
            line: 156,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 154,
            column: 8
          },
          end: {
            line: 156,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 154
      },
      "24": {
        loc: {
          start: {
            line: 155,
            column: 46
          },
          end: {
            line: 155,
            column: 96
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 155,
            column: 46
          },
          end: {
            line: 155,
            column: 65
          }
        }, {
          start: {
            line: 155,
            column: 69
          },
          end: {
            line: 155,
            column: 96
          }
        }],
        line: 155
      },
      "25": {
        loc: {
          start: {
            line: 173,
            column: 8
          },
          end: {
            line: 184,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 173,
            column: 8
          },
          end: {
            line: 184,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 173
      },
      "26": {
        loc: {
          start: {
            line: 195,
            column: 16
          },
          end: {
            line: 195,
            column: 62
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 195,
            column: 16
          },
          end: {
            line: 195,
            column: 56
          }
        }, {
          start: {
            line: 195,
            column: 60
          },
          end: {
            line: 195,
            column: 62
          }
        }],
        line: 195
      },
      "27": {
        loc: {
          start: {
            line: 196,
            column: 24
          },
          end: {
            line: 196,
            column: 69
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 196,
            column: 24
          },
          end: {
            line: 196,
            column: 63
          }
        }, {
          start: {
            line: 196,
            column: 67
          },
          end: {
            line: 196,
            column: 69
          }
        }],
        line: 196
      },
      "28": {
        loc: {
          start: {
            line: 197,
            column: 22
          },
          end: {
            line: 197,
            column: 66
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 197,
            column: 22
          },
          end: {
            line: 197,
            column: 60
          }
        }, {
          start: {
            line: 197,
            column: 64
          },
          end: {
            line: 197,
            column: 66
          }
        }],
        line: 197
      },
      "29": {
        loc: {
          start: {
            line: 198,
            column: 18
          },
          end: {
            line: 198,
            column: 63
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 198,
            column: 18
          },
          end: {
            line: 198,
            column: 52
          }
        }, {
          start: {
            line: 198,
            column: 56
          },
          end: {
            line: 198,
            column: 63
          }
        }],
        line: 198
      },
      "30": {
        loc: {
          start: {
            line: 199,
            column: 22
          },
          end: {
            line: 199,
            column: 74
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 199,
            column: 22
          },
          end: {
            line: 199,
            column: 68
          }
        }, {
          start: {
            line: 199,
            column: 72
          },
          end: {
            line: 199,
            column: 74
          }
        }],
        line: 199
      },
      "31": {
        loc: {
          start: {
            line: 200,
            column: 19
          },
          end: {
            line: 200,
            column: 68
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 200,
            column: 19
          },
          end: {
            line: 200,
            column: 62
          }
        }, {
          start: {
            line: 200,
            column: 66
          },
          end: {
            line: 200,
            column: 68
          }
        }],
        line: 200
      },
      "32": {
        loc: {
          start: {
            line: 204,
            column: 40
          },
          end: {
            line: 204,
            column: 58
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 204,
            column: 57
          },
          end: {
            line: 204,
            column: 58
          }
        }],
        line: 204
      },
      "33": {
        loc: {
          start: {
            line: 206,
            column: 4
          },
          end: {
            line: 208,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 206,
            column: 4
          },
          end: {
            line: 208,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 206
      },
      "34": {
        loc: {
          start: {
            line: 214,
            column: 50
          },
          end: {
            line: 214,
            column: 79
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 214,
            column: 63
          },
          end: {
            line: 214,
            column: 79
          }
        }],
        line: 214
      },
      "35": {
        loc: {
          start: {
            line: 214,
            column: 81
          },
          end: {
            line: 214,
            column: 97
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 214,
            column: 90
          },
          end: {
            line: 214,
            column: 97
          }
        }],
        line: 214
      },
      "36": {
        loc: {
          start: {
            line: 223,
            column: 38
          },
          end: {
            line: 223,
            column: 67
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 223,
            column: 51
          },
          end: {
            line: 223,
            column: 67
          }
        }],
        line: 223
      },
      "37": {
        loc: {
          start: {
            line: 233,
            column: 11
          },
          end: {
            line: 233,
            column: 57
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 233,
            column: 11
          },
          end: {
            line: 233,
            column: 49
          }
        }, {
          start: {
            line: 233,
            column: 53
          },
          end: {
            line: 233,
            column: 57
          }
        }],
        line: 233
      },
      "38": {
        loc: {
          start: {
            line: 244,
            column: 8
          },
          end: {
            line: 246,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 244,
            column: 8
          },
          end: {
            line: 246,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 244
      },
      "39": {
        loc: {
          start: {
            line: 244,
            column: 12
          },
          end: {
            line: 244,
            column: 26
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 244,
            column: 12
          },
          end: {
            line: 244,
            column: 17
          }
        }, {
          start: {
            line: 244,
            column: 21
          },
          end: {
            line: 244,
            column: 26
          }
        }],
        line: 244
      },
      "40": {
        loc: {
          start: {
            line: 261,
            column: 8
          },
          end: {
            line: 265,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 261,
            column: 8
          },
          end: {
            line: 265,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 261
      },
      "41": {
        loc: {
          start: {
            line: 277,
            column: 22
          },
          end: {
            line: 277,
            column: 68
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 277,
            column: 22
          },
          end: {
            line: 277,
            column: 55
          }
        }, {
          start: {
            line: 277,
            column: 59
          },
          end: {
            line: 277,
            column: 68
          }
        }],
        line: 277
      },
      "42": {
        loc: {
          start: {
            line: 278,
            column: 27
          },
          end: {
            line: 278,
            column: 78
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 278,
            column: 27
          },
          end: {
            line: 278,
            column: 65
          }
        }, {
          start: {
            line: 278,
            column: 69
          },
          end: {
            line: 278,
            column: 78
          }
        }],
        line: 278
      },
      "43": {
        loc: {
          start: {
            line: 279,
            column: 27
          },
          end: {
            line: 279,
            column: 78
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 279,
            column: 27
          },
          end: {
            line: 279,
            column: 65
          }
        }, {
          start: {
            line: 279,
            column: 69
          },
          end: {
            line: 279,
            column: 78
          }
        }],
        line: 279
      },
      "44": {
        loc: {
          start: {
            line: 297,
            column: 53
          },
          end: {
            line: 297,
            column: 71
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 297,
            column: 70
          },
          end: {
            line: 297,
            column: 71
          }
        }],
        line: 297
      },
      "45": {
        loc: {
          start: {
            line: 298,
            column: 4
          },
          end: {
            line: 303,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 298,
            column: 4
          },
          end: {
            line: 303,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 298
      },
      "46": {
        loc: {
          start: {
            line: 299,
            column: 26
          },
          end: {
            line: 299,
            column: 75
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 299,
            column: 26
          },
          end: {
            line: 299,
            column: 69
          }
        }, {
          start: {
            line: 299,
            column: 73
          },
          end: {
            line: 299,
            column: 75
          }
        }],
        line: 299
      },
      "47": {
        loc: {
          start: {
            line: 308,
            column: 4
          },
          end: {
            line: 308,
            column: 52
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 308,
            column: 4
          },
          end: {
            line: 308,
            column: 52
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 308
      },
      "48": {
        loc: {
          start: {
            line: 312,
            column: 4
          },
          end: {
            line: 312,
            column: 50
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 312,
            column: 4
          },
          end: {
            line: 312,
            column: 50
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 312
      },
      "49": {
        loc: {
          start: {
            line: 321,
            column: 24
          },
          end: {
            line: 321,
            column: 80
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 321,
            column: 49
          },
          end: {
            line: 321,
            column: 62
          }
        }, {
          start: {
            line: 321,
            column: 65
          },
          end: {
            line: 321,
            column: 80
          }
        }],
        line: 321
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0,
      "91": 0,
      "92": 0,
      "93": 0,
      "94": 0,
      "95": 0,
      "96": 0,
      "97": 0,
      "98": 0,
      "99": 0,
      "100": 0,
      "101": 0,
      "102": 0,
      "103": 0,
      "104": 0,
      "105": 0,
      "106": 0,
      "107": 0,
      "108": 0,
      "109": 0,
      "110": 0,
      "111": 0,
      "112": 0,
      "113": 0,
      "114": 0,
      "115": 0,
      "116": 0,
      "117": 0,
      "118": 0,
      "119": 0,
      "120": 0,
      "121": 0,
      "122": 0,
      "123": 0,
      "124": 0,
      "125": 0,
      "126": 0,
      "127": 0,
      "128": 0,
      "129": 0,
      "130": 0,
      "131": 0,
      "132": 0,
      "133": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0, 0],
      "4": [0, 0],
      "5": [0, 0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0, 0],
      "14": [0, 0],
      "15": [0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0],
      "21": [0, 0],
      "22": [0, 0],
      "23": [0, 0],
      "24": [0, 0],
      "25": [0, 0],
      "26": [0, 0],
      "27": [0, 0],
      "28": [0, 0],
      "29": [0, 0],
      "30": [0, 0],
      "31": [0, 0],
      "32": [0],
      "33": [0, 0],
      "34": [0],
      "35": [0],
      "36": [0],
      "37": [0, 0],
      "38": [0, 0],
      "39": [0, 0],
      "40": [0, 0],
      "41": [0, 0],
      "42": [0, 0],
      "43": [0, 0],
      "44": [0],
      "45": [0, 0],
      "46": [0, 0],
      "47": [0, 0],
      "48": [0, 0],
      "49": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Ai Projecten\\ADSapp\\src\\lib\\middleware\\session.ts"],
      sourcesContent: ["import { NextRequest, NextResponse } from 'next/server';\nimport { getSessionManager, SessionManager } from '@/lib/session/manager';\nimport { createClient } from '@/lib/supabase/server';\n\n/**\n * Session Middleware for Enterprise Session Management\n *\n * Validates and manages sessions on every authenticated request:\n * - Validates session token from cookies\n * - Enforces 30-minute inactivity timeout\n * - Updates last activity timestamp\n * - Checks for privilege changes\n * - Handles expired sessions gracefully\n * - Integrates with tenant validation\n *\n * Security Features:\n * - Automatic session expiration\n * - Privilege change detection\n * - Session revocation on security events\n * - Device tracking\n * - Audit logging\n *\n * @module session-middleware\n */\n\n/**\n * Session context attached to request\n */\nexport interface SessionContext {\n  userId: string;\n  organizationId: string;\n  sessionToken: string;\n  userRole: string;\n  lastActivity: string;\n  expiresAt: string;\n  deviceFingerprint: string;\n}\n\n/**\n * Session middleware configuration\n */\nexport interface SessionMiddlewareConfig {\n  /**\n   * Cookie name for session token\n   */\n  cookieName?: string;\n\n  /**\n   * Paths to exclude from session validation\n   */\n  excludePaths?: string[];\n\n  /**\n   * Enable privilege change detection\n   */\n  detectPrivilegeChanges?: boolean;\n\n  /**\n   * Session manager instance (for testing)\n   */\n  sessionManager?: SessionManager;\n}\n\n/**\n * Default configuration\n */\nconst DEFAULT_CONFIG: Required<SessionMiddlewareConfig> = {\n  cookieName: 'adsapp_session',\n  excludePaths: [\n    '/api/auth/signin',\n    '/api/auth/signup',\n    '/api/auth/forgot-password',\n    '/api/auth/reset-password',\n    '/api/health',\n    '/api/webhooks'\n  ],\n  detectPrivilegeChanges: true,\n  sessionManager: getSessionManager()\n};\n\n/**\n * Validate and refresh session\n *\n * Main session middleware function that:\n * 1. Checks if path requires session validation\n * 2. Extracts session token from cookies\n * 3. Validates session\n * 4. Checks for privilege changes\n * 5. Refreshes session activity\n * 6. Attaches session context to request\n *\n * @param request - NextRequest object\n * @param config - Optional configuration\n * @returns NextResponse or null if validation succeeds\n *\n * @example\n * ```typescript\n * // In API route\n * export async function GET(request: NextRequest) {\n *   const sessionValidation = await validateSession(request);\n *   if (sessionValidation) return sessionValidation;\n *\n *   const context = getSessionContext(request);\n *   // Use context for business logic\n * }\n * ```\n */\nexport async function validateSession(\n  request: NextRequest,\n  config: SessionMiddlewareConfig = {}\n): Promise<NextResponse | null> {\n  const fullConfig = { ...DEFAULT_CONFIG, ...config };\n  const pathname = request.nextUrl.pathname;\n\n  // Check if path is excluded from session validation\n  if (isPathExcluded(pathname, fullConfig.excludePaths)) {\n    return null;\n  }\n\n  try {\n    // Extract session token from cookies\n    const sessionToken = extractSessionToken(request, fullConfig.cookieName);\n\n    if (!sessionToken) {\n      return createUnauthorizedResponse('No session token provided');\n    }\n\n    // Extract user ID from Supabase auth\n    const userId = await extractUserId(request);\n\n    if (!userId) {\n      return createUnauthorizedResponse('User not authenticated');\n    }\n\n    // Validate session\n    const sessionManager = fullConfig.sessionManager;\n    const validation = await sessionManager.validateSession(userId, sessionToken);\n\n    if (!validation.valid) {\n      // Session invalid - clear cookie and return error\n      const response = createUnauthorizedResponse(\n        validation.reason || 'Invalid session'\n      );\n      response.cookies.delete(fullConfig.cookieName);\n      return response;\n    }\n\n    const session = validation.session!;\n\n    // Check for privilege changes\n    if (fullConfig.detectPrivilegeChanges) {\n      const privilegeCheck = await sessionManager.checkPrivilegeChange(\n        userId,\n        sessionToken\n      );\n\n      if (privilegeCheck.requiresRegeneration) {\n        // Privilege changed - regenerate session\n        const { token: newToken } = await sessionManager.regenerateSession(\n          userId,\n          sessionToken\n        );\n\n        // Return response with new session token\n        const response = NextResponse.json(\n          {\n            error: 'Session regenerated due to privilege change',\n            code: 'SESSION_REGENERATED',\n            newToken\n          },\n          { status: 401 }\n        );\n\n        // Set new session cookie\n        response.cookies.set(fullConfig.cookieName, newToken, {\n          httpOnly: true,\n          secure: process.env.NODE_ENV === 'production',\n          sameSite: 'lax',\n          path: '/',\n          maxAge: 30 * 60 // 30 minutes\n        });\n\n        return response;\n      }\n    }\n\n    // Refresh session activity\n    const refreshResult = await sessionManager.refreshSession(\n      userId,\n      sessionToken\n    );\n\n    if (!refreshResult.success) {\n      return createUnauthorizedResponse(\n        refreshResult.error || 'Failed to refresh session'\n      );\n    }\n\n    // Attach session context to request headers\n    const requestHeaders = new Headers(request.headers);\n    requestHeaders.set('x-session-user-id', session.userId);\n    requestHeaders.set('x-session-org-id', session.organizationId);\n    requestHeaders.set('x-session-token', sessionToken);\n    requestHeaders.set('x-session-last-activity', session.lastActivity);\n    requestHeaders.set('x-session-expires-at', session.expiresAt);\n\n    // Continue request with session context\n    return NextResponse.next({\n      request: { headers: requestHeaders }\n    });\n  } catch (error) {\n    console.error('[SessionMiddleware] Validation error:', error);\n\n    // Log error to monitoring service\n    if (process.env.NODE_ENV === 'production') {\n      try {\n        const Sentry = await import('@sentry/nextjs');\n        Sentry.captureException(error, {\n          tags: {\n            middleware: 'session-validation'\n          }\n        });\n      } catch (sentryError) {\n        console.error('[SessionMiddleware] Failed to log error:', sentryError);\n      }\n    }\n\n    return NextResponse.json(\n      {\n        error: 'Internal server error during session validation',\n        code: 'INTERNAL_ERROR'\n      },\n      { status: 500 }\n    );\n  }\n}\n\n/**\n * Extract session context from request headers\n *\n * Use this after session middleware validation to get session info.\n *\n * @param request - NextRequest with session headers\n * @returns Session context\n *\n * @example\n * ```typescript\n * const context = getSessionContext(request);\n * console.log(`User ${context.userId} in org ${context.organizationId}`);\n * ```\n */\nexport function getSessionContext(request: NextRequest): SessionContext {\n  return {\n    userId: request.headers.get('x-session-user-id') || '',\n    organizationId: request.headers.get('x-session-org-id') || '',\n    sessionToken: request.headers.get('x-session-token') || '',\n    userRole: request.headers.get('x-user-role') || 'agent',\n    lastActivity: request.headers.get('x-session-last-activity') || '',\n    expiresAt: request.headers.get('x-session-expires-at') || '',\n    deviceFingerprint: generateDeviceFingerprint(request)\n  };\n}\n\n/**\n * Check if session is about to expire\n *\n * Useful for showing warnings to user before session expires.\n *\n * @param request - NextRequest with session headers\n * @param warningMinutes - Minutes before expiration to warn (default: 5)\n * @returns True if session expires soon\n *\n * @example\n * ```typescript\n * if (isSessionExpiringSoon(request, 5)) {\n *   // Show warning to user\n * }\n * ```\n */\nexport function isSessionExpiringSoon(\n  request: NextRequest,\n  warningMinutes: number = 5\n): boolean {\n  const expiresAt = request.headers.get('x-session-expires-at');\n\n  if (!expiresAt) {\n    return false;\n  }\n\n  const expirationTime = new Date(expiresAt).getTime();\n  const currentTime = Date.now();\n  const warningTime = warningMinutes * 60 * 1000;\n\n  return expirationTime - currentTime <= warningTime;\n}\n\n/**\n * Create session cookie\n *\n * Helper function to set session cookie with secure defaults.\n *\n * @param response - NextResponse object\n * @param sessionToken - Session token\n * @param cookieName - Cookie name (default: 'adsapp_session')\n * @param maxAge - Cookie max age in seconds (default: 30 minutes)\n *\n * @example\n * ```typescript\n * const response = NextResponse.json({ success: true });\n * setSessionCookie(response, 'token123');\n * ```\n */\nexport function setSessionCookie(\n  response: NextResponse,\n  sessionToken: string,\n  cookieName: string = 'adsapp_session',\n  maxAge: number = 30 * 60\n): void {\n  response.cookies.set(cookieName, sessionToken, {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax',\n    path: '/',\n    maxAge\n  });\n}\n\n/**\n * Clear session cookie\n *\n * Helper function to remove session cookie.\n *\n * @param response - NextResponse object\n * @param cookieName - Cookie name (default: 'adsapp_session')\n *\n * @example\n * ```typescript\n * const response = NextResponse.json({ message: 'Logged out' });\n * clearSessionCookie(response);\n * ```\n */\nexport function clearSessionCookie(\n  response: NextResponse,\n  cookieName: string = 'adsapp_session'\n): void {\n  response.cookies.delete(cookieName);\n}\n\n/**\n * Extract session token from request cookies\n *\n * @param request - NextRequest object\n * @param cookieName - Cookie name\n * @returns Session token or null\n */\nfunction extractSessionToken(\n  request: NextRequest,\n  cookieName: string\n): string | null {\n  return request.cookies.get(cookieName)?.value || null;\n}\n\n/**\n * Extract user ID from Supabase auth\n *\n * @param request - NextRequest object\n * @returns User ID or null\n */\nasync function extractUserId(request: NextRequest): Promise<string | null> {\n  try {\n    const supabase = await createClient();\n    const { data: { user }, error } = await supabase.auth.getUser();\n\n    if (error || !user) {\n      return null;\n    }\n\n    return user.id;\n  } catch (error) {\n    console.error('[SessionMiddleware] Failed to extract user ID:', error);\n    return null;\n  }\n}\n\n/**\n * Check if path is excluded from session validation\n *\n * @param pathname - Request pathname\n * @param excludePaths - List of excluded paths\n * @returns True if path is excluded\n */\nfunction isPathExcluded(pathname: string, excludePaths: string[]): boolean {\n  return excludePaths.some(path => {\n    if (path.endsWith('*')) {\n      // Wildcard matching\n      const prefix = path.slice(0, -1);\n      return pathname.startsWith(prefix);\n    }\n    return pathname === path;\n  });\n}\n\n/**\n * Generate device fingerprint from request\n *\n * Creates unique identifier for device/browser combination.\n *\n * @param request - NextRequest object\n * @returns Device fingerprint\n */\nfunction generateDeviceFingerprint(request: NextRequest): string {\n  const userAgent = request.headers.get('user-agent') || 'unknown';\n  const acceptLanguage = request.headers.get('accept-language') || 'unknown';\n  const acceptEncoding = request.headers.get('accept-encoding') || 'unknown';\n\n  // Create hash-like fingerprint (in production, use actual hashing)\n  const fingerprint = Buffer.from(\n    `${userAgent}:${acceptLanguage}:${acceptEncoding}`\n  ).toString('base64');\n\n  return fingerprint.slice(0, 32);\n}\n\n/**\n * Create unauthorized response\n *\n * @param message - Error message\n * @returns NextResponse with 401 status\n */\nfunction createUnauthorizedResponse(message: string): NextResponse {\n  return NextResponse.json(\n    {\n      error: message,\n      code: 'UNAUTHORIZED'\n    },\n    { status: 401 }\n  );\n}\n\n/**\n * Session timeout warning middleware\n *\n * Adds session timeout information to response headers.\n *\n * @param request - NextRequest object\n * @param response - NextResponse object\n * @param warningMinutes - Minutes before expiration to warn\n *\n * @example\n * ```typescript\n * const response = NextResponse.json({ data: '...' });\n * addSessionTimeoutWarning(request, response, 5);\n * ```\n */\nexport function addSessionTimeoutWarning(\n  request: NextRequest,\n  response: NextResponse,\n  warningMinutes: number = 5\n): void {\n  if (isSessionExpiringSoon(request, warningMinutes)) {\n    const expiresAt = request.headers.get('x-session-expires-at') || '';\n    const expiresIn = Math.max(\n      0,\n      Math.floor((new Date(expiresAt).getTime() - Date.now()) / 1000)\n    );\n\n    response.headers.set('X-Session-Expires-Soon', 'true');\n    response.headers.set('X-Session-Expires-In', expiresIn.toString());\n  }\n}\n\n/**\n * Combine session validation with tenant validation\n *\n * Utility function to apply both middlewares in sequence.\n *\n * @param request - NextRequest object\n * @returns NextResponse or null if all validations pass\n *\n * @example\n * ```typescript\n * export async function GET(request: NextRequest) {\n *   const validation = await validateSessionAndTenant(request);\n *   if (validation) return validation;\n *\n *   // Both session and tenant validated\n * }\n * ```\n */\nexport async function validateSessionAndTenant(\n  request: NextRequest\n): Promise<NextResponse | null> {\n  // First validate session\n  const sessionValidation = await validateSession(request);\n  if (sessionValidation) return sessionValidation;\n\n  // Then validate tenant (if implemented)\n  const { validateTenantAccess } = await import('./tenant-validation');\n  const tenantValidation = await validateTenantAccess(request);\n  if (tenantValidation) return tenantValidation;\n\n  return null;\n}\n\n/**\n * Session health check\n *\n * Verifies session system is operational.\n *\n * @returns Health status\n *\n * @example\n * ```typescript\n * const health = await checkSessionHealth();\n * if (!health.healthy) {\n *   console.error('Session system unhealthy:', health.error);\n * }\n * ```\n */\nexport async function checkSessionHealth(): Promise<{\n  healthy: boolean;\n  latency: number;\n  error?: string;\n}> {\n  try {\n    const manager = getSessionManager();\n    const store = manager.getStore();\n    return await store.getHealthStatus();\n  } catch (error) {\n    const message = error instanceof Error ? error.message : 'Unknown error';\n    return {\n      healthy: false,\n      latency: -1,\n      error: message\n    };\n  }\n}\n"],
      names: ["addSessionTimeoutWarning", "checkSessionHealth", "clearSessionCookie", "getSessionContext", "isSessionExpiringSoon", "setSessionCookie", "validateSession", "validateSessionAndTenant", "DEFAULT_CONFIG", "cookieName", "excludePaths", "detectPrivilegeChanges", "sessionManager", "getSessionManager", "request", "config", "fullConfig", "pathname", "nextUrl", "isPathExcluded", "sessionToken", "extractSessionToken", "createUnauthorizedResponse", "userId", "extractUserId", "validation", "valid", "response", "reason", "cookies", "delete", "session", "privilegeCheck", "checkPrivilegeChange", "requiresRegeneration", "token", "newToken", "regenerateSession", "NextResponse", "json", "error", "code", "status", "set", "httpOnly", "secure", "process", "env", "NODE_ENV", "sameSite", "path", "maxAge", "refreshResult", "refreshSession", "success", "requestHeaders", "Headers", "headers", "organizationId", "lastActivity", "expiresAt", "next", "console", "Sentry", "captureException", "tags", "middleware", "sentryError", "get", "userRole", "deviceFingerprint", "generateDeviceFingerprint", "warningMinutes", "expirationTime", "Date", "getTime", "currentTime", "now", "warningTime", "value", "supabase", "createClient", "data", "user", "auth", "getUser", "id", "some", "endsWith", "prefix", "slice", "startsWith", "userAgent", "acceptLanguage", "acceptEncoding", "fingerprint", "Buffer", "from", "toString", "message", "expiresIn", "Math", "max", "floor", "sessionValidation", "validateTenantAccess", "tenantValidation", "manager", "store", "getStore", "getHealthStatus", "Error", "healthy", "latency"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "9369da33d481fe906e462d747c6f38d1100814a8"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_medqfgh3d = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_medqfgh3d();
cov_medqfgh3d().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[0]++;
  cov_medqfgh3d().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_medqfgh3d().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_medqfgh3d().s[3]++;
_export(exports, {
  get addSessionTimeoutWarning() {
    /* istanbul ignore next */
    cov_medqfgh3d().f[1]++;
    cov_medqfgh3d().s[4]++;
    return addSessionTimeoutWarning;
  },
  get checkSessionHealth() {
    /* istanbul ignore next */
    cov_medqfgh3d().f[2]++;
    cov_medqfgh3d().s[5]++;
    return checkSessionHealth;
  },
  get clearSessionCookie() {
    /* istanbul ignore next */
    cov_medqfgh3d().f[3]++;
    cov_medqfgh3d().s[6]++;
    return clearSessionCookie;
  },
  get getSessionContext() {
    /* istanbul ignore next */
    cov_medqfgh3d().f[4]++;
    cov_medqfgh3d().s[7]++;
    return getSessionContext;
  },
  get isSessionExpiringSoon() {
    /* istanbul ignore next */
    cov_medqfgh3d().f[5]++;
    cov_medqfgh3d().s[8]++;
    return isSessionExpiringSoon;
  },
  get setSessionCookie() {
    /* istanbul ignore next */
    cov_medqfgh3d().f[6]++;
    cov_medqfgh3d().s[9]++;
    return setSessionCookie;
  },
  get validateSession() {
    /* istanbul ignore next */
    cov_medqfgh3d().f[7]++;
    cov_medqfgh3d().s[10]++;
    return validateSession;
  },
  get validateSessionAndTenant() {
    /* istanbul ignore next */
    cov_medqfgh3d().f[8]++;
    cov_medqfgh3d().s[11]++;
    return validateSessionAndTenant;
  }
});
const _server =
/* istanbul ignore next */
(cov_medqfgh3d().s[12]++, require("next/server"));
const _manager =
/* istanbul ignore next */
(cov_medqfgh3d().s[13]++, require("../session/manager"));
const _server1 =
/* istanbul ignore next */
(cov_medqfgh3d().s[14]++, require("../supabase/server"));
function _getRequireWildcardCache(nodeInterop) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[9]++;
  cov_medqfgh3d().s[15]++;
  if (typeof WeakMap !== "function") {
    /* istanbul ignore next */
    cov_medqfgh3d().b[0][0]++;
    cov_medqfgh3d().s[16]++;
    return null;
  } else
  /* istanbul ignore next */
  {
    cov_medqfgh3d().b[0][1]++;
  }
  var cacheBabelInterop =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[17]++, new WeakMap());
  var cacheNodeInterop =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[18]++, new WeakMap());
  /* istanbul ignore next */
  cov_medqfgh3d().s[19]++;
  return (_getRequireWildcardCache = function (nodeInterop) {
    /* istanbul ignore next */
    cov_medqfgh3d().f[10]++;
    cov_medqfgh3d().s[20]++;
    return nodeInterop ?
    /* istanbul ignore next */
    (cov_medqfgh3d().b[1][0]++, cacheNodeInterop) :
    /* istanbul ignore next */
    (cov_medqfgh3d().b[1][1]++, cacheBabelInterop);
  })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[11]++;
  cov_medqfgh3d().s[21]++;
  if (
  /* istanbul ignore next */
  (cov_medqfgh3d().b[3][0]++, !nodeInterop) &&
  /* istanbul ignore next */
  (cov_medqfgh3d().b[3][1]++, obj) &&
  /* istanbul ignore next */
  (cov_medqfgh3d().b[3][2]++, obj.__esModule)) {
    /* istanbul ignore next */
    cov_medqfgh3d().b[2][0]++;
    cov_medqfgh3d().s[22]++;
    return obj;
  } else
  /* istanbul ignore next */
  {
    cov_medqfgh3d().b[2][1]++;
  }
  cov_medqfgh3d().s[23]++;
  if (
  /* istanbul ignore next */
  (cov_medqfgh3d().b[5][0]++, obj === null) ||
  /* istanbul ignore next */
  (cov_medqfgh3d().b[5][1]++, typeof obj !== "object") &&
  /* istanbul ignore next */
  (cov_medqfgh3d().b[5][2]++, typeof obj !== "function")) {
    /* istanbul ignore next */
    cov_medqfgh3d().b[4][0]++;
    cov_medqfgh3d().s[24]++;
    return {
      default: obj
    };
  } else
  /* istanbul ignore next */
  {
    cov_medqfgh3d().b[4][1]++;
  }
  var cache =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[25]++, _getRequireWildcardCache(nodeInterop));
  /* istanbul ignore next */
  cov_medqfgh3d().s[26]++;
  if (
  /* istanbul ignore next */
  (cov_medqfgh3d().b[7][0]++, cache) &&
  /* istanbul ignore next */
  (cov_medqfgh3d().b[7][1]++, cache.has(obj))) {
    /* istanbul ignore next */
    cov_medqfgh3d().b[6][0]++;
    cov_medqfgh3d().s[27]++;
    return cache.get(obj);
  } else
  /* istanbul ignore next */
  {
    cov_medqfgh3d().b[6][1]++;
  }
  var newObj =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[28]++, {
    __proto__: null
  });
  var hasPropertyDescriptor =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[29]++,
  /* istanbul ignore next */
  (cov_medqfgh3d().b[8][0]++, Object.defineProperty) &&
  /* istanbul ignore next */
  (cov_medqfgh3d().b[8][1]++, Object.getOwnPropertyDescriptor));
  /* istanbul ignore next */
  cov_medqfgh3d().s[30]++;
  for (var key in obj) {
    /* istanbul ignore next */
    cov_medqfgh3d().s[31]++;
    if (
    /* istanbul ignore next */
    (cov_medqfgh3d().b[10][0]++, key !== "default") &&
    /* istanbul ignore next */
    (cov_medqfgh3d().b[10][1]++, Object.prototype.hasOwnProperty.call(obj, key))) {
      /* istanbul ignore next */
      cov_medqfgh3d().b[9][0]++;
      var desc =
      /* istanbul ignore next */
      (cov_medqfgh3d().s[32]++, hasPropertyDescriptor ?
      /* istanbul ignore next */
      (cov_medqfgh3d().b[11][0]++, Object.getOwnPropertyDescriptor(obj, key)) :
      /* istanbul ignore next */
      (cov_medqfgh3d().b[11][1]++, null));
      /* istanbul ignore next */
      cov_medqfgh3d().s[33]++;
      if (
      /* istanbul ignore next */
      (cov_medqfgh3d().b[13][0]++, desc) && (
      /* istanbul ignore next */
      (cov_medqfgh3d().b[13][1]++, desc.get) ||
      /* istanbul ignore next */
      (cov_medqfgh3d().b[13][2]++, desc.set))) {
        /* istanbul ignore next */
        cov_medqfgh3d().b[12][0]++;
        cov_medqfgh3d().s[34]++;
        Object.defineProperty(newObj, key, desc);
      } else {
        /* istanbul ignore next */
        cov_medqfgh3d().b[12][1]++;
        cov_medqfgh3d().s[35]++;
        newObj[key] = obj[key];
      }
    } else
    /* istanbul ignore next */
    {
      cov_medqfgh3d().b[9][1]++;
    }
  }
  /* istanbul ignore next */
  cov_medqfgh3d().s[36]++;
  newObj.default = obj;
  /* istanbul ignore next */
  cov_medqfgh3d().s[37]++;
  if (cache) {
    /* istanbul ignore next */
    cov_medqfgh3d().b[14][0]++;
    cov_medqfgh3d().s[38]++;
    cache.set(obj, newObj);
  } else
  /* istanbul ignore next */
  {
    cov_medqfgh3d().b[14][1]++;
  }
  cov_medqfgh3d().s[39]++;
  return newObj;
}
/**
 * Default configuration
 */
const DEFAULT_CONFIG =
/* istanbul ignore next */
(cov_medqfgh3d().s[40]++, {
  cookieName: 'adsapp_session',
  excludePaths: ['/api/auth/signin', '/api/auth/signup', '/api/auth/forgot-password', '/api/auth/reset-password', '/api/health', '/api/webhooks'],
  detectPrivilegeChanges: true,
  sessionManager: (0, _manager.getSessionManager)()
});
async function validateSession(request, config =
/* istanbul ignore next */
(cov_medqfgh3d().b[15][0]++, {})) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[12]++;
  const fullConfig =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[41]++, {
    ...DEFAULT_CONFIG,
    ...config
  });
  const pathname =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[42]++, request.nextUrl.pathname);
  // Check if path is excluded from session validation
  /* istanbul ignore next */
  cov_medqfgh3d().s[43]++;
  if (isPathExcluded(pathname, fullConfig.excludePaths)) {
    /* istanbul ignore next */
    cov_medqfgh3d().b[16][0]++;
    cov_medqfgh3d().s[44]++;
    return null;
  } else
  /* istanbul ignore next */
  {
    cov_medqfgh3d().b[16][1]++;
  }
  cov_medqfgh3d().s[45]++;
  try {
    // Extract session token from cookies
    const sessionToken =
    /* istanbul ignore next */
    (cov_medqfgh3d().s[46]++, extractSessionToken(request, fullConfig.cookieName));
    /* istanbul ignore next */
    cov_medqfgh3d().s[47]++;
    if (!sessionToken) {
      /* istanbul ignore next */
      cov_medqfgh3d().b[17][0]++;
      cov_medqfgh3d().s[48]++;
      return createUnauthorizedResponse('No session token provided');
    } else
    /* istanbul ignore next */
    {
      cov_medqfgh3d().b[17][1]++;
    }
    // Extract user ID from Supabase auth
    const userId =
    /* istanbul ignore next */
    (cov_medqfgh3d().s[49]++, await extractUserId(request));
    /* istanbul ignore next */
    cov_medqfgh3d().s[50]++;
    if (!userId) {
      /* istanbul ignore next */
      cov_medqfgh3d().b[18][0]++;
      cov_medqfgh3d().s[51]++;
      return createUnauthorizedResponse('User not authenticated');
    } else
    /* istanbul ignore next */
    {
      cov_medqfgh3d().b[18][1]++;
    }
    // Validate session
    const sessionManager =
    /* istanbul ignore next */
    (cov_medqfgh3d().s[52]++, fullConfig.sessionManager);
    const validation =
    /* istanbul ignore next */
    (cov_medqfgh3d().s[53]++, await sessionManager.validateSession(userId, sessionToken));
    /* istanbul ignore next */
    cov_medqfgh3d().s[54]++;
    if (!validation.valid) {
      /* istanbul ignore next */
      cov_medqfgh3d().b[19][0]++;
      // Session invalid - clear cookie and return error
      const response =
      /* istanbul ignore next */
      (cov_medqfgh3d().s[55]++, createUnauthorizedResponse(
      /* istanbul ignore next */
      (cov_medqfgh3d().b[20][0]++, validation.reason) ||
      /* istanbul ignore next */
      (cov_medqfgh3d().b[20][1]++, 'Invalid session')));
      /* istanbul ignore next */
      cov_medqfgh3d().s[56]++;
      response.cookies.delete(fullConfig.cookieName);
      /* istanbul ignore next */
      cov_medqfgh3d().s[57]++;
      return response;
    } else
    /* istanbul ignore next */
    {
      cov_medqfgh3d().b[19][1]++;
    }
    const session =
    /* istanbul ignore next */
    (cov_medqfgh3d().s[58]++, validation.session);
    // Check for privilege changes
    /* istanbul ignore next */
    cov_medqfgh3d().s[59]++;
    if (fullConfig.detectPrivilegeChanges) {
      /* istanbul ignore next */
      cov_medqfgh3d().b[21][0]++;
      const privilegeCheck =
      /* istanbul ignore next */
      (cov_medqfgh3d().s[60]++, await sessionManager.checkPrivilegeChange(userId, sessionToken));
      /* istanbul ignore next */
      cov_medqfgh3d().s[61]++;
      if (privilegeCheck.requiresRegeneration) {
        /* istanbul ignore next */
        cov_medqfgh3d().b[22][0]++;
        // Privilege changed - regenerate session
        const {
          token: newToken
        } =
        /* istanbul ignore next */
        (cov_medqfgh3d().s[62]++, await sessionManager.regenerateSession(userId, sessionToken));
        // Return response with new session token
        const response =
        /* istanbul ignore next */
        (cov_medqfgh3d().s[63]++, _server.NextResponse.json({
          error: 'Session regenerated due to privilege change',
          code: 'SESSION_REGENERATED',
          newToken
        }, {
          status: 401
        }));
        // Set new session cookie
        /* istanbul ignore next */
        cov_medqfgh3d().s[64]++;
        response.cookies.set(fullConfig.cookieName, newToken, {
          httpOnly: true,
          secure: process.env.NODE_ENV === 'production',
          sameSite: 'lax',
          path: '/',
          maxAge: 30 * 60 // 30 minutes
        });
        /* istanbul ignore next */
        cov_medqfgh3d().s[65]++;
        return response;
      } else
      /* istanbul ignore next */
      {
        cov_medqfgh3d().b[22][1]++;
      }
    } else
    /* istanbul ignore next */
    {
      cov_medqfgh3d().b[21][1]++;
    }
    // Refresh session activity
    const refreshResult =
    /* istanbul ignore next */
    (cov_medqfgh3d().s[66]++, await sessionManager.refreshSession(userId, sessionToken));
    /* istanbul ignore next */
    cov_medqfgh3d().s[67]++;
    if (!refreshResult.success) {
      /* istanbul ignore next */
      cov_medqfgh3d().b[23][0]++;
      cov_medqfgh3d().s[68]++;
      return createUnauthorizedResponse(
      /* istanbul ignore next */
      (cov_medqfgh3d().b[24][0]++, refreshResult.error) ||
      /* istanbul ignore next */
      (cov_medqfgh3d().b[24][1]++, 'Failed to refresh session'));
    } else
    /* istanbul ignore next */
    {
      cov_medqfgh3d().b[23][1]++;
    }
    // Attach session context to request headers
    const requestHeaders =
    /* istanbul ignore next */
    (cov_medqfgh3d().s[69]++, new Headers(request.headers));
    /* istanbul ignore next */
    cov_medqfgh3d().s[70]++;
    requestHeaders.set('x-session-user-id', session.userId);
    /* istanbul ignore next */
    cov_medqfgh3d().s[71]++;
    requestHeaders.set('x-session-org-id', session.organizationId);
    /* istanbul ignore next */
    cov_medqfgh3d().s[72]++;
    requestHeaders.set('x-session-token', sessionToken);
    /* istanbul ignore next */
    cov_medqfgh3d().s[73]++;
    requestHeaders.set('x-session-last-activity', session.lastActivity);
    /* istanbul ignore next */
    cov_medqfgh3d().s[74]++;
    requestHeaders.set('x-session-expires-at', session.expiresAt);
    // Continue request with session context
    /* istanbul ignore next */
    cov_medqfgh3d().s[75]++;
    return _server.NextResponse.next({
      request: {
        headers: requestHeaders
      }
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_medqfgh3d().s[76]++;
    console.error('[SessionMiddleware] Validation error:', error);
    // Log error to monitoring service
    /* istanbul ignore next */
    cov_medqfgh3d().s[77]++;
    if (process.env.NODE_ENV === 'production') {
      /* istanbul ignore next */
      cov_medqfgh3d().b[25][0]++;
      cov_medqfgh3d().s[78]++;
      try {
        const Sentry =
        /* istanbul ignore next */
        (cov_medqfgh3d().s[79]++, await Promise.resolve().then(() => {
          /* istanbul ignore next */
          cov_medqfgh3d().f[13]++;
          cov_medqfgh3d().s[80]++;
          return /*#__PURE__*/_interop_require_wildcard(require("@sentry/nextjs"));
        }));
        /* istanbul ignore next */
        cov_medqfgh3d().s[81]++;
        Sentry.captureException(error, {
          tags: {
            middleware: 'session-validation'
          }
        });
      } catch (sentryError) {
        /* istanbul ignore next */
        cov_medqfgh3d().s[82]++;
        console.error('[SessionMiddleware] Failed to log error:', sentryError);
      }
    } else
    /* istanbul ignore next */
    {
      cov_medqfgh3d().b[25][1]++;
    }
    cov_medqfgh3d().s[83]++;
    return _server.NextResponse.json({
      error: 'Internal server error during session validation',
      code: 'INTERNAL_ERROR'
    }, {
      status: 500
    });
  }
}
function getSessionContext(request) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[14]++;
  cov_medqfgh3d().s[84]++;
  return {
    userId:
    /* istanbul ignore next */
    (cov_medqfgh3d().b[26][0]++, request.headers.get('x-session-user-id')) ||
    /* istanbul ignore next */
    (cov_medqfgh3d().b[26][1]++, ''),
    organizationId:
    /* istanbul ignore next */
    (cov_medqfgh3d().b[27][0]++, request.headers.get('x-session-org-id')) ||
    /* istanbul ignore next */
    (cov_medqfgh3d().b[27][1]++, ''),
    sessionToken:
    /* istanbul ignore next */
    (cov_medqfgh3d().b[28][0]++, request.headers.get('x-session-token')) ||
    /* istanbul ignore next */
    (cov_medqfgh3d().b[28][1]++, ''),
    userRole:
    /* istanbul ignore next */
    (cov_medqfgh3d().b[29][0]++, request.headers.get('x-user-role')) ||
    /* istanbul ignore next */
    (cov_medqfgh3d().b[29][1]++, 'agent'),
    lastActivity:
    /* istanbul ignore next */
    (cov_medqfgh3d().b[30][0]++, request.headers.get('x-session-last-activity')) ||
    /* istanbul ignore next */
    (cov_medqfgh3d().b[30][1]++, ''),
    expiresAt:
    /* istanbul ignore next */
    (cov_medqfgh3d().b[31][0]++, request.headers.get('x-session-expires-at')) ||
    /* istanbul ignore next */
    (cov_medqfgh3d().b[31][1]++, ''),
    deviceFingerprint: generateDeviceFingerprint(request)
  };
}
function isSessionExpiringSoon(request, warningMinutes =
/* istanbul ignore next */
(cov_medqfgh3d().b[32][0]++, 5)) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[15]++;
  const expiresAt =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[85]++, request.headers.get('x-session-expires-at'));
  /* istanbul ignore next */
  cov_medqfgh3d().s[86]++;
  if (!expiresAt) {
    /* istanbul ignore next */
    cov_medqfgh3d().b[33][0]++;
    cov_medqfgh3d().s[87]++;
    return false;
  } else
  /* istanbul ignore next */
  {
    cov_medqfgh3d().b[33][1]++;
  }
  const expirationTime =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[88]++, new Date(expiresAt).getTime());
  const currentTime =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[89]++, Date.now());
  const warningTime =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[90]++, warningMinutes * 60 * 1000);
  /* istanbul ignore next */
  cov_medqfgh3d().s[91]++;
  return expirationTime - currentTime <= warningTime;
}
function setSessionCookie(response, sessionToken, cookieName =
/* istanbul ignore next */
(cov_medqfgh3d().b[34][0]++, 'adsapp_session'), maxAge =
/* istanbul ignore next */
(cov_medqfgh3d().b[35][0]++, 30 * 60)) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[16]++;
  cov_medqfgh3d().s[92]++;
  response.cookies.set(cookieName, sessionToken, {
    httpOnly: true,
    secure: process.env.NODE_ENV === 'production',
    sameSite: 'lax',
    path: '/',
    maxAge
  });
}
function clearSessionCookie(response, cookieName =
/* istanbul ignore next */
(cov_medqfgh3d().b[36][0]++, 'adsapp_session')) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[17]++;
  cov_medqfgh3d().s[93]++;
  response.cookies.delete(cookieName);
}
/**
 * Extract session token from request cookies
 *
 * @param request - NextRequest object
 * @param cookieName - Cookie name
 * @returns Session token or null
 */
function extractSessionToken(request, cookieName) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[18]++;
  cov_medqfgh3d().s[94]++;
  return /* istanbul ignore next */(cov_medqfgh3d().b[37][0]++, request.cookies.get(cookieName)?.value) ||
  /* istanbul ignore next */
  (cov_medqfgh3d().b[37][1]++, null);
}
/**
 * Extract user ID from Supabase auth
 *
 * @param request - NextRequest object
 * @returns User ID or null
 */
async function extractUserId(request) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[19]++;
  cov_medqfgh3d().s[95]++;
  try {
    const supabase =
    /* istanbul ignore next */
    (cov_medqfgh3d().s[96]++, await (0, _server1.createClient)());
    const {
      data: {
        user
      },
      error
    } =
    /* istanbul ignore next */
    (cov_medqfgh3d().s[97]++, await supabase.auth.getUser());
    /* istanbul ignore next */
    cov_medqfgh3d().s[98]++;
    if (
    /* istanbul ignore next */
    (cov_medqfgh3d().b[39][0]++, error) ||
    /* istanbul ignore next */
    (cov_medqfgh3d().b[39][1]++, !user)) {
      /* istanbul ignore next */
      cov_medqfgh3d().b[38][0]++;
      cov_medqfgh3d().s[99]++;
      return null;
    } else
    /* istanbul ignore next */
    {
      cov_medqfgh3d().b[38][1]++;
    }
    cov_medqfgh3d().s[100]++;
    return user.id;
  } catch (error) {
    /* istanbul ignore next */
    cov_medqfgh3d().s[101]++;
    console.error('[SessionMiddleware] Failed to extract user ID:', error);
    /* istanbul ignore next */
    cov_medqfgh3d().s[102]++;
    return null;
  }
}
/**
 * Check if path is excluded from session validation
 *
 * @param pathname - Request pathname
 * @param excludePaths - List of excluded paths
 * @returns True if path is excluded
 */
function isPathExcluded(pathname, excludePaths) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[20]++;
  cov_medqfgh3d().s[103]++;
  return excludePaths.some(path => {
    /* istanbul ignore next */
    cov_medqfgh3d().f[21]++;
    cov_medqfgh3d().s[104]++;
    if (path.endsWith('*')) {
      /* istanbul ignore next */
      cov_medqfgh3d().b[40][0]++;
      // Wildcard matching
      const prefix =
      /* istanbul ignore next */
      (cov_medqfgh3d().s[105]++, path.slice(0, -1));
      /* istanbul ignore next */
      cov_medqfgh3d().s[106]++;
      return pathname.startsWith(prefix);
    } else
    /* istanbul ignore next */
    {
      cov_medqfgh3d().b[40][1]++;
    }
    cov_medqfgh3d().s[107]++;
    return pathname === path;
  });
}
/**
 * Generate device fingerprint from request
 *
 * Creates unique identifier for device/browser combination.
 *
 * @param request - NextRequest object
 * @returns Device fingerprint
 */
function generateDeviceFingerprint(request) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[22]++;
  const userAgent =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[108]++,
  /* istanbul ignore next */
  (cov_medqfgh3d().b[41][0]++, request.headers.get('user-agent')) ||
  /* istanbul ignore next */
  (cov_medqfgh3d().b[41][1]++, 'unknown'));
  const acceptLanguage =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[109]++,
  /* istanbul ignore next */
  (cov_medqfgh3d().b[42][0]++, request.headers.get('accept-language')) ||
  /* istanbul ignore next */
  (cov_medqfgh3d().b[42][1]++, 'unknown'));
  const acceptEncoding =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[110]++,
  /* istanbul ignore next */
  (cov_medqfgh3d().b[43][0]++, request.headers.get('accept-encoding')) ||
  /* istanbul ignore next */
  (cov_medqfgh3d().b[43][1]++, 'unknown'));
  // Create hash-like fingerprint (in production, use actual hashing)
  const fingerprint =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[111]++, Buffer.from(`${userAgent}:${acceptLanguage}:${acceptEncoding}`).toString('base64'));
  /* istanbul ignore next */
  cov_medqfgh3d().s[112]++;
  return fingerprint.slice(0, 32);
}
/**
 * Create unauthorized response
 *
 * @param message - Error message
 * @returns NextResponse with 401 status
 */
function createUnauthorizedResponse(message) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[23]++;
  cov_medqfgh3d().s[113]++;
  return _server.NextResponse.json({
    error: message,
    code: 'UNAUTHORIZED'
  }, {
    status: 401
  });
}
function addSessionTimeoutWarning(request, response, warningMinutes =
/* istanbul ignore next */
(cov_medqfgh3d().b[44][0]++, 5)) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[24]++;
  cov_medqfgh3d().s[114]++;
  if (isSessionExpiringSoon(request, warningMinutes)) {
    /* istanbul ignore next */
    cov_medqfgh3d().b[45][0]++;
    const expiresAt =
    /* istanbul ignore next */
    (cov_medqfgh3d().s[115]++,
    /* istanbul ignore next */
    (cov_medqfgh3d().b[46][0]++, request.headers.get('x-session-expires-at')) ||
    /* istanbul ignore next */
    (cov_medqfgh3d().b[46][1]++, ''));
    const expiresIn =
    /* istanbul ignore next */
    (cov_medqfgh3d().s[116]++, Math.max(0, Math.floor((new Date(expiresAt).getTime() - Date.now()) / 1000)));
    /* istanbul ignore next */
    cov_medqfgh3d().s[117]++;
    response.headers.set('X-Session-Expires-Soon', 'true');
    /* istanbul ignore next */
    cov_medqfgh3d().s[118]++;
    response.headers.set('X-Session-Expires-In', expiresIn.toString());
  } else
  /* istanbul ignore next */
  {
    cov_medqfgh3d().b[45][1]++;
  }
}
async function validateSessionAndTenant(request) {
  /* istanbul ignore next */
  cov_medqfgh3d().f[25]++;
  // First validate session
  const sessionValidation =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[119]++, await validateSession(request));
  /* istanbul ignore next */
  cov_medqfgh3d().s[120]++;
  if (sessionValidation) {
    /* istanbul ignore next */
    cov_medqfgh3d().b[47][0]++;
    cov_medqfgh3d().s[121]++;
    return sessionValidation;
  } else
  /* istanbul ignore next */
  {
    cov_medqfgh3d().b[47][1]++;
  }
  // Then validate tenant (if implemented)
  const {
    validateTenantAccess
  } =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[122]++, await Promise.resolve().then(() => {
    /* istanbul ignore next */
    cov_medqfgh3d().f[26]++;
    cov_medqfgh3d().s[123]++;
    return /*#__PURE__*/_interop_require_wildcard(require("./tenant-validation"));
  }));
  const tenantValidation =
  /* istanbul ignore next */
  (cov_medqfgh3d().s[124]++, await validateTenantAccess(request));
  /* istanbul ignore next */
  cov_medqfgh3d().s[125]++;
  if (tenantValidation) {
    /* istanbul ignore next */
    cov_medqfgh3d().b[48][0]++;
    cov_medqfgh3d().s[126]++;
    return tenantValidation;
  } else
  /* istanbul ignore next */
  {
    cov_medqfgh3d().b[48][1]++;
  }
  cov_medqfgh3d().s[127]++;
  return null;
}
async function checkSessionHealth() {
  /* istanbul ignore next */
  cov_medqfgh3d().f[27]++;
  cov_medqfgh3d().s[128]++;
  try {
    const manager =
    /* istanbul ignore next */
    (cov_medqfgh3d().s[129]++, (0, _manager.getSessionManager)());
    const store =
    /* istanbul ignore next */
    (cov_medqfgh3d().s[130]++, manager.getStore());
    /* istanbul ignore next */
    cov_medqfgh3d().s[131]++;
    return await store.getHealthStatus();
  } catch (error) {
    const message =
    /* istanbul ignore next */
    (cov_medqfgh3d().s[132]++, error instanceof Error ?
    /* istanbul ignore next */
    (cov_medqfgh3d().b[49][0]++, error.message) :
    /* istanbul ignore next */
    (cov_medqfgh3d().b[49][1]++, 'Unknown error'));
    /* istanbul ignore next */
    cov_medqfgh3d().s[133]++;
    return {
      healthy: false,
      latency: -1,
      error: message
    };
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhZGRTZXNzaW9uVGltZW91dFdhcm5pbmciLCJjb3ZfbWVkcWZnaDNkIiwiZiIsInMiLCJjaGVja1Nlc3Npb25IZWFsdGgiLCJjbGVhclNlc3Npb25Db29raWUiLCJnZXRTZXNzaW9uQ29udGV4dCIsImlzU2Vzc2lvbkV4cGlyaW5nU29vbiIsInNldFNlc3Npb25Db29raWUiLCJ2YWxpZGF0ZVNlc3Npb24iLCJ2YWxpZGF0ZVNlc3Npb25BbmRUZW5hbnQiLCJERUZBVUxUX0NPTkZJRyIsImNvb2tpZU5hbWUiLCJleGNsdWRlUGF0aHMiLCJkZXRlY3RQcml2aWxlZ2VDaGFuZ2VzIiwic2Vzc2lvbk1hbmFnZXIiLCJfbWFuYWdlciIsImdldFNlc3Npb25NYW5hZ2VyIiwicmVxdWVzdCIsImNvbmZpZyIsImIiLCJmdWxsQ29uZmlnIiwicGF0aG5hbWUiLCJuZXh0VXJsIiwiaXNQYXRoRXhjbHVkZWQiLCJzZXNzaW9uVG9rZW4iLCJleHRyYWN0U2Vzc2lvblRva2VuIiwiY3JlYXRlVW5hdXRob3JpemVkUmVzcG9uc2UiLCJ1c2VySWQiLCJleHRyYWN0VXNlcklkIiwidmFsaWRhdGlvbiIsInZhbGlkIiwicmVzcG9uc2UiLCJyZWFzb24iLCJjb29raWVzIiwiZGVsZXRlIiwic2Vzc2lvbiIsInByaXZpbGVnZUNoZWNrIiwiY2hlY2tQcml2aWxlZ2VDaGFuZ2UiLCJyZXF1aXJlc1JlZ2VuZXJhdGlvbiIsInRva2VuIiwibmV3VG9rZW4iLCJyZWdlbmVyYXRlU2Vzc2lvbiIsIl9zZXJ2ZXIiLCJOZXh0UmVzcG9uc2UiLCJqc29uIiwiZXJyb3IiLCJjb2RlIiwic3RhdHVzIiwic2V0IiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJzYW1lU2l0ZSIsInBhdGgiLCJtYXhBZ2UiLCJyZWZyZXNoUmVzdWx0IiwicmVmcmVzaFNlc3Npb24iLCJzdWNjZXNzIiwicmVxdWVzdEhlYWRlcnMiLCJIZWFkZXJzIiwiaGVhZGVycyIsIm9yZ2FuaXphdGlvbklkIiwibGFzdEFjdGl2aXR5IiwiZXhwaXJlc0F0IiwibmV4dCIsImNvbnNvbGUiLCJTZW50cnkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJfaW50ZXJvcF9yZXF1aXJlX3dpbGRjYXJkIiwicmVxdWlyZSIsImNhcHR1cmVFeGNlcHRpb24iLCJ0YWdzIiwibWlkZGxld2FyZSIsInNlbnRyeUVycm9yIiwiZ2V0IiwidXNlclJvbGUiLCJkZXZpY2VGaW5nZXJwcmludCIsImdlbmVyYXRlRGV2aWNlRmluZ2VycHJpbnQiLCJ3YXJuaW5nTWludXRlcyIsImV4cGlyYXRpb25UaW1lIiwiRGF0ZSIsImdldFRpbWUiLCJjdXJyZW50VGltZSIsIm5vdyIsIndhcm5pbmdUaW1lIiwidmFsdWUiLCJzdXBhYmFzZSIsIl9zZXJ2ZXIxIiwiY3JlYXRlQ2xpZW50IiwiZGF0YSIsInVzZXIiLCJhdXRoIiwiZ2V0VXNlciIsImlkIiwic29tZSIsImVuZHNXaXRoIiwicHJlZml4Iiwic2xpY2UiLCJzdGFydHNXaXRoIiwidXNlckFnZW50IiwiYWNjZXB0TGFuZ3VhZ2UiLCJhY2NlcHRFbmNvZGluZyIsImZpbmdlcnByaW50IiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwibWVzc2FnZSIsImV4cGlyZXNJbiIsIk1hdGgiLCJtYXgiLCJmbG9vciIsInNlc3Npb25WYWxpZGF0aW9uIiwidmFsaWRhdGVUZW5hbnRBY2Nlc3MiLCJ0ZW5hbnRWYWxpZGF0aW9uIiwibWFuYWdlciIsInN0b3JlIiwiZ2V0U3RvcmUiLCJnZXRIZWFsdGhTdGF0dXMiLCJFcnJvciIsImhlYWx0aHkiLCJsYXRlbmN5Il0sInNvdXJjZXMiOlsiQzpcXEFpIFByb2plY3RlblxcQURTYXBwXFxzcmNcXGxpYlxcbWlkZGxld2FyZVxcc2Vzc2lvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbk1hbmFnZXIsIFNlc3Npb25NYW5hZ2VyIH0gZnJvbSAnQC9saWIvc2Vzc2lvbi9tYW5hZ2VyJztcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0AvbGliL3N1cGFiYXNlL3NlcnZlcic7XG5cbi8qKlxuICogU2Vzc2lvbiBNaWRkbGV3YXJlIGZvciBFbnRlcnByaXNlIFNlc3Npb24gTWFuYWdlbWVudFxuICpcbiAqIFZhbGlkYXRlcyBhbmQgbWFuYWdlcyBzZXNzaW9ucyBvbiBldmVyeSBhdXRoZW50aWNhdGVkIHJlcXVlc3Q6XG4gKiAtIFZhbGlkYXRlcyBzZXNzaW9uIHRva2VuIGZyb20gY29va2llc1xuICogLSBFbmZvcmNlcyAzMC1taW51dGUgaW5hY3Rpdml0eSB0aW1lb3V0XG4gKiAtIFVwZGF0ZXMgbGFzdCBhY3Rpdml0eSB0aW1lc3RhbXBcbiAqIC0gQ2hlY2tzIGZvciBwcml2aWxlZ2UgY2hhbmdlc1xuICogLSBIYW5kbGVzIGV4cGlyZWQgc2Vzc2lvbnMgZ3JhY2VmdWxseVxuICogLSBJbnRlZ3JhdGVzIHdpdGggdGVuYW50IHZhbGlkYXRpb25cbiAqXG4gKiBTZWN1cml0eSBGZWF0dXJlczpcbiAqIC0gQXV0b21hdGljIHNlc3Npb24gZXhwaXJhdGlvblxuICogLSBQcml2aWxlZ2UgY2hhbmdlIGRldGVjdGlvblxuICogLSBTZXNzaW9uIHJldm9jYXRpb24gb24gc2VjdXJpdHkgZXZlbnRzXG4gKiAtIERldmljZSB0cmFja2luZ1xuICogLSBBdWRpdCBsb2dnaW5nXG4gKlxuICogQG1vZHVsZSBzZXNzaW9uLW1pZGRsZXdhcmVcbiAqL1xuXG4vKipcbiAqIFNlc3Npb24gY29udGV4dCBhdHRhY2hlZCB0byByZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2Vzc2lvbkNvbnRleHQge1xuICB1c2VySWQ6IHN0cmluZztcbiAgb3JnYW5pemF0aW9uSWQ6IHN0cmluZztcbiAgc2Vzc2lvblRva2VuOiBzdHJpbmc7XG4gIHVzZXJSb2xlOiBzdHJpbmc7XG4gIGxhc3RBY3Rpdml0eTogc3RyaW5nO1xuICBleHBpcmVzQXQ6IHN0cmluZztcbiAgZGV2aWNlRmluZ2VycHJpbnQ6IHN0cmluZztcbn1cblxuLyoqXG4gKiBTZXNzaW9uIG1pZGRsZXdhcmUgY29uZmlndXJhdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25NaWRkbGV3YXJlQ29uZmlnIHtcbiAgLyoqXG4gICAqIENvb2tpZSBuYW1lIGZvciBzZXNzaW9uIHRva2VuXG4gICAqL1xuICBjb29raWVOYW1lPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBQYXRocyB0byBleGNsdWRlIGZyb20gc2Vzc2lvbiB2YWxpZGF0aW9uXG4gICAqL1xuICBleGNsdWRlUGF0aHM/OiBzdHJpbmdbXTtcblxuICAvKipcbiAgICogRW5hYmxlIHByaXZpbGVnZSBjaGFuZ2UgZGV0ZWN0aW9uXG4gICAqL1xuICBkZXRlY3RQcml2aWxlZ2VDaGFuZ2VzPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogU2Vzc2lvbiBtYW5hZ2VyIGluc3RhbmNlIChmb3IgdGVzdGluZylcbiAgICovXG4gIHNlc3Npb25NYW5hZ2VyPzogU2Vzc2lvbk1hbmFnZXI7XG59XG5cbi8qKlxuICogRGVmYXVsdCBjb25maWd1cmF0aW9uXG4gKi9cbmNvbnN0IERFRkFVTFRfQ09ORklHOiBSZXF1aXJlZDxTZXNzaW9uTWlkZGxld2FyZUNvbmZpZz4gPSB7XG4gIGNvb2tpZU5hbWU6ICdhZHNhcHBfc2Vzc2lvbicsXG4gIGV4Y2x1ZGVQYXRoczogW1xuICAgICcvYXBpL2F1dGgvc2lnbmluJyxcbiAgICAnL2FwaS9hdXRoL3NpZ251cCcsXG4gICAgJy9hcGkvYXV0aC9mb3Jnb3QtcGFzc3dvcmQnLFxuICAgICcvYXBpL2F1dGgvcmVzZXQtcGFzc3dvcmQnLFxuICAgICcvYXBpL2hlYWx0aCcsXG4gICAgJy9hcGkvd2ViaG9va3MnXG4gIF0sXG4gIGRldGVjdFByaXZpbGVnZUNoYW5nZXM6IHRydWUsXG4gIHNlc3Npb25NYW5hZ2VyOiBnZXRTZXNzaW9uTWFuYWdlcigpXG59O1xuXG4vKipcbiAqIFZhbGlkYXRlIGFuZCByZWZyZXNoIHNlc3Npb25cbiAqXG4gKiBNYWluIHNlc3Npb24gbWlkZGxld2FyZSBmdW5jdGlvbiB0aGF0OlxuICogMS4gQ2hlY2tzIGlmIHBhdGggcmVxdWlyZXMgc2Vzc2lvbiB2YWxpZGF0aW9uXG4gKiAyLiBFeHRyYWN0cyBzZXNzaW9uIHRva2VuIGZyb20gY29va2llc1xuICogMy4gVmFsaWRhdGVzIHNlc3Npb25cbiAqIDQuIENoZWNrcyBmb3IgcHJpdmlsZWdlIGNoYW5nZXNcbiAqIDUuIFJlZnJlc2hlcyBzZXNzaW9uIGFjdGl2aXR5XG4gKiA2LiBBdHRhY2hlcyBzZXNzaW9uIGNvbnRleHQgdG8gcmVxdWVzdFxuICpcbiAqIEBwYXJhbSByZXF1ZXN0IC0gTmV4dFJlcXVlc3Qgb2JqZWN0XG4gKiBAcGFyYW0gY29uZmlnIC0gT3B0aW9uYWwgY29uZmlndXJhdGlvblxuICogQHJldHVybnMgTmV4dFJlc3BvbnNlIG9yIG51bGwgaWYgdmFsaWRhdGlvbiBzdWNjZWVkc1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiAvLyBJbiBBUEkgcm91dGVcbiAqIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAqICAgY29uc3Qgc2Vzc2lvblZhbGlkYXRpb24gPSBhd2FpdCB2YWxpZGF0ZVNlc3Npb24ocmVxdWVzdCk7XG4gKiAgIGlmIChzZXNzaW9uVmFsaWRhdGlvbikgcmV0dXJuIHNlc3Npb25WYWxpZGF0aW9uO1xuICpcbiAqICAgY29uc3QgY29udGV4dCA9IGdldFNlc3Npb25Db250ZXh0KHJlcXVlc3QpO1xuICogICAvLyBVc2UgY29udGV4dCBmb3IgYnVzaW5lc3MgbG9naWNcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVTZXNzaW9uKFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgY29uZmlnOiBTZXNzaW9uTWlkZGxld2FyZUNvbmZpZyA9IHt9XG4pOiBQcm9taXNlPE5leHRSZXNwb25zZSB8IG51bGw+IHtcbiAgY29uc3QgZnVsbENvbmZpZyA9IHsgLi4uREVGQVVMVF9DT05GSUcsIC4uLmNvbmZpZyB9O1xuICBjb25zdCBwYXRobmFtZSA9IHJlcXVlc3QubmV4dFVybC5wYXRobmFtZTtcblxuICAvLyBDaGVjayBpZiBwYXRoIGlzIGV4Y2x1ZGVkIGZyb20gc2Vzc2lvbiB2YWxpZGF0aW9uXG4gIGlmIChpc1BhdGhFeGNsdWRlZChwYXRobmFtZSwgZnVsbENvbmZpZy5leGNsdWRlUGF0aHMpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB0cnkge1xuICAgIC8vIEV4dHJhY3Qgc2Vzc2lvbiB0b2tlbiBmcm9tIGNvb2tpZXNcbiAgICBjb25zdCBzZXNzaW9uVG9rZW4gPSBleHRyYWN0U2Vzc2lvblRva2VuKHJlcXVlc3QsIGZ1bGxDb25maWcuY29va2llTmFtZSk7XG5cbiAgICBpZiAoIXNlc3Npb25Ub2tlbikge1xuICAgICAgcmV0dXJuIGNyZWF0ZVVuYXV0aG9yaXplZFJlc3BvbnNlKCdObyBzZXNzaW9uIHRva2VuIHByb3ZpZGVkJyk7XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCB1c2VyIElEIGZyb20gU3VwYWJhc2UgYXV0aFxuICAgIGNvbnN0IHVzZXJJZCA9IGF3YWl0IGV4dHJhY3RVc2VySWQocmVxdWVzdCk7XG5cbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgcmV0dXJuIGNyZWF0ZVVuYXV0aG9yaXplZFJlc3BvbnNlKCdVc2VyIG5vdCBhdXRoZW50aWNhdGVkJyk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgc2Vzc2lvblxuICAgIGNvbnN0IHNlc3Npb25NYW5hZ2VyID0gZnVsbENvbmZpZy5zZXNzaW9uTWFuYWdlcjtcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgc2Vzc2lvbk1hbmFnZXIudmFsaWRhdGVTZXNzaW9uKHVzZXJJZCwgc2Vzc2lvblRva2VuKTtcblxuICAgIGlmICghdmFsaWRhdGlvbi52YWxpZCkge1xuICAgICAgLy8gU2Vzc2lvbiBpbnZhbGlkIC0gY2xlYXIgY29va2llIGFuZCByZXR1cm4gZXJyb3JcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gY3JlYXRlVW5hdXRob3JpemVkUmVzcG9uc2UoXG4gICAgICAgIHZhbGlkYXRpb24ucmVhc29uIHx8ICdJbnZhbGlkIHNlc3Npb24nXG4gICAgICApO1xuICAgICAgcmVzcG9uc2UuY29va2llcy5kZWxldGUoZnVsbENvbmZpZy5jb29raWVOYW1lKTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICBjb25zdCBzZXNzaW9uID0gdmFsaWRhdGlvbi5zZXNzaW9uITtcblxuICAgIC8vIENoZWNrIGZvciBwcml2aWxlZ2UgY2hhbmdlc1xuICAgIGlmIChmdWxsQ29uZmlnLmRldGVjdFByaXZpbGVnZUNoYW5nZXMpIHtcbiAgICAgIGNvbnN0IHByaXZpbGVnZUNoZWNrID0gYXdhaXQgc2Vzc2lvbk1hbmFnZXIuY2hlY2tQcml2aWxlZ2VDaGFuZ2UoXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgc2Vzc2lvblRva2VuXG4gICAgICApO1xuXG4gICAgICBpZiAocHJpdmlsZWdlQ2hlY2sucmVxdWlyZXNSZWdlbmVyYXRpb24pIHtcbiAgICAgICAgLy8gUHJpdmlsZWdlIGNoYW5nZWQgLSByZWdlbmVyYXRlIHNlc3Npb25cbiAgICAgICAgY29uc3QgeyB0b2tlbjogbmV3VG9rZW4gfSA9IGF3YWl0IHNlc3Npb25NYW5hZ2VyLnJlZ2VuZXJhdGVTZXNzaW9uKFxuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICBzZXNzaW9uVG9rZW5cbiAgICAgICAgKTtcblxuICAgICAgICAvLyBSZXR1cm4gcmVzcG9uc2Ugd2l0aCBuZXcgc2Vzc2lvbiB0b2tlblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiAnU2Vzc2lvbiByZWdlbmVyYXRlZCBkdWUgdG8gcHJpdmlsZWdlIGNoYW5nZScsXG4gICAgICAgICAgICBjb2RlOiAnU0VTU0lPTl9SRUdFTkVSQVRFRCcsXG4gICAgICAgICAgICBuZXdUb2tlblxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gU2V0IG5ldyBzZXNzaW9uIGNvb2tpZVxuICAgICAgICByZXNwb25zZS5jb29raWVzLnNldChmdWxsQ29uZmlnLmNvb2tpZU5hbWUsIG5ld1Rva2VuLCB7XG4gICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgICAgICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICAgICAgICBwYXRoOiAnLycsXG4gICAgICAgICAgbWF4QWdlOiAzMCAqIDYwIC8vIDMwIG1pbnV0ZXNcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJlZnJlc2ggc2Vzc2lvbiBhY3Rpdml0eVxuICAgIGNvbnN0IHJlZnJlc2hSZXN1bHQgPSBhd2FpdCBzZXNzaW9uTWFuYWdlci5yZWZyZXNoU2Vzc2lvbihcbiAgICAgIHVzZXJJZCxcbiAgICAgIHNlc3Npb25Ub2tlblxuICAgICk7XG5cbiAgICBpZiAoIXJlZnJlc2hSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIGNyZWF0ZVVuYXV0aG9yaXplZFJlc3BvbnNlKFxuICAgICAgICByZWZyZXNoUmVzdWx0LmVycm9yIHx8ICdGYWlsZWQgdG8gcmVmcmVzaCBzZXNzaW9uJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBBdHRhY2ggc2Vzc2lvbiBjb250ZXh0IHRvIHJlcXVlc3QgaGVhZGVyc1xuICAgIGNvbnN0IHJlcXVlc3RIZWFkZXJzID0gbmV3IEhlYWRlcnMocmVxdWVzdC5oZWFkZXJzKTtcbiAgICByZXF1ZXN0SGVhZGVycy5zZXQoJ3gtc2Vzc2lvbi11c2VyLWlkJywgc2Vzc2lvbi51c2VySWQpO1xuICAgIHJlcXVlc3RIZWFkZXJzLnNldCgneC1zZXNzaW9uLW9yZy1pZCcsIHNlc3Npb24ub3JnYW5pemF0aW9uSWQpO1xuICAgIHJlcXVlc3RIZWFkZXJzLnNldCgneC1zZXNzaW9uLXRva2VuJywgc2Vzc2lvblRva2VuKTtcbiAgICByZXF1ZXN0SGVhZGVycy5zZXQoJ3gtc2Vzc2lvbi1sYXN0LWFjdGl2aXR5Jywgc2Vzc2lvbi5sYXN0QWN0aXZpdHkpO1xuICAgIHJlcXVlc3RIZWFkZXJzLnNldCgneC1zZXNzaW9uLWV4cGlyZXMtYXQnLCBzZXNzaW9uLmV4cGlyZXNBdCk7XG5cbiAgICAvLyBDb250aW51ZSByZXF1ZXN0IHdpdGggc2Vzc2lvbiBjb250ZXh0XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KHtcbiAgICAgIHJlcXVlc3Q6IHsgaGVhZGVyczogcmVxdWVzdEhlYWRlcnMgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tTZXNzaW9uTWlkZGxld2FyZV0gVmFsaWRhdGlvbiBlcnJvcjonLCBlcnJvcik7XG5cbiAgICAvLyBMb2cgZXJyb3IgdG8gbW9uaXRvcmluZyBzZXJ2aWNlXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFNlbnRyeSA9IGF3YWl0IGltcG9ydCgnQHNlbnRyeS9uZXh0anMnKTtcbiAgICAgICAgU2VudHJ5LmNhcHR1cmVFeGNlcHRpb24oZXJyb3IsIHtcbiAgICAgICAgICB0YWdzOiB7XG4gICAgICAgICAgICBtaWRkbGV3YXJlOiAnc2Vzc2lvbi12YWxpZGF0aW9uJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChzZW50cnlFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbU2Vzc2lvbk1pZGRsZXdhcmVdIEZhaWxlZCB0byBsb2cgZXJyb3I6Jywgc2VudHJ5RXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3IgZHVyaW5nIHNlc3Npb24gdmFsaWRhdGlvbicsXG4gICAgICAgIGNvZGU6ICdJTlRFUk5BTF9FUlJPUidcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogRXh0cmFjdCBzZXNzaW9uIGNvbnRleHQgZnJvbSByZXF1ZXN0IGhlYWRlcnNcbiAqXG4gKiBVc2UgdGhpcyBhZnRlciBzZXNzaW9uIG1pZGRsZXdhcmUgdmFsaWRhdGlvbiB0byBnZXQgc2Vzc2lvbiBpbmZvLlxuICpcbiAqIEBwYXJhbSByZXF1ZXN0IC0gTmV4dFJlcXVlc3Qgd2l0aCBzZXNzaW9uIGhlYWRlcnNcbiAqIEByZXR1cm5zIFNlc3Npb24gY29udGV4dFxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBjb250ZXh0ID0gZ2V0U2Vzc2lvbkNvbnRleHQocmVxdWVzdCk7XG4gKiBjb25zb2xlLmxvZyhgVXNlciAke2NvbnRleHQudXNlcklkfSBpbiBvcmcgJHtjb250ZXh0Lm9yZ2FuaXphdGlvbklkfWApO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXNzaW9uQ29udGV4dChyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IFNlc3Npb25Db250ZXh0IHtcbiAgcmV0dXJuIHtcbiAgICB1c2VySWQ6IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtc2Vzc2lvbi11c2VyLWlkJykgfHwgJycsXG4gICAgb3JnYW5pemF0aW9uSWQ6IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtc2Vzc2lvbi1vcmctaWQnKSB8fCAnJyxcbiAgICBzZXNzaW9uVG9rZW46IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtc2Vzc2lvbi10b2tlbicpIHx8ICcnLFxuICAgIHVzZXJSb2xlOiByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXVzZXItcm9sZScpIHx8ICdhZ2VudCcsXG4gICAgbGFzdEFjdGl2aXR5OiByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXNlc3Npb24tbGFzdC1hY3Rpdml0eScpIHx8ICcnLFxuICAgIGV4cGlyZXNBdDogcmVxdWVzdC5oZWFkZXJzLmdldCgneC1zZXNzaW9uLWV4cGlyZXMtYXQnKSB8fCAnJyxcbiAgICBkZXZpY2VGaW5nZXJwcmludDogZ2VuZXJhdGVEZXZpY2VGaW5nZXJwcmludChyZXF1ZXN0KVxuICB9O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHNlc3Npb24gaXMgYWJvdXQgdG8gZXhwaXJlXG4gKlxuICogVXNlZnVsIGZvciBzaG93aW5nIHdhcm5pbmdzIHRvIHVzZXIgYmVmb3JlIHNlc3Npb24gZXhwaXJlcy5cbiAqXG4gKiBAcGFyYW0gcmVxdWVzdCAtIE5leHRSZXF1ZXN0IHdpdGggc2Vzc2lvbiBoZWFkZXJzXG4gKiBAcGFyYW0gd2FybmluZ01pbnV0ZXMgLSBNaW51dGVzIGJlZm9yZSBleHBpcmF0aW9uIHRvIHdhcm4gKGRlZmF1bHQ6IDUpXG4gKiBAcmV0dXJucyBUcnVlIGlmIHNlc3Npb24gZXhwaXJlcyBzb29uXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGlmIChpc1Nlc3Npb25FeHBpcmluZ1Nvb24ocmVxdWVzdCwgNSkpIHtcbiAqICAgLy8gU2hvdyB3YXJuaW5nIHRvIHVzZXJcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTZXNzaW9uRXhwaXJpbmdTb29uKFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgd2FybmluZ01pbnV0ZXM6IG51bWJlciA9IDVcbik6IGJvb2xlYW4ge1xuICBjb25zdCBleHBpcmVzQXQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXNlc3Npb24tZXhwaXJlcy1hdCcpO1xuXG4gIGlmICghZXhwaXJlc0F0KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgZXhwaXJhdGlvblRpbWUgPSBuZXcgRGF0ZShleHBpcmVzQXQpLmdldFRpbWUoKTtcbiAgY29uc3QgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xuICBjb25zdCB3YXJuaW5nVGltZSA9IHdhcm5pbmdNaW51dGVzICogNjAgKiAxMDAwO1xuXG4gIHJldHVybiBleHBpcmF0aW9uVGltZSAtIGN1cnJlbnRUaW1lIDw9IHdhcm5pbmdUaW1lO1xufVxuXG4vKipcbiAqIENyZWF0ZSBzZXNzaW9uIGNvb2tpZVxuICpcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBzZXQgc2Vzc2lvbiBjb29raWUgd2l0aCBzZWN1cmUgZGVmYXVsdHMuXG4gKlxuICogQHBhcmFtIHJlc3BvbnNlIC0gTmV4dFJlc3BvbnNlIG9iamVjdFxuICogQHBhcmFtIHNlc3Npb25Ub2tlbiAtIFNlc3Npb24gdG9rZW5cbiAqIEBwYXJhbSBjb29raWVOYW1lIC0gQ29va2llIG5hbWUgKGRlZmF1bHQ6ICdhZHNhcHBfc2Vzc2lvbicpXG4gKiBAcGFyYW0gbWF4QWdlIC0gQ29va2llIG1heCBhZ2UgaW4gc2Vjb25kcyAoZGVmYXVsdDogMzAgbWludXRlcylcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gKiBzZXRTZXNzaW9uQ29va2llKHJlc3BvbnNlLCAndG9rZW4xMjMnKTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0U2Vzc2lvbkNvb2tpZShcbiAgcmVzcG9uc2U6IE5leHRSZXNwb25zZSxcbiAgc2Vzc2lvblRva2VuOiBzdHJpbmcsXG4gIGNvb2tpZU5hbWU6IHN0cmluZyA9ICdhZHNhcHBfc2Vzc2lvbicsXG4gIG1heEFnZTogbnVtYmVyID0gMzAgKiA2MFxuKTogdm9pZCB7XG4gIHJlc3BvbnNlLmNvb2tpZXMuc2V0KGNvb2tpZU5hbWUsIHNlc3Npb25Ub2tlbiwge1xuICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcbiAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgcGF0aDogJy8nLFxuICAgIG1heEFnZVxuICB9KTtcbn1cblxuLyoqXG4gKiBDbGVhciBzZXNzaW9uIGNvb2tpZVxuICpcbiAqIEhlbHBlciBmdW5jdGlvbiB0byByZW1vdmUgc2Vzc2lvbiBjb29raWUuXG4gKlxuICogQHBhcmFtIHJlc3BvbnNlIC0gTmV4dFJlc3BvbnNlIG9iamVjdFxuICogQHBhcmFtIGNvb2tpZU5hbWUgLSBDb29raWUgbmFtZSAoZGVmYXVsdDogJ2Fkc2FwcF9zZXNzaW9uJylcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICdMb2dnZWQgb3V0JyB9KTtcbiAqIGNsZWFyU2Vzc2lvbkNvb2tpZShyZXNwb25zZSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyU2Vzc2lvbkNvb2tpZShcbiAgcmVzcG9uc2U6IE5leHRSZXNwb25zZSxcbiAgY29va2llTmFtZTogc3RyaW5nID0gJ2Fkc2FwcF9zZXNzaW9uJ1xuKTogdm9pZCB7XG4gIHJlc3BvbnNlLmNvb2tpZXMuZGVsZXRlKGNvb2tpZU5hbWUpO1xufVxuXG4vKipcbiAqIEV4dHJhY3Qgc2Vzc2lvbiB0b2tlbiBmcm9tIHJlcXVlc3QgY29va2llc1xuICpcbiAqIEBwYXJhbSByZXF1ZXN0IC0gTmV4dFJlcXVlc3Qgb2JqZWN0XG4gKiBAcGFyYW0gY29va2llTmFtZSAtIENvb2tpZSBuYW1lXG4gKiBAcmV0dXJucyBTZXNzaW9uIHRva2VuIG9yIG51bGxcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdFNlc3Npb25Ub2tlbihcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXG4gIGNvb2tpZU5hbWU6IHN0cmluZ1xuKTogc3RyaW5nIHwgbnVsbCB7XG4gIHJldHVybiByZXF1ZXN0LmNvb2tpZXMuZ2V0KGNvb2tpZU5hbWUpPy52YWx1ZSB8fCBudWxsO1xufVxuXG4vKipcbiAqIEV4dHJhY3QgdXNlciBJRCBmcm9tIFN1cGFiYXNlIGF1dGhcbiAqXG4gKiBAcGFyYW0gcmVxdWVzdCAtIE5leHRSZXF1ZXN0IG9iamVjdFxuICogQHJldHVybnMgVXNlciBJRCBvciBudWxsXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGV4dHJhY3RVc2VySWQocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuICAgIGNvbnN0IHsgZGF0YTogeyB1c2VyIH0sIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcblxuICAgIGlmIChlcnJvciB8fCAhdXNlcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVzZXIuaWQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1Nlc3Npb25NaWRkbGV3YXJlXSBGYWlsZWQgdG8gZXh0cmFjdCB1c2VyIElEOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHBhdGggaXMgZXhjbHVkZWQgZnJvbSBzZXNzaW9uIHZhbGlkYXRpb25cbiAqXG4gKiBAcGFyYW0gcGF0aG5hbWUgLSBSZXF1ZXN0IHBhdGhuYW1lXG4gKiBAcGFyYW0gZXhjbHVkZVBhdGhzIC0gTGlzdCBvZiBleGNsdWRlZCBwYXRoc1xuICogQHJldHVybnMgVHJ1ZSBpZiBwYXRoIGlzIGV4Y2x1ZGVkXG4gKi9cbmZ1bmN0aW9uIGlzUGF0aEV4Y2x1ZGVkKHBhdGhuYW1lOiBzdHJpbmcsIGV4Y2x1ZGVQYXRoczogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgcmV0dXJuIGV4Y2x1ZGVQYXRocy5zb21lKHBhdGggPT4ge1xuICAgIGlmIChwYXRoLmVuZHNXaXRoKCcqJykpIHtcbiAgICAgIC8vIFdpbGRjYXJkIG1hdGNoaW5nXG4gICAgICBjb25zdCBwcmVmaXggPSBwYXRoLnNsaWNlKDAsIC0xKTtcbiAgICAgIHJldHVybiBwYXRobmFtZS5zdGFydHNXaXRoKHByZWZpeCk7XG4gICAgfVxuICAgIHJldHVybiBwYXRobmFtZSA9PT0gcGF0aDtcbiAgfSk7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgZGV2aWNlIGZpbmdlcnByaW50IGZyb20gcmVxdWVzdFxuICpcbiAqIENyZWF0ZXMgdW5pcXVlIGlkZW50aWZpZXIgZm9yIGRldmljZS9icm93c2VyIGNvbWJpbmF0aW9uLlxuICpcbiAqIEBwYXJhbSByZXF1ZXN0IC0gTmV4dFJlcXVlc3Qgb2JqZWN0XG4gKiBAcmV0dXJucyBEZXZpY2UgZmluZ2VycHJpbnRcbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVEZXZpY2VGaW5nZXJwcmludChyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IHN0cmluZyB7XG4gIGNvbnN0IHVzZXJBZ2VudCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3VzZXItYWdlbnQnKSB8fCAndW5rbm93bic7XG4gIGNvbnN0IGFjY2VwdExhbmd1YWdlID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnYWNjZXB0LWxhbmd1YWdlJykgfHwgJ3Vua25vd24nO1xuICBjb25zdCBhY2NlcHRFbmNvZGluZyA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2FjY2VwdC1lbmNvZGluZycpIHx8ICd1bmtub3duJztcblxuICAvLyBDcmVhdGUgaGFzaC1saWtlIGZpbmdlcnByaW50IChpbiBwcm9kdWN0aW9uLCB1c2UgYWN0dWFsIGhhc2hpbmcpXG4gIGNvbnN0IGZpbmdlcnByaW50ID0gQnVmZmVyLmZyb20oXG4gICAgYCR7dXNlckFnZW50fToke2FjY2VwdExhbmd1YWdlfToke2FjY2VwdEVuY29kaW5nfWBcbiAgKS50b1N0cmluZygnYmFzZTY0Jyk7XG5cbiAgcmV0dXJuIGZpbmdlcnByaW50LnNsaWNlKDAsIDMyKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgdW5hdXRob3JpemVkIHJlc3BvbnNlXG4gKlxuICogQHBhcmFtIG1lc3NhZ2UgLSBFcnJvciBtZXNzYWdlXG4gKiBAcmV0dXJucyBOZXh0UmVzcG9uc2Ugd2l0aCA0MDEgc3RhdHVzXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVVuYXV0aG9yaXplZFJlc3BvbnNlKG1lc3NhZ2U6IHN0cmluZyk6IE5leHRSZXNwb25zZSB7XG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICB7XG4gICAgICBlcnJvcjogbWVzc2FnZSxcbiAgICAgIGNvZGU6ICdVTkFVVEhPUklaRUQnXG4gICAgfSxcbiAgICB7IHN0YXR1czogNDAxIH1cbiAgKTtcbn1cblxuLyoqXG4gKiBTZXNzaW9uIHRpbWVvdXQgd2FybmluZyBtaWRkbGV3YXJlXG4gKlxuICogQWRkcyBzZXNzaW9uIHRpbWVvdXQgaW5mb3JtYXRpb24gdG8gcmVzcG9uc2UgaGVhZGVycy5cbiAqXG4gKiBAcGFyYW0gcmVxdWVzdCAtIE5leHRSZXF1ZXN0IG9iamVjdFxuICogQHBhcmFtIHJlc3BvbnNlIC0gTmV4dFJlc3BvbnNlIG9iamVjdFxuICogQHBhcmFtIHdhcm5pbmdNaW51dGVzIC0gTWludXRlcyBiZWZvcmUgZXhwaXJhdGlvbiB0byB3YXJuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLmpzb24oeyBkYXRhOiAnLi4uJyB9KTtcbiAqIGFkZFNlc3Npb25UaW1lb3V0V2FybmluZyhyZXF1ZXN0LCByZXNwb25zZSwgNSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFNlc3Npb25UaW1lb3V0V2FybmluZyhcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXG4gIHJlc3BvbnNlOiBOZXh0UmVzcG9uc2UsXG4gIHdhcm5pbmdNaW51dGVzOiBudW1iZXIgPSA1XG4pOiB2b2lkIHtcbiAgaWYgKGlzU2Vzc2lvbkV4cGlyaW5nU29vbihyZXF1ZXN0LCB3YXJuaW5nTWludXRlcykpIHtcbiAgICBjb25zdCBleHBpcmVzQXQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXNlc3Npb24tZXhwaXJlcy1hdCcpIHx8ICcnO1xuICAgIGNvbnN0IGV4cGlyZXNJbiA9IE1hdGgubWF4KFxuICAgICAgMCxcbiAgICAgIE1hdGguZmxvb3IoKG5ldyBEYXRlKGV4cGlyZXNBdCkuZ2V0VGltZSgpIC0gRGF0ZS5ub3coKSkgLyAxMDAwKVxuICAgICk7XG5cbiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnWC1TZXNzaW9uLUV4cGlyZXMtU29vbicsICd0cnVlJyk7XG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ1gtU2Vzc2lvbi1FeHBpcmVzLUluJywgZXhwaXJlc0luLnRvU3RyaW5nKCkpO1xuICB9XG59XG5cbi8qKlxuICogQ29tYmluZSBzZXNzaW9uIHZhbGlkYXRpb24gd2l0aCB0ZW5hbnQgdmFsaWRhdGlvblxuICpcbiAqIFV0aWxpdHkgZnVuY3Rpb24gdG8gYXBwbHkgYm90aCBtaWRkbGV3YXJlcyBpbiBzZXF1ZW5jZS5cbiAqXG4gKiBAcGFyYW0gcmVxdWVzdCAtIE5leHRSZXF1ZXN0IG9iamVjdFxuICogQHJldHVybnMgTmV4dFJlc3BvbnNlIG9yIG51bGwgaWYgYWxsIHZhbGlkYXRpb25zIHBhc3NcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICogICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgdmFsaWRhdGVTZXNzaW9uQW5kVGVuYW50KHJlcXVlc3QpO1xuICogICBpZiAodmFsaWRhdGlvbikgcmV0dXJuIHZhbGlkYXRpb247XG4gKlxuICogICAvLyBCb3RoIHNlc3Npb24gYW5kIHRlbmFudCB2YWxpZGF0ZWRcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVTZXNzaW9uQW5kVGVuYW50KFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdFxuKTogUHJvbWlzZTxOZXh0UmVzcG9uc2UgfCBudWxsPiB7XG4gIC8vIEZpcnN0IHZhbGlkYXRlIHNlc3Npb25cbiAgY29uc3Qgc2Vzc2lvblZhbGlkYXRpb24gPSBhd2FpdCB2YWxpZGF0ZVNlc3Npb24ocmVxdWVzdCk7XG4gIGlmIChzZXNzaW9uVmFsaWRhdGlvbikgcmV0dXJuIHNlc3Npb25WYWxpZGF0aW9uO1xuXG4gIC8vIFRoZW4gdmFsaWRhdGUgdGVuYW50IChpZiBpbXBsZW1lbnRlZClcbiAgY29uc3QgeyB2YWxpZGF0ZVRlbmFudEFjY2VzcyB9ID0gYXdhaXQgaW1wb3J0KCcuL3RlbmFudC12YWxpZGF0aW9uJyk7XG4gIGNvbnN0IHRlbmFudFZhbGlkYXRpb24gPSBhd2FpdCB2YWxpZGF0ZVRlbmFudEFjY2VzcyhyZXF1ZXN0KTtcbiAgaWYgKHRlbmFudFZhbGlkYXRpb24pIHJldHVybiB0ZW5hbnRWYWxpZGF0aW9uO1xuXG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIFNlc3Npb24gaGVhbHRoIGNoZWNrXG4gKlxuICogVmVyaWZpZXMgc2Vzc2lvbiBzeXN0ZW0gaXMgb3BlcmF0aW9uYWwuXG4gKlxuICogQHJldHVybnMgSGVhbHRoIHN0YXR1c1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBoZWFsdGggPSBhd2FpdCBjaGVja1Nlc3Npb25IZWFsdGgoKTtcbiAqIGlmICghaGVhbHRoLmhlYWx0aHkpIHtcbiAqICAgY29uc29sZS5lcnJvcignU2Vzc2lvbiBzeXN0ZW0gdW5oZWFsdGh5OicsIGhlYWx0aC5lcnJvcik7XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrU2Vzc2lvbkhlYWx0aCgpOiBQcm9taXNlPHtcbiAgaGVhbHRoeTogYm9vbGVhbjtcbiAgbGF0ZW5jeTogbnVtYmVyO1xuICBlcnJvcj86IHN0cmluZztcbn0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBtYW5hZ2VyID0gZ2V0U2Vzc2lvbk1hbmFnZXIoKTtcbiAgICBjb25zdCBzdG9yZSA9IG1hbmFnZXIuZ2V0U3RvcmUoKTtcbiAgICByZXR1cm4gYXdhaXQgc3RvcmUuZ2V0SGVhbHRoU3RhdHVzKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgIHJldHVybiB7XG4gICAgICBoZWFsdGh5OiBmYWxzZSxcbiAgICAgIGxhdGVuY3k6IC0xLFxuICAgICAgZXJyb3I6IG1lc3NhZ2VcbiAgICB9O1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7TUFzY2dCQSx5QkFBQTtJQUFBO0lBQUFDLGFBQUEsR0FBQUMsQ0FBQTtJQUFBRCxhQUFBLEdBQUFFLENBQUE7V0FBQUgsd0JBQUE7O01BaUVNSSxtQkFBQTtJQUFBO0lBQUFILGFBQUEsR0FBQUMsQ0FBQTtJQUFBRCxhQUFBLEdBQUFFLENBQUE7V0FBQUMsa0JBQUE7O01BbExOQyxtQkFBQTtJQUFBO0lBQUFKLGFBQUEsR0FBQUMsQ0FBQTtJQUFB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