{"version":3,"names":["cov_imrxed5df","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","inputSourceMap","version","sources","sourcesContent","names","mappings","_coverageSchema","coverage","actualCoverage","GET","POST","request","supabase","_server1","createClient","data","user","error","authError","auth","getUser","_server","NextResponse","json","status","profile","profileError","from","select","eq","id","single","organizationId","organization_id","body","format","contact_id","includes","exportResult","contact","_dataexport","DataExportService","exportContactData","exportUserData","console","log","size_bytes","success","headers","toString","message","Error","supported_formats","max_file_size_bytes","expiry_days","export_includes","legal_basis","response_time"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\app\\api\\gdpr\\data-export\\route.ts"],"sourcesContent":["/**\n * GDPR Data Export API Route\n *\n * Implements Right to Access (GDPR Article 15) - allows users to export\n * all their personal data in machine-readable format.\n *\n * Endpoints:\n * - POST /api/gdpr/data-export - Request data export\n *\n * @module api/gdpr/data-export\n */\n\nimport { NextRequest, NextResponse } from 'next/server';\nimport { createClient } from '@/lib/supabase/server';\nimport { DataExportService } from '@/lib/gdpr/data-export';\nimport type { ExportFormat } from '@/lib/gdpr/types';\n\n/**\n * POST /api/gdpr/data-export\n *\n * Export personal data for authenticated user or specified contact.\n *\n * Request body:\n * - format: 'json' | 'csv' | 'pdf'\n * - include_messages?: boolean\n * - include_contacts?: boolean\n * - include_conversations?: boolean\n * - contact_id?: string (optional - for contact data export)\n *\n * Response:\n * - 200: Export successful with download data\n * - 401: Unauthorized\n * - 403: Forbidden (not allowed to export this data)\n * - 500: Server error\n */\nexport async function POST(request: NextRequest) {\n  try {\n    const supabase = await createClient();\n\n    // Get authenticated user\n    const {\n      data: { user },\n      error: authError\n    } = await supabase.auth.getUser();\n\n    if (authError || !user) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      );\n    }\n\n    // Get user profile\n    const { data: profile, error: profileError } = await supabase\n      .from('profiles')\n      .select('*, organization:organizations(*)')\n      .eq('id', user.id)\n      .single();\n\n    if (profileError || !profile) {\n      return NextResponse.json(\n        { error: 'Profile not found' },\n        { status: 404 }\n      );\n    }\n\n    const organizationId = profile.organization_id;\n\n    if (!organizationId) {\n      return NextResponse.json(\n        { error: 'Organization not found' },\n        { status: 404 }\n      );\n    }\n\n    // Parse request body\n    const body = await request.json();\n    const {\n      format = 'json',\n      contact_id\n    }: {\n      format?: ExportFormat;\n      contact_id?: string;\n    } = body;\n\n    // Validate format\n    if (!['json', 'csv', 'pdf'].includes(format)) {\n      return NextResponse.json(\n        { error: 'Invalid format. Must be json, csv, or pdf' },\n        { status: 400 }\n      );\n    }\n\n    let exportResult;\n\n    // Export contact data if contact_id provided\n    if (contact_id) {\n      // Verify user has access to this contact\n      const { data: contact } = await supabase\n        .from('contacts')\n        .select('id')\n        .eq('id', contact_id)\n        .eq('organization_id', organizationId)\n        .single();\n\n      if (!contact) {\n        return NextResponse.json(\n          { error: 'Contact not found or access denied' },\n          { status: 403 }\n        );\n      }\n\n      exportResult = await DataExportService.exportContactData(\n        contact_id,\n        organizationId,\n        format\n      );\n    } else {\n      // Export user's own data\n      exportResult = await DataExportService.exportUserData(\n        user.id,\n        organizationId,\n        format\n      );\n    }\n\n    console.log(\n      `[API][GDPR] User ${user.id} exported data (format: ${format}, size: ${exportResult.size_bytes} bytes)`\n    );\n\n    return NextResponse.json(\n      {\n        success: true,\n        data: exportResult\n      },\n      {\n        status: 200,\n        headers: {\n          'Content-Type': 'application/json',\n          'X-Export-Size': exportResult.size_bytes.toString(),\n          'X-Export-Format': format\n        }\n      }\n    );\n  } catch (error) {\n    console.error('[API][GDPR] Data export error:', error);\n\n    return NextResponse.json(\n      {\n        error: 'Failed to export data',\n        message: error instanceof Error ? error.message : 'Unknown error'\n      },\n      { status: 500 }\n    );\n  }\n}\n\n/**\n * GET /api/gdpr/data-export\n *\n * Get information about data export capabilities and requirements.\n */\nexport async function GET() {\n  return NextResponse.json({\n    supported_formats: ['json', 'csv', 'pdf'],\n    max_file_size_bytes: 50 * 1024 * 1024, // 50 MB\n    expiry_days: 7,\n    export_includes: [\n      'user_profile',\n      'contacts',\n      'conversations',\n      'messages',\n      'settings'\n    ],\n    legal_basis: 'GDPR Article 15 - Right to Access',\n    response_time: '24 hours maximum'\n  });\n}\n"],"mappings":"AAAA;;;;;;;;;;GAUC;;AAAA;AAAA,SAAAA,cAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF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","ignoreList":[]}