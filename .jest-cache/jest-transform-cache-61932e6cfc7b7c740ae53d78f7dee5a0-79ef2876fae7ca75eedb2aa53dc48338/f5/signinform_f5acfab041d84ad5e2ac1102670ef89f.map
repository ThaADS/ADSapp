{"version":3,"names":["cov_d4wxyru5w","actualCoverage","s","SignInForm","f","email","setEmail","_react","useState","password","setPassword","isLoading","setIsLoading","error","setError","router","_navigation","useRouter","handleSubmit","e","preventDefault","supabase","_client","createClient","data","auth","signInWithPassword","b","message","user","profile","from","select","eq","id","single","is_super_admin","push","organization_id","refresh","err","_jsxruntime","jsxs","className","onSubmit","jsx","type","name","value","htmlFor","autoComplete","required","placeholder","onChange","target","href","disabled"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\components\\auth\\signin-form.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { createClient } from '@/lib/supabase/client'\n\nexport function SignInForm() {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const router = useRouter()\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setIsLoading(true)\n    setError(null)\n\n    const supabase = createClient()\n\n    try {\n      const { data, error } = await supabase.auth.signInWithPassword({\n        email,\n        password,\n      })\n\n      if (error) {\n        setError(error.message)\n      } else if (data.user) {\n        // Fetch user profile to determine redirect path\n        const { data: profile } = await supabase\n          .from('profiles')\n          .select('is_super_admin, organization_id')\n          .eq('id', data.user.id)\n          .single()\n\n        // Redirect based on user role\n        if (profile?.is_super_admin) {\n          router.push('/admin')\n        } else if (profile?.organization_id) {\n          router.push('/dashboard')\n        } else {\n          router.push('/onboarding')\n        }\n        router.refresh()\n      }\n    } catch (err) {\n      setError('An unexpected error occurred')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\n      <input type=\"hidden\" name=\"remember\" value=\"true\" />\n      <div className=\"rounded-md shadow-sm -space-y-px\">\n        <div>\n          <label htmlFor=\"email-address\" className=\"sr-only\">\n            Email address\n          </label>\n          <input\n            id=\"email-address\"\n            name=\"email\"\n            type=\"email\"\n            autoComplete=\"email\"\n            required\n            className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm\"\n            placeholder=\"Email address\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n        </div>\n        <div>\n          <label htmlFor=\"password\" className=\"sr-only\">\n            Password\n          </label>\n          <input\n            id=\"password\"\n            name=\"password\"\n            type=\"password\"\n            autoComplete=\"current-password\"\n            required\n            className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm\"\n            placeholder=\"Password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"rounded-md bg-red-50 p-4\">\n          <div className=\"flex\">\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-red-800\">\n                Authentication Error\n              </h3>\n              <div className=\"mt-2 text-sm text-red-700\">{error}</div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center\">\n          <input\n            id=\"remember-me\"\n            name=\"remember-me\"\n            type=\"checkbox\"\n            className=\"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded\"\n          />\n          <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-900\">\n            Remember me\n          </label>\n        </div>\n\n        <div className=\"text-sm\">\n          <a href=\"#\" className=\"font-medium text-green-600 hover:text-green-500\">\n            Forgot your password?\n          </a>\n        </div>\n      </div>\n\n      <div>\n        <button\n          type=\"submit\"\n          disabled={isLoading}\n          className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {isLoading ? (\n            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n          ) : (\n            'Sign in'\n          )}\n        </button>\n      </div>\n    </form>\n  )\n}"],"mappings":"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","ignoreList":[]}