f80f887060e047a1e354b13a8f46bf85
/**
 * Admin Refund Details API (S-001)
 * ==================================
 * Super admin endpoint for viewing specific refund details.
 *
 * GET /api/admin/billing/refunds/[id] - Get refund details
 *
 * Security: Super admin only
 */"use strict";

/* istanbul ignore next */
function cov_jh9h0qdr3() {
  var path = "C:\\Ai Projecten\\ADSapp\\src\\app\\api\\admin\\billing\\refunds\\[id]\\route.ts";
  var hash = "03c92b8913b74057f6cfae28248e314249c695ca";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Ai Projecten\\ADSapp\\src\\app\\api\\admin\\billing\\refunds\\[id]\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 10,
          column: 0
        },
        end: {
          line: 12,
          column: 3
        }
      },
      "1": {
        start: {
          line: 13,
          column: 0
        },
        end: {
          line: 18,
          column: 3
        }
      },
      "2": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 19
        }
      },
      "3": {
        start: {
          line: 19,
          column: 16
        },
        end: {
          line: 19,
          column: 38
        }
      },
      "4": {
        start: {
          line: 20,
          column: 17
        },
        end: {
          line: 20,
          column: 65
        }
      },
      "5": {
        start: {
          line: 21,
          column: 17
        },
        end: {
          line: 21,
          column: 65
        }
      },
      "6": {
        start: {
          line: 23,
          column: 4
        },
        end: {
          line: 70,
          column: 5
        }
      },
      "7": {
        start: {
          line: 24,
          column: 25
        },
        end: {
          line: 24,
          column: 59
        }
      },
      "8": {
        start: {
          line: 25,
          column: 23
        },
        end: {
          line: 25,
          column: 35
        }
      },
      "9": {
        start: {
          line: 27,
          column: 53
        },
        end: {
          line: 27,
          column: 82
        }
      },
      "10": {
        start: {
          line: 28,
          column: 8
        },
        end: {
          line: 34,
          column: 9
        }
      },
      "11": {
        start: {
          line: 29,
          column: 12
        },
        end: {
          line: 33,
          column: 15
        }
      },
      "12": {
        start: {
          line: 36,
          column: 55
        },
        end: {
          line: 36,
          column: 128
        }
      },
      "13": {
        start: {
          line: 37,
          column: 8
        },
        end: {
          line: 43,
          column: 9
        }
      },
      "14": {
        start: {
          line: 38,
          column: 12
        },
        end: {
          line: 42,
          column: 15
        }
      },
      "15": {
        start: {
          line: 45,
          column: 30
        },
        end: {
          line: 45,
          column: 58
        }
      },
      "16": {
        start: {
          line: 46,
          column: 23
        },
        end: {
          line: 46,
          column: 56
        }
      },
      "17": {
        start: {
          line: 47,
          column: 8
        },
        end: {
          line: 53,
          column: 9
        }
      },
      "18": {
        start: {
          line: 48,
          column: 12
        },
        end: {
          line: 52,
          column: 15
        }
      },
      "19": {
        start: {
          line: 55,
          column: 24
        },
        end: {
          line: 55,
          column: 84
        }
      },
      "20": {
        start: {
          line: 56,
          column: 8
        },
        end: {
          line: 60,
          column: 11
        }
      },
      "21": {
        start: {
          line: 62,
          column: 20
        },
        end: {
          line: 62,
          column: 25
        }
      },
      "22": {
        start: {
          line: 63,
          column: 8
        },
        end: {
          line: 63,
          column: 52
        }
      },
      "23": {
        start: {
          line: 64,
          column: 8
        },
        end: {
          line: 69,
          column: 11
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 15,
            column: 9
          },
          end: {
            line: 15,
            column: 10
          }
        },
        loc: {
          start: {
            line: 15,
            column: 20
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 15
      },
      "1": {
        name: "GET",
        decl: {
          start: {
            line: 22,
            column: 15
          },
          end: {
            line: 22,
            column: 18
          }
        },
        loc: {
          start: {
            line: 22,
            column: 40
          },
          end: {
            line: 71,
            column: 1
          }
        },
        line: 22
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 28,
            column: 8
          },
          end: {
            line: 34,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 28,
            column: 8
          },
          end: {
            line: 34,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 28
      },
      "1": {
        loc: {
          start: {
            line: 28,
            column: 12
          },
          end: {
            line: 28,
            column: 30
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 28,
            column: 12
          },
          end: {
            line: 28,
            column: 21
          }
        }, {
          start: {
            line: 28,
            column: 25
          },
          end: {
            line: 28,
            column: 30
          }
        }],
        line: 28
      },
      "2": {
        loc: {
          start: {
            line: 37,
            column: 8
          },
          end: {
            line: 43,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 37,
            column: 8
          },
          end: {
            line: 43,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 37
      },
      "3": {
        loc: {
          start: {
            line: 37,
            column: 12
          },
          end: {
            line: 37,
            column: 59
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 37,
            column: 12
          },
          end: {
            line: 37,
            column: 24
          }
        }, {
          start: {
            line: 37,
            column: 28
          },
          end: {
            line: 37,
            column: 59
          }
        }],
        line: 37
      },
      "4": {
        loc: {
          start: {
            line: 47,
            column: 8
          },
          end: {
            line: 53,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 47,
            column: 8
          },
          end: {
            line: 53,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 47
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0
    },
    f: {
      "0": 0,
      "1": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Ai Projecten\\ADSapp\\src\\app\\api\\admin\\billing\\refunds\\[id]\\route.ts"],
      sourcesContent: ["/**\n * Admin Refund Details API (S-001)\n * ==================================\n * Super admin endpoint for viewing specific refund details.\n *\n * GET /api/admin/billing/refunds/[id] - Get refund details\n *\n * Security: Super admin only\n */\n\nimport { NextRequest, NextResponse } from 'next/server';\nimport { createClient } from '@/lib/supabase/server';\nimport { RefundManager } from '@/lib/billing/refunds';\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const supabase = await createClient();\n    const { id } = await params;\n\n    // 1. Authenticate user\n    const { data: { user }, error: authError } = await supabase.auth.getUser();\n    if (authError || !user) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      );\n    }\n\n    // 2. Verify super admin role\n    const { data: profile, error: profileError } = await supabase\n      .from('profiles')\n      .select('role')\n      .eq('id', user.id)\n      .single();\n\n    if (profileError || profile?.role !== 'super_admin') {\n      return NextResponse.json(\n        { error: 'Forbidden: Super admin access required' },\n        { status: 403 }\n      );\n    }\n\n    // 3. Get refund details\n    const refundManager = new RefundManager();\n    const refund = await refundManager.getRefund(id);\n\n    if (!refund) {\n      return NextResponse.json(\n        { error: 'Refund not found' },\n        { status: 404 }\n      );\n    }\n\n    // 4. Get refund history\n    const history = await refundManager.getRefundHistory(refund.organization_id);\n\n    return NextResponse.json({\n      success: true,\n      refund,\n      history,\n    });\n  } catch (error) {\n    const err = error as Error;\n    console.error('Get refund API error:', err);\n\n    return NextResponse.json(\n      {\n        error: 'Internal server error',\n        message: err.message,\n      },\n      { status: 500 }\n    );\n  }\n}\n"],
      names: ["GET", "request", "params", "supabase", "createClient", "id", "data", "user", "error", "authError", "auth", "getUser", "NextResponse", "json", "status", "profile", "profileError", "from", "select", "eq", "single", "role", "refundManager", "RefundManager", "refund", "getRefund", "history", "getRefundHistory", "organization_id", "success", "err", "console", "message"],
      mappings: "AAAA;;;;;;;;CAQC;;;;+BAMqBA;;;eAAAA;;;wBAJoB;yBACb;yBACC;AAEvB,eAAeA,IACpBC,OAAoB,EACpB,EAAEC,MAAM,EAAuC;IAE/C,IAAI;QACF,MAAMC,WAAW,MAAMC,IAAAA,qBAAY;QACnC,MAAM,EAAEC,EAAE,EAAE,GAAG,MAAMH;QAErB,uBAAuB;QACvB,MAAM,EAAEI,MAAM,EAAEC,IAAI,EAAE,EAAEC,OAAOC,SAAS,EAAE,GAAG,MAAMN,SAASO,IAAI,CAACC,OAAO;QACxE,IAAIF,aAAa,CAACF,MAAM;YACtB,OAAOK,oBAAY,CAACC,IAAI,CACtB;gBAAEL,OAAO;YAAe,GACxB;gBAAEM,QAAQ;YAAI;QAElB;QAEA,6BAA6B;QAC7B,MAAM,EAAER,MAAMS,OAAO,EAAEP,OAAOQ,YAAY,EAAE,GAAG,MAAMb,SAClDc,IAAI,CAAC,YACLC,MAAM,CAAC,QACPC,EAAE,CAAC,MAAMZ,KAAKF,EAAE,EAChBe,MAAM;QAET,IAAIJ,gBAAgBD,SAASM,SAAS,eAAe;YACnD,OAAOT,oBAAY,CAACC,IAAI,CACtB;gBAAEL,OAAO;YAAyC,GAClD;gBAAEM,QAAQ;YAAI;QAElB;QAEA,wBAAwB;QACxB,MAAMQ,gBAAgB,IAAIC,sBAAa;QACvC,MAAMC,SAAS,MAAMF,cAAcG,SAAS,CAACpB;QAE7C,IAAI,CAACmB,QAAQ;YACX,OAAOZ,oBAAY,CAACC,IAAI,CACtB;gBAAEL,OAAO;YAAmB,GAC5B;gBAAEM,QAAQ;YAAI;QAElB;QAEA,wBAAwB;QACxB,MAAMY,UAAU,MAAMJ,cAAcK,gBAAgB,CAACH,OAAOI,eAAe;QAE3E,OAAOhB,oBAAY,CAACC,IAAI,CAAC;YACvBgB,SAAS;YACTL;YACAE;QACF;IACF,EAAE,OAAOlB,OAAO;QACd,MAAMsB,MAAMtB;QACZuB,QAAQvB,KAAK,CAAC,yBAAyBsB;QAEvC,OAAOlB,oBAAY,CAACC,IAAI,CACtB;YACEL,OAAO;YACPwB,SAASF,IAAIE,OAAO;QACtB,GACA;YAAElB,QAAQ;QAAI;IAElB;AACF"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "03c92b8913b74057f6cfae28248e314249c695ca"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_jh9h0qdr3 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_jh9h0qdr3();
cov_jh9h0qdr3().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_jh9h0qdr3().s[1]++;
Object.defineProperty(exports, "GET", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_jh9h0qdr3().f[0]++;
    cov_jh9h0qdr3().s[2]++;
    return GET;
  }
});
const _server =
/* istanbul ignore next */
(cov_jh9h0qdr3().s[3]++, require("next/server"));
const _server1 =
/* istanbul ignore next */
(cov_jh9h0qdr3().s[4]++, require("../../../../../../lib/supabase/server"));
const _refunds =
/* istanbul ignore next */
(cov_jh9h0qdr3().s[5]++, require("../../../../../../lib/billing/refunds"));
async function GET(request, {
  params
}) {
  /* istanbul ignore next */
  cov_jh9h0qdr3().f[1]++;
  cov_jh9h0qdr3().s[6]++;
  try {
    const supabase =
    /* istanbul ignore next */
    (cov_jh9h0qdr3().s[7]++, await (0, _server1.createClient)());
    const {
      id
    } =
    /* istanbul ignore next */
    (cov_jh9h0qdr3().s[8]++, await params);
    // 1. Authenticate user
    const {
      data: {
        user
      },
      error: authError
    } =
    /* istanbul ignore next */
    (cov_jh9h0qdr3().s[9]++, await supabase.auth.getUser());
    /* istanbul ignore next */
    cov_jh9h0qdr3().s[10]++;
    if (
    /* istanbul ignore next */
    (cov_jh9h0qdr3().b[1][0]++, authError) ||
    /* istanbul ignore next */
    (cov_jh9h0qdr3().b[1][1]++, !user)) {
      /* istanbul ignore next */
      cov_jh9h0qdr3().b[0][0]++;
      cov_jh9h0qdr3().s[11]++;
      return _server.NextResponse.json({
        error: 'Unauthorized'
      }, {
        status: 401
      });
    } else
    /* istanbul ignore next */
    {
      cov_jh9h0qdr3().b[0][1]++;
    }
    // 2. Verify super admin role
    const {
      data: profile,
      error: profileError
    } =
    /* istanbul ignore next */
    (cov_jh9h0qdr3().s[12]++, await supabase.from('profiles').select('role').eq('id', user.id).single());
    /* istanbul ignore next */
    cov_jh9h0qdr3().s[13]++;
    if (
    /* istanbul ignore next */
    (cov_jh9h0qdr3().b[3][0]++, profileError) ||
    /* istanbul ignore next */
    (cov_jh9h0qdr3().b[3][1]++, profile?.role !== 'super_admin')) {
      /* istanbul ignore next */
      cov_jh9h0qdr3().b[2][0]++;
      cov_jh9h0qdr3().s[14]++;
      return _server.NextResponse.json({
        error: 'Forbidden: Super admin access required'
      }, {
        status: 403
      });
    } else
    /* istanbul ignore next */
    {
      cov_jh9h0qdr3().b[2][1]++;
    }
    // 3. Get refund details
    const refundManager =
    /* istanbul ignore next */
    (cov_jh9h0qdr3().s[15]++, new _refunds.RefundManager());
    const refund =
    /* istanbul ignore next */
    (cov_jh9h0qdr3().s[16]++, await refundManager.getRefund(id));
    /* istanbul ignore next */
    cov_jh9h0qdr3().s[17]++;
    if (!refund) {
      /* istanbul ignore next */
      cov_jh9h0qdr3().b[4][0]++;
      cov_jh9h0qdr3().s[18]++;
      return _server.NextResponse.json({
        error: 'Refund not found'
      }, {
        status: 404
      });
    } else
    /* istanbul ignore next */
    {
      cov_jh9h0qdr3().b[4][1]++;
    }
    // 4. Get refund history
    const history =
    /* istanbul ignore next */
    (cov_jh9h0qdr3().s[19]++, await refundManager.getRefundHistory(refund.organization_id));
    /* istanbul ignore next */
    cov_jh9h0qdr3().s[20]++;
    return _server.NextResponse.json({
      success: true,
      refund,
      history
    });
  } catch (error) {
    const err =
    /* istanbul ignore next */
    (cov_jh9h0qdr3().s[21]++, error);
    /* istanbul ignore next */
    cov_jh9h0qdr3().s[22]++;
    console.error('Get refund API error:', err);
    /* istanbul ignore next */
    cov_jh9h0qdr3().s[23]++;
    return _server.NextResponse.json({
      error: 'Internal server error',
      message: err.message
    }, {
      status: 500
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3Zfamg5aDBxZHIzIiwicGF0aCIsImhhc2giLCJnbG9iYWwiLCJGdW5jdGlvbiIsImdjdiIsImNvdmVyYWdlRGF0YSIsInN0YXRlbWVudE1hcCIsInN0YXJ0IiwibGluZSIsImNvbHVtbiIsImVuZCIsImZuTWFwIiwibmFtZSIsImRlY2wiLCJsb2MiLCJicmFuY2hNYXAiLCJ0eXBlIiwibG9jYXRpb25zIiwidW5kZWZpbmVkIiwicyIsImYiLCJiIiwiaW5wdXRTb3VyY2VNYXAiLCJ2ZXJzaW9uIiwic291cmNlcyIsInNvdXJjZXNDb250ZW50IiwibmFtZXMiLCJtYXBwaW5ncyIsIl9jb3ZlcmFnZVNjaGVtYSIsImNvdmVyYWdlIiwiYWN0dWFsQ292ZXJhZ2UiLCJHRVQiLCJyZXF1ZXN0IiwicGFyYW1zIiwic3VwYWJhc2UiLCJfc2VydmVyMSIsImNyZWF0ZUNsaWVudCIsImlkIiwiZGF0YSIsInVzZXIiLCJlcnJvciIsImF1dGhFcnJvciIsImF1dGgiLCJnZXRVc2VyIiwiX3NlcnZlciIsIk5leHRSZXNwb25zZSIsImpzb24iLCJzdGF0dXMiLCJwcm9maWxlIiwicHJvZmlsZUVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwicm9sZSIsInJlZnVuZE1hbmFnZXIiLCJfcmVmdW5kcyIsIlJlZnVuZE1hbmFnZXIiLCJyZWZ1bmQiLCJnZXRSZWZ1bmQiLCJoaXN0b3J5IiwiZ2V0UmVmdW5kSGlzdG9yeSIsIm9yZ2FuaXphdGlvbl9pZCIsInN1Y2Nlc3MiLCJlcnIiLCJjb25zb2xlIiwibWVzc2FnZSJdLCJzb3VyY2VzIjpbIkM6XFxBaSBQcm9qZWN0ZW5cXEFEU2FwcFxcc3JjXFxhcHBcXGFwaVxcYWRtaW5cXGJpbGxpbmdcXHJlZnVuZHNcXFtpZF1cXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQWRtaW4gUmVmdW5kIERldGFpbHMgQVBJIChTLTAwMSlcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFN1cGVyIGFkbWluIGVuZHBvaW50IGZvciB2aWV3aW5nIHNwZWNpZmljIHJlZnVuZCBkZXRhaWxzLlxuICpcbiAqIEdFVCAvYXBpL2FkbWluL2JpbGxpbmcvcmVmdW5kcy9baWRdIC0gR2V0IHJlZnVuZCBkZXRhaWxzXG4gKlxuICogU2VjdXJpdHk6IFN1cGVyIGFkbWluIG9ubHlcbiAqL1xuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2Uvc2VydmVyJztcbmltcG9ydCB7IFJlZnVuZE1hbmFnZXIgfSBmcm9tICdAL2xpYi9iaWxsaW5nL3JlZnVuZHMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IFByb21pc2U8eyBpZDogc3RyaW5nIH0+IH1cbikge1xuICB0cnkge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG4gICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgcGFyYW1zO1xuXG4gICAgLy8gMS4gQXV0aGVudGljYXRlIHVzZXJcbiAgICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvcjogYXV0aEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcbiAgICBpZiAoYXV0aEVycm9yIHx8ICF1c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyAyLiBWZXJpZnkgc3VwZXIgYWRtaW4gcm9sZVxuICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3I6IHByb2ZpbGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwcm9maWxlcycpXG4gICAgICAuc2VsZWN0KCdyb2xlJylcbiAgICAgIC5lcSgnaWQnLCB1c2VyLmlkKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKHByb2ZpbGVFcnJvciB8fCBwcm9maWxlPy5yb2xlICE9PSAnc3VwZXJfYWRtaW4nKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdGb3JiaWRkZW46IFN1cGVyIGFkbWluIGFjY2VzcyByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIDMuIEdldCByZWZ1bmQgZGV0YWlsc1xuICAgIGNvbnN0IHJlZnVuZE1hbmFnZXIgPSBuZXcgUmVmdW5kTWFuYWdlcigpO1xuICAgIGNvbnN0IHJlZnVuZCA9IGF3YWl0IHJlZnVuZE1hbmFnZXIuZ2V0UmVmdW5kKGlkKTtcblxuICAgIGlmICghcmVmdW5kKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdSZWZ1bmQgbm90IGZvdW5kJyB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gNC4gR2V0IHJlZnVuZCBoaXN0b3J5XG4gICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IHJlZnVuZE1hbmFnZXIuZ2V0UmVmdW5kSGlzdG9yeShyZWZ1bmQub3JnYW5pemF0aW9uX2lkKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgcmVmdW5kLFxuICAgICAgaGlzdG9yeSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBlcnIgPSBlcnJvciBhcyBFcnJvcjtcbiAgICBjb25zb2xlLmVycm9yKCdHZXQgcmVmdW5kIEFQSSBlcnJvcjonLCBlcnIpO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXG4gICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0dBUUM7O0FBQUE7QUFBQSxTQUFBQSxjQUFBO0VBQUEsSUFBQUMsSUFBQTtFQUFBLElBQUFDLElBQUE7RUFBQSxJQUFBQyxNQUFBLE9BQUFDLFFBQUE7RUFBQSxJQUFBQyxHQUFBO0VBQUEsSUFBQUMsWUFBQTtJQUFBTCxJQUFBO0lBQUFNLFlBQUE7TUFBQTtRQUFBQyxLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7SUFBQTtJQUFBRSxLQUFBO01BQUE7UUFBQUMsSUFBQTtRQUFBQyxJQUFBO1VBQUFOLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFLLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQUQsSUFBQTtNQUFBO01BQUE7UUFBQUksSUFBQTtRQUFBQyxJQUFBO1VBQUFOLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFLLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQUQsSUFBQTtNQUFBO0lBQUE7SUFBQU8sU0FBQTtNQUFBO1FBQUFELEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQU8sSUFBQTtRQUFBQyxTQUFBO1VBQUFWLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1VBQUFGLEtBQUE7WUFBQUMsSUFBQSxFQUFBVSxTQUFBO1lBQUFULE1BQUEsRUFBQVM7VUFBQTtVQUFBUixHQUFBO1lBQUFGLElBQUEsRUFBQVUsU0FBQTtZQUFBVCxNQUFBLEVBQUFTO1VBQUE7UUFBQTtRQUFBVixJQUFBO01BQUE7TUFBQTtRQUFBTSxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFPLElBQUE7UUFBQUMsU0FBQTtVQUFBVixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtVQUFBRixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBRCxJQUFBO01BQUE7TUFBQTtRQUFBTSxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFPLElBQUE7UUFBQUMsU0FBQTtVQUFBVixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtVQUFBRixLQUFBO1lBQUFDLElBQUEsRUFBQVUsU0FBQTtZQUFBVCxNQUFBLEVBQUFTO1VBQUE7VUFBQVIsR0FBQTtZQUFBRixJQUFBLEVBQUFVLFNBQUE7WUFBQVQsTUFBQSxFQUFBUztVQUFBO1FBQUE7UUFBQVYsSUFBQTtNQUFBO01BQUE7UUFBQU0sR0FBQTtVQUFBUCxLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBTyxJQUFBO1FBQUFDLFNBQUE7VUFBQVYsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7VUFBQUYsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQUQsSUFBQTtNQUFBO01BQUE7UUFBQU0sR0FBQTtVQUFBUCxLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBTyxJQUFBO1FBQUFDLFNBQUE7VUFBQVYsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7VUFBQUYsS0FBQTtZQUFBQyxJQUFBLEVBQUFVLFNBQUE7WUFBQVQsTUFBQSxFQUFBUztVQUFBO1VBQUFSLEdBQUE7WUFBQUYsSUFBQSxFQUFBVSxTQUFBO1lBQUFULE1BQUEsRUFBQVM7VUFBQTtRQUFBO1FBQUFWLElBQUE7TUFBQTtJQUFBO0lBQUFXLENBQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFB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