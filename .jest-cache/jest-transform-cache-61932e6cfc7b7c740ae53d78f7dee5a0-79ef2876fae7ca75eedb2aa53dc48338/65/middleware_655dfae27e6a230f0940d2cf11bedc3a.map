{"version":3,"names":["cov_14qk6rsl2n","actualCoverage","s","updateSession","request","f","supabaseResponse","_server","NextResponse","next","supabase","_ssr","createServerClient","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","cookies","getAll","setAll","cookiesToSet","forEach","name","value","options","set","data","user","auth","getUser","b","nextUrl","pathname","startsWith","url","clone","redirect"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\lib\\supabase\\middleware.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\nimport { NextResponse, type NextRequest } from 'next/server'\n\nexport async function updateSession(request: NextRequest) {\n  let supabaseResponse = NextResponse.next({\n    request,\n  })\n\n  const supabase = createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return request.cookies.getAll()\n        },\n        setAll(cookiesToSet) {\n          cookiesToSet.forEach(({ name, value, options }) => request.cookies.set(name, value))\n          supabaseResponse = NextResponse.next({\n            request,\n          })\n          cookiesToSet.forEach(({ name, value, options }) =>\n            supabaseResponse.cookies.set(name, value, options)\n          )\n        },\n      },\n    }\n  )\n\n  // IMPORTANT: Avoid writing any logic between createServerClient and\n  // supabase.auth.getUser(). A simple mistake could make it very hard to debug\n  // issues with users being randomly logged out.\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  if (\n    !user &&\n    !request.nextUrl.pathname.startsWith('/auth') &&\n    !request.nextUrl.pathname.startsWith('/api') &&\n    request.nextUrl.pathname !== '/' &&\n    !request.nextUrl.pathname.startsWith('/_next')\n  ) {\n    // no user, potentially respond by redirecting the user to the login page\n    const url = request.nextUrl.clone()\n    url.pathname = '/auth/signin'\n    return NextResponse.redirect(url)\n  }\n\n  // IMPORTANT: You *must* return the supabaseResponse object as it is. If you're\n  // creating a new response object with NextResponse.next() make sure to:\n  // 1. Pass the request in it, like so: NextResponse.next({ request })\n  // 2. Copy over the cookies, like so: response.cookies.setAll(supabaseResponse.cookies.getAll())\n\n  return supabaseResponse\n}"],"mappings":"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","ignoreList":[]}