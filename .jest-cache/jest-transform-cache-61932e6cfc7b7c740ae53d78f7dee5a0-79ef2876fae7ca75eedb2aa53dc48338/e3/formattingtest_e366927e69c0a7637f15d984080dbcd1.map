{"version":3,"sources":["C:\\Ai Projecten\\ADSapp\\tests\\unit\\utils\\formatting.test.ts"],"sourcesContent":["/**\n * Formatting Utility Tests\n *\n * Tests for phone number formatting and date/time formatting with timezone support.\n *\n * @module tests/unit/utils/formatting\n */\n\ndescribe('Formatting Utilities', () => {\n  describe('Test 17: Phone Number Formatting', () => {\n    /**\n     * Format phone number to international format\n     */\n    function formatPhoneNumber(phone: string): string {\n      // Remove all non-digit characters\n      const digits = phone.replace(/\\D/g, '');\n\n      // Check if it starts with country code\n      if (digits.startsWith('1') && digits.length === 11) {\n        // US/Canada format: +1 (XXX) XXX-XXXX\n        return `+1 (${digits.slice(1, 4)}) ${digits.slice(4, 7)}-${digits.slice(7)}`;\n      } else if (digits.startsWith('44') && digits.length >= 11) {\n        // UK format: +44 XX XXXX XXXX\n        return `+44 ${digits.slice(2, 4)} ${digits.slice(4, 8)} ${digits.slice(8)}`;\n      } else if (digits.startsWith('31') && digits.length >= 11) {\n        // Netherlands format: +31 X XXXX XXXX\n        return `+31 ${digits.slice(2, 3)} ${digits.slice(3, 7)} ${digits.slice(7)}`;\n      } else if (digits.length >= 10) {\n        // Generic international format: +XX XXX XXX XXXX\n        return `+${digits}`;\n      }\n\n      return phone; // Return original if can't format\n    }\n\n    it('should format US phone number to international format', () => {\n      // Arrange\n      const usPhone = '12345678900';\n\n      // Act\n      const formatted = formatPhoneNumber(usPhone);\n\n      // Assert\n      expect(formatted).toBe('+1 (234) 567-8900');\n    });\n\n    it('should handle phone number with formatting characters', () => {\n      // Arrange\n      const phoneWithFormatting = '+1 (234) 567-8900';\n\n      // Act\n      const formatted = formatPhoneNumber(phoneWithFormatting);\n\n      // Assert\n      expect(formatted).toBe('+1 (234) 567-8900');\n      expect(formatted).toContain('+1');\n      expect(formatted).toMatch(/\\(\\d{3}\\)/);\n    });\n\n    it('should format UK phone number correctly', () => {\n      // Arrange\n      const ukPhone = '442079460958';\n\n      // Act\n      const formatted = formatPhoneNumber(ukPhone);\n\n      // Assert\n      expect(formatted).toBe('+44 20 7946 0958');\n      expect(formatted).toStartWith('+44');\n    });\n\n    it('should format Netherlands phone number correctly', () => {\n      // Arrange\n      const nlPhone = '31612345678';\n\n      // Act\n      const formatted = formatPhoneNumber(nlPhone);\n\n      // Assert\n      expect(formatted).toBe('+31 6 1234 5678');\n      expect(formatted).toStartWith('+31');\n    });\n\n    it('should handle phone number without country code', () => {\n      // Arrange\n      const phoneWithoutCountry = '1234567890';\n\n      // Act\n      const formatted = formatPhoneNumber(phoneWithoutCountry);\n\n      // Assert\n      expect(formatted).toBeDefined();\n      expect(formatted.replace(/\\D/g, '')).toBe('1234567890');\n    });\n\n    it('should remove special characters and format', () => {\n      // Arrange\n      const phoneWithSpecialChars = '+1-234-567-8900';\n\n      // Act\n      const formatted = formatPhoneNumber(phoneWithSpecialChars);\n\n      // Assert\n      expect(formatted).toBe('+1 (234) 567-8900');\n      expect(formatted).not.toContain('-');\n    });\n\n    it('should handle empty string', () => {\n      // Arrange\n      const emptyPhone = '';\n\n      // Act\n      const formatted = formatPhoneNumber(emptyPhone);\n\n      // Assert\n      expect(formatted).toBe('');\n    });\n\n    it('should handle invalid phone number gracefully', () => {\n      // Arrange\n      const invalidPhone = 'not-a-phone';\n\n      // Act\n      const formatted = formatPhoneNumber(invalidPhone);\n\n      // Assert\n      expect(formatted).toBe('not-a-phone'); // Returns original if can't format\n    });\n  });\n\n  describe('Test 18: Date/Time Formatting with Timezone', () => {\n    /**\n     * Format date with timezone support\n     */\n    function formatDateWithTimezone(\n      date: Date | string,\n      timezone: string = 'UTC',\n      format: 'short' | 'long' | 'relative' = 'short'\n    ): string {\n      const dateObj = typeof date === 'string' ? new Date(date) : date;\n\n      if (isNaN(dateObj.getTime())) {\n        return 'Invalid Date';\n      }\n\n      if (format === 'relative') {\n        return formatRelativeTime(dateObj);\n      }\n\n      const options: Intl.DateTimeFormatOptions = {\n        timeZone: timezone,\n        year: 'numeric',\n        month: format === 'long' ? 'long' : '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: format === 'long' ? '2-digit' : undefined,\n        hour12: false,\n      };\n\n      return new Intl.DateTimeFormat('en-US', options).format(dateObj);\n    }\n\n    /**\n     * Format relative time (e.g., \"2 hours ago\")\n     */\n    function formatRelativeTime(date: Date): string {\n      const now = new Date();\n      const diffMs = now.getTime() - date.getTime();\n      const diffSeconds = Math.floor(diffMs / 1000);\n      const diffMinutes = Math.floor(diffSeconds / 60);\n      const diffHours = Math.floor(diffMinutes / 60);\n      const diffDays = Math.floor(diffHours / 24);\n\n      if (diffSeconds < 60) {\n        return `${diffSeconds} seconds ago`;\n      } else if (diffMinutes < 60) {\n        return `${diffMinutes} minutes ago`;\n      } else if (diffHours < 24) {\n        return `${diffHours} hours ago`;\n      } else if (diffDays < 30) {\n        return `${diffDays} days ago`;\n      } else {\n        const diffMonths = Math.floor(diffDays / 30);\n        return `${diffMonths} months ago`;\n      }\n    }\n\n    it('should format date in UTC timezone', () => {\n      // Arrange\n      const date = new Date('2024-01-15T10:30:00Z');\n\n      // Act\n      const formatted = formatDateWithTimezone(date, 'UTC', 'short');\n\n      // Assert\n      expect(formatted).toBeDefined();\n      expect(formatted).toContain('2024');\n      expect(formatted).toContain('01');\n      expect(formatted).toContain('15');\n    });\n\n    it('should format date in specific timezone (America/New_York)', () => {\n      // Arrange\n      const date = new Date('2024-01-15T10:30:00Z');\n\n      // Act\n      const formatted = formatDateWithTimezone(date, 'America/New_York', 'short');\n\n      // Assert\n      expect(formatted).toBeDefined();\n      expect(formatted).toContain('2024');\n      // Date should be adjusted for timezone\n    });\n\n    it('should format date in long format', () => {\n      // Arrange\n      const date = new Date('2024-01-15T10:30:45Z');\n\n      // Act\n      const formatted = formatDateWithTimezone(date, 'UTC', 'long');\n\n      // Assert\n      expect(formatted).toBeDefined();\n      expect(formatted).toContain('January');\n      expect(formatted).toContain('15');\n      expect(formatted).toContain('2024');\n      expect(formatted).toContain('10');\n      expect(formatted).toContain('30');\n      expect(formatted).toContain('45');\n    });\n\n    it('should format relative time for recent dates', () => {\n      // Arrange\n      const now = new Date();\n      const fiveMinutesAgo = new Date(now.getTime() - 5 * 60 * 1000);\n\n      // Act\n      const formatted = formatDateWithTimezone(fiveMinutesAgo, 'UTC', 'relative');\n\n      // Assert\n      expect(formatted).toBeDefined();\n      expect(formatted).toContain('minutes ago');\n    });\n\n    it('should format relative time for hours ago', () => {\n      // Arrange\n      const now = new Date();\n      const twoHoursAgo = new Date(now.getTime() - 2 * 60 * 60 * 1000);\n\n      // Act\n      const formatted = formatDateWithTimezone(twoHoursAgo, 'UTC', 'relative');\n\n      // Assert\n      expect(formatted).toBeDefined();\n      expect(formatted).toContain('hours ago');\n    });\n\n    it('should format relative time for days ago', () => {\n      // Arrange\n      const now = new Date();\n      const threeDaysAgo = new Date(now.getTime() - 3 * 24 * 60 * 60 * 1000);\n\n      // Act\n      const formatted = formatDateWithTimezone(threeDaysAgo, 'UTC', 'relative');\n\n      // Assert\n      expect(formatted).toBeDefined();\n      expect(formatted).toContain('days ago');\n    });\n\n    it('should handle date string input', () => {\n      // Arrange\n      const dateString = '2024-01-15T10:30:00Z';\n\n      // Act\n      const formatted = formatDateWithTimezone(dateString, 'UTC', 'short');\n\n      // Assert\n      expect(formatted).toBeDefined();\n      expect(formatted).not.toBe('Invalid Date');\n    });\n\n    it('should return \"Invalid Date\" for invalid date', () => {\n      // Arrange\n      const invalidDate = 'not-a-date';\n\n      // Act\n      const formatted = formatDateWithTimezone(invalidDate, 'UTC', 'short');\n\n      // Assert\n      expect(formatted).toBe('Invalid Date');\n    });\n\n    it('should handle Asia/Tokyo timezone', () => {\n      // Arrange\n      const date = new Date('2024-01-15T10:30:00Z');\n\n      // Act\n      const formatted = formatDateWithTimezone(date, 'Asia/Tokyo', 'short');\n\n      // Assert\n      expect(formatted).toBeDefined();\n      expect(formatted).toContain('2024');\n      // Time should be adjusted for Tokyo timezone (UTC+9)\n    });\n\n    it('should handle Europe/Amsterdam timezone', () => {\n      // Arrange\n      const date = new Date('2024-01-15T10:30:00Z');\n\n      // Act\n      const formatted = formatDateWithTimezone(date, 'Europe/Amsterdam', 'short');\n\n      // Assert\n      expect(formatted).toBeDefined();\n      expect(formatted).toContain('2024');\n      // Time should be adjusted for Amsterdam timezone\n    });\n  });\n});\n"],"names":["describe","formatPhoneNumber","phone","digits","replace","startsWith","length","slice","it","usPhone","formatted","expect","toBe","phoneWithFormatting","toContain","toMatch","ukPhone","toStartWith","nlPhone","phoneWithoutCountry","toBeDefined","phoneWithSpecialChars","not","emptyPhone","invalidPhone","formatDateWithTimezone","date","timezone","format","dateObj","Date","isNaN","getTime","formatRelativeTime","options","timeZone","year","month","day","hour","minute","second","undefined","hour12","Intl","DateTimeFormat","now","diffMs","diffSeconds","Math","floor","diffMinutes","diffHours","diffDays","diffMonths","fiveMinutesAgo","twoHoursAgo","threeDaysAgo","dateString","invalidDate"],"mappings":"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"}