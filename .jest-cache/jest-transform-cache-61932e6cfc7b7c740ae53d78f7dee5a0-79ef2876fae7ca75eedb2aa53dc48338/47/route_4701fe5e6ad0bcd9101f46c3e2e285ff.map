{"version":3,"names":["cov_9k4azu4tc","actualCoverage","s","POST","request","f","organizationId","headers","get","planId","b","json","_server","NextResponse","error","status","_server1","SUBSCRIPTION_PLANS","lifecycleManager","_subscriptionlifecycle","SubscriptionLifecycleManager","subscription","reactivateSubscription","success","id","console","Error","message"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\app\\api\\billing\\reactivate\\route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\nimport { SubscriptionLifecycleManager } from '@/lib/billing/subscription-lifecycle'\nimport { SUBSCRIPTION_PLANS } from '@/lib/stripe/server'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const organizationId = request.headers.get('X-Organization-ID')\n    const { planId = 'professional' } = await request.json()\n\n    if (!organizationId) {\n      return NextResponse.json(\n        { error: 'Organization ID is required' },\n        { status: 400 }\n      )\n    }\n\n    if (!SUBSCRIPTION_PLANS[planId as keyof typeof SUBSCRIPTION_PLANS]) {\n      return NextResponse.json(\n        { error: 'Invalid plan ID' },\n        { status: 400 }\n      )\n    }\n\n    const lifecycleManager = new SubscriptionLifecycleManager()\n\n    const subscription = await lifecycleManager.reactivateSubscription(\n      organizationId,\n      planId\n    )\n\n    return NextResponse.json({\n      success: true,\n      subscription: {\n        id: subscription.id,\n        status: subscription.status,\n        planId,\n      },\n    })\n  } catch (error) {\n    console.error('Reactivate API error:', error)\n    return NextResponse.json(\n      { error: error instanceof Error ? error.message : 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}"],"mappings":"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","ignoreList":[]}