{"version":3,"names":["cov_5mnui7zlw","actualCoverage","s","POST","request","f","user","_apiutils","requireAuthenticatedUser","profile","getUserOrganization","id","body","json","content","variables","whatsappTemplate","b","_server","NextResponse","error","status","validationResults","isValid","errors","warnings","suggestions","variableValidation","detected","missing","unused","whatsappValidation","length","push","trim","detectedVariables","extractVariablesFromContent","declaredVariables","detectedVar","isDeclared","some","declared","name","declaredVar","isUsed","validateWhatsAppTemplate","qualitySuggestions","generateQualitySuggestions","createSuccessResponse","console","createErrorResponse","whatsappMatches","matchAll","match","position","index","type","simpleMatches","isWhatsApp","v","validation","test","language","category","validCategories","includes","join","components","Array","isArray","hasBodyComponent","c","component","entries","validComponentTypes","text","format","buttons","bodyComponent","find","toUpperCase","variableCount"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\app\\api\\templates\\validate\\route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { requireAuthenticatedUser, getUserOrganization, createErrorResponse, createSuccessResponse } from '@/lib/api-utils'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const user = await requireAuthenticatedUser()\n    const profile = await getUserOrganization(user.id)\n\n    const body = await request.json()\n    const { content, variables, whatsappTemplate } = body\n\n    if (!content) {\n      return NextResponse.json(\n        { error: 'Content is required for validation' },\n        { status: 400 }\n      )\n    }\n\n    const validationResults = {\n      isValid: true,\n      errors: [],\n      warnings: [],\n      suggestions: [],\n      variableValidation: {\n        detected: [],\n        missing: [],\n        unused: []\n      },\n      whatsappValidation: null\n    }\n\n    // Basic content validation\n    if (content.length > 1024) {\n      validationResults.errors.push('Template content exceeds 1024 character limit')\n      validationResults.isValid = false\n    }\n\n    if (content.trim().length === 0) {\n      validationResults.errors.push('Template content cannot be empty')\n      validationResults.isValid = false\n    }\n\n    // Variable validation\n    const detectedVariables = extractVariablesFromContent(content)\n    const declaredVariables = variables || []\n\n    validationResults.variableValidation.detected = detectedVariables\n\n    // Check for missing variable declarations\n    for (const detectedVar of detectedVariables) {\n      const isDeclared = declaredVariables.some(declared => declared.name === detectedVar.name)\n      if (!isDeclared) {\n        validationResults.variableValidation.missing.push(detectedVar)\n        validationResults.warnings.push(`Variable '${detectedVar.name}' is used but not declared`)\n      }\n    }\n\n    // Check for unused variable declarations\n    for (const declaredVar of declaredVariables) {\n      const isUsed = detectedVariables.some(detected => detected.name === declaredVar.name)\n      if (!isUsed) {\n        validationResults.variableValidation.unused.push(declaredVar)\n        validationResults.warnings.push(`Variable '${declaredVar.name}' is declared but not used`)\n      }\n    }\n\n    // WhatsApp template validation\n    if (whatsappTemplate) {\n      validationResults.whatsappValidation = validateWhatsAppTemplate(whatsappTemplate)\n\n      if (validationResults.whatsappValidation.errors.length > 0) {\n        validationResults.isValid = false\n        validationResults.errors.push(...validationResults.whatsappValidation.errors)\n      }\n\n      validationResults.warnings.push(...validationResults.whatsappValidation.warnings)\n      validationResults.suggestions.push(...validationResults.whatsappValidation.suggestions)\n    }\n\n    // Content quality suggestions\n    const qualitySuggestions = generateQualitySuggestions(content)\n    validationResults.suggestions.push(...qualitySuggestions)\n\n    return createSuccessResponse(validationResults)\n\n  } catch (error) {\n    console.error('Template validation error:', error)\n    return createErrorResponse(error)\n  }\n}\n\nfunction extractVariablesFromContent(content: string): Array<{ name: string; position: number; type: 'simple' | 'whatsapp' }> {\n  const variables = []\n\n  // Match {{variable}} pattern (WhatsApp style)\n  const whatsappMatches = content.matchAll(/\\{\\{(\\w+)\\}\\}/g)\n  for (const match of whatsappMatches) {\n    variables.push({\n      name: match[1],\n      position: match.index,\n      type: 'whatsapp'\n    })\n  }\n\n  // Match {variable} pattern (simple style)\n  const simpleMatches = content.matchAll(/\\{(\\w+)\\}/g)\n  for (const match of simpleMatches) {\n    // Skip if already captured as WhatsApp variable\n    const isWhatsApp = variables.some(v =>\n      v.position <= match.index &&\n      v.position + v.name.length + 4 >= match.index + match[0].length\n    )\n\n    if (!isWhatsApp) {\n      variables.push({\n        name: match[1],\n        position: match.index,\n        type: 'simple'\n      })\n    }\n  }\n\n  return variables\n}\n\nfunction validateWhatsAppTemplate(whatsappTemplate: any): {\n  isValid: boolean\n  errors: string[]\n  warnings: string[]\n  suggestions: string[]\n} {\n  const validation = {\n    isValid: true,\n    errors: [],\n    warnings: [],\n    suggestions: []\n  }\n\n  // Required fields\n  if (!whatsappTemplate.name) {\n    validation.errors.push('WhatsApp template name is required')\n    validation.isValid = false\n  } else {\n    // Name validation\n    if (!/^[a-z0-9_]+$/.test(whatsappTemplate.name)) {\n      validation.errors.push('WhatsApp template name must contain only lowercase letters, numbers, and underscores')\n      validation.isValid = false\n    }\n\n    if (whatsappTemplate.name.length > 512) {\n      validation.errors.push('WhatsApp template name must be 512 characters or less')\n      validation.isValid = false\n    }\n  }\n\n  if (!whatsappTemplate.language) {\n    validation.errors.push('WhatsApp template language is required')\n    validation.isValid = false\n  }\n\n  if (!whatsappTemplate.category) {\n    validation.errors.push('WhatsApp template category is required')\n    validation.isValid = false\n  } else {\n    const validCategories = ['AUTHENTICATION', 'MARKETING', 'UTILITY']\n    if (!validCategories.includes(whatsappTemplate.category)) {\n      validation.errors.push(`WhatsApp template category must be one of: ${validCategories.join(', ')}`)\n      validation.isValid = false\n    }\n  }\n\n  // Components validation\n  if (!whatsappTemplate.components || !Array.isArray(whatsappTemplate.components)) {\n    validation.errors.push('WhatsApp template components are required')\n    validation.isValid = false\n  } else {\n    const hasBodyComponent = whatsappTemplate.components.some(c => c.type === 'BODY')\n    if (!hasBodyComponent) {\n      validation.errors.push('WhatsApp template must have at least one BODY component')\n      validation.isValid = false\n    }\n\n    // Validate each component\n    for (const [index, component] of whatsappTemplate.components.entries()) {\n      if (!component.type) {\n        validation.errors.push(`Component ${index + 1}: type is required`)\n        validation.isValid = false\n        continue\n      }\n\n      const validComponentTypes = ['HEADER', 'BODY', 'FOOTER', 'BUTTONS']\n      if (!validComponentTypes.includes(component.type)) {\n        validation.errors.push(`Component ${index + 1}: invalid type '${component.type}'`)\n        validation.isValid = false\n      }\n\n      // Type-specific validations\n      switch (component.type) {\n        case 'BODY':\n          if (!component.text) {\n            validation.errors.push(`Component ${index + 1}: BODY component must have text`)\n            validation.isValid = false\n          } else if (component.text.length > 1024) {\n            validation.errors.push(`Component ${index + 1}: BODY text exceeds 1024 character limit`)\n            validation.isValid = false\n          }\n          break\n\n        case 'HEADER':\n          if (component.format === 'TEXT' && !component.text) {\n            validation.errors.push(`Component ${index + 1}: TEXT HEADER must have text`)\n            validation.isValid = false\n          } else if (component.format === 'TEXT' && component.text.length > 60) {\n            validation.errors.push(`Component ${index + 1}: HEADER text exceeds 60 character limit`)\n            validation.isValid = false\n          }\n          break\n\n        case 'FOOTER':\n          if (!component.text) {\n            validation.errors.push(`Component ${index + 1}: FOOTER component must have text`)\n            validation.isValid = false\n          } else if (component.text.length > 60) {\n            validation.errors.push(`Component ${index + 1}: FOOTER text exceeds 60 character limit`)\n            validation.isValid = false\n          }\n          break\n\n        case 'BUTTONS':\n          if (!component.buttons || !Array.isArray(component.buttons)) {\n            validation.errors.push(`Component ${index + 1}: BUTTONS component must have buttons array`)\n            validation.isValid = false\n          } else if (component.buttons.length > 3) {\n            validation.errors.push(`Component ${index + 1}: Maximum 3 buttons allowed`)\n            validation.isValid = false\n          }\n          break\n      }\n    }\n  }\n\n  // Category-specific validations\n  if (whatsappTemplate.category === 'MARKETING') {\n    validation.warnings.push('Marketing templates require pre-approval and may take longer to approve')\n  }\n\n  if (whatsappTemplate.category === 'AUTHENTICATION') {\n    validation.suggestions.push('Authentication templates should include clear instructions for the user')\n  }\n\n  // General suggestions\n  if (whatsappTemplate.components) {\n    const bodyComponent = whatsappTemplate.components.find(c => c.type === 'BODY')\n    if (bodyComponent && bodyComponent.text) {\n      if (bodyComponent.text.length < 20) {\n        validation.suggestions.push('Consider adding more context to make the message clearer')\n      }\n\n      if (!/[.!?]$/.test(bodyComponent.text.trim())) {\n        validation.suggestions.push('Consider ending the message with proper punctuation')\n      }\n    }\n  }\n\n  return validation\n}\n\nfunction generateQualitySuggestions(content: string): string[] {\n  const suggestions = []\n\n  // Length suggestions\n  if (content.length < 20) {\n    suggestions.push('Consider adding more context to make the message clearer')\n  }\n\n  if (content.length > 800) {\n    suggestions.push('Consider shortening the message for better readability')\n  }\n\n  // Formatting suggestions\n  if (!/[.!?]$/.test(content.trim())) {\n    suggestions.push('Consider ending the message with proper punctuation')\n  }\n\n  if (content.includes('  ')) {\n    suggestions.push('Remove extra spaces for cleaner formatting')\n  }\n\n  // Content suggestions\n  if (!/\\b(please|thank|welcome|hello|hi)\\b/i.test(content)) {\n    suggestions.push('Consider adding polite language to improve user experience')\n  }\n\n  if (content.toUpperCase() === content && content.length > 10) {\n    suggestions.push('Avoid using ALL CAPS as it may appear aggressive')\n  }\n\n  // Variable usage suggestions\n  const variableCount = (content.match(/\\{[\\w]+\\}/g) || []).length\n  if (variableCount > 5) {\n    suggestions.push('Consider reducing the number of variables for simpler template management')\n  }\n\n  return suggestions\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}