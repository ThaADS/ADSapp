{"version":3,"names":["cov_hl3rpb5f6","actualCoverage","s","EnhancedMessageList","MediaMessage","message","onDownload","f","playing","setPlaying","_react","useState","loading","setLoading","audioRef","useRef","videoRef","handlePlayAudio","current","b","pause","play","handlePlayVideo","handleDownload","media","id","error","console","formatFileSize","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","message_type","_jsxruntime","jsxs","className","url","jsx","src","thumbnailUrl","alt","onClick","window","open","disabled","_lucidereact","Download","Image","content","ref","controls","onPlay","onPause","onEnded","Video","Pause","Play","fileSize","FileText","filename","MapPin","conversationId","messages","currentUserId","onMessageRead","onLoadMore","hasMore","messagesEndRef","mediaHandler","_mediahandler","WhatsAppMediaHandler","useEffect","scrollToBottom","markVisibleMessagesAsRead","scrollIntoView","behavior","unreadMessages","filter","is_read","sender_type","forEach","handleMediaDownload","mediaId","find","m","link","document","createElement","href","download","body","appendChild","click","removeChild","formatTime","timestamp","date","Date","toLocaleTimeString","hour","minute","getDeliveryStatus","read_at","CheckCheck","delivered_at","Check","groupMessagesByDate","groups","currentDate","currentGroup","messageDate","created_at","toDateString","length","push","formatDateHeader","dateString","today","yesterday","getTime","toLocaleDateString","messageGroups","map","group","groupIndex","messageIndex","isFromCurrentUser","sender_id","isSystem","sender","avatar_url","full_name","charAt"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\components\\inbox\\enhanced-message-list.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport { Download, Play, Pause, FileText, MapPin, Clock, Check, CheckCheck, Image as ImageIcon, Video, Mic } from 'lucide-react'\nimport { WhatsAppMediaHandler } from '@/lib/whatsapp/media-handler'\n\ninterface Message {\n  id: string\n  conversation_id: string\n  whatsapp_message_id?: string\n  sender_type: 'contact' | 'agent' | 'system'\n  sender_id?: string\n  sender?: {\n    id: string\n    full_name: string\n    avatar_url?: string\n  }\n  content: string\n  message_type: 'text' | 'image' | 'document' | 'audio' | 'video' | 'location' | 'system'\n  media_url?: string\n  media_mime_type?: string\n  is_read: boolean\n  delivered_at?: string\n  read_at?: string\n  created_at: string\n  media?: {\n    id: string\n    filename: string\n    fileSize: number\n    url: string\n    thumbnailUrl?: string\n    mimeType: string\n  }\n}\n\ninterface MessageListProps {\n  conversationId: string\n  messages: Message[]\n  currentUserId: string\n  onMessageRead?: (messageId: string) => void\n  onLoadMore?: () => void\n  hasMore?: boolean\n  loading?: boolean\n}\n\ninterface MediaMessageProps {\n  message: Message\n  onDownload?: (mediaId: string) => void\n}\n\nfunction MediaMessage({ message, onDownload }: MediaMessageProps) {\n  const [playing, setPlaying] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const audioRef = useRef<HTMLAudioElement>(null)\n  const videoRef = useRef<HTMLVideoElement>(null)\n\n  const handlePlayAudio = () => {\n    if (!audioRef.current) return\n\n    if (playing) {\n      audioRef.current.pause()\n      setPlaying(false)\n    } else {\n      audioRef.current.play()\n      setPlaying(true)\n    }\n  }\n\n  const handlePlayVideo = () => {\n    if (!videoRef.current) return\n\n    if (playing) {\n      videoRef.current.pause()\n      setPlaying(false)\n    } else {\n      videoRef.current.play()\n      setPlaying(true)\n    }\n  }\n\n  const handleDownload = async () => {\n    if (!message.media || !onDownload) return\n\n    setLoading(true)\n    try {\n      await onDownload(message.media.id)\n    } catch (error) {\n      console.error('Download failed:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 Bytes'\n    const k = 1024\n    const sizes = ['Bytes', 'KB', 'MB', 'GB']\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n  }\n\n  switch (message.message_type) {\n    case 'image':\n      return (\n        <div className=\"max-w-sm\">\n          {message.media?.url ? (\n            <div className=\"relative group\">\n              <img\n                src={message.media.thumbnailUrl || message.media.url}\n                alt=\"Shared image\"\n                className=\"rounded-lg max-h-64 w-auto cursor-pointer\"\n                onClick={() => window.open(message.media.url, '_blank')}\n              />\n              <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 rounded-lg transition-all duration-200 flex items-center justify-center\">\n                <button\n                  onClick={handleDownload}\n                  disabled={loading}\n                  className=\"opacity-0 group-hover:opacity-100 bg-white bg-opacity-90 text-gray-800 p-2 rounded-full transition-opacity duration-200\"\n                >\n                  <Download className=\"w-4 h-4\" />\n                </button>\n              </div>\n            </div>\n          ) : (\n            <div className=\"flex items-center space-x-3 p-3 bg-gray-100 rounded-lg\">\n              <ImageIcon className=\"w-8 h-8 text-gray-400\" />\n              <div>\n                <p className=\"text-sm font-medium text-gray-900\">Image</p>\n                <p className=\"text-xs text-gray-500\">Unable to load image</p>\n              </div>\n            </div>\n          )}\n          {message.content && (\n            <p className=\"mt-2 text-sm text-gray-700\">{message.content}</p>\n          )}\n        </div>\n      )\n\n    case 'video':\n      return (\n        <div className=\"max-w-sm\">\n          {message.media?.url ? (\n            <div className=\"relative group\">\n              <video\n                ref={videoRef}\n                src={message.media.url}\n                className=\"rounded-lg max-h-64 w-auto\"\n                controls\n                onPlay={() => setPlaying(true)}\n                onPause={() => setPlaying(false)}\n                onEnded={() => setPlaying(false)}\n              />\n              <div className=\"absolute top-2 right-2 bg-black bg-opacity-50 text-white p-1 rounded\">\n                <Video className=\"w-4 h-4\" />\n              </div>\n            </div>\n          ) : (\n            <div className=\"flex items-center space-x-3 p-3 bg-gray-100 rounded-lg\">\n              <Video className=\"w-8 h-8 text-gray-400\" />\n              <div>\n                <p className=\"text-sm font-medium text-gray-900\">Video</p>\n                <p className=\"text-xs text-gray-500\">Unable to load video</p>\n              </div>\n            </div>\n          )}\n          {message.content && (\n            <p className=\"mt-2 text-sm text-gray-700\">{message.content}</p>\n          )}\n        </div>\n      )\n\n    case 'audio':\n      return (\n        <div className=\"max-w-xs\">\n          <div className=\"flex items-center space-x-3 p-3 bg-gray-100 rounded-lg\">\n            <button\n              onClick={handlePlayAudio}\n              className=\"flex-shrink-0 w-10 h-10 bg-blue-500 text-white rounded-full flex items-center justify-center hover:bg-blue-600 transition-colors\"\n            >\n              {playing ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\n            </button>\n            <div className=\"flex-1\">\n              <div className=\"flex items-center justify-between\">\n                <p className=\"text-sm font-medium text-gray-900\">Voice Message</p>\n                <button\n                  onClick={handleDownload}\n                  disabled={loading}\n                  className=\"text-gray-500 hover:text-gray-700\"\n                >\n                  <Download className=\"w-4 h-4\" />\n                </button>\n              </div>\n              {message.media && (\n                <p className=\"text-xs text-gray-500\">{formatFileSize(message.media.fileSize)}</p>\n              )}\n            </div>\n          </div>\n          {message.media?.url && (\n            <audio\n              ref={audioRef}\n              src={message.media.url}\n              onEnded={() => setPlaying(false)}\n              className=\"hidden\"\n            />\n          )}\n          {message.content && (\n            <p className=\"mt-2 text-sm text-gray-700\">{message.content}</p>\n          )}\n        </div>\n      )\n\n    case 'document':\n      return (\n        <div className=\"max-w-sm\">\n          <div className=\"flex items-center space-x-3 p-3 bg-gray-100 rounded-lg\">\n            <FileText className=\"w-8 h-8 text-gray-400 flex-shrink-0\" />\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-sm font-medium text-gray-900 truncate\">\n                {message.media?.filename || 'Document'}\n              </p>\n              {message.media && (\n                <p className=\"text-xs text-gray-500\">{formatFileSize(message.media.fileSize)}</p>\n              )}\n            </div>\n            <button\n              onClick={handleDownload}\n              disabled={loading}\n              className=\"flex-shrink-0 text-gray-500 hover:text-gray-700\"\n            >\n              <Download className=\"w-4 h-4\" />\n            </button>\n          </div>\n          {message.content && (\n            <p className=\"mt-2 text-sm text-gray-700\">{message.content}</p>\n          )}\n        </div>\n      )\n\n    case 'location':\n      return (\n        <div className=\"max-w-sm\">\n          <div className=\"flex items-center space-x-3 p-3 bg-gray-100 rounded-lg\">\n            <MapPin className=\"w-8 h-8 text-red-500 flex-shrink-0\" />\n            <div>\n              <p className=\"text-sm font-medium text-gray-900\">Location</p>\n              <p className=\"text-xs text-gray-500\">Tap to view on map</p>\n            </div>\n          </div>\n          {message.content && (\n            <p className=\"mt-2 text-sm text-gray-700\">{message.content}</p>\n          )}\n        </div>\n      )\n\n    default:\n      return <p className=\"text-sm text-gray-700\">{message.content}</p>\n  }\n}\n\nexport default function EnhancedMessageList({\n  conversationId,\n  messages,\n  currentUserId,\n  onMessageRead,\n  onLoadMore,\n  hasMore,\n  loading\n}: MessageListProps) {\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n  const mediaHandler = new WhatsAppMediaHandler('', '') // Would be initialized with proper tokens\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages])\n\n  useEffect(() => {\n    // Mark unread messages as read when they come into view\n    markVisibleMessagesAsRead()\n  }, [messages, onMessageRead])\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }\n\n  const markVisibleMessagesAsRead = () => {\n    const unreadMessages = messages.filter(\n      message => !message.is_read && message.sender_type === 'contact'\n    )\n\n    unreadMessages.forEach(message => {\n      if (onMessageRead) {\n        onMessageRead(message.id)\n      }\n    })\n  }\n\n  const handleMediaDownload = async (mediaId: string) => {\n    try {\n      // Create download link\n      const message = messages.find(m => m.media?.id === mediaId)\n      if (message?.media?.url) {\n        const link = document.createElement('a')\n        link.href = message.media.url\n        link.download = message.media.filename\n        document.body.appendChild(link)\n        link.click()\n        document.body.removeChild(link)\n      }\n    } catch (error) {\n      console.error('Download failed:', error)\n    }\n  }\n\n  const formatTime = (timestamp: string) => {\n    const date = new Date(timestamp)\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n  }\n\n  const getDeliveryStatus = (message: Message) => {\n    if (message.sender_type !== 'agent') return null\n\n    if (message.read_at) {\n      return <CheckCheck className=\"w-4 h-4 text-blue-500\" />\n    } else if (message.delivered_at) {\n      return <CheckCheck className=\"w-4 h-4 text-gray-400\" />\n    } else {\n      return <Check className=\"w-4 h-4 text-gray-400\" />\n    }\n  }\n\n  const groupMessagesByDate = (messages: Message[]) => {\n    const groups: { date: string; messages: Message[] }[] = []\n    let currentDate = ''\n    let currentGroup: Message[] = []\n\n    messages.forEach(message => {\n      const messageDate = new Date(message.created_at).toDateString()\n\n      if (messageDate !== currentDate) {\n        if (currentGroup.length > 0) {\n          groups.push({ date: currentDate, messages: currentGroup })\n        }\n        currentDate = messageDate\n        currentGroup = [message]\n      } else {\n        currentGroup.push(message)\n      }\n    })\n\n    if (currentGroup.length > 0) {\n      groups.push({ date: currentDate, messages: currentGroup })\n    }\n\n    return groups\n  }\n\n  const formatDateHeader = (dateString: string) => {\n    const date = new Date(dateString)\n    const today = new Date()\n    const yesterday = new Date(today.getTime() - 24 * 60 * 60 * 1000)\n\n    if (date.toDateString() === today.toDateString()) {\n      return 'Today'\n    } else if (date.toDateString() === yesterday.toDateString()) {\n      return 'Yesterday'\n    } else {\n      return date.toLocaleDateString()\n    }\n  }\n\n  const messageGroups = groupMessagesByDate(messages)\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      {/* Load More Button */}\n      {hasMore && (\n        <div className=\"p-4 text-center border-b border-gray-200\">\n          <button\n            onClick={onLoadMore}\n            disabled={loading}\n            className=\"px-4 py-2 text-sm text-blue-600 hover:text-blue-800 disabled:opacity-50\"\n          >\n            {loading ? 'Loading...' : 'Load older messages'}\n          </button>\n        </div>\n      )}\n\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {messageGroups.length === 0 ? (\n          <div className=\"text-center text-gray-500 py-8\">\n            <p className=\"text-lg font-medium mb-2\">No messages yet</p>\n            <p className=\"text-sm\">Start the conversation by sending a message</p>\n          </div>\n        ) : (\n          messageGroups.map((group, groupIndex) => (\n            <div key={groupIndex}>\n              {/* Date Header */}\n              <div className=\"text-center mb-4\">\n                <span className=\"bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full\">\n                  {formatDateHeader(group.date)}\n                </span>\n              </div>\n\n              {/* Messages in this date group */}\n              <div className=\"space-y-2\">\n                {group.messages.map((message, messageIndex) => {\n                  const isFromCurrentUser = message.sender_type === 'agent' && message.sender_id === currentUserId\n                  const isSystem = message.sender_type === 'system'\n\n                  if (isSystem) {\n                    return (\n                      <div key={message.id} className=\"text-center\">\n                        <span className=\"bg-yellow-100 text-yellow-800 text-xs px-3 py-1 rounded-full\">\n                          {message.content}\n                        </span>\n                      </div>\n                    )\n                  }\n\n                  return (\n                    <div\n                      key={message.id}\n                      className={`flex ${isFromCurrentUser ? 'justify-end' : 'justify-start'}`}\n                    >\n                      <div className={`max-w-[70%] ${isFromCurrentUser ? 'order-2' : 'order-1'}`}>\n                        {/* Sender Avatar (for agent messages from others) */}\n                        {!isFromCurrentUser && message.sender_type === 'agent' && (\n                          <div className=\"flex items-center space-x-2 mb-1\">\n                            {message.sender?.avatar_url ? (\n                              <img\n                                src={message.sender.avatar_url}\n                                alt={message.sender.full_name}\n                                className=\"w-6 h-6 rounded-full\"\n                              />\n                            ) : (\n                              <div className=\"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center\">\n                                <span className=\"text-xs font-medium text-white\">\n                                  {message.sender?.full_name?.charAt(0) || 'A'}\n                                </span>\n                              </div>\n                            )}\n                            <span className=\"text-xs text-gray-500\">\n                              {message.sender?.full_name || 'Agent'}\n                            </span>\n                          </div>\n                        )}\n\n                        {/* Message Bubble */}\n                        <div\n                          className={`rounded-lg px-3 py-2 ${\n                            isFromCurrentUser\n                              ? 'bg-blue-500 text-white'\n                              : 'bg-gray-100 text-gray-900'\n                          }`}\n                        >\n                          <MediaMessage\n                            message={message}\n                            onDownload={handleMediaDownload}\n                          />\n                        </div>\n\n                        {/* Message Status and Time */}\n                        <div\n                          className={`flex items-center mt-1 space-x-1 ${\n                            isFromCurrentUser ? 'justify-end' : 'justify-start'\n                          }`}\n                        >\n                          <span className=\"text-xs text-gray-500\">\n                            {formatTime(message.created_at)}\n                          </span>\n                          {isFromCurrentUser && getDeliveryStatus(message)}\n                        </div>\n                      </div>\n                    </div>\n                  )\n                })}\n              </div>\n            </div>\n          ))\n        )}\n\n        {/* Scroll anchor */}\n        <div ref={messagesEndRef} />\n      </div>\n    </div>\n  )\n}"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAkDS;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAAAA,aAAA,GAAAE,CAAA;;;;;;+BAiNT;;;;;;WAAwBC,mBAAA;;;;;;;;iCAjQoB;;;iCACsE;;;iCAC7E;AA8CrC,SAASC,aAAa;EAAEC,OAAO;EAAEC;AAAU,CAAqB;EAAA;EAAAN,aAAA,GAAAO,CAAA;EAC9D,MAAM,CAACC,OAAA,EAASC,UAAA,CAAW;EAAA;EAAA,CAAAT,aAAA,GAAAE,CAAA,OAAG,IAAAQ,MAAA,CAAAC,QAAQ,EAAC;EACvC,MAAM,CAACC,OAAA,EAASC,UAAA,CAAW;EAAA;EAAA,CAAAb,aAAA,GAAAE,CAAA,OAAG,IAAAQ,MAAA,CAAAC,QAAQ,EAAC;EACvC,MAAMG,QAAA;EAAA;EAAA,CAAAd,aAAA,GAAAE,CAAA,OAAW,IAAAQ,MAAA,CAAAK,MAAM,EAAmB;EAC1C,MAAMC,QAAA;EAAA;EAAA,CAAAhB,aAAA,GAAAE,CAAA,QAAW,IAAAQ,MAAA,CAAAK,MAAM,EAAmB;EAAA;EAAAf,aAAA,GAAAE,CAAA;EAE1C,MAAMe,eAAA,GAAkBA,CAAA;IAAA;IAAAjB,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAE,CAAA;IACtB,IAAI,CAACY,QAAA,CAASI,OAAO,EAAE;MAAA;MAAAlB,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MAAA;IAAA;IAAA;IAAA;MAAAF,aAAA,GAAAmB,CAAA;IAAA;IAAAnB,aAAA,GAAAE,CAAA;IAEvB,IAAIM,OAAA,EAAS;MAAA;MAAAR,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MACXY,QAAA,CAASI,OAAO,CAACE,KAAK;MAAA;MAAApB,aAAA,GAAAE,CAAA;MACtBO,UAAA,CAAW;IACb,OAAO;MAAA;MAAAT,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MACLY,QAAA,CAASI,OAAO,CAACG,IAAI;MAAA;MAAArB,aAAA,GAAAE,CAAA;MACrBO,UAAA,CAAW;IACb;EACF;EAAA;EAAAT,aAAA,GAAAE,CAAA;EAEA,MAAMoB,eAAA,GAAkBA,CAAA;IAAA;IAAAtB,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAE,CAAA;IACtB,IAAI,CAACc,QAAA,CAASE,OAAO,EAAE;MAAA;MAAAlB,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MAAA;IAAA;IAAA;IAAA;MAAAF,aAAA,GAAAmB,CAAA;IAAA;IAAAnB,aAAA,GAAAE,CAAA;IAEvB,IAAIM,OAAA,EAAS;MAAA;MAAAR,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MACXc,QAAA,CAASE,OAAO,CAACE,KAAK;MAAA;MAAApB,aAAA,GAAAE,CAAA;MACtBO,UAAA,CAAW;IACb,OAAO;MAAA;MAAAT,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MACLc,QAAA,CAASE,OAAO,CAACG,IAAI;MAAA;MAAArB,aAAA,GAAAE,CAAA;MACrBO,UAAA,CAAW;IACb;EACF;EAAA;EAAAT,aAAA,GAAAE,CAAA;EAEA,MAAMqB,cAAA,GAAiB,MAAAA,CAAA;IAAA;IAAAvB,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAE,CAAA;IACrB;IAAI;IAAA,CAAAF,aAAA,GAAAmB,CAAA,WAACd,OAAA,CAAQmB,KAAK;IAAA;IAAA,CAAAxB,aAAA,GAAAmB,CAAA,UAAI,CAACb,UAAA,GAAY;MAAA;MAAAN,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MAAA;IAAA;IAAA;IAAA;MAAAF,aAAA,GAAAmB,CAAA;IAAA;IAAAnB,aAAA,GAAAE,CAAA;IAEnCW,UAAA,CAAW;IAAA;IAAAb,aAAA,GAAAE,CAAA;IACX,IAAI;MAAA;MAAAF,aAAA,GAAAE,CAAA;MACF,MAAMI,UAAA,CAAWD,OAAA,CAAQmB,KAAK,CAACC,EAAE;IACnC,EAAE,OAAOC,KAAA,EAAO;MAAA;MAAA1B,aAAA,GAAAE,CAAA;MACdyB,OAAA,CAAQD,KAAK,CAAC,oBAAoBA,KAAA;IACpC,UAAU;MAAA;MAAA1B,aAAA,GAAAE,CAAA;MACRW,UAAA,CAAW;IACb;EACF;EAAA;EAAAb,aAAA,GAAAE,CAAA;EAEA,MAAM0B,cAAA,GAAkBC,KAAA;IAAA;IAAA7B,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAE,CAAA;IACtB,IAAI2B,KAAA,KAAU,GAAG;MAAA;MAAA7B,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MAAA,OAAO;IAAA;IAAA;IAAA;MAAAF,aAAA,GAAAmB,CAAA;IAAA;IACxB,MAAMW,CAAA;IAAA;IAAA,CAAA9B,aAAA,GAAAE,CAAA,QAAI;IACV,MAAM6B,KAAA;IAAA;IAAA,CAAA/B,aAAA,GAAAE,CAAA,QAAQ,CAAC,SAAS,MAAM,MAAM,KAAK;IACzC,MAAM8B,CAAA;IAAA;IAAA,CAAAhC,aAAA,GAAAE,CAAA,QAAI+B,IAAA,CAAKC,KAAK,CAACD,IAAA,CAAKE,GAAG,CAACN,KAAA,IAASI,IAAA,CAAKE,GAAG,CAACL,CAAA;IAAA;IAAA9B,aAAA,GAAAE,CAAA;IAChD,OAAOkC,UAAA,CAAW,CAACP,KAAA,GAAQI,IAAA,CAAKI,GAAG,CAACP,CAAA,EAAGE,CAAA,CAAC,EAAGM,OAAO,CAAC,MAAM,MAAMP,KAAK,CAACC,CAAA,CAAE;EACzE;EAAA;EAAAhC,aAAA,GAAAE,CAAA;EAEA,QAAQG,OAAA,CAAQkC,YAAY;IAC1B,KAAK;MAAA;MAAAvC,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MACH,oBACE,IAAAsC,WAAA,CAAAC,IAAA,EAAC;QAAIC,SAAA,EAAU;mBACZrC,OAAA,CAAQmB,KAAK,EAAEmB,GAAA;QAAA;QAAA,cAAA3C,aAAA,GAAAmB,CAAA,UACd,IAAAqB,WAAA,CAAAC,IAAA,EAAC;UAAIC,SAAA,EAAU;kCACb,IAAAF,WAAA,CAAAI,GAAA,EAAC;YACCC,GAAA;YAAK;YAAA,CAAA7C,aAAA,GAAAmB,CAAA,UAAAd,OAAA,CAAQmB,KAAK,CAACsB,YAAY;YAAA;YAAA,CAAA9C,aAAA,GAAAmB,CAAA,UAAId,OAAA,CAAQmB,KAAK,CAACmB,GAAG;YACpDI,GAAA,EAAI;YACJL,SAAA,EAAU;YACVM,OAAA,EAASA,CAAA,KAAM;cAAA;cAAAhD,aAAA,GAAAO,CAAA;cAAAP,aAAA,GAAAE,CAAA;cAAA,OAAA+C,MAAA,CAAOC,IAAI,CAAC7C,OAAA,CAAQmB,KAAK,CAACmB,GAAG,EAAE;YAAA;2BAEhD,IAAAH,WAAA,CAAAI,GAAA,EAAC;YAAIF,SAAA,EAAU;sBACb,iBAAAF,WAAA,CAAAI,GAAA,EAAC;cACCI,OAAA,EAASzB,cAAA;cACT4B,QAAA,EAAUvC,OAAA;cACV8B,SAAA,EAAU;wBAEV,iBAAAF,WAAA,CAAAI,GAAA,EAACQ,YAAA,CAAAC,QAAQ;gBAACX,SAAA,EAAU;;;;;;iDAK1B,IAAAF,WAAA,CAAAC,IAAA,EAAC;UAAIC,SAAA,EAAU;kCACb,IAAAF,WAAA,CAAAI,GAAA,EAACQ,YAAA,CAAAE,KAAS;YAACZ,SAAA,EAAU;2BACrB,IAAAF,WAAA,CAAAC,IAAA,EAAC;oCACC,IAAAD,WAAA,CAAAI,GAAA,EAAC;cAAEF,SAAA,EAAU;wBAAoC;6BACjD,IAAAF,WAAA,CAAAI,GAAA,EAAC;cAAEF,SAAA,EAAU;wBAAwB;;;;QAI1C;QAAA,CAAA1C,aAAA,GAAAmB,CAAA,WAAAd,OAAA,CAAQkD,OAAO;QAAA;QAAA,CAAAvD,aAAA,GAAAmB,CAAA,wBACd,IAAAqB,WAAA,CAAAI,GAAA,EAAC;UAAEF,SAAA,EAAU;oBAA8BrC,OAAA,CAAQkD;;;IAK3D,KAAK;MAAA;MAAAvD,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MACH,oBACE,IAAAsC,WAAA,CAAAC,IAAA,EAAC;QAAIC,SAAA,EAAU;mBACZrC,OAAA,CAAQmB,KAAK,EAAEmB,GAAA;QAAA;QAAA,cAAA3C,aAAA,GAAAmB,CAAA,WACd,IAAAqB,WAAA,CAAAC,IAAA,EAAC;UAAIC,SAAA,EAAU;kCACb,IAAAF,WAAA,CAAAI,GAAA,EAAC;YACCY,GAAA,EAAKxC,QAAA;YACL6B,GAAA,EAAKxC,OAAA,CAAQmB,KAAK,CAACmB,GAAG;YACtBD,SAAA,EAAU;YACVe,QAAQ;YACRC,MAAA,EAAQA,CAAA,KAAM;cAAA;cAAA1D,aAAA,GAAAO,CAAA;cAAAP,aAAA,GAAAE,CAAA;cAAA,OAAAO,UAAA,CAAW;YAAA;YACzBkD,OAAA,EAASA,CAAA,KAAM;cAAA;cAAA3D,aAAA,GAAAO,CAAA;cAAAP,aAAA,GAAAE,CAAA;cAAA,OAAAO,UAAA,CAAW;YAAA;YAC1BmD,OAAA,EAASA,CAAA,KAAM;cAAA;cAAA5D,aAAA,GAAAO,CAAA;cAAAP,aAAA,GAAAE,CAAA;cAAA,OAAAO,UAAA,CAAW;YAAA;2BAE5B,IAAA+B,WAAA,CAAAI,GAAA,EAAC;YAAIF,SAAA,EAAU;sBACb,iBAAAF,WAAA,CAAAI,GAAA,EAACQ,YAAA,CAAAS,KAAK;cAACnB,SAAA,EAAU;;;;;kDAIrB,IAAAF,WAAA,CAAAC,IAAA,EAAC;UAAIC,SAAA,EAAU;kCACb,IAAAF,WAAA,CAAAI,GAAA,EAACQ,YAAA,CAAAS,KAAK;YAACnB,SAAA,EAAU;2BACjB,IAAAF,WAAA,CAAAC,IAAA,EAAC;oCACC,IAAAD,WAAA,CAAAI,GAAA,EAAC;cAAEF,SAAA,EAAU;wBAAoC;6BACjD,IAAAF,WAAA,CAAAI,GAAA,EAAC;cAAEF,SAAA,EAAU;wBAAwB;;;;QAI1C;QAAA,CAAA1C,aAAA,GAAAmB,CAAA,WAAAd,OAAA,CAAQkD,OAAO;QAAA;QAAA,CAAAvD,aAAA,GAAAmB,CAAA,wBACd,IAAAqB,WAAA,CAAAI,GAAA,EAAC;UAAEF,SAAA,EAAU;oBAA8BrC,OAAA,CAAQkD;;;IAK3D,KAAK;MAAA;MAAAvD,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MACH,oBACE,IAAAsC,WAAA,CAAAC,IAAA,EAAC;QAAIC,SAAA,EAAU;gCACb,IAAAF,WAAA,CAAAC,IAAA,EAAC;UAAIC,SAAA,EAAU;kCACb,IAAAF,WAAA,CAAAI,GAAA,EAAC;YACCI,OAAA,EAAS/B,eAAA;YACTyB,SAAA,EAAU;sBAETlC,OAAA;YAAA;YAAA,cAAAR,aAAA,GAAAmB,CAAA,WAAU,IAAAqB,WAAA,CAAAI,GAAA,EAACQ,YAAA,CAAAU,KAAK;cAACpB,SAAA,EAAU;;;sDAAe,IAAAF,WAAA,CAAAI,GAAA,EAACQ,YAAA,CAAAW,IAAI;cAACrB,SAAA,EAAU;;2BAE7D,IAAAF,WAAA,CAAAC,IAAA,EAAC;YAAIC,SAAA,EAAU;oCACb,IAAAF,WAAA,CAAAC,IAAA,EAAC;cAAIC,SAAA,EAAU;sCACb,IAAAF,WAAA,CAAAI,GAAA,EAAC;gBAAEF,SAAA,EAAU;0BAAoC;+BACjD,IAAAF,WAAA,CAAAI,GAAA,EAAC;gBACCI,OAAA,EAASzB,cAAA;gBACT4B,QAAA,EAAUvC,OAAA;gBACV8B,SAAA,EAAU;0BAEV,iBAAAF,WAAA,CAAAI,GAAA,EAACQ,YAAA,CAAAC,QAAQ;kBAACX,SAAA,EAAU;;;;YAGvB;YAAA,CAAA1C,aAAA,GAAAmB,CAAA,WAAAd,OAAA,CAAQmB,KAAK;YAAA;YAAA,CAAAxB,aAAA,GAAAmB,CAAA,wBACZ,IAAAqB,WAAA,CAAAI,GAAA,EAAC;cAAEF,SAAA,EAAU;wBAAyBd,cAAA,CAAevB,OAAA,CAAQmB,KAAK,CAACwC,QAAQ;;;;QAIhF;QAAA,CAAAhE,aAAA,GAAAmB,CAAA,WAAAd,OAAA,CAAQmB,KAAK,EAAEmB,GAAA;QAAA;QAAA,CAAA3C,aAAA,GAAAmB,CAAA,wBACd,IAAAqB,WAAA,CAAAI,GAAA,EAAC;UACCY,GAAA,EAAK1C,QAAA;UACL+B,GAAA,EAAKxC,OAAA,CAAQmB,KAAK,CAACmB,GAAG;UACtBiB,OAAA,EAASA,CAAA,KAAM;YAAA;YAAA5D,aAAA,GAAAO,CAAA;YAAAP,aAAA,GAAAE,CAAA;YAAA,OAAAO,UAAA,CAAW;UAAA;UAC1BiC,SAAA,EAAU;;QAGb;QAAA,CAAA1C,aAAA,GAAAmB,CAAA,WAAAd,OAAA,CAAQkD,OAAO;QAAA;QAAA,CAAAvD,aAAA,GAAAmB,CAAA,wBACd,IAAAqB,WAAA,CAAAI,GAAA,EAAC;UAAEF,SAAA,EAAU;oBAA8BrC,OAAA,CAAQkD;;;IAK3D,KAAK;MAAA;MAAAvD,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MACH,oBACE,IAAAsC,WAAA,CAAAC,IAAA,EAAC;QAAIC,SAAA,EAAU;gCACb,IAAAF,WAAA,CAAAC,IAAA,EAAC;UAAIC,SAAA,EAAU;kCACb,IAAAF,WAAA,CAAAI,GAAA,EAACQ,YAAA,CAAAa,QAAQ;YAACvB,SAAA,EAAU;2BACpB,IAAAF,WAAA,CAAAC,IAAA,EAAC;YAAIC,SAAA,EAAU;oCACb,IAAAF,WAAA,CAAAI,GAAA,EAAC;cAAEF,SAAA,EAAU;;cACV;cAAA,CAAA1C,aAAA,GAAAmB,CAAA,WAAAd,OAAA,CAAQmB,KAAK,EAAE0C,QAAA;cAAA;cAAA,CAAAlE,aAAA,GAAAmB,CAAA,WAAY;;YAE7B;YAAA,CAAAnB,aAAA,GAAAmB,CAAA,WAAAd,OAAA,CAAQmB,KAAK;YAAA;YAAA,CAAAxB,aAAA,GAAAmB,CAAA,wBACZ,IAAAqB,WAAA,CAAAI,GAAA,EAAC;cAAEF,SAAA,EAAU;wBAAyBd,cAAA,CAAevB,OAAA,CAAQmB,KAAK,CAACwC,QAAQ;;2BAG/E,IAAAxB,WAAA,CAAAI,GAAA,EAAC;YACCI,OAAA,EAASzB,cAAA;YACT4B,QAAA,EAAUvC,OAAA;YACV8B,SAAA,EAAU;sBAEV,iBAAAF,WAAA,CAAAI,GAAA,EAACQ,YAAA,CAAAC,QAAQ;cAACX,SAAA,EAAU;;;;QAGvB;QAAA,CAAA1C,aAAA,GAAAmB,CAAA,WAAAd,OAAA,CAAQkD,OAAO;QAAA;QAAA,CAAAvD,aAAA,GAAAmB,CAAA,wBACd,IAAAqB,WAAA,CAAAI,GAAA,EAAC;UAAEF,SAAA,EAAU;oBAA8BrC,OAAA,CAAQkD;;;IAK3D,KAAK;MAAA;MAAAvD,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MACH,oBACE,IAAAsC,WAAA,CAAAC,IAAA,EAAC;QAAIC,SAAA,EAAU;gCACb,IAAAF,WAAA,CAAAC,IAAA,EAAC;UAAIC,SAAA,EAAU;kCACb,IAAAF,WAAA,CAAAI,GAAA,EAACQ,YAAA,CAAAe,MAAM;YAACzB,SAAA,EAAU;2BAClB,IAAAF,WAAA,CAAAC,IAAA,EAAC;oCACC,IAAAD,WAAA,CAAAI,GAAA,EAAC;cAAEF,SAAA,EAAU;wBAAoC;6BACjD,IAAAF,WAAA,CAAAI,GAAA,EAAC;cAAEF,SAAA,EAAU;wBAAwB;;;;QAGxC;QAAA,CAAA1C,aAAA,GAAAmB,CAAA,WAAAd,OAAA,CAAQkD,OAAO;QAAA;QAAA,CAAAvD,aAAA,GAAAmB,CAAA,wBACd,IAAAqB,WAAA,CAAAI,GAAA,EAAC;UAAEF,SAAA,EAAU;oBAA8BrC,OAAA,CAAQkD;;;IAK3D;MAAA;MAAAvD,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MACE,oBAAO,IAAAsC,WAAA,CAAAI,GAAA,EAAC;QAAEF,SAAA,EAAU;kBAAyBrC,OAAA,CAAQkD;;EACzD;AACF;AAEe,SAASpD,oBAAoB;EAC1CiE,cAAc;EACdC,QAAQ;EACRC,aAAa;EACbC,aAAa;EACbC,UAAU;EACVC,OAAO;EACP7D;AAAO,CACU;EAAA;EAAAZ,aAAA,GAAAO,CAAA;EACjB,MAAMmE,cAAA;EAAA;EAAA,CAAA1E,aAAA,GAAAE,CAAA,QAAiB,IAAAQ,MAAA,CAAAK,MAAM,EAAiB;EAC9C,MAAM4D,YAAA;EAAA;EAAA,CAAA3E,aAAA,GAAAE,CAAA,QAAe,IAAI0E,aAAA,CAAAC,oBAAoB,CAAC,IAAI,KAAI;EAAA;;;EAEtD,IAAAnE,MAAA,CAAAoE,SAAS,EAAC;IAAA;IAAA9E,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAE,CAAA;IACR6E,cAAA;EACF,GAAG,CAACV,QAAA,CAAS;EAAA;EAAArE,aAAA,GAAAE,CAAA;EAEb,IAAAQ,MAAA,CAAAoE,SAAS,EAAC;IAAA;IAAA9E,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAE,CAAA;IACR;IACA8E,yBAAA;EACF,GAAG,CAACX,QAAA,EAAUE,aAAA,CAAc;EAAA;EAAAvE,aAAA,GAAAE,CAAA;EAE5B,MAAM6E,cAAA,GAAiBA,CAAA;IAAA;IAAA/E,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAE,CAAA;IACrBwE,cAAA,CAAexD,OAAO,EAAE+D,cAAA,CAAe;MAAEC,QAAA,EAAU;IAAS;EAC9D;EAAA;EAAAlF,aAAA,GAAAE,CAAA;EAEA,MAAM8E,yBAAA,GAA4BA,CAAA;IAAA;IAAAhF,aAAA,GAAAO,CAAA;IAChC,MAAM4E,cAAA;IAAA;IAAA,CAAAnF,aAAA,GAAAE,CAAA,QAAiBmE,QAAA,CAASe,MAAM,CACpC/E,OAAA,IAAW;MAAA;MAAAL,aAAA,GAAAO,CAAA;MAAAP,aAAA,GAAAE,CAAA;MAAA,kCAAAF,aAAA,GAAAmB,CAAA,YAACd,OAAA,CAAQgF,OAAO;MAAA;MAAA,CAAArF,aAAA,GAAAmB,CAAA,WAAId,OAAA,CAAQiF,WAAW,KAAK;IAAA;IAAA;IAAAtF,aAAA,GAAAE,CAAA;IAGzDiF,cAAA,CAAeI,OAAO,CAAClF,OAAA;MAAA;MAAAL,aAAA,GAAAO,CAAA;MAAAP,aAAA,GAAAE,CAAA;MACrB,IAAIqE,aAAA,EAAe;QAAA;QAAAvE,aAAA,GAAAmB,CAAA;QAAAnB,aAAA,GAAAE,CAAA;QACjBqE,aAAA,CAAclE,OAAA,CAAQoB,EAAE;MAC1B;MAAA;MAAA;QAAAzB,aAAA,GAAAmB,CAAA;MAAA;IACF;EACF;EAAA;EAAAnB,aAAA,GAAAE,CAAA;EAEA,MAAMsF,mBAAA,GAAsB,MAAOC,OAAA;IAAA;IAAAzF,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAE,CAAA;IACjC,IAAI;MACF;MACA,MAAMG,OAAA;MAAA;MAAA,CAAAL,aAAA,GAAAE,CAAA,QAAUmE,QAAA,CAASqB,IAAI,CAACC,CAAA,IAAK;QAAA;QAAA3F,aAAA,GAAAO,CAAA;QAAAP,aAAA,GAAAE,CAAA;QAAA,OAAAyF,CAAA,CAAEnE,KAAK,EAAEC,EAAA,KAAOgE,OAAA;MAAA;MAAA;MAAAzF,aAAA,GAAAE,CAAA;MACnD,IAAIG,OAAA,EAASmB,KAAA,EAAOmB,GAAA,EAAK;QAAA;QAAA3C,aAAA,GAAAmB,CAAA;QACvB,MAAMyE,IAAA;QAAA;QAAA,CAAA5F,aAAA,GAAAE,CAAA,QAAO2F,QAAA,CAASC,aAAa,CAAC;QAAA;QAAA9F,aAAA,GAAAE,CAAA;QACpC0F,IAAA,CAAKG,IAAI,GAAG1F,OAAA,CAAQmB,KAAK,CAACmB,GAAG;QAAA;QAAA3C,aAAA,GAAAE,CAAA;QAC7B0F,IAAA,CAAKI,QAAQ,GAAG3F,OAAA,CAAQmB,KAAK,CAAC0C,QAAQ;QAAA;QAAAlE,aAAA,GAAAE,CAAA;QACtC2F,QAAA,CAASI,IAAI,CAACC,WAAW,CAACN,IAAA;QAAA;QAAA5F,aAAA,GAAAE,CAAA;QAC1B0F,IAAA,CAAKO,KAAK;QAAA;QAAAnG,aAAA,GAAAE,CAAA;QACV2F,QAAA,CAASI,IAAI,CAACG,WAAW,CAACR,IAAA;MAC5B;MAAA;MAAA;QAAA5F,aAAA,GAAAmB,CAAA;MAAA;IACF,EAAE,OAAOO,KAAA,EAAO;MAAA;MAAA1B,aAAA,GAAAE,CAAA;MACdyB,OAAA,CAAQD,KAAK,CAAC,oBAAoBA,KAAA;IACpC;EACF;EAAA;EAAA1B,aAAA,GAAAE,CAAA;EAEA,MAAMmG,UAAA,GAAcC,SAAA;IAAA;IAAAtG,aAAA,GAAAO,CAAA;IAClB,MAAMgG,IAAA;IAAA;IAAA,CAAAvG,aAAA,GAAAE,CAAA,QAAO,IAAIsG,IAAA,CAAKF,SAAA;IAAA;IAAAtG,aAAA,GAAAE,CAAA;IACtB,OAAOqG,IAAA,CAAKE,kBAAkB,CAAC,EAAE,EAAE;MAAEC,IAAA,EAAM;MAAWC,MAAA,EAAQ;IAAU;EAC1E;EAAA;EAAA3G,aAAA,GAAAE,CAAA;EAEA,MAAM0G,iBAAA,GAAqBvG,OAAA;IAAA;IAAAL,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAE,CAAA;IACzB,IAAIG,OAAA,CAAQiF,WAAW,KAAK,SAAS;MAAA;MAAAtF,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MAAA,OAAO;IAAA;IAAA;IAAA;MAAAF,aAAA,GAAAmB,CAAA;IAAA;IAAAnB,aAAA,GAAAE,CAAA;IAE5C,IAAIG,OAAA,CAAQwG,OAAO,EAAE;MAAA;MAAA7G,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MACnB,oBAAO,IAAAsC,WAAA,CAAAI,GAAA,EAACQ,YAAA,CAAA0D,UAAU;QAACpE,SAAA,EAAU;;IAC/B,OAAO;MAAA;MAAA1C,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MAAA,IAAIG,OAAA,CAAQ0G,YAAY,EAAE;QAAA;QAAA/G,aAAA,GAAAmB,CAAA;QAAAnB,aAAA,GAAAE,CAAA;QAC/B,oBAAO,IAAAsC,WAAA,CAAAI,GAAA,EAACQ,YAAA,CAAA0D,UAAU;UAACpE,SAAA,EAAU;;MAC/B,OAAO;QAAA;QAAA1C,aAAA,GAAAmB,CAAA;QAAAnB,aAAA,GAAAE,CAAA;QACL,oBAAO,IAAAsC,WAAA,CAAAI,GAAA,EAACQ,YAAA,CAAA4D,KAAK;UAACtE,SAAA,EAAU;;MAC1B;IAAA;EACF;EAAA;EAAA1C,aAAA,GAAAE,CAAA;EAEA,MAAM+G,mBAAA,GAAuB5C,QAAA;IAAA;IAAArE,aAAA,GAAAO,CAAA;IAC3B,MAAM2G,MAAA;IAAA;IAAA,CAAAlH,aAAA,GAAAE,CAAA,QAAkD,EAAE;IAC1D,IAAIiH,WAAA;IAAA;IAAA,CAAAnH,aAAA,GAAAE,CAAA,QAAc;IAClB,IAAIkH,YAAA;IAAA;IAAA,CAAApH,aAAA,GAAAE,CAAA,QAA0B,EAAE;IAAA;IAAAF,aAAA,GAAAE,CAAA;IAEhCmE,QAAA,CAASkB,OAAO,CAAClF,OAAA;MAAA;MAAAL,aAAA,GAAAO,CAAA;MACf,MAAM8G,WAAA;MAAA;MAAA,CAAArH,aAAA,GAAAE,CAAA,QAAc,IAAIsG,IAAA,CAAKnG,OAAA,CAAQiH,UAAU,EAAEC,YAAY;MAAA;MAAAvH,aAAA,GAAAE,CAAA;MAE7D,IAAImH,WAAA,KAAgBF,WAAA,EAAa;QAAA;QAAAnH,aAAA,GAAAmB,CAAA;QAAAnB,aAAA,GAAAE,CAAA;QAC/B,IAAIkH,YAAA,CAAaI,MAAM,GAAG,GAAG;UAAA;UAAAxH,aAAA,GAAAmB,CAAA;UAAAnB,aAAA,GAAAE,CAAA;UAC3BgH,MAAA,CAAOO,IAAI,CAAC;YAAElB,IAAA,EAAMY,WAAA;YAAa9C,QAAA,EAAU+C;UAAa;QAC1D;QAAA;QAAA;UAAApH,aAAA,GAAAmB,CAAA;QAAA;QAAAnB,aAAA,GAAAE,CAAA;QACAiH,WAAA,GAAcE,WAAA;QAAA;QAAArH,aAAA,GAAAE,CAAA;QACdkH,YAAA,GAAe,CAAC/G,OAAA,CAAQ;MAC1B,OAAO;QAAA;QAAAL,aAAA,GAAAmB,CAAA;QAAAnB,aAAA,GAAAE,CAAA;QACLkH,YAAA,CAAaK,IAAI,CAACpH,OAAA;MACpB;IACF;IAAA;IAAAL,aAAA,GAAAE,CAAA;IAEA,IAAIkH,YAAA,CAAaI,MAAM,GAAG,GAAG;MAAA;MAAAxH,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MAC3BgH,MAAA,CAAOO,IAAI,CAAC;QAAElB,IAAA,EAAMY,WAAA;QAAa9C,QAAA,EAAU+C;MAAa;IAC1D;IAAA;IAAA;MAAApH,aAAA,GAAAmB,CAAA;IAAA;IAAAnB,aAAA,GAAAE,CAAA;IAEA,OAAOgH,MAAA;EACT;EAAA;EAAAlH,aAAA,GAAAE,CAAA;EAEA,MAAMwH,gBAAA,GAAoBC,UAAA;IAAA;IAAA3H,aAAA,GAAAO,CAAA;IACxB,MAAMgG,IAAA;IAAA;IAAA,CAAAvG,aAAA,GAAAE,CAAA,SAAO,IAAIsG,IAAA,CAAKmB,UAAA;IACtB,MAAMC,KAAA;IAAA;IAAA,CAAA5H,aAAA,GAAAE,CAAA,SAAQ,IAAIsG,IAAA;IAClB,MAAMqB,SAAA;IAAA;IAAA,CAAA7H,aAAA,GAAAE,CAAA,SAAY,IAAIsG,IAAA,CAAKoB,KAAA,CAAME,OAAO,KAAK,KAAK,KAAK,KAAK;IAAA;IAAA9H,aAAA,GAAAE,CAAA;IAE5D,IAAIqG,IAAA,CAAKgB,YAAY,OAAOK,KAAA,CAAML,YAAY,IAAI;MAAA;MAAAvH,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MAChD,OAAO;IACT,OAAO;MAAA;MAAAF,aAAA,GAAAmB,CAAA;MAAAnB,aAAA,GAAAE,CAAA;MAAA,IAAIqG,IAAA,CAAKgB,YAAY,OAAOM,SAAA,CAAUN,YAAY,IAAI;QAAA;QAAAvH,aAAA,GAAAmB,CAAA;QAAAnB,aAAA,GAAAE,CAAA;QAC3D,OAAO;MACT,OAAO;QAAA;QAAAF,aAAA,GAAAmB,CAAA;QAAAnB,aAAA,GAAAE,CAAA;QACL,OAAOqG,IAAA,CAAKwB,kBAAkB;MAChC;IAAA;EACF;EAEA,MAAMC,aAAA;EAAA;EAAA,CAAAhI,aAAA,GAAAE,CAAA,SAAgB+G,mBAAA,CAAoB5C,QAAA;EAAA;EAAArE,aAAA,GAAAE,CAAA;EAE1C,oBACE,IAAAsC,WAAA,CAAAC,IAAA,EAAC;IAAIC,SAAA,EAAU;;IAEZ;IAAA,CAAA1C,aAAA,GAAAmB,CAAA,WAAAsD,OAAA;IAAA;IAAA,CAAAzE,aAAA,GAAAmB,CAAA,wBACC,IAAAqB,WAAA,CAAAI,GAAA,EAAC;MAAIF,SAAA,EAAU;gBACb,iBAAAF,WAAA,CAAAI,GAAA,EAAC;QACCI,OAAA,EAASwB,UAAA;QACTrB,QAAA,EAAUvC,OAAA;QACV8B,SAAA,EAAU;kBAET9B,OAAA;QAAA;QAAA,CAAAZ,aAAA,GAAAmB,CAAA,WAAU;QAAA;QAAA,CAAAnB,aAAA,GAAAmB,CAAA,WAAe;;sBAMhC,IAAAqB,WAAA,CAAAC,IAAA,EAAC;MAAIC,SAAA,EAAU;iBACZsF,aAAA,CAAcR,MAAM,KAAK;MAAA;MAAA,cAAAxH,aAAA,GAAAmB,CAAA,WACxB,IAAAqB,WAAA,CAAAC,IAAA,EAAC;QAAIC,SAAA,EAAU;gCACb,IAAAF,WAAA,CAAAI,GAAA,EAAC;UAAEF,SAAA,EAAU;oBAA2B;yBACxC,IAAAF,WAAA,CAAAI,GAAA,EAAC;UAAEF,SAAA,EAAU;oBAAU;;;;mCAGzBsF,aAAA,CAAcC,GAAG,CAAC,CAACC,KAAA,EAAOC,UAAA,KACxB;QAAA;QAAAnI,aAAA,GAAAO,CAAA;QAAAP,aAAA,GAAAE,CAAA;QAAA,OADwB,aACxB,IAAAsC,WAAA,CAAAC,IAAA,EAAC;kCAEC,IAAAD,WAAA,CAAAI,GAAA,EAAC;YAAIF,SAAA,EAAU;sBACb,iBAAAF,WAAA,CAAAI,GAAA,EAAC;cAAKF,SAAA,EAAU;wBACbgF,gBAAA,CAAiBQ,KAAA,CAAM3B,IAAI;;2BAKhC,IAAA/D,WAAA,CAAAI,GAAA,EAAC;YAAIF,SAAA,EAAU;sBACZwF,KAAA,CAAM7D,QAAQ,CAAC4D,GAAG,CAAC,CAAC5H,OAAA,EAAS+H,YAAA;cAAA;cAAApI,aAAA,GAAAO,CAAA;cAC5B,MAAM8H,iBAAA;cAAA;cAAA,CAAArI,aAAA,GAAAE,CAAA;cAAoB;cAAA,CAAAF,aAAA,GAAAmB,CAAA,WAAAd,OAAA,CAAQiF,WAAW,KAAK;cAAA;cAAA,CAAAtF,aAAA,GAAAmB,CAAA,WAAWd,OAAA,CAAQiI,SAAS,KAAKhE,aAAA;cACnF,MAAMiE,QAAA;cAAA;cAAA,CAAAvI,aAAA,GAAAE,CAAA,SAAWG,OAAA,CAAQiF,WAAW,KAAK;cAAA;cAAAtF,aAAA,GAAAE,CAAA;cAEzC,IAAIqI,QAAA,EAAU;gBAAA;gBAAAvI,aAAA,GAAAmB,CAAA;gBAAAnB,aAAA,GAAAE,CAAA;gBACZ,oBACE,IAAAsC,WAAA,CAAAI,GAAA,EAAC;kBAAqBF,SAAA,EAAU;4BAC9B,iBAAAF,WAAA,CAAAI,GAAA,EAAC;oBAAKF,SAAA,EAAU;8BACbrC,OAAA,CAAQkD;;mBAFHlD,OAAA,CAAQoB,EAAE;cAMxB;cAAA;cAAA;gBAAAzB,aAAA,GAAAmB,CAAA;cAAA;cAAAnB,aAAA,GAAAE,CAAA;cAEA,oBACE,IAAAsC,WAAA,CAAAI,GAAA,EAAC;gBAECF,SAAA,EAAW,QAAQ2F,iBAAA;gBAAA;gBAAA,CAAArI,aAAA,GAAAmB,CAAA,WAAoB;gBAAA;gBAAA,CAAAnB,aAAA,GAAAmB,CAAA,WAAgB,kBAAiB;0BAExE,iBAAAqB,WAAA,CAAAC,IAAA,EAAC;kBAAIC,SAAA,EAAW,eAAe2F,iBAAA;kBAAA;kBAAA,CAAArI,aAAA,GAAAmB,CAAA,WAAoB;kBAAA;kBAAA,CAAAnB,aAAA,GAAAmB,CAAA,WAAY,YAAW;;kBAEvE;kBAAA,CAAAnB,aAAA,GAAAmB,CAAA,YAACkH,iBAAA;kBAAA;kBAAA,CAAArI,aAAA,GAAAmB,CAAA,WAAqBd,OAAA,CAAQiF,WAAW,KAAK;kBAAA;kBAAA,CAAAtF,aAAA,GAAAmB,CAAA,wBAC7C,IAAAqB,WAAA,CAAAC,IAAA,EAAC;oBAAIC,SAAA,EAAU;+BACZrC,OAAA,CAAQmI,MAAM,EAAEC,UAAA;oBAAA;oBAAA,cAAAzI,aAAA,GAAAmB,CAAA,WACf,IAAAqB,WAAA,CAAAI,GAAA,EAAC;sBACCC,GAAA,EAAKxC,OAAA,CAAQmI,MAAM,CAACC,UAAU;sBAC9B1F,GAAA,EAAK1C,OAAA,CAAQmI,MAAM,CAACE,SAAS;sBAC7BhG,SAAA,EAAU;;;8DAGZ,IAAAF,WAAA,CAAAI,GAAA,EAAC;sBAAIF,SAAA,EAAU;gCACb,iBAAAF,WAAA,CAAAI,GAAA,EAAC;wBAAKF,SAAA,EAAU;;wBACb;wBAAA,CAAA1C,aAAA,GAAAmB,CAAA,WAAAd,OAAA,CAAQmI,MAAM,EAAEE,SAAA,EAAWC,MAAA,CAAO;wBAAA;wBAAA,CAAA3I,aAAA,GAAAmB,CAAA,WAAM;;sCAI/C,IAAAqB,WAAA,CAAAI,GAAA,EAAC;sBAAKF,SAAA,EAAU;;sBACb;sBAAA,CAAA1C,aAAA,GAAAmB,CAAA,WAAAd,OAAA,CAAQmI,MAAM,EAAEE,SAAA;sBAAA;sBAAA,CAAA1I,aAAA,GAAAmB,CAAA,WAAa;;oCAMpC,IAAAqB,WAAA,CAAAI,GAAA,EAAC;oBACCF,SAAA,EAAW,wBACT2F,iBAAA;oBAAA;oBAAA,CAAArI,aAAA,GAAAmB,CAAA,WACI;oBAAA;oBAAA,CAAAnB,aAAA,GAAAmB,CAAA,WACA,8BACJ;8BAEF,iBAAAqB,WAAA,CAAAI,GAAA,EAACxC,YAAA;sBACCC,OAAA,EAASA,OAAA;sBACTC,UAAA,EAAYkF;;mCAKhB,IAAAhD,WAAA,CAAAC,IAAA,EAAC;oBACCC,SAAA,EAAW,oCACT2F,iBAAA;oBAAA;oBAAA,CAAArI,aAAA,GAAAmB,CAAA,WAAoB;oBAAA;oBAAA,CAAAnB,aAAA,GAAAmB,CAAA,WAAgB,kBACpC;4CAEF,IAAAqB,WAAA,CAAAI,GAAA,EAAC;sBAAKF,SAAA,EAAU;gCACb2D,UAAA,CAAWhG,OAAA,CAAQiH,UAAU;;oBAE/B;oBAAA,CAAAtH,aAAA,GAAAmB,CAAA,WAAAkH,iBAAA;oBAAA;oBAAA,CAAArI,aAAA,GAAAmB,CAAA,WAAqByF,iBAAA,CAAkBvG,OAAA;;;iBAjDvCA,OAAA,CAAQoB,EAAE;YAsDrB;;WAhFM0G,UAAA;MAAA,K,aAuFd,IAAA3F,WAAA,CAAAI,GAAA,EAAC;QAAIY,GAAA,EAAKkB;;;;AAIlB","ignoreList":[]}