{"version":3,"names":["cov_2mqe1x26kb","actualCoverage","s","BillingHistory","formatDate","date","f","toLocaleDateString","organizationId","invoices","setInvoices","_react","useState","isLoading","setIsLoading","useEffect","fetchInvoices","response","fetch","ok","b","data","json","console","error","_jsxruntime","jsxs","className","jsx","length","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","map","invoice","Date","created","amount","toFixed","currency","toUpperCase","status","href","hosted_invoice_url","target","rel","invoice_pdf","id"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\components\\billing\\billing-history.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\n\n// Simple date formatter\nfunction formatDate(date: Date) {\n  return date.toLocaleDateString()\n}\n\ninterface BillingHistoryProps {\n  organizationId: string\n}\n\ninterface Invoice {\n  id: string\n  amount: number\n  currency: string\n  status: string\n  created: number\n  hosted_invoice_url: string\n  invoice_pdf: string\n}\n\nexport function BillingHistory({ organizationId }: BillingHistoryProps) {\n  const [invoices, setInvoices] = useState<Invoice[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    async function fetchInvoices() {\n      try {\n        setIsLoading(true)\n        const response = await fetch('/api/billing/invoices')\n\n        if (response.ok) {\n          const data = await response.json()\n          setInvoices(data.invoices || [])\n        } else {\n          console.error('Failed to fetch invoices')\n          setInvoices([])\n        }\n      } catch (error) {\n        console.error('Error fetching invoices:', error)\n        setInvoices([])\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    fetchInvoices()\n  }, [organizationId])\n\n  if (isLoading) {\n    return (\n      <div className=\"bg-white shadow rounded-lg\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-medium text-gray-900\">Billing History</h2>\n        </div>\n        <div className=\"p-6\">\n          <div className=\"animate-pulse space-y-4\">\n            <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\n            <div className=\"h-4 bg-gray-200 rounded w-1/2\"></div>\n            <div className=\"h-4 bg-gray-200 rounded w-2/3\"></div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"bg-white shadow rounded-lg\">\n      <div className=\"px-6 py-4 border-b border-gray-200\">\n        <h2 className=\"text-lg font-medium text-gray-900\">Billing History</h2>\n        <p className=\"text-sm text-gray-500\">Download invoices and view payment history</p>\n      </div>\n      <div className=\"p-6\">\n        {invoices.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <svg\n              className=\"mx-auto h-12 w-12 text-gray-400\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n              />\n            </svg>\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No invoices yet</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              Your billing history will appear here once you have an active subscription.\n            </p>\n          </div>\n        ) : (\n          <div className=\"overflow-hidden\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Date\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Amount\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Status\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Invoice\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {invoices.map((invoice) => (\n                  <tr key={invoice.id}>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {formatDate(new Date(invoice.created * 1000))}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      ${(invoice.amount / 100).toFixed(2)} {invoice.currency.toUpperCase()}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <span\n                        className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                          invoice.status === 'paid'\n                            ? 'bg-green-100 text-green-800'\n                            : invoice.status === 'open'\n                            ? 'bg-yellow-100 text-yellow-800'\n                            : 'bg-red-100 text-red-800'\n                        }`}\n                      >\n                        {invoice.status}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      <div className=\"flex space-x-2\">\n                        <a\n                          href={invoice.hosted_invoice_url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"text-green-600 hover:text-green-900\"\n                        >\n                          View\n                        </a>\n                        <a\n                          href={invoice.invoice_pdf}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"text-green-600 hover:text-green-900\"\n                        >\n                          Download PDF\n                        </a>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}"],"mappings":"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","ignoreList":[]}