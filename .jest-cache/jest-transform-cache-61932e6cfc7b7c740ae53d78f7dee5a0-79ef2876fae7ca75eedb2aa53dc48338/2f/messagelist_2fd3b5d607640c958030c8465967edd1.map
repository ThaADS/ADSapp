{"version":3,"names":["cov_hirkhwyvy","actualCoverage","s","MessageList","formatMessageTime","date","f","toLocaleTimeString","hour","minute","messages","currentUserId","messagesEndRef","_react","useRef","scrollToBottom","current","scrollIntoView","behavior","useEffect","length","b","_jsxruntime","jsx","className","jsxs","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","map","message","isFromCurrentUser","sender_id","isFromAgent","sender_type","isFromContact","isSystemMessage","content","id","sender","full_name","charAt","message_type","media_url","src","alt","href","target","rel","Date","created_at","delivered_at","read_at","is_read","ref"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\components\\inbox\\message-list.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useRef } from 'react'\nimport type { MessageWithSender } from '@/types'\n\n// Simple time formatter\nfunction formatMessageTime(date: Date) {\n  return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n}\n\ninterface MessageListProps {\n  messages: MessageWithSender[]\n  currentUserId: string\n}\n\nexport function MessageList({ messages, currentUserId }: MessageListProps) {\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages])\n\n  if (messages.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center h-full p-8\">\n        <div className=\"text-center\">\n          <svg\n            className=\"mx-auto h-12 w-12 text-gray-400\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n            />\n          </svg>\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No messages yet</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Start the conversation by sending a message.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"flex-1 overflow-y-auto px-6 py-4 space-y-4\">\n        {messages.map((message) => {\n          const isFromCurrentUser = message.sender_id === currentUserId\n          const isFromAgent = message.sender_type === 'agent'\n          const isFromContact = message.sender_type === 'contact'\n          const isSystemMessage = message.sender_type === 'system'\n\n          // System messages\n          if (isSystemMessage) {\n            return (\n              <div key={message.id} className=\"flex justify-center\">\n                <div className=\"bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full\">\n                  {message.content}\n                </div>\n              </div>\n            )\n          }\n\n          // Agent/Contact messages\n          return (\n            <div\n              key={message.id}\n              className={`flex ${isFromAgent ? 'justify-end' : 'justify-start'}`}\n            >\n              <div className={`flex max-w-xs lg:max-w-md ${isFromAgent ? 'flex-row-reverse' : 'flex-row'} items-end space-x-2`}>\n                {/* Avatar */}\n                <div className={`flex-shrink-0 ${isFromAgent ? 'ml-2' : 'mr-2'}`}>\n                  {isFromAgent ? (\n                    <div className=\"w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center\">\n                      <span className=\"text-xs font-medium text-white\">\n                        {message.sender?.full_name?.charAt(0) || 'A'}\n                      </span>\n                    </div>\n                  ) : (\n                    <div className=\"w-6 h-6 rounded-full bg-green-500 flex items-center justify-center\">\n                      <span className=\"text-xs font-medium text-white\">C</span>\n                    </div>\n                  )}\n                </div>\n\n                {/* Message Bubble */}\n                <div\n                  className={`relative px-4 py-2 rounded-lg ${\n                    isFromAgent\n                      ? 'bg-blue-600 text-white'\n                      : 'bg-gray-100 text-gray-900'\n                  }`}\n                >\n                  {/* Message Type Indicator */}\n                  {message.message_type !== 'text' && (\n                    <div className=\"text-xs opacity-75 mb-1\">\n                      [{message.message_type}]\n                    </div>\n                  )}\n\n                  {/* Message Content */}\n                  <div className=\"text-sm\">{message.content}</div>\n\n                  {/* Media */}\n                  {message.media_url && (\n                    <div className=\"mt-2\">\n                      {message.message_type === 'image' && (\n                        <img\n                          src={message.media_url}\n                          alt=\"Shared image\"\n                          className=\"max-w-full rounded\"\n                        />\n                      )}\n                      {(message.message_type === 'document' || message.message_type === 'audio' || message.message_type === 'video') && (\n                        <a\n                          href={message.media_url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"text-xs underline opacity-75 hover:opacity-100\"\n                        >\n                          Download {message.message_type}\n                        </a>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Timestamp */}\n                  <div\n                    className={`text-xs mt-1 ${\n                      isFromAgent ? 'text-blue-100' : 'text-gray-500'\n                    }`}\n                  >\n                    {formatMessageTime(new Date(message.created_at))}\n                    {isFromAgent && (\n                      <span className=\"ml-1\">\n                        {message.delivered_at && !message.read_at && '✓'}\n                        {message.read_at && '✓✓'}\n                      </span>\n                    )}\n                  </div>\n\n                  {/* Message Status */}\n                  {!message.is_read && isFromContact && (\n                    <div className=\"absolute -top-1 -left-1 w-3 h-3 bg-green-500 rounded-full\"></div>\n                  )}\n                </div>\n              </div>\n            </div>\n          )\n        })}\n        <div ref={messagesEndRef} />\n      </div>\n    </div>\n  )\n}"],"mappings":"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","ignoreList":[]}