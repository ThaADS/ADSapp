{"version":3,"names":["DemoDataSeeder","cov_fqnlp4h6i","f","s","DemoSecurityPolicy","DemoSessionManager","DemoUtils","constructor","supabaseClient","securityPolicy","supabase","b","_demo","DEFAULT_DEMO_SECURITY_POLICY","createSession","businessScenario","ipAddress","userAgent","metadata","rateLimitCheck","checkRateLimit","allowed","Error","reason","blocked_ips","includes","sessionToken","generateSecureToken","organizationId","_uuid","v4","sessionId","data","organization","error","orgError","from","insert","id","name","DEMO_SCENARIOS","slug","Date","now","subscription_status","subscription_tier","select","single","expiresAt","setMinutes","getMinutes","session_duration_minutes","session","token","organization_id","business_scenario","status","expires_at","toISOString","created_at","updated_at","ip_address","user_agent","progress","steps_completed","current_step","completion_percentage","interactions_count","features_explored","time_spent_minutes","last_activity_at","analytics","session_id","events","page_views","feature_usage","conversion_funnel","performance_metrics","page_load_times","api_response_times","error_count","bounce_rate","storeSession","dataSeeder","seedOrganizationData","trackEvent","event_type","action","category","label","console","message","getSession","retrieveSession","isValid","updateSessionStatus","updateSession","resetSessionData","success","itemsReset","resetAndReseed","updateProgress","step","featureUsed","push","totalSteps","Math","min","length","startTime","floor","getTime","value","eventData","eventId","event","type","timestamp","storeEvent","currentSessions","getCurrentSessionsForIP","max_sessions_per_ip","sessionsInLastHour","getSessionsInWindow","rate_limit_window_minutes","max_sessions_per_hour","_crypto","default","randomBytes","toString","log","windowMinutes","cleanupExpiredSessions","scenario","scenarioConfig","sampleData","generateSampleData","createContacts","contacts","createConversationsWithMessages","conversations","messages","createTemplates","templates","deletedContacts","deleteOrganizationContacts","deletedConversations","deleteOrganizationConversations","deletedMessages","deleteOrganizationMessages","baseData","getBaseScenarioData","generateContacts","generateConversations","generateMessages","generateTemplates","automation_rules","generateAutomationRules","count","names","getScenarioNames","i","phone_number","padStart","whatsapp_id","tags","getScenarioTags","notes","getScenarioNotes","last_interaction","random","statuses","priorities","contact_phone","priority","subject","getScenarioSubject","last_message_at","messageTypes","senderTypes","conversation_contact_phone","sender_type","content","getScenarioMessage","message_type","is_read","getScenarioTemplates","map","template","language","variables","extractVariables","getScenarioAutomationRules","nameMap","retail","restaurant","real_estate","healthcare","education","ecommerce","automotive","travel","fitness","generic","tagMap","noteMap","index","subjectMap","subjects","messageMap","templateMap","trigger","conditions","is_first_message","actions","send_template","is_active","business_hours","assign_to","matches","match","slice","contact","profile_picture_url","conversation","eq","newConversation","contact_id","conversationMessages","filter","msg","conversation_id","media_url","delete","conversationIds","c","in","customPolicy","policy","validateNewSession","sessionsInWindow","shouldExpireSession","sessionCreatedAt","createdTime","diffMinutes","getPolicy","updatePolicy","updates","blockIP","unblockIP","ip","isIPBlocked","generateDemoSlug","substr","calculateProgress","stepsCompleted","formatSessionDuration","start","hours","remainingMinutes","generateAnalyticsSummary","totalEvents","totalPageViews","featuresUsed","completionRate","completed","averagePageLoadTime","Object","values","reduce","a","keys"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\lib\\demo.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\nimport { v4 as uuidv4 } from 'uuid'\nimport crypto from 'crypto'\nimport {\n  DemoSession,\n  DemoProgress,\n  DemoAnalytics,\n  DemoEvent,\n  DemoPageView,\n  DemoFeatureUsage,\n  DemoFunnelStep,\n  DemoPerformanceMetrics,\n  BusinessScenario,\n  BusinessScenarioConfig,\n  DemoSecurityPolicy,\n  DemoRateLimitStatus,\n  DemoSampleData,\n  DemoContact,\n  DemoConversation,\n  DemoMessage,\n  DemoTemplate,\n  DemoAutomationRule,\n  DEMO_SCENARIOS,\n  DEFAULT_DEMO_SECURITY_POLICY,\n  DemoStatus,\n  DemoEventType,\n  TrackAnalyticsRequest\n} from '@/types/demo'\nimport { Database } from '@/types/database'\n\ntype SupabaseClient = ReturnType<typeof createClient<Database>>\n\n/**\n * Manages demo sessions with security, rate limiting, and analytics\n */\nexport class DemoSessionManager {\n  private supabase: SupabaseClient\n  private securityPolicy: DemoSecurityPolicy\n\n  constructor(supabaseClient: SupabaseClient, securityPolicy?: DemoSecurityPolicy) {\n    this.supabase = supabaseClient\n    this.securityPolicy = securityPolicy || DEFAULT_DEMO_SECURITY_POLICY\n  }\n\n  /**\n   * Create a new demo session with rate limiting and security checks\n   */\n  async createSession(\n    businessScenario: BusinessScenario,\n    ipAddress: string,\n    userAgent: string,\n    metadata?: Record<string, any>\n  ): Promise<{ session: DemoSession; organization: any; error?: string }> {\n    try {\n      // Check rate limits\n      const rateLimitCheck = await this.checkRateLimit(ipAddress)\n      if (!rateLimitCheck.allowed) {\n        throw new Error(`Rate limit exceeded: ${rateLimitCheck.reason}`)\n      }\n\n      // Check for blocked IPs\n      if (this.securityPolicy.blocked_ips.includes(ipAddress)) {\n        throw new Error('Access denied from this IP address')\n      }\n\n      // Generate session token and organization\n      const sessionToken = this.generateSecureToken()\n      const organizationId = uuidv4()\n      const sessionId = uuidv4()\n\n      // Create demo organization\n      const { data: organization, error: orgError } = await this.supabase\n        .from('organizations')\n        .insert({\n          id: organizationId,\n          name: DEMO_SCENARIOS[businessScenario].name,\n          slug: `demo-${businessScenario}-${Date.now()}`,\n          subscription_status: 'trial',\n          subscription_tier: 'professional'\n        })\n        .select()\n        .single()\n\n      if (orgError) throw orgError\n\n      // Create demo session record\n      const expiresAt = new Date()\n      expiresAt.setMinutes(expiresAt.getMinutes() + this.securityPolicy.session_duration_minutes)\n\n      const session: DemoSession = {\n        id: sessionId,\n        token: sessionToken,\n        organization_id: organizationId,\n        business_scenario: businessScenario,\n        status: 'active',\n        expires_at: expiresAt.toISOString(),\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n        ip_address: ipAddress,\n        user_agent: userAgent,\n        progress: {\n          steps_completed: [],\n          current_step: 'welcome',\n          completion_percentage: 0,\n          interactions_count: 0,\n          features_explored: [],\n          time_spent_minutes: 0,\n          last_activity_at: new Date().toISOString()\n        },\n        analytics: {\n          session_id: sessionId,\n          events: [],\n          page_views: [],\n          feature_usage: [],\n          conversion_funnel: [],\n          performance_metrics: {\n            page_load_times: {},\n            api_response_times: {},\n            error_count: 0,\n            bounce_rate: 0\n          }\n        }\n      }\n\n      // Store session in cache/database (using a demo_sessions table)\n      await this.storeSession(session)\n\n      // Seed demo data\n      const dataSeeder = new DemoDataSeeder(this.supabase)\n      await dataSeeder.seedOrganizationData(organizationId, businessScenario)\n\n      // Track session creation\n      await this.trackEvent(sessionId, {\n        event_type: 'conversion',\n        action: 'demo_session_created',\n        category: 'demo',\n        label: businessScenario,\n        metadata: { ...metadata, ip_address: ipAddress }\n      })\n\n      return { session, organization }\n    } catch (error) {\n      console.error('Error creating demo session:', error)\n      return {\n        session: null as any,\n        organization: null as any,\n        error: error instanceof Error ? error.message : 'Failed to create demo session'\n      }\n    }\n  }\n\n  /**\n   * Validate and retrieve an active demo session\n   */\n  async getSession(token: string): Promise<{ session: DemoSession | null; isValid: boolean; error?: string }> {\n    try {\n      const session = await this.retrieveSession(token)\n\n      if (!session) {\n        return { session: null, isValid: false, error: 'Session not found' }\n      }\n\n      // Check if session is expired\n      const now = new Date()\n      const expiresAt = new Date(session.expires_at)\n\n      if (now > expiresAt) {\n        await this.updateSessionStatus(session.id, 'expired')\n        return { session, isValid: false, error: 'Session expired' }\n      }\n\n      // Check if session is blocked\n      if (session.status === 'blocked' || session.status === 'rate_limited') {\n        return { session, isValid: false, error: 'Session blocked' }\n      }\n\n      // Update last activity\n      session.progress.last_activity_at = now.toISOString()\n      await this.updateSession(session)\n\n      return { session, isValid: true }\n    } catch (error) {\n      console.error('Error validating session:', error)\n      return {\n        session: null,\n        isValid: false,\n        error: error instanceof Error ? error.message : 'Session validation failed'\n      }\n    }\n  }\n\n  /**\n   * Reset demo data for a session\n   */\n  async resetSessionData(token: string): Promise<{ success: boolean; itemsReset?: any; error?: string }> {\n    try {\n      const { session, isValid } = await this.getSession(token)\n\n      if (!isValid || !session) {\n        return { success: false, error: 'Invalid session' }\n      }\n\n      const dataSeeder = new DemoDataSeeder(this.supabase)\n      const itemsReset = await dataSeeder.resetAndReseed(session.organization_id, session.business_scenario)\n\n      // Reset progress\n      session.progress = {\n        steps_completed: [],\n        current_step: 'welcome',\n        completion_percentage: 0,\n        interactions_count: 0,\n        features_explored: [],\n        time_spent_minutes: 0,\n        last_activity_at: new Date().toISOString()\n      }\n\n      await this.updateSession(session)\n\n      // Track reset event\n      await this.trackEvent(session.id, {\n        event_type: 'click',\n        action: 'demo_data_reset',\n        category: 'demo',\n        label: session.business_scenario\n      })\n\n      return { success: true, itemsReset }\n    } catch (error) {\n      console.error('Error resetting session data:', error)\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Failed to reset demo data'\n      }\n    }\n  }\n\n  /**\n   * Update session progress and analytics\n   */\n  async updateProgress(\n    token: string,\n    step: string,\n    featureUsed?: string,\n    metadata?: Record<string, any>\n  ): Promise<boolean> {\n    try {\n      const { session, isValid } = await this.getSession(token)\n\n      if (!isValid || !session) return false\n\n      // Update progress\n      if (!session.progress.steps_completed.includes(step)) {\n        session.progress.steps_completed.push(step)\n      }\n\n      session.progress.current_step = step\n      session.progress.interactions_count += 1\n\n      if (featureUsed && !session.progress.features_explored.includes(featureUsed)) {\n        session.progress.features_explored.push(featureUsed)\n      }\n\n      // Calculate completion percentage based on key steps\n      const totalSteps = 10 // Configurable based on scenario\n      session.progress.completion_percentage = Math.min(\n        (session.progress.steps_completed.length / totalSteps) * 100,\n        100\n      )\n\n      // Calculate time spent\n      const startTime = new Date(session.created_at)\n      const now = new Date()\n      session.progress.time_spent_minutes = Math.floor((now.getTime() - startTime.getTime()) / (1000 * 60))\n      session.progress.last_activity_at = now.toISOString()\n\n      await this.updateSession(session)\n\n      // Track progress event\n      await this.trackEvent(session.id, {\n        event_type: 'feature_interaction',\n        action: 'progress_updated',\n        category: 'demo',\n        label: step,\n        value: session.progress.completion_percentage,\n        metadata\n      })\n\n      return true\n    } catch (error) {\n      console.error('Error updating progress:', error)\n      return false\n    }\n  }\n\n  /**\n   * Track analytics events for the demo session\n   */\n  async trackEvent(sessionId: string, eventData: TrackAnalyticsRequest): Promise<string | null> {\n    try {\n      const eventId = uuidv4()\n      const event: DemoEvent = {\n        id: eventId,\n        type: eventData.event_type,\n        action: eventData.action,\n        category: eventData.category,\n        label: eventData.label,\n        value: eventData.value,\n        metadata: eventData.metadata,\n        timestamp: new Date().toISOString()\n      }\n\n      // Store event (implement your preferred storage method)\n      await this.storeEvent(sessionId, event)\n\n      return eventId\n    } catch (error) {\n      console.error('Error tracking event:', error)\n      return null\n    }\n  }\n\n  /**\n   * Check rate limits for IP address\n   */\n  private async checkRateLimit(ipAddress: string): Promise<{ allowed: boolean; reason?: string }> {\n    try {\n      // Get current sessions for this IP\n      const currentSessions = await this.getCurrentSessionsForIP(ipAddress)\n\n      if (currentSessions >= this.securityPolicy.max_sessions_per_ip) {\n        return { allowed: false, reason: 'Too many active sessions from this IP' }\n      }\n\n      // Check sessions in the last hour\n      const sessionsInLastHour = await this.getSessionsInWindow(ipAddress, this.securityPolicy.rate_limit_window_minutes)\n\n      if (sessionsInLastHour >= this.securityPolicy.max_sessions_per_hour) {\n        return { allowed: false, reason: 'Rate limit exceeded for this IP' }\n      }\n\n      return { allowed: true }\n    } catch (error) {\n      console.error('Error checking rate limit:', error)\n      return { allowed: false, reason: 'Rate limit check failed' }\n    }\n  }\n\n  /**\n   * Generate a secure session token\n   */\n  private generateSecureToken(): string {\n    return crypto.randomBytes(32).toString('hex')\n  }\n\n  /**\n   * Store session in database/cache\n   */\n  private async storeSession(session: DemoSession): Promise<void> {\n    // Implement storage logic (Redis, database, etc.)\n    // For now, we'll use a simple in-memory approach or database\n\n    // You might want to create a demo_sessions table in Supabase\n    // or use Redis for better performance\n    console.log('Storing session:', session.id)\n  }\n\n  /**\n   * Retrieve session from storage\n   */\n  private async retrieveSession(token: string): Promise<DemoSession | null> {\n    // Implement retrieval logic\n    // This would query your session storage\n    console.log('Retrieving session for token:', token)\n    return null // Placeholder\n  }\n\n  /**\n   * Update session in storage\n   */\n  private async updateSession(session: DemoSession): Promise<void> {\n    console.log('Updating session:', session.id)\n  }\n\n  /**\n   * Update session status\n   */\n  private async updateSessionStatus(sessionId: string, status: DemoStatus): Promise<void> {\n    console.log('Updating session status:', sessionId, status)\n  }\n\n  /**\n   * Store analytics event\n   */\n  private async storeEvent(sessionId: string, event: DemoEvent): Promise<void> {\n    console.log('Storing event for session:', sessionId, event)\n  }\n\n  /**\n   * Get current active sessions count for IP\n   */\n  private async getCurrentSessionsForIP(ipAddress: string): Promise<number> {\n    // Query active sessions for this IP\n    return 0 // Placeholder\n  }\n\n  /**\n   * Get sessions count in time window for IP\n   */\n  private async getSessionsInWindow(ipAddress: string, windowMinutes: number): Promise<number> {\n    // Query sessions in the time window\n    return 0 // Placeholder\n  }\n\n  /**\n   * Cleanup expired sessions\n   */\n  async cleanupExpiredSessions(): Promise<number> {\n    try {\n      // Find and remove expired sessions\n      // This should be run as a background job\n      console.log('Cleaning up expired sessions')\n      return 0 // Return number of cleaned sessions\n    } catch (error) {\n      console.error('Error cleaning up sessions:', error)\n      return 0\n    }\n  }\n}\n\n/**\n * Seeds demo data for different business scenarios\n */\nexport class DemoDataSeeder {\n  private supabase: SupabaseClient\n\n  constructor(supabaseClient: SupabaseClient) {\n    this.supabase = supabaseClient\n  }\n\n  /**\n   * Seed organization with scenario-specific data\n   */\n  async seedOrganizationData(organizationId: string, scenario: BusinessScenario): Promise<void> {\n    try {\n      const scenarioConfig = DEMO_SCENARIOS[scenario]\n      const sampleData = this.generateSampleData(scenario)\n\n      // Create contacts\n      await this.createContacts(organizationId, sampleData.contacts)\n\n      // Create conversations and messages\n      await this.createConversationsWithMessages(organizationId, sampleData.conversations, sampleData.messages)\n\n      // Create templates\n      await this.createTemplates(organizationId, sampleData.templates)\n\n      console.log(`Demo data seeded for ${scenario} scenario`)\n    } catch (error) {\n      console.error('Error seeding demo data:', error)\n      throw error\n    }\n  }\n\n  /**\n   * Reset and reseed organization data\n   */\n  async resetAndReseed(organizationId: string, scenario: BusinessScenario): Promise<{\n    contacts: number;\n    conversations: number;\n    messages: number;\n  }> {\n    try {\n      // Delete existing data\n      const deletedContacts = await this.deleteOrganizationContacts(organizationId)\n      const deletedConversations = await this.deleteOrganizationConversations(organizationId)\n      const deletedMessages = await this.deleteOrganizationMessages(organizationId)\n\n      // Reseed with fresh data\n      await this.seedOrganizationData(organizationId, scenario)\n\n      return {\n        contacts: deletedContacts,\n        conversations: deletedConversations,\n        messages: deletedMessages\n      }\n    } catch (error) {\n      console.error('Error resetting demo data:', error)\n      throw error\n    }\n  }\n\n  /**\n   * Generate sample data for a business scenario\n   */\n  private generateSampleData(scenario: BusinessScenario): DemoSampleData {\n    const baseData = this.getBaseScenarioData(scenario)\n\n    return {\n      contacts: this.generateContacts(scenario, 15),\n      conversations: this.generateConversations(scenario, 8),\n      messages: this.generateMessages(scenario, 25),\n      templates: this.generateTemplates(scenario),\n      automation_rules: this.generateAutomationRules(scenario)\n    }\n  }\n\n  /**\n   * Generate realistic contacts for scenario\n   */\n  private generateContacts(scenario: BusinessScenario, count: number): DemoContact[] {\n    const contacts: DemoContact[] = []\n    const names = this.getScenarioNames(scenario)\n\n    for (let i = 0; i < count; i++) {\n      contacts.push({\n        name: names[i % names.length],\n        phone_number: `+1555${(1000 + i).toString().padStart(4, '0')}`,\n        whatsapp_id: `wa_${i}_${Date.now()}`,\n        tags: this.getScenarioTags(scenario),\n        notes: this.getScenarioNotes(scenario),\n        last_interaction: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000).toISOString()\n      })\n    }\n\n    return contacts\n  }\n\n  /**\n   * Generate realistic conversations\n   */\n  private generateConversations(scenario: BusinessScenario, count: number): DemoConversation[] {\n    const conversations: DemoConversation[] = []\n    const statuses: Array<'open' | 'pending' | 'resolved' | 'closed'> = ['open', 'pending', 'resolved', 'closed']\n    const priorities: Array<'low' | 'medium' | 'high' | 'urgent'> = ['low', 'medium', 'high', 'urgent']\n\n    for (let i = 0; i < count; i++) {\n      conversations.push({\n        contact_phone: `+1555${(1000 + i).toString().padStart(4, '0')}`,\n        status: statuses[Math.floor(Math.random() * statuses.length)],\n        priority: priorities[Math.floor(Math.random() * priorities.length)],\n        subject: this.getScenarioSubject(scenario, i),\n        created_at: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000).toISOString(),\n        last_message_at: new Date(Date.now() - Math.random() * 24 * 60 * 60 * 1000).toISOString()\n      })\n    }\n\n    return conversations\n  }\n\n  /**\n   * Generate realistic messages\n   */\n  private generateMessages(scenario: BusinessScenario, count: number): DemoMessage[] {\n    const messages: DemoMessage[] = []\n    const messageTypes: Array<'text' | 'image' | 'document'> = ['text', 'image', 'document']\n    const senderTypes: Array<'contact' | 'agent'> = ['contact', 'agent']\n\n    for (let i = 0; i < count; i++) {\n      messages.push({\n        conversation_contact_phone: `+1555${(1000 + (i % 8)).toString().padStart(4, '0')}`,\n        sender_type: senderTypes[Math.floor(Math.random() * senderTypes.length)],\n        content: this.getScenarioMessage(scenario, i),\n        message_type: messageTypes[Math.floor(Math.random() * messageTypes.length)],\n        created_at: new Date(Date.now() - Math.random() * 24 * 60 * 60 * 1000).toISOString(),\n        is_read: Math.random() > 0.3\n      })\n    }\n\n    return messages\n  }\n\n  /**\n   * Generate message templates for scenario\n   */\n  private generateTemplates(scenario: BusinessScenario): DemoTemplate[] {\n    const templates = this.getScenarioTemplates(scenario)\n    return templates.map(template => ({\n      ...template,\n      language: 'en',\n      variables: this.extractVariables(template.content)\n    }))\n  }\n\n  /**\n   * Generate automation rules for scenario\n   */\n  private generateAutomationRules(scenario: BusinessScenario): DemoAutomationRule[] {\n    return this.getScenarioAutomationRules(scenario)\n  }\n\n  // Scenario-specific data generators\n  private getScenarioNames(scenario: BusinessScenario): string[] {\n    const nameMap: Record<BusinessScenario, string[]> = {\n      retail: ['Sarah Johnson', 'Mike Chen', 'Emma Davis', 'James Wilson', 'Lisa Garcia', 'David Brown', 'Maria Rodriguez', 'John Smith'],\n      restaurant: ['Tony Martinez', 'Sofia Rossi', 'Marco Benedetti', 'Isabella Romano', 'Giuseppe Conti', 'Francesca Marino', 'Andrea Ricci'],\n      real_estate: ['Robert Thompson', 'Jennifer Lee', 'Michael Anderson', 'Amanda White', 'Christopher Moore', 'Nicole Taylor', 'Kevin Martin'],\n      healthcare: ['Dr. Patricia Johnson', 'Nurse Williams', 'Mary Anderson', 'Dr. James Miller', 'Susan Davis', 'Dr. Karen Wilson'],\n      education: ['Student Alex', 'Student Jamie', 'Student Taylor', 'Student Morgan', 'Student Casey', 'Student Riley', 'Student Avery'],\n      ecommerce: ['Tech Buyer Sam', 'Gadget Lover Pat', 'Smart Home Jane', 'Gamer Alex', 'Professional Mike', 'Student Sarah'],\n      automotive: ['Car Buyer Tom', 'Family Driver Sue', 'Speed Enthusiast Max', 'Eco Driver Emma', 'Truck Buyer Joe', 'Luxury Seeker Ana'],\n      travel: ['Adventure Seeker', 'Family Traveler', 'Business Traveler', 'Honeymoon Couple', 'Solo Backpacker', 'Luxury Tourist'],\n      fitness: ['Gym Member Sam', 'Yoga Enthusiast', 'CrossFit Athlete', 'Runner Maria', 'Weightlifter John', 'Pilates Lover'],\n      generic: ['John Doe', 'Jane Smith', 'Bob Johnson', 'Alice Williams', 'Charlie Brown', 'Diana Davis', 'Frank Miller']\n    }\n    return nameMap[scenario] || nameMap.generic\n  }\n\n  private getScenarioTags(scenario: BusinessScenario): string[] {\n    const tagMap: Record<BusinessScenario, string[]> = {\n      retail: ['vip-customer', 'frequent-buyer'],\n      restaurant: ['regular-customer', 'delivery-preferred'],\n      real_estate: ['buyer', 'investor'],\n      healthcare: ['patient', 'follow-up-needed'],\n      education: ['enrolled', 'prospective'],\n      ecommerce: ['premium-member', 'tech-enthusiast'],\n      automotive: ['test-drive-completed', 'financing-interested'],\n      travel: ['frequent-traveler', 'group-booking'],\n      fitness: ['active-member', 'personal-training'],\n      generic: ['important', 'follow-up']\n    }\n    return tagMap[scenario] || tagMap.generic\n  }\n\n  private getScenarioNotes(scenario: BusinessScenario): string {\n    const noteMap: Record<BusinessScenario, string> = {\n      retail: 'Prefers email notifications for new arrivals',\n      restaurant: 'Allergic to nuts - important for orders',\n      real_estate: 'Looking for properties in downtown area',\n      healthcare: 'Prefers morning appointments',\n      education: 'Interested in advanced courses',\n      ecommerce: 'Interested in smart home products',\n      automotive: 'Looking for eco-friendly vehicles',\n      travel: 'Prefers adventure travel packages',\n      fitness: 'Interested in strength training programs',\n      generic: 'Important customer notes'\n    }\n    return noteMap[scenario] || noteMap.generic\n  }\n\n  private getScenarioSubject(scenario: BusinessScenario, index: number): string {\n    const subjectMap: Record<BusinessScenario, string[]> = {\n      retail: ['Order Status Inquiry', 'Size Exchange Request', 'Return Process', 'Product Recommendation'],\n      restaurant: ['Table Reservation', 'Takeout Order', 'Catering Inquiry', 'Special Dietary Requirements'],\n      real_estate: ['Property Viewing', 'Market Analysis Request', 'Financing Options', 'Investment Opportunity'],\n      healthcare: ['Appointment Booking', 'Prescription Refill', 'Test Results Inquiry', 'Health Consultation'],\n      education: ['Course Enrollment', 'Assignment Help', 'Grade Inquiry', 'Academic Support'],\n      ecommerce: ['Order Tracking', 'Product Support', 'Warranty Claim', 'Technical Issue'],\n      automotive: ['Test Drive Request', 'Service Appointment', 'Finance Application', 'Vehicle Inquiry'],\n      travel: ['Trip Planning', 'Booking Assistance', 'Travel Insurance', 'Destination Information'],\n      fitness: ['Class Booking', 'Personal Training', 'Membership Inquiry', 'Fitness Consultation'],\n      generic: ['General Inquiry', 'Support Request', 'Information Needed', 'Service Question']\n    }\n    const subjects = subjectMap[scenario] || subjectMap.generic\n    return subjects[index % subjects.length]\n  }\n\n  private getScenarioMessage(scenario: BusinessScenario, index: number): string {\n    const messageMap: Record<BusinessScenario, string[]> = {\n      retail: [\n        'Hi! I placed an order last week and wanted to check the status.',\n        'Could you help me with a size exchange?',\n        'The item I received doesn\\'t fit properly.',\n        'Do you have this in a different color?'\n      ],\n      restaurant: [\n        'I\\'d like to make a reservation for tonight.',\n        'Can I place a takeout order?',\n        'Do you have any vegan options available?',\n        'What are your hours for delivery?'\n      ],\n      real_estate: [\n        'I\\'m interested in scheduling a viewing.',\n        'Could you provide more details about this property?',\n        'What\\'s the current market trend in this area?',\n        'Do you have financing options available?'\n      ],\n      healthcare: [\n        'I need to schedule an appointment.',\n        'When will my test results be ready?',\n        'I need a prescription refill.',\n        'Can I consult about my symptoms?'\n      ],\n      education: [\n        'How do I enroll in the advanced course?',\n        'I need help with my assignment.',\n        'When are the exam dates?',\n        'What are the course requirements?'\n      ],\n      ecommerce: [\n        'Where is my order?',\n        'The product isn\\'t working as expected.',\n        'I need to return this item.',\n        'Do you have technical support?'\n      ],\n      automotive: [\n        'I\\'d like to schedule a test drive.',\n        'What financing options do you offer?',\n        'Can you service my current vehicle?',\n        'Tell me more about this model.'\n      ],\n      travel: [\n        'I need help planning a trip.',\n        'What packages do you recommend?',\n        'Can you book flights and hotels?',\n        'What\\'s included in this tour?'\n      ],\n      fitness: [\n        'I want to book a fitness class.',\n        'Do you offer personal training?',\n        'What are your membership rates?',\n        'Can you create a workout plan?'\n      ],\n      generic: [\n        'I have a question about your service.',\n        'Could you provide more information?',\n        'I need assistance with something.',\n        'How can you help me?'\n      ]\n    }\n    const messages = messageMap[scenario] || messageMap.generic\n    return messages[index % messages.length]\n  }\n\n  private getScenarioTemplates(scenario: BusinessScenario): Omit<DemoTemplate, 'language' | 'variables'>[] {\n    const templateMap: Record<BusinessScenario, Omit<DemoTemplate, 'language' | 'variables'>[]> = {\n      retail: [\n        {\n          name: 'Order Confirmation',\n          content: 'Hi {{customer_name}}! Your order #{{order_number}} has been confirmed and will be shipped within 24 hours.',\n          category: 'orders'\n        },\n        {\n          name: 'Shipping Update',\n          content: 'Your order #{{order_number}} is on its way! Track it here: {{tracking_link}}',\n          category: 'shipping'\n        }\n      ],\n      restaurant: [\n        {\n          name: 'Reservation Confirmation',\n          content: 'Your table for {{party_size}} is confirmed for {{date}} at {{time}}. See you soon!',\n          category: 'reservations'\n        },\n        {\n          name: 'Order Ready',\n          content: 'Hi {{customer_name}}, your takeout order is ready for pickup!',\n          category: 'orders'\n        }\n      ],\n      // Add more scenarios...\n      generic: [\n        {\n          name: 'Welcome Message',\n          content: 'Welcome {{customer_name}}! How can we help you today?',\n          category: 'general'\n        },\n        {\n          name: 'Thank You',\n          content: 'Thank you for contacting us. We\\'ll get back to you within 24 hours.',\n          category: 'general'\n        }\n      ]\n    }\n    return templateMap[scenario] || templateMap.generic\n  }\n\n  private getScenarioAutomationRules(scenario: BusinessScenario): DemoAutomationRule[] {\n    return [\n      {\n        name: 'Welcome New Contacts',\n        trigger: 'new_contact',\n        conditions: { is_first_message: true },\n        actions: { send_template: 'welcome_message' },\n        is_active: true\n      },\n      {\n        name: 'Auto-assign to Agent',\n        trigger: 'new_conversation',\n        conditions: { business_hours: true },\n        actions: { assign_to: 'available_agent' },\n        is_active: true\n      }\n    ]\n  }\n\n  private extractVariables(content: string): string[] {\n    const matches = content.match(/\\{\\{([^}]+)\\}\\}/g)\n    return matches ? matches.map(match => match.slice(2, -2)) : []\n  }\n\n  private getBaseScenarioData(scenario: BusinessScenario): any {\n    return DEMO_SCENARIOS[scenario]\n  }\n\n  // Database operation methods\n  private async createContacts(organizationId: string, contacts: DemoContact[]): Promise<void> {\n    for (const contact of contacts) {\n      await this.supabase.from('contacts').insert({\n        organization_id: organizationId,\n        whatsapp_id: contact.whatsapp_id,\n        phone_number: contact.phone_number,\n        name: contact.name,\n        profile_picture_url: contact.profile_picture_url,\n        tags: contact.tags,\n        notes: contact.notes,\n        last_message_at: contact.last_interaction\n      })\n    }\n  }\n\n  private async createConversationsWithMessages(\n    organizationId: string,\n    conversations: DemoConversation[],\n    messages: DemoMessage[]\n  ): Promise<void> {\n    for (const conversation of conversations) {\n      // Find contact by phone number\n      const { data: contact } = await this.supabase\n        .from('contacts')\n        .select('id')\n        .eq('organization_id', organizationId)\n        .eq('phone_number', conversation.contact_phone)\n        .single()\n\n      if (contact) {\n        const { data: newConversation } = await this.supabase\n          .from('conversations')\n          .insert({\n            organization_id: organizationId,\n            contact_id: contact.id,\n            status: conversation.status,\n            priority: conversation.priority,\n            subject: conversation.subject,\n            last_message_at: conversation.last_message_at\n          })\n          .select()\n          .single()\n\n        if (newConversation) {\n          // Create messages for this conversation\n          const conversationMessages = messages.filter(\n            msg => msg.conversation_contact_phone === conversation.contact_phone\n          )\n\n          for (const message of conversationMessages) {\n            await this.supabase.from('messages').insert({\n              conversation_id: newConversation.id,\n              sender_type: message.sender_type,\n              content: message.content,\n              message_type: message.message_type,\n              media_url: message.media_url,\n              is_read: message.is_read,\n              created_at: message.created_at\n            })\n          }\n        }\n      }\n    }\n  }\n\n  private async createTemplates(organizationId: string, templates: DemoTemplate[]): Promise<void> {\n    // Templates would be stored in a separate table if implemented\n    console.log('Creating templates for organization:', organizationId, templates.length)\n  }\n\n  private async deleteOrganizationContacts(organizationId: string): Promise<number> {\n    const { count } = await this.supabase\n      .from('contacts')\n      .delete({ count: 'exact' })\n      .eq('organization_id', organizationId)\n\n    return count || 0\n  }\n\n  private async deleteOrganizationConversations(organizationId: string): Promise<number> {\n    const { count } = await this.supabase\n      .from('conversations')\n      .delete({ count: 'exact' })\n      .eq('organization_id', organizationId)\n\n    return count || 0\n  }\n\n  private async deleteOrganizationMessages(organizationId: string): Promise<number> {\n    // Delete messages through conversations\n    const { data: conversations } = await this.supabase\n      .from('conversations')\n      .select('id')\n      .eq('organization_id', organizationId)\n\n    if (conversations && conversations.length > 0) {\n      const conversationIds = conversations.map(c => c.id)\n      const { count } = await this.supabase\n        .from('messages')\n        .delete({ count: 'exact' })\n        .in('conversation_id', conversationIds)\n\n      return count || 0\n    }\n\n    return 0\n  }\n}\n\n/**\n * Enforces security policies for demo accounts\n */\nexport class DemoSecurityPolicy {\n  private policy: DemoSecurityPolicy\n\n  constructor(customPolicy?: Partial<DemoSecurityPolicy>) {\n    this.policy = { ...DEFAULT_DEMO_SECURITY_POLICY, ...customPolicy }\n  }\n\n  /**\n   * Validate if a new session can be created for this IP\n   */\n  validateNewSession(ipAddress: string, currentSessions: number, sessionsInWindow: number): {\n    allowed: boolean\n    reason?: string\n  } {\n    if (this.policy.blocked_ips.includes(ipAddress)) {\n      return { allowed: false, reason: 'IP address is blocked' }\n    }\n\n    if (currentSessions >= this.policy.max_sessions_per_ip) {\n      return { allowed: false, reason: 'Maximum concurrent sessions exceeded for this IP' }\n    }\n\n    if (sessionsInWindow >= this.policy.max_sessions_per_hour) {\n      return { allowed: false, reason: 'Rate limit exceeded - too many sessions created in the last hour' }\n    }\n\n    return { allowed: true }\n  }\n\n  /**\n   * Check if session should be expired\n   */\n  shouldExpireSession(sessionCreatedAt: string): boolean {\n    const createdTime = new Date(sessionCreatedAt)\n    const now = new Date()\n    const diffMinutes = (now.getTime() - createdTime.getTime()) / (1000 * 60)\n\n    return diffMinutes > this.policy.session_duration_minutes\n  }\n\n  /**\n   * Get security policy configuration\n   */\n  getPolicy(): DemoSecurityPolicy {\n    return { ...this.policy }\n  }\n\n  /**\n   * Update security policy\n   */\n  updatePolicy(updates: Partial<DemoSecurityPolicy>): void {\n    this.policy = { ...this.policy, ...updates }\n  }\n\n  /**\n   * Block an IP address\n   */\n  blockIP(ipAddress: string): void {\n    if (!this.policy.blocked_ips.includes(ipAddress)) {\n      this.policy.blocked_ips.push(ipAddress)\n    }\n  }\n\n  /**\n   * Unblock an IP address\n   */\n  unblockIP(ipAddress: string): void {\n    this.policy.blocked_ips = this.policy.blocked_ips.filter(ip => ip !== ipAddress)\n  }\n\n  /**\n   * Check if IP is blocked\n   */\n  isIPBlocked(ipAddress: string): boolean {\n    return this.policy.blocked_ips.includes(ipAddress)\n  }\n}\n\n/**\n * Utility functions for demo management\n */\nexport const DemoUtils = {\n  /**\n   * Generate a demo organization slug\n   */\n  generateDemoSlug(scenario: BusinessScenario): string {\n    return `demo-${scenario}-${Date.now()}-${Math.random().toString(36).substr(2, 5)}`\n  },\n\n  /**\n   * Calculate demo progress percentage\n   */\n  calculateProgress(stepsCompleted: string[], totalSteps: number): number {\n    return Math.min((stepsCompleted.length / totalSteps) * 100, 100)\n  },\n\n  /**\n   * Format session duration\n   */\n  formatSessionDuration(startTime: string): string {\n    const start = new Date(startTime)\n    const now = new Date()\n    const diffMinutes = Math.floor((now.getTime() - start.getTime()) / (1000 * 60))\n\n    if (diffMinutes < 60) {\n      return `${diffMinutes} minutes`\n    } else {\n      const hours = Math.floor(diffMinutes / 60)\n      const remainingMinutes = diffMinutes % 60\n      return `${hours}h ${remainingMinutes}m`\n    }\n  },\n\n  /**\n   * Generate demo analytics summary\n   */\n  generateAnalyticsSummary(analytics: DemoAnalytics): any {\n    return {\n      totalEvents: analytics.events.length,\n      totalPageViews: analytics.page_views.length,\n      featuresUsed: analytics.feature_usage.length,\n      completionRate: analytics.conversion_funnel.filter(step => step.completed).length / analytics.conversion_funnel.length * 100,\n      averagePageLoadTime: Object.values(analytics.performance_metrics.page_load_times).reduce((a, b) => a + b, 0) / Object.keys(analytics.performance_metrics.page_load_times).length || 0\n    }\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}