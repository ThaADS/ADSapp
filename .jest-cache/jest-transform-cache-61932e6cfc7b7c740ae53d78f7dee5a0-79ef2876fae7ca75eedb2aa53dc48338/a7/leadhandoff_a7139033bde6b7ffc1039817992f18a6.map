{"version":3,"names":["LeadHandoffSystem","cov_2em2l3d472","f","s","LeadHandoffUtils","constructor","supabaseClient","crmIntegrations","Map","handoffRules","automationWorkflows","supabase","loadConfigurations","createLead","sessionId","contactInfo","leadScore","sessionData","utmData","leadId","_uuid","v4","now","Date","toISOString","data","session","from","select","eq","single","businessScenario","b","business_scenario","engagementTimeline","buildEngagementTimeline","lifecycleStage","determineLifecycleStage","estimatedValue","estimateLeadValue","lead","id","session_id","email","name","company","phone","lead_score","status","source","determineLeadSource","utm_data","session_data","engagement_timeline","sales_notes","follow_up_actions","created_at","updated_at","last_activity_at","conversion_probability","estimated_value","lifecycle_stage","storeLead","processHandoffRules","syncWithCRM","triggerMarketingAutomation","error","console","Error","message","updateLeadScore","newScore","activityData","getLead","previousScore","total_score","scoreChange","Math","abs","engagementEvent","event_type","timestamp","description","metadata","previous_score","new_score","activity_data","engagement_score_impact","push","updateLead","assignLeadToSalesRep","salesRepId","reason","autoGenerateTasks","assigned_to","assignmentNote","note","created_by","note_type","sentiment","next_action","followUpTasks","generateFollowUpTasks","notifySalesRep","createFollowUpAction","action","followUpAction","automation_trigger","scheduleAutomation","addSalesNote","salesNote","getLeads","criteria","limit","offset","query","order","ascending","range","in","min_score","gte","max_score","lte","created_after","created_before","getLeadAnalytics","timeRange","start","end","leads","total_leads","conversion_rate","average_score","lead_by_source","lead_by_stage","score_distribution","top_performing_scenarios","totalLeads","length","convertedLeads","filter","conversionRate","averageScore","reduce","sum","leadBySource","acc","leadByStage","scoreRanges","scoreDistribution","map","min","max","split","Number","count","score","scenarioStats","scenario","total","converted","topPerformingScenarios","Object","entries","stats","sort","a","crmData","forEach","integration","set","rulesData","automationData","activities","timeline","activity","event","mapActivityToEngagementType","activity_type","generateEventDescription","calculateEngagementImpact","activityType","mapping","feature","impacts","sales_readiness","baseValues","retail","restaurant","real_estate","healthcare","education","ecommerce","automotive","travel","fitness","generic","baseValue","scoreMultiplier","engagementMultiplier","duration_seconds","round","utm_source","utm_medium","includes","referrer","insert","update","rule","shouldTrigger","evaluateHandoffConditions","conditions","executeHandoffActions","actions","trigger_count","every","condition","value","getLeadFieldValue","field","operator","category_scores","engagement","demo_completion_percentage","features_explored","action_type","parameters","sales_rep_id","sendEmail","title","due_date","delay_minutes","priority","tasks","getTime","syncLeadToCRM","provider","field_mappings","sourceValue","source_field","transformation","applyTransformation","target_field","default_value","syncToSalesforce","configuration","syncToHubspot","syncToPipedrive","String","toUpperCase","toLowerCase","formatPhoneNumber","cleaned","replace","slice","config","workflow","evaluateAutomationConditions","trigger_conditions","executeAutomationWorkflow","step","workflow_steps","step_order","executeWorkflowStep","step_type","sendWorkflowEmail","callWebhook","webhook_url","fetch","method","headers","body","JSON","stringify","formatLeadDisplay","scoreColors","qualified","hot","warm","cold","statusBadges","new","contacted","demo_scheduled","closed_won","closed_lost","scoreColor","statusBadge","priorityLevel","nextAction","calculateLeadVelocity","contactedLeads","qualifiedLeads","closedLeads","averageDaysToContact","createdDate","contactedDate","averageDaysToQualify","qualifiedDate","averageDaysToClose","closedDate"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\lib\\lead-handoff.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\nimport { v4 as uuidv4 } from 'uuid'\nimport { LeadScore } from './conversion-optimization'\nimport { BusinessScenario } from '@/types/demo'\nimport { Database } from '@/types/database'\n\ntype SupabaseClient = ReturnType<typeof createClient<Database>>\n\n// Lead Handoff Types\nexport interface Lead {\n  id: string\n  session_id: string\n  email?: string\n  name?: string\n  company?: string\n  phone?: string\n  business_scenario: BusinessScenario\n  lead_score: LeadScore\n  status: LeadStatus\n  source: LeadSource\n  utm_data?: UTMData\n  session_data: SessionData\n  engagement_timeline: EngagementEvent[]\n  sales_notes: SalesNote[]\n  follow_up_actions: FollowUpAction[]\n  assigned_to?: string\n  created_at: string\n  updated_at: string\n  last_activity_at: string\n  conversion_probability: number\n  estimated_value?: number\n  lifecycle_stage: LifecycleStage\n}\n\nexport interface SessionData {\n  duration_seconds: number\n  pages_visited: string[]\n  features_explored: string[]\n  total_interactions: number\n  conversion_events: ConversionEvent[]\n  demo_completion_percentage: number\n  user_agent: string\n  referrer?: string\n  country?: string\n  device_type: 'desktop' | 'mobile' | 'tablet'\n  ab_test_variant?: string\n}\n\nexport interface ConversionEvent {\n  event_type: string\n  timestamp: string\n  page_path: string\n  element_clicked?: string\n  form_data?: Record<string, any>\n  value?: number\n}\n\nexport interface EngagementEvent {\n  id: string\n  event_type: 'demo_start' | 'feature_use' | 'signup_click' | 'form_fill' | 'email_open' | 'link_click' | 'meeting_booked'\n  timestamp: string\n  description: string\n  metadata?: Record<string, any>\n  engagement_score_impact: number\n}\n\nexport interface SalesNote {\n  id: string\n  note: string\n  created_by: string\n  created_at: string\n  note_type: 'call' | 'email' | 'meeting' | 'demo' | 'general'\n  sentiment: 'positive' | 'neutral' | 'negative'\n  next_action?: string\n}\n\nexport interface FollowUpAction {\n  id: string\n  action_type: 'email' | 'call' | 'demo' | 'meeting' | 'content_send' | 'trial_setup'\n  title: string\n  description: string\n  due_date: string\n  assigned_to: string\n  status: 'pending' | 'in_progress' | 'completed' | 'cancelled'\n  priority: 'low' | 'medium' | 'high' | 'urgent'\n  automation_trigger?: AutomationTrigger\n  completion_data?: Record<string, any>\n  created_at: string\n  updated_at: string\n}\n\nexport interface AutomationTrigger {\n  trigger_type: 'time_based' | 'score_based' | 'activity_based'\n  conditions: TriggerCondition[]\n  delay_hours?: number\n}\n\nexport interface TriggerCondition {\n  field: string\n  operator: 'equals' | 'greater_than' | 'less_than' | 'contains'\n  value: any\n}\n\nexport interface UTMData {\n  utm_source?: string\n  utm_medium?: string\n  utm_campaign?: string\n  utm_content?: string\n  utm_term?: string\n}\n\nexport interface CRMIntegration {\n  id: string\n  provider: 'salesforce' | 'hubspot' | 'pipedrive' | 'custom'\n  configuration: CRMConfig\n  field_mappings: FieldMapping[]\n  sync_rules: SyncRule[]\n  last_sync_at?: string\n  is_active: boolean\n}\n\nexport interface CRMConfig {\n  api_endpoint: string\n  api_key?: string\n  oauth_token?: string\n  organization_id?: string\n  pipeline_id?: string\n  lead_source_id?: string\n}\n\nexport interface FieldMapping {\n  source_field: string\n  target_field: string\n  transformation?: 'uppercase' | 'lowercase' | 'format_phone' | 'format_date'\n  default_value?: string\n}\n\nexport interface SyncRule {\n  condition: string\n  action: 'create' | 'update' | 'skip'\n  priority: number\n}\n\nexport interface LeadHandoffRule {\n  id: string\n  name: string\n  description: string\n  conditions: HandoffCondition[]\n  actions: HandoffAction[]\n  is_active: boolean\n  priority: number\n  created_at: string\n  trigger_count: number\n  success_rate: number\n}\n\nexport interface HandoffCondition {\n  field: 'lead_score' | 'engagement_score' | 'conversion_probability' | 'demo_completion' | 'feature_usage'\n  operator: 'greater_than' | 'less_than' | 'equals' | 'in_range'\n  value: any\n  weight: number\n}\n\nexport interface HandoffAction {\n  action_type: 'assign_sales_rep' | 'send_email' | 'create_task' | 'schedule_demo' | 'add_to_sequence'\n  parameters: Record<string, any>\n  delay_minutes?: number\n}\n\nexport interface MarketingAutomation {\n  id: string\n  name: string\n  description: string\n  trigger_conditions: TriggerCondition[]\n  workflow_steps: WorkflowStep[]\n  is_active: boolean\n  performance_metrics: {\n    total_triggers: number\n    completion_rate: number\n    conversion_rate: number\n    roi: number\n  }\n}\n\nexport interface WorkflowStep {\n  id: string\n  step_type: 'email' | 'sms' | 'delay' | 'condition' | 'webhook'\n  step_order: number\n  configuration: StepConfiguration\n  success_criteria?: string\n  failure_action?: string\n}\n\nexport interface StepConfiguration {\n  template_id?: string\n  subject?: string\n  content?: string\n  delay_hours?: number\n  condition_field?: string\n  condition_operator?: string\n  condition_value?: any\n  webhook_url?: string\n}\n\nexport type LeadStatus = 'new' | 'contacted' | 'qualified' | 'demo_scheduled' | 'proposal_sent' | 'negotiation' | 'closed_won' | 'closed_lost' | 'nurturing'\nexport type LeadSource = 'website_demo' | 'landing_page' | 'referral' | 'advertising' | 'social_media' | 'content' | 'direct'\nexport type LifecycleStage = 'visitor' | 'lead' | 'marketing_qualified_lead' | 'sales_qualified_lead' | 'opportunity' | 'customer'\n\n/**\n * Lead Scoring and Handoff System\n * Manages lead qualification, scoring, and sales handoff processes\n */\nexport class LeadHandoffSystem {\n  private supabase: SupabaseClient\n  private crmIntegrations: Map<string, CRMIntegration> = new Map()\n  private handoffRules: LeadHandoffRule[] = []\n  private automationWorkflows: MarketingAutomation[] = []\n\n  constructor(supabaseClient: SupabaseClient) {\n    this.supabase = supabaseClient\n    this.loadConfigurations()\n  }\n\n  /**\n   * Create a new lead from demo session\n   */\n  async createLead(\n    sessionId: string,\n    contactInfo: {\n      email?: string\n      name?: string\n      company?: string\n      phone?: string\n    },\n    leadScore: LeadScore,\n    sessionData: SessionData,\n    utmData?: UTMData\n  ): Promise<{ lead: Lead; error?: string }> {\n    try {\n      const leadId = uuidv4()\n      const now = new Date().toISOString()\n\n      // Determine business scenario from session\n      const { data: session } = await this.supabase\n        .from('demo_sessions')\n        .select('business_scenario')\n        .eq('id', sessionId)\n        .single()\n\n      const businessScenario = session?.business_scenario || 'generic'\n\n      // Create engagement timeline from session activities\n      const engagementTimeline = await this.buildEngagementTimeline(sessionId)\n\n      // Determine lifecycle stage based on lead score\n      const lifecycleStage = this.determineLifecycleStage(leadScore, contactInfo)\n\n      // Estimate lead value\n      const estimatedValue = this.estimateLeadValue(leadScore, businessScenario, sessionData)\n\n      const lead: Lead = {\n        id: leadId,\n        session_id: sessionId,\n        email: contactInfo.email,\n        name: contactInfo.name,\n        company: contactInfo.company,\n        phone: contactInfo.phone,\n        business_scenario: businessScenario as BusinessScenario,\n        lead_score: leadScore,\n        status: 'new',\n        source: this.determineLeadSource(utmData, sessionData),\n        utm_data: utmData,\n        session_data: sessionData,\n        engagement_timeline: engagementTimeline,\n        sales_notes: [],\n        follow_up_actions: [],\n        created_at: now,\n        updated_at: now,\n        last_activity_at: now,\n        conversion_probability: leadScore.conversion_probability,\n        estimated_value: estimatedValue,\n        lifecycle_stage: lifecycleStage\n      }\n\n      // Store lead in database\n      await this.storeLead(lead)\n\n      // Process handoff rules\n      await this.processHandoffRules(lead)\n\n      // Sync with CRM if configured\n      await this.syncWithCRM(lead)\n\n      // Trigger marketing automation\n      await this.triggerMarketingAutomation(lead)\n\n      return { lead }\n    } catch (error) {\n      console.error('Error creating lead:', error)\n      return {\n        lead: null as any,\n        error: error instanceof Error ? error.message : 'Failed to create lead'\n      }\n    }\n  }\n\n  /**\n   * Update lead score and trigger re-evaluation\n   */\n  async updateLeadScore(\n    leadId: string,\n    newScore: LeadScore,\n    activityData?: Record<string, any>\n  ): Promise<boolean> {\n    try {\n      const lead = await this.getLead(leadId)\n      if (!lead) return false\n\n      const previousScore = lead.lead_score.total_score\n      const scoreChange = newScore.total_score - previousScore\n\n      // Update lead\n      lead.lead_score = newScore\n      lead.conversion_probability = newScore.conversion_probability\n      lead.updated_at = new Date().toISOString()\n      lead.last_activity_at = new Date().toISOString()\n\n      // Add engagement event for score change\n      if (Math.abs(scoreChange) > 5) {\n        const engagementEvent: EngagementEvent = {\n          id: uuidv4(),\n          event_type: scoreChange > 0 ? 'feature_use' : 'signup_click',\n          timestamp: new Date().toISOString(),\n          description: `Lead score ${scoreChange > 0 ? 'increased' : 'decreased'} by ${Math.abs(scoreChange)} points`,\n          metadata: {\n            previous_score: previousScore,\n            new_score: newScore.total_score,\n            activity_data: activityData\n          },\n          engagement_score_impact: scoreChange\n        }\n        lead.engagement_timeline.push(engagementEvent)\n      }\n\n      // Update database\n      await this.updateLead(lead)\n\n      // Re-evaluate handoff rules if score changed significantly\n      if (Math.abs(scoreChange) > 10) {\n        await this.processHandoffRules(lead)\n      }\n\n      return true\n    } catch (error) {\n      console.error('Error updating lead score:', error)\n      return false\n    }\n  }\n\n  /**\n   * Assign lead to sales representative\n   */\n  async assignLeadToSalesRep(\n    leadId: string,\n    salesRepId: string,\n    reason: string,\n    autoGenerateTasks: boolean = true\n  ): Promise<boolean> {\n    try {\n      const lead = await this.getLead(leadId)\n      if (!lead) return false\n\n      // Update assignment\n      lead.assigned_to = salesRepId\n      lead.status = 'contacted'\n      lead.updated_at = new Date().toISOString()\n\n      // Add sales note about assignment\n      const assignmentNote: SalesNote = {\n        id: uuidv4(),\n        note: `Lead assigned to sales rep. Reason: ${reason}`,\n        created_by: 'system',\n        created_at: new Date().toISOString(),\n        note_type: 'general',\n        sentiment: 'neutral',\n        next_action: 'Initial contact within 24 hours'\n      }\n      lead.sales_notes.push(assignmentNote)\n\n      // Generate follow-up tasks if requested\n      if (autoGenerateTasks) {\n        const followUpTasks = await this.generateFollowUpTasks(lead, salesRepId)\n        lead.follow_up_actions.push(...followUpTasks)\n      }\n\n      // Update database\n      await this.updateLead(lead)\n\n      // Notify sales rep\n      await this.notifySalesRep(salesRepId, lead)\n\n      return true\n    } catch (error) {\n      console.error('Error assigning lead to sales rep:', error)\n      return false\n    }\n  }\n\n  /**\n   * Create follow-up action for lead\n   */\n  async createFollowUpAction(\n    leadId: string,\n    action: Omit<FollowUpAction, 'id' | 'created_at' | 'updated_at'>\n  ): Promise<string | null> {\n    try {\n      const lead = await this.getLead(leadId)\n      if (!lead) return null\n\n      const followUpAction: FollowUpAction = {\n        ...action,\n        id: uuidv4(),\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      }\n\n      lead.follow_up_actions.push(followUpAction)\n      lead.updated_at = new Date().toISOString()\n\n      await this.updateLead(lead)\n\n      // Schedule automation if configured\n      if (followUpAction.automation_trigger) {\n        await this.scheduleAutomation(leadId, followUpAction)\n      }\n\n      return followUpAction.id\n    } catch (error) {\n      console.error('Error creating follow-up action:', error)\n      return null\n    }\n  }\n\n  /**\n   * Add sales note to lead\n   */\n  async addSalesNote(\n    leadId: string,\n    note: Omit<SalesNote, 'id' | 'created_at'>\n  ): Promise<boolean> {\n    try {\n      const lead = await this.getLead(leadId)\n      if (!lead) return false\n\n      const salesNote: SalesNote = {\n        ...note,\n        id: uuidv4(),\n        created_at: new Date().toISOString()\n      }\n\n      lead.sales_notes.push(salesNote)\n      lead.updated_at = new Date().toISOString()\n      lead.last_activity_at = new Date().toISOString()\n\n      await this.updateLead(lead)\n      return true\n    } catch (error) {\n      console.error('Error adding sales note:', error)\n      return false\n    }\n  }\n\n  /**\n   * Get leads by criteria\n   */\n  async getLeads(\n    criteria: {\n      status?: LeadStatus[]\n      assigned_to?: string\n      business_scenario?: BusinessScenario\n      min_score?: number\n      max_score?: number\n      lifecycle_stage?: LifecycleStage[]\n      created_after?: string\n      created_before?: string\n    },\n    limit: number = 50,\n    offset: number = 0\n  ): Promise<Lead[]> {\n    try {\n      let query = this.supabase\n        .from('leads')\n        .select('*')\n        .order('created_at', { ascending: false })\n        .range(offset, offset + limit - 1)\n\n      if (criteria.status) {\n        query = query.in('status', criteria.status)\n      }\n\n      if (criteria.assigned_to) {\n        query = query.eq('assigned_to', criteria.assigned_to)\n      }\n\n      if (criteria.business_scenario) {\n        query = query.eq('business_scenario', criteria.business_scenario)\n      }\n\n      if (criteria.min_score) {\n        query = query.gte('lead_score->total_score', criteria.min_score)\n      }\n\n      if (criteria.max_score) {\n        query = query.lte('lead_score->total_score', criteria.max_score)\n      }\n\n      if (criteria.lifecycle_stage) {\n        query = query.in('lifecycle_stage', criteria.lifecycle_stage)\n      }\n\n      if (criteria.created_after) {\n        query = query.gte('created_at', criteria.created_after)\n      }\n\n      if (criteria.created_before) {\n        query = query.lte('created_at', criteria.created_before)\n      }\n\n      const { data, error } = await query\n\n      return error ? [] : data || []\n    } catch (error) {\n      console.error('Error getting leads:', error)\n      return []\n    }\n  }\n\n  /**\n   * Get lead analytics and insights\n   */\n  async getLeadAnalytics(\n    timeRange?: { start: string; end: string }\n  ): Promise<{\n    total_leads: number\n    conversion_rate: number\n    average_score: number\n    lead_by_source: Record<string, number>\n    lead_by_stage: Record<string, number>\n    score_distribution: { range: string; count: number }[]\n    top_performing_scenarios: { scenario: string; conversion_rate: number }[]\n  }> {\n    try {\n      let query = this.supabase.from('leads').select('*')\n\n      if (timeRange) {\n        query = query\n          .gte('created_at', timeRange.start)\n          .lte('created_at', timeRange.end)\n      }\n\n      const { data: leads, error } = await query\n\n      if (error || !leads) {\n        return {\n          total_leads: 0,\n          conversion_rate: 0,\n          average_score: 0,\n          lead_by_source: {},\n          lead_by_stage: {},\n          score_distribution: [],\n          top_performing_scenarios: []\n        }\n      }\n\n      // Calculate metrics\n      const totalLeads = leads.length\n      const convertedLeads = leads.filter(lead =>\n        lead.status === 'closed_won'\n      ).length\n      const conversionRate = totalLeads > 0 ? (convertedLeads / totalLeads) * 100 : 0\n      const averageScore = leads.reduce((sum, lead) => sum + (lead.lead_score?.total_score || 0), 0) / totalLeads\n\n      // Group by source\n      const leadBySource = leads.reduce((acc, lead) => {\n        acc[lead.source] = (acc[lead.source] || 0) + 1\n        return acc\n      }, {} as Record<string, number>)\n\n      // Group by lifecycle stage\n      const leadByStage = leads.reduce((acc, lead) => {\n        acc[lead.lifecycle_stage] = (acc[lead.lifecycle_stage] || 0) + 1\n        return acc\n      }, {} as Record<string, number>)\n\n      // Score distribution\n      const scoreRanges = ['0-20', '21-40', '41-60', '61-80', '81-100']\n      const scoreDistribution = scoreRanges.map(range => {\n        const [min, max] = range.split('-').map(Number)\n        const count = leads.filter(lead => {\n          const score = lead.lead_score?.total_score || 0\n          return score >= min && score <= max\n        }).length\n        return { range, count }\n      })\n\n      // Top performing scenarios\n      const scenarioStats = leads.reduce((acc, lead) => {\n        const scenario = lead.business_scenario\n        if (!acc[scenario]) {\n          acc[scenario] = { total: 0, converted: 0 }\n        }\n        acc[scenario].total++\n        if (lead.status === 'closed_won') {\n          acc[scenario].converted++\n        }\n        return acc\n      }, {} as Record<string, { total: number; converted: number }>)\n\n      const topPerformingScenarios = Object.entries(scenarioStats)\n        .map(([scenario, stats]) => ({\n          scenario,\n          conversion_rate: stats.total > 0 ? (stats.converted / stats.total) * 100 : 0\n        }))\n        .sort((a, b) => b.conversion_rate - a.conversion_rate)\n\n      return {\n        total_leads: totalLeads,\n        conversion_rate: conversionRate,\n        average_score: averageScore,\n        lead_by_source: leadBySource,\n        lead_by_stage: leadByStage,\n        score_distribution: scoreDistribution,\n        top_performing_scenarios: topPerformingScenarios\n      }\n    } catch (error) {\n      console.error('Error getting lead analytics:', error)\n      return {\n        total_leads: 0,\n        conversion_rate: 0,\n        average_score: 0,\n        lead_by_source: {},\n        lead_by_stage: {},\n        score_distribution: [],\n        top_performing_scenarios: []\n      }\n    }\n  }\n\n  // Private helper methods\n\n  private async loadConfigurations(): Promise<void> {\n    try {\n      // Load CRM integrations\n      const { data: crmData } = await this.supabase\n        .from('crm_integrations')\n        .select('*')\n        .eq('is_active', true)\n\n      crmData?.forEach(integration => {\n        this.crmIntegrations.set(integration.id, integration)\n      })\n\n      // Load handoff rules\n      const { data: rulesData } = await this.supabase\n        .from('lead_handoff_rules')\n        .select('*')\n        .eq('is_active', true)\n        .order('priority', { ascending: false })\n\n      this.handoffRules = rulesData || []\n\n      // Load marketing automation workflows\n      const { data: automationData } = await this.supabase\n        .from('marketing_automations')\n        .select('*')\n        .eq('is_active', true)\n\n      this.automationWorkflows = automationData || []\n\n    } catch (error) {\n      console.error('Error loading configurations:', error)\n    }\n  }\n\n  private async buildEngagementTimeline(sessionId: string): Promise<EngagementEvent[]> {\n    const { data: activities } = await this.supabase\n      .from('demo_session_activities')\n      .select('*')\n      .eq('session_id', sessionId)\n      .order('created_at', { ascending: true })\n\n    const timeline: EngagementEvent[] = []\n\n    activities?.forEach(activity => {\n      const event: EngagementEvent = {\n        id: uuidv4(),\n        event_type: this.mapActivityToEngagementType(activity.activity_type),\n        timestamp: activity.created_at,\n        description: this.generateEventDescription(activity),\n        metadata: activity.activity_data,\n        engagement_score_impact: this.calculateEngagementImpact(activity.activity_type)\n      }\n      timeline.push(event)\n    })\n\n    return timeline\n  }\n\n  private mapActivityToEngagementType(activityType: string): EngagementEvent['event_type'] {\n    const mapping: Record<string, EngagementEvent['event_type']> = {\n      'demo_session_created': 'demo_start',\n      'feature_interaction': 'feature_use',\n      'signup_clicked': 'signup_click',\n      'form_submission': 'form_fill'\n    }\n    return mapping[activityType] || 'feature_use'\n  }\n\n  private generateEventDescription(activity: any): string {\n    switch (activity.activity_type) {\n      case 'demo_session_created':\n        return 'Started demo session'\n      case 'feature_interaction':\n        return `Explored ${activity.activity_data?.feature || 'feature'}`\n      case 'signup_clicked':\n        return 'Clicked signup button'\n      case 'form_submission':\n        return 'Submitted contact form'\n      default:\n        return `Performed ${activity.activity_type}`\n    }\n  }\n\n  private calculateEngagementImpact(activityType: string): number {\n    const impacts: Record<string, number> = {\n      'demo_session_created': 10,\n      'feature_interaction': 5,\n      'signup_clicked': 15,\n      'form_submission': 20,\n      'page_view': 2\n    }\n    return impacts[activityType] || 1\n  }\n\n  private determineLifecycleStage(\n    leadScore: LeadScore,\n    contactInfo: { email?: string; name?: string; company?: string }\n  ): LifecycleStage {\n    if (leadScore.sales_readiness === 'qualified') return 'sales_qualified_lead'\n    if (leadScore.sales_readiness === 'hot') return 'marketing_qualified_lead'\n    if (contactInfo.email || contactInfo.name) return 'lead'\n    return 'visitor'\n  }\n\n  private estimateLeadValue(\n    leadScore: LeadScore,\n    businessScenario: BusinessScenario,\n    sessionData: SessionData\n  ): number {\n    const baseValues: Record<BusinessScenario, number> = {\n      retail: 500,\n      restaurant: 300,\n      real_estate: 2000,\n      healthcare: 1500,\n      education: 800,\n      ecommerce: 1000,\n      automotive: 3000,\n      travel: 600,\n      fitness: 400,\n      generic: 750\n    }\n\n    const baseValue = baseValues[businessScenario] || 750\n    const scoreMultiplier = leadScore.total_score / 100\n    const engagementMultiplier = Math.min(sessionData.duration_seconds / 600, 2) // Max 2x for 10+ minutes\n\n    return Math.round(baseValue * scoreMultiplier * engagementMultiplier)\n  }\n\n  private determineLeadSource(utmData?: UTMData, sessionData?: SessionData): LeadSource {\n    if (utmData?.utm_source === 'google' && utmData?.utm_medium === 'cpc') return 'advertising'\n    if (utmData?.utm_source?.includes('social')) return 'social_media'\n    if (utmData?.utm_medium === 'referral') return 'referral'\n    if (sessionData?.referrer?.includes('landing')) return 'landing_page'\n    if (sessionData?.referrer) return 'referral'\n    return 'website_demo'\n  }\n\n  private async storeLead(lead: Lead): Promise<void> {\n    await this.supabase.from('leads').insert({\n      id: lead.id,\n      session_id: lead.session_id,\n      email: lead.email,\n      name: lead.name,\n      company: lead.company,\n      phone: lead.phone,\n      business_scenario: lead.business_scenario,\n      lead_score: lead.lead_score,\n      status: lead.status,\n      source: lead.source,\n      utm_data: lead.utm_data,\n      session_data: lead.session_data,\n      engagement_timeline: lead.engagement_timeline,\n      sales_notes: lead.sales_notes,\n      follow_up_actions: lead.follow_up_actions,\n      assigned_to: lead.assigned_to,\n      created_at: lead.created_at,\n      updated_at: lead.updated_at,\n      last_activity_at: lead.last_activity_at,\n      conversion_probability: lead.conversion_probability,\n      estimated_value: lead.estimated_value,\n      lifecycle_stage: lead.lifecycle_stage\n    })\n  }\n\n  private async updateLead(lead: Lead): Promise<void> {\n    await this.supabase\n      .from('leads')\n      .update({\n        lead_score: lead.lead_score,\n        status: lead.status,\n        engagement_timeline: lead.engagement_timeline,\n        sales_notes: lead.sales_notes,\n        follow_up_actions: lead.follow_up_actions,\n        assigned_to: lead.assigned_to,\n        updated_at: lead.updated_at,\n        last_activity_at: lead.last_activity_at,\n        conversion_probability: lead.conversion_probability,\n        lifecycle_stage: lead.lifecycle_stage\n      })\n      .eq('id', lead.id)\n  }\n\n  private async getLead(leadId: string): Promise<Lead | null> {\n    const { data, error } = await this.supabase\n      .from('leads')\n      .select('*')\n      .eq('id', leadId)\n      .single()\n\n    return error ? null : data\n  }\n\n  private async processHandoffRules(lead: Lead): Promise<void> {\n    for (const rule of this.handoffRules) {\n      const shouldTrigger = this.evaluateHandoffConditions(lead, rule.conditions)\n\n      if (shouldTrigger) {\n        await this.executeHandoffActions(lead, rule.actions)\n\n        // Update rule trigger count\n        await this.supabase\n          .from('lead_handoff_rules')\n          .update({ trigger_count: rule.trigger_count + 1 })\n          .eq('id', rule.id)\n\n        break // Stop after first matching rule\n      }\n    }\n  }\n\n  private evaluateHandoffConditions(lead: Lead, conditions: HandoffCondition[]): boolean {\n    return conditions.every(condition => {\n      const value = this.getLeadFieldValue(lead, condition.field)\n\n      switch (condition.operator) {\n        case 'greater_than':\n          return value > condition.value\n        case 'less_than':\n          return value < condition.value\n        case 'equals':\n          return value === condition.value\n        case 'in_range':\n          return value >= condition.value.min && value <= condition.value.max\n        default:\n          return false\n      }\n    })\n  }\n\n  private getLeadFieldValue(lead: Lead, field: string): any {\n    switch (field) {\n      case 'lead_score':\n        return lead.lead_score.total_score\n      case 'engagement_score':\n        return lead.lead_score.category_scores.engagement\n      case 'conversion_probability':\n        return lead.conversion_probability\n      case 'demo_completion':\n        return lead.session_data.demo_completion_percentage\n      case 'feature_usage':\n        return lead.session_data.features_explored.length\n      default:\n        return 0\n    }\n  }\n\n  private async executeHandoffActions(lead: Lead, actions: HandoffAction[]): Promise<void> {\n    for (const action of actions) {\n      switch (action.action_type) {\n        case 'assign_sales_rep':\n          await this.assignLeadToSalesRep(\n            lead.id,\n            action.parameters.sales_rep_id,\n            action.parameters.reason || 'Automatic assignment via handoff rule'\n          )\n          break\n        case 'send_email':\n          await this.sendEmail(lead, action.parameters)\n          break\n        case 'create_task':\n          await this.createFollowUpAction(lead.id, {\n            action_type: 'call',\n            title: action.parameters.title,\n            description: action.parameters.description,\n            due_date: new Date(Date.now() + (action.delay_minutes || 0) * 60000).toISOString(),\n            assigned_to: action.parameters.assigned_to,\n            status: 'pending',\n            priority: action.parameters.priority || 'medium'\n          })\n          break\n      }\n    }\n  }\n\n  private async generateFollowUpTasks(lead: Lead, salesRepId: string): Promise<FollowUpAction[]> {\n    const tasks: FollowUpAction[] = []\n    const now = new Date()\n\n    // Initial contact task\n    tasks.push({\n      id: uuidv4(),\n      action_type: 'call',\n      title: 'Initial contact with new lead',\n      description: `Contact ${lead.name || lead.email} for initial qualification call`,\n      due_date: new Date(now.getTime() + 24 * 60 * 60 * 1000).toISOString(), // 24 hours\n      assigned_to: salesRepId,\n      status: 'pending',\n      priority: lead.lead_score.sales_readiness === 'qualified' ? 'high' : 'medium',\n      created_at: now.toISOString(),\n      updated_at: now.toISOString()\n    })\n\n    // Follow-up email task\n    tasks.push({\n      id: uuidv4(),\n      action_type: 'email',\n      title: 'Send follow-up email',\n      description: 'Send personalized follow-up email with relevant resources',\n      due_date: new Date(now.getTime() + 48 * 60 * 60 * 1000).toISOString(), // 48 hours\n      assigned_to: salesRepId,\n      status: 'pending',\n      priority: 'medium',\n      created_at: now.toISOString(),\n      updated_at: now.toISOString()\n    })\n\n    // Demo task if high-intent lead\n    if (lead.lead_score.sales_readiness === 'qualified' || lead.lead_score.sales_readiness === 'hot') {\n      tasks.push({\n        id: uuidv4(),\n        action_type: 'demo',\n        title: 'Schedule product demo',\n        description: 'Schedule a personalized product demo',\n        due_date: new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000).toISOString(), // 7 days\n        assigned_to: salesRepId,\n        status: 'pending',\n        priority: 'high',\n        created_at: now.toISOString(),\n        updated_at: now.toISOString()\n      })\n    }\n\n    return tasks\n  }\n\n  private async syncWithCRM(lead: Lead): Promise<void> {\n    for (const [id, integration] of this.crmIntegrations) {\n      try {\n        await this.syncLeadToCRM(lead, integration)\n      } catch (error) {\n        console.error(`Error syncing lead to CRM ${integration.provider}:`, error)\n      }\n    }\n  }\n\n  private async syncLeadToCRM(lead: Lead, integration: CRMIntegration): Promise<void> {\n    // Transform lead data according to field mappings\n    const crmData: Record<string, any> = {}\n\n    integration.field_mappings.forEach(mapping => {\n      let sourceValue = this.getLeadFieldValue(lead, mapping.source_field)\n\n      // Apply transformations\n      if (mapping.transformation && sourceValue) {\n        sourceValue = this.applyTransformation(sourceValue, mapping.transformation)\n      }\n\n      crmData[mapping.target_field] = sourceValue || mapping.default_value\n    })\n\n    // Make API call to CRM\n    switch (integration.provider) {\n      case 'salesforce':\n        await this.syncToSalesforce(crmData, integration.configuration)\n        break\n      case 'hubspot':\n        await this.syncToHubspot(crmData, integration.configuration)\n        break\n      case 'pipedrive':\n        await this.syncToPipedrive(crmData, integration.configuration)\n        break\n    }\n  }\n\n  private applyTransformation(value: any, transformation: string): any {\n    switch (transformation) {\n      case 'uppercase':\n        return String(value).toUpperCase()\n      case 'lowercase':\n        return String(value).toLowerCase()\n      case 'format_phone':\n        return this.formatPhoneNumber(String(value))\n      case 'format_date':\n        return new Date(value).toISOString()\n      default:\n        return value\n    }\n  }\n\n  private formatPhoneNumber(phone: string): string {\n    // Basic phone number formatting\n    const cleaned = phone.replace(/\\D/g, '')\n    if (cleaned.length === 10) {\n      return `(${cleaned.slice(0, 3)}) ${cleaned.slice(3, 6)}-${cleaned.slice(6)}`\n    }\n    return phone\n  }\n\n  private async syncToSalesforce(data: any, config: CRMConfig): Promise<void> {\n    // Salesforce API integration implementation\n  }\n\n  private async syncToHubspot(data: any, config: CRMConfig): Promise<void> {\n    // HubSpot API integration implementation\n  }\n\n  private async syncToPipedrive(data: any, config: CRMConfig): Promise<void> {\n    // Pipedrive API integration implementation\n  }\n\n  private async triggerMarketingAutomation(lead: Lead): Promise<void> {\n    for (const workflow of this.automationWorkflows) {\n      const shouldTrigger = this.evaluateAutomationConditions(lead, workflow.trigger_conditions)\n\n      if (shouldTrigger) {\n        await this.executeAutomationWorkflow(lead, workflow)\n      }\n    }\n  }\n\n  private evaluateAutomationConditions(lead: Lead, conditions: TriggerCondition[]): boolean {\n    return conditions.every(condition => {\n      const value = this.getLeadFieldValue(lead, condition.field)\n\n      switch (condition.operator) {\n        case 'equals':\n          return value === condition.value\n        case 'greater_than':\n          return value > condition.value\n        case 'less_than':\n          return value < condition.value\n        case 'contains':\n          return String(value).toLowerCase().includes(String(condition.value).toLowerCase())\n        default:\n          return false\n      }\n    })\n  }\n\n  private async executeAutomationWorkflow(lead: Lead, workflow: MarketingAutomation): Promise<void> {\n    // Execute workflow steps in sequence\n    for (const step of workflow.workflow_steps.sort((a, b) => a.step_order - b.step_order)) {\n      await this.executeWorkflowStep(lead, step)\n    }\n  }\n\n  private async executeWorkflowStep(lead: Lead, step: WorkflowStep): Promise<void> {\n    switch (step.step_type) {\n      case 'email':\n        await this.sendWorkflowEmail(lead, step.configuration)\n        break\n      case 'delay':\n        // For immediate execution, we skip delays\n        // In production, this would be handled by a job queue\n        break\n      case 'webhook':\n        await this.callWebhook(lead, step.configuration)\n        break\n    }\n  }\n\n  private async sendEmail(lead: Lead, parameters: any): Promise<void> {\n    // Email sending implementation\n  }\n\n  private async sendWorkflowEmail(lead: Lead, config: StepConfiguration): Promise<void> {\n    // Workflow email implementation\n  }\n\n  private async callWebhook(lead: Lead, config: StepConfiguration): Promise<void> {\n    // Webhook call implementation\n    if (config.webhook_url) {\n      try {\n        await fetch(config.webhook_url, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(lead)\n        })\n      } catch (error) {\n        console.error('Error calling webhook:', error)\n      }\n    }\n  }\n\n  private async notifySalesRep(salesRepId: string, lead: Lead): Promise<void> {\n    // Sales rep notification implementation\n  }\n\n  private async scheduleAutomation(leadId: string, action: FollowUpAction): Promise<void> {\n    // Automation scheduling implementation\n  }\n}\n\n/**\n * Lead Handoff Utilities\n */\nexport const LeadHandoffUtils = {\n  /**\n   * Format lead score for display\n   */\n  formatLeadDisplay(lead: Lead): {\n    scoreColor: string\n    statusBadge: string\n    priorityLevel: number\n    nextAction: string\n  } {\n    const scoreColors = {\n      qualified: 'green',\n      hot: 'orange',\n      warm: 'yellow',\n      cold: 'gray'\n    }\n\n    const statusBadges = {\n      new: 'New Lead',\n      contacted: 'Contacted',\n      qualified: 'Qualified',\n      demo_scheduled: 'Demo Scheduled',\n      closed_won: 'Customer',\n      closed_lost: 'Lost'\n    }\n\n    const scoreColor = scoreColors[lead.lead_score.sales_readiness]\n    const statusBadge = statusBadges[lead.status]\n    const priorityLevel = lead.lead_score.total_score\n\n    const nextAction = lead.follow_up_actions\n      .filter(action => action.status === 'pending')\n      .sort((a, b) => new Date(a.due_date).getTime() - new Date(b.due_date).getTime())[0]?.title || 'No actions scheduled'\n\n    return { scoreColor, statusBadge, priorityLevel, nextAction }\n  },\n\n  /**\n   * Calculate lead velocity\n   */\n  calculateLeadVelocity(leads: Lead[]): {\n    averageDaysToContact: number\n    averageDaysToQualify: number\n    averageDaysToClose: number\n  } {\n    const contactedLeads = leads.filter(lead => lead.status !== 'new')\n    const qualifiedLeads = leads.filter(lead =>\n      ['qualified', 'demo_scheduled', 'proposal_sent', 'negotiation', 'closed_won', 'closed_lost'].includes(lead.status)\n    )\n    const closedLeads = leads.filter(lead =>\n      ['closed_won', 'closed_lost'].includes(lead.status)\n    )\n\n    const averageDaysToContact = contactedLeads.length > 0\n      ? contactedLeads.reduce((sum, lead) => {\n          const createdDate = new Date(lead.created_at)\n          const contactedDate = new Date(lead.updated_at) // Simplified\n          return sum + (contactedDate.getTime() - createdDate.getTime()) / (1000 * 60 * 60 * 24)\n        }, 0) / contactedLeads.length\n      : 0\n\n    const averageDaysToQualify = qualifiedLeads.length > 0\n      ? qualifiedLeads.reduce((sum, lead) => {\n          const createdDate = new Date(lead.created_at)\n          const qualifiedDate = new Date(lead.updated_at) // Simplified\n          return sum + (qualifiedDate.getTime() - createdDate.getTime()) / (1000 * 60 * 60 * 24)\n        }, 0) / qualifiedLeads.length\n      : 0\n\n    const averageDaysToClose = closedLeads.length > 0\n      ? closedLeads.reduce((sum, lead) => {\n          const createdDate = new Date(lead.created_at)\n          const closedDate = new Date(lead.updated_at) // Simplified\n          return sum + (closedDate.getTime() - createdDate.getTime()) / (1000 * 60 * 60 * 24)\n        }, 0) / closedLeads.length\n      : 0\n\n    return {\n      averageDaysToContact: Math.round(averageDaysToContact * 10) / 10,\n      averageDaysToQualify: Math.round(averageDaysToQualify * 10) / 10,\n      averageDaysToClose: Math.round(averageDaysToClose * 10) / 10\n    }\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}