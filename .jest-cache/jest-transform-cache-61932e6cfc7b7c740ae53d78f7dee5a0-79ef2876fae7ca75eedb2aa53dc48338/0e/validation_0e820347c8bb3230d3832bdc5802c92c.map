{"version":3,"names":["emailSchema","cov_7bk2zx2jc","f","s","fileUploadSchema","hasSqlInjection","hasXss","nameSchema","organizationNameSchema","paginationSchema","passwordSchema","phoneSchema","resetPasswordSchema","sanitizeInput","sanitizeObject","sanitizedTextSchema","signInSchema","signUpSchema","updateOrganizationSchema","updatePasswordSchema","updateProfileSchema","urlSchema","validateRequest","_zod","z","string","email","min","max","refine","includes","b","startsWith","endsWith","suspiciousPatterns","some","pattern","test","password","weakPasswords","weak","toLowerCase","name","xssPatterns","regex","maliciousPatterns","url","parsedUrl","URL","process","env","NODE_ENV","protocol","hostname","match","text","transform","replace","object","page","Number","n","limit","filename","allowedExtensions","ext","size","number","mimeType","allowedMimeTypes","full_name","organization_name","optional","token","phone","domain","schema","data","validated","parse","success","error","ZodError","firstError","errors","message","input","trim","sqlPatterns","obj","sanitized","key","value","Object","entries","Array","isArray"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\lib\\security\\validation.ts"],"sourcesContent":["import { z } from 'zod'\n\n// Email validation with additional security checks\nexport const emailSchema = z\n  .string()\n  .email('Invalid email format')\n  .min(5, 'Email must be at least 5 characters')\n  .max(254, 'Email must not exceed 254 characters')\n  .refine(\n    (email) => !email.includes('..'),\n    'Email cannot contain consecutive dots'\n  )\n  .refine(\n    (email) => !email.startsWith('.') && !email.endsWith('.'),\n    'Email cannot start or end with a dot'\n  )\n  .refine(\n    (email) => {\n      // Check for suspicious patterns\n      const suspiciousPatterns = [\n        /script/i,\n        /javascript/i,\n        /vbscript/i,\n        /onload/i,\n        /onclick/i,\n        /<.*>/,\n      ]\n      return !suspiciousPatterns.some(pattern => pattern.test(email))\n    },\n    'Email contains invalid characters'\n  )\n\n// Password validation with security requirements\nexport const passwordSchema = z\n  .string()\n  .min(8, 'Password must be at least 8 characters')\n  .max(128, 'Password must not exceed 128 characters')\n  .refine(\n    (password) => /[a-z]/.test(password),\n    'Password must contain at least one lowercase letter'\n  )\n  .refine(\n    (password) => /[A-Z]/.test(password),\n    'Password must contain at least one uppercase letter'\n  )\n  .refine(\n    (password) => /[0-9]/.test(password),\n    'Password must contain at least one number'\n  )\n  .refine(\n    (password) => /[^a-zA-Z0-9]/.test(password),\n    'Password must contain at least one special character'\n  )\n  .refine(\n    (password) => {\n      // Check against common weak passwords\n      const weakPasswords = [\n        'password',\n        '123456789',\n        'qwertyuiop',\n        'asdfghjkl',\n        'zxcvbnm',\n        'admin123',\n        'password123',\n      ]\n      return !weakPasswords.some(weak =>\n        password.toLowerCase().includes(weak.toLowerCase())\n      )\n    },\n    'Password is too common or weak'\n  )\n\n// Name validation to prevent XSS and injection\nexport const nameSchema = z\n  .string()\n  .min(1, 'Name is required')\n  .max(100, 'Name must not exceed 100 characters')\n  .refine(\n    (name) => /^[a-zA-Z\\s\\-\\.\\']+$/.test(name),\n    'Name can only contain letters, spaces, hyphens, dots, and apostrophes'\n  )\n  .refine(\n    (name) => {\n      // Prevent XSS patterns\n      const xssPatterns = [\n        /<script/i,\n        /javascript:/i,\n        /on\\w+=/i,\n        /<iframe/i,\n        /<object/i,\n        /<embed/i,\n      ]\n      return !xssPatterns.some(pattern => pattern.test(name))\n    },\n    'Name contains invalid characters'\n  )\n\n// Phone number validation\nexport const phoneSchema = z\n  .string()\n  .regex(\n    /^\\+?[1-9]\\d{1,14}$/,\n    'Invalid phone number format (use international format)'\n  )\n  .min(10, 'Phone number must be at least 10 digits')\n  .max(17, 'Phone number must not exceed 17 characters')\n\n// Organization name validation\nexport const organizationNameSchema = z\n  .string()\n  .min(2, 'Organization name must be at least 2 characters')\n  .max(100, 'Organization name must not exceed 100 characters')\n  .refine(\n    (name) => /^[a-zA-Z0-9\\s\\-\\.\\'&]+$/.test(name),\n    'Organization name contains invalid characters'\n  )\n  .refine(\n    (name) => {\n      // Prevent XSS and injection patterns\n      const maliciousPatterns = [\n        /<script/i,\n        /javascript:/i,\n        /on\\w+=/i,\n        /sql/i,\n        /union/i,\n        /select/i,\n        /drop/i,\n        /delete/i,\n        /insert/i,\n        /update/i,\n      ]\n      return !maliciousPatterns.some(pattern => pattern.test(name))\n    },\n    'Organization name contains prohibited content'\n  )\n\n// URL validation for custom domains\nexport const urlSchema = z\n  .string()\n  .url('Invalid URL format')\n  .refine(\n    (url) => {\n      try {\n        const parsedUrl = new URL(url)\n        // Only allow HTTPS in production\n        if (process.env.NODE_ENV === 'production' && parsedUrl.protocol !== 'https:') {\n          return false\n        }\n        // Prevent localhost and private IPs in production\n        if (process.env.NODE_ENV === 'production') {\n          const hostname = parsedUrl.hostname\n          if (\n            hostname === 'localhost' ||\n            hostname.startsWith('127.') ||\n            hostname.startsWith('192.168.') ||\n            hostname.startsWith('10.') ||\n            hostname.match(/^172\\.(1[6-9]|2\\d|3[01])\\./)\n          ) {\n            return false\n          }\n        }\n        return true\n      } catch {\n        return false\n      }\n    },\n    'URL is not allowed or uses invalid protocol'\n  )\n\n// Generic text input validation to prevent XSS\nexport const sanitizedTextSchema = z\n  .string()\n  .max(1000, 'Text must not exceed 1000 characters')\n  .refine(\n    (text) => {\n      // Prevent XSS patterns\n      const xssPatterns = [\n        /<script.*?>.*?<\\/script>/gi,\n        /<.*?on\\w+.*?=.*?>/gi,\n        /javascript:/gi,\n        /vbscript:/gi,\n        /<iframe.*?>/gi,\n        /<object.*?>/gi,\n        /<embed.*?>/gi,\n        /<form.*?>/gi,\n      ]\n      return !xssPatterns.some(pattern => pattern.test(text))\n    },\n    'Text contains potentially harmful content'\n  )\n  .transform((text) => {\n    // Basic HTML entity encoding for safety\n    return text\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&#x27;')\n  })\n\n// Pagination validation\nexport const paginationSchema = z.object({\n  page: z\n    .string()\n    .regex(/^\\d+$/, 'Page must be a positive number')\n    .transform(Number)\n    .refine(n => n >= 1, 'Page must be at least 1')\n    .refine(n => n <= 10000, 'Page number too large'),\n  limit: z\n    .string()\n    .regex(/^\\d+$/, 'Limit must be a positive number')\n    .transform(Number)\n    .refine(n => n >= 1, 'Limit must be at least 1')\n    .refine(n => n <= 100, 'Limit cannot exceed 100'),\n})\n\n// File upload validation\nexport const fileUploadSchema = z.object({\n  filename: z\n    .string()\n    .min(1, 'Filename is required')\n    .max(255, 'Filename too long')\n    .refine(\n      (filename) => {\n        // Check for path traversal attempts\n        return !filename.includes('..') && !filename.includes('/')\n      },\n      'Invalid filename'\n    )\n    .refine(\n      (filename) => {\n        // Allow only safe file extensions\n        const allowedExtensions = [\n          '.jpg', '.jpeg', '.png', '.gif', '.webp',\n          '.pdf', '.doc', '.docx', '.txt', '.csv'\n        ]\n        return allowedExtensions.some(ext =>\n          filename.toLowerCase().endsWith(ext)\n        )\n      },\n      'File type not allowed'\n    ),\n  size: z\n    .number()\n    .min(1, 'File cannot be empty')\n    .max(10 * 1024 * 1024, 'File size cannot exceed 10MB'),\n  mimeType: z\n    .string()\n    .refine(\n      (mimeType) => {\n        const allowedMimeTypes = [\n          'image/jpeg',\n          'image/png',\n          'image/gif',\n          'image/webp',\n          'application/pdf',\n          'application/msword',\n          'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n          'text/plain',\n          'text/csv',\n        ]\n        return allowedMimeTypes.includes(mimeType)\n      },\n      'File type not allowed'\n    ),\n})\n\n// Auth schemas\nexport const signUpSchema = z.object({\n  email: emailSchema,\n  password: passwordSchema,\n  full_name: nameSchema,\n  organization_name: organizationNameSchema.optional(),\n})\n\nexport const signInSchema = z.object({\n  email: emailSchema,\n  password: z.string().min(1, 'Password is required'),\n})\n\nexport const resetPasswordSchema = z.object({\n  email: emailSchema,\n})\n\nexport const updatePasswordSchema = z.object({\n  token: z.string().min(1, 'Reset token is required'),\n  password: passwordSchema,\n})\n\n// Profile update schema\nexport const updateProfileSchema = z.object({\n  full_name: nameSchema.optional(),\n  phone: phoneSchema.optional(),\n})\n\n// Organization update schema\nexport const updateOrganizationSchema = z.object({\n  name: organizationNameSchema.optional(),\n  domain: urlSchema.optional(),\n})\n\n// Validation helper functions\nexport function validateRequest<T>(schema: z.ZodSchema<T>, data: unknown): {\n  success: boolean\n  data?: T\n  error?: string\n} {\n  try {\n    const validated = schema.parse(data)\n    return { success: true, data: validated }\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      const firstError = error.errors[0]\n      return {\n        success: false,\n        error: firstError.message\n      }\n    }\n    return {\n      success: false,\n      error: 'Validation failed'\n    }\n  }\n}\n\n// Sanitize user input\nexport function sanitizeInput(input: string): string {\n  return input\n    .trim()\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;')\n    .replace(/\\//g, '&#x2F;')\n}\n\n// Check for SQL injection patterns\nexport function hasSqlInjection(input: string): boolean {\n  const sqlPatterns = [\n    /(\\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION)\\b)/gi,\n    /(;|\\-\\-|\\#|\\/\\*|\\*\\/)/g,\n    /(\\bOR\\b|\\bAND\\b).*?(\\b\\d+\\b.*?=.*?\\b\\d+\\b)/gi,\n    /(\\'\\s*(OR|AND)\\s*\\'\\w*?\\'\\s*=\\s*\\'\\w*?\\')/gi,\n  ]\n\n  return sqlPatterns.some(pattern => pattern.test(input))\n}\n\n// Check for XSS patterns\nexport function hasXss(input: string): boolean {\n  const xssPatterns = [\n    /<script.*?>.*?<\\/script>/gi,\n    /<.*?on\\w+.*?=.*?>/gi,\n    /javascript:/gi,\n    /vbscript:/gi,\n    /<iframe.*?>/gi,\n    /<object.*?>/gi,\n    /<embed.*?>/gi,\n  ]\n\n  return xssPatterns.some(pattern => pattern.test(input))\n}\n\n// Validate and sanitize all object properties\nexport function sanitizeObject(obj: Record<string, any>): Record<string, any> {\n  const sanitized: Record<string, any> = {}\n\n  for (const [key, value] of Object.entries(obj)) {\n    if (typeof value === 'string') {\n      sanitized[key] = sanitizeInput(value)\n    } else if (typeof value === 'object' && value !== null && !Array.isArray(value)) {\n      sanitized[key] = sanitizeObject(value)\n    } else {\n      sanitized[key] = value\n    }\n  }\n\n  return sanitized\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}