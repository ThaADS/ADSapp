{"version":3,"sources":["C:\\Ai Projecten\\ADSapp\\tests\\components\\messaging.test.tsx"],"sourcesContent":["import { describe, it, expect, jest, beforeEach } from '@jest/globals';\nimport { render, screen, fireEvent, waitFor, within } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport EnhancedMessageInterface from '@/components/messaging/enhanced-message-interface';\n\n// Mock file reader\nglobal.FileReader = jest.fn().mockImplementation(function(this: any) {\n  this.readAsDataURL = jest.fn(function(this: any) {\n    // Trigger onload after a short delay\n    setTimeout(() => {\n      if (this.onload) {\n        this.onload({ target: { result: 'data:image/png;base64,mock-image-data' } });\n      }\n    }, 10);\n  });\n  this.onload = null;\n  this.result = 'data:image/png;base64,mock-image-data';\n  return this;\n}) as any;\n\n// Mock navigator.mediaDevices\nObject.defineProperty(global.navigator, 'mediaDevices', {\n  writable: true,\n  value: {\n    getUserMedia: jest.fn(),\n  },\n});\n\n// Mock scrollIntoView\nElement.prototype.scrollIntoView = jest.fn();\n\ndescribe('Messaging Components', () => {\n  const mockOnSendMessage = jest.fn();\n  const defaultProps = {\n    contactId: 'contact-123',\n    contactName: 'John Doe',\n    onSendMessage: mockOnSendMessage,\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('EnhancedMessageInterface - Message Display', () => {\n    it('should render messages list with proper structure', () => {\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      // Check if sample messages are rendered\n      expect(screen.getByText(/hello! how can i help you today/i)).toBeInTheDocument();\n      expect(screen.getByText(/interested in your products/i)).toBeInTheDocument();\n    });\n\n    it('should display message timestamps in correct format', () => {\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      // All messages should have timestamps\n      const messages = screen.getAllByText(/\\d{1,2}:\\d{2}/);\n      expect(messages.length).toBeGreaterThan(0);\n    });\n\n    it('should show message status indicators for sent messages', () => {\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      // Status icons should be present for user messages\n      const userMessages = screen.getAllByText(/hello! how can i help/i)[0].closest('div');\n      expect(userMessages).toBeInTheDocument();\n    });\n\n    it('should support infinite scroll behavior', () => {\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      // Check if scrollable container exists\n      const messagesContainer = screen.getByText(/hello! how can i help/i).closest('.overflow-y-auto');\n      expect(messagesContainer).toBeInTheDocument();\n    });\n  });\n\n  describe('EnhancedMessageInterface - Message Input', () => {\n    it('should render message input with proper placeholder', () => {\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const input = screen.getByPlaceholderText(/message john doe/i);\n      expect(input).toBeInTheDocument();\n      // Textarea elements don't have a 'type' attribute\n      expect(input.tagName).toBe('TEXTAREA');\n    });\n\n    it('should update input value on text entry', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const input = screen.getByPlaceholderText(/message john doe/i);\n      await user.type(input, 'Hello, this is a test message');\n\n      expect(input).toHaveValue('Hello, this is a test message');\n    });\n\n    it('should send message on Enter key press', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const input = screen.getByPlaceholderText(/message john doe/i);\n      await user.type(input, 'Test message{Enter}');\n\n      await waitFor(() => {\n        expect(mockOnSendMessage).toHaveBeenCalledWith(\n          expect.objectContaining({\n            content: 'Test message',\n            sender: 'user',\n            type: 'text',\n          })\n        );\n      });\n    });\n\n    it('should support Shift+Enter for new line', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const input = screen.getByPlaceholderText(/message john doe/i) as HTMLTextAreaElement;\n      await user.type(input, 'Line 1{Shift>}{Enter}{/Shift}Line 2');\n\n      expect(input.value).toContain('Line 1\\nLine 2');\n      expect(mockOnSendMessage).not.toHaveBeenCalled();\n    });\n\n    it('should clear input after sending message', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const input = screen.getByPlaceholderText(/message john doe/i);\n      await user.type(input, 'Message to send');\n\n      const sendButton = screen.getByTitle(/send message/i);\n      await user.click(sendButton);\n\n      await waitFor(() => {\n        expect(input).toHaveValue('');\n      });\n    });\n  });\n\n  describe('EnhancedMessageInterface - File Upload', () => {\n    it('should open file picker when attach button is clicked', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const attachButton = screen.getByTitle(/attach file/i);\n      expect(attachButton).toBeInTheDocument();\n\n      await user.click(attachButton);\n      // File input click is triggered internally\n    });\n\n    it('should display uploaded image preview', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const file = new File(['image content'], 'test.png', { type: 'image/png' });\n      const fileInput = document.querySelector('input[type=\"file\"]') as HTMLInputElement;\n\n      if (fileInput) {\n        Object.defineProperty(fileInput, 'files', {\n          value: [file],\n          writable: false,\n        });\n\n        fireEvent.change(fileInput);\n\n        await waitFor(() => {\n          // Check if image preview or attachment preview exists\n          const preview = document.querySelector('img[alt=\"\"]') || document.querySelector('.bg-white.p-2.rounded-lg');\n          expect(preview).toBeInTheDocument();\n        }, { timeout: 3000 });\n      }\n    });\n\n    it('should show upload progress for attachments', async () => {\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const file = new File(['document'], 'test.pdf', { type: 'application/pdf' });\n      const fileInput = document.querySelector('input[type=\"file\"]') as HTMLInputElement;\n\n      if (fileInput) {\n        Object.defineProperty(fileInput, 'files', {\n          value: [file],\n          writable: false,\n        });\n\n        fireEvent.change(fileInput);\n\n        // Progress indicator should appear\n        await waitFor(() => {\n          const progress = screen.queryByText(/\\d+%/);\n          if (progress) {\n            expect(progress).toBeInTheDocument();\n          }\n        });\n      }\n    });\n\n    it('should allow removing attachments before sending', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const file = new File(['test'], 'test.txt', { type: 'text/plain' });\n      const fileInput = document.querySelector('input[type=\"file\"]') as HTMLInputElement;\n\n      if (fileInput) {\n        Object.defineProperty(fileInput, 'files', {\n          value: [file],\n          writable: false,\n        });\n\n        fireEvent.change(fileInput);\n\n        await waitFor(async () => {\n          const removeButton = document.querySelector('button[class*=\"bg-red-500\"]');\n          if (removeButton) {\n            await user.click(removeButton);\n          }\n        });\n      }\n    });\n  });\n\n  describe('EnhancedMessageInterface - Emoji Picker', () => {\n    it('should toggle emoji picker on button click', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const emojiButton = screen.getByTitle(/add emoji/i);\n      await user.click(emojiButton);\n\n      await waitFor(() => {\n        // Emoji picker should be visible\n        const emojiPicker = document.querySelector('.grid.grid-cols-8');\n        expect(emojiPicker).toBeInTheDocument();\n      });\n    });\n\n    it('should insert emoji at cursor position', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const input = screen.getByPlaceholderText(/message john doe/i);\n      await user.type(input, 'Hello ');\n\n      const emojiButton = screen.getByTitle(/add emoji/i);\n      await user.click(emojiButton);\n\n      // Wait for emoji picker to open\n      await waitFor(() => {\n        const emojiButtons = document.querySelectorAll('.grid.grid-cols-8 button');\n        expect(emojiButtons.length).toBeGreaterThan(0);\n      }, { timeout: 1000 });\n\n      // Click first emoji\n      const emojiButtons = document.querySelectorAll('.grid.grid-cols-8 button');\n      await user.click(emojiButtons[0]);\n\n      // Input should have text (emoji is inserted)\n      await waitFor(() => {\n        expect(input.value.length).toBeGreaterThan(6); // \"Hello \" + emoji\n      }, { timeout: 1000 });\n    });\n  });\n\n  describe('EnhancedMessageInterface - Templates', () => {\n    it('should display template panel on button click', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const templateButton = screen.getByTitle(/use template/i);\n      await user.click(templateButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/message templates/i)).toBeInTheDocument();\n      });\n    });\n\n    it('should show available message templates', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const templateButton = screen.getByTitle(/use template/i);\n      await user.click(templateButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/welcome message/i)).toBeInTheDocument();\n        expect(screen.getByText(/order confirmation/i)).toBeInTheDocument();\n        expect(screen.getByText(/support response/i)).toBeInTheDocument();\n      });\n    });\n\n    it('should insert template content into input field', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const templateButton = screen.getByTitle(/use template/i);\n      await user.click(templateButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/welcome message/i)).toBeInTheDocument();\n      }, { timeout: 1000 });\n\n      const welcomeTemplate = screen.getByText(/welcome message/i).closest('button');\n      if (welcomeTemplate) {\n        await user.click(welcomeTemplate);\n      }\n\n      const input = screen.getByPlaceholderText(/message john doe/i);\n      await waitFor(() => {\n        expect(input.value.length).toBeGreaterThan(0);\n      }, { timeout: 1000 });\n    });\n  });\n\n  describe('EnhancedMessageInterface - Voice Recording', () => {\n    it('should show voice recording button when input is empty', () => {\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const micButton = screen.getByTitle(/hold to record/i);\n      expect(micButton).toBeInTheDocument();\n    });\n\n    it('should start recording on mouse down', async () => {\n      const mockGetUserMedia = jest.fn().mockResolvedValue({\n        getTracks: () => [{ stop: jest.fn() }],\n      });\n\n      (navigator.mediaDevices.getUserMedia as jest.Mock) = mockGetUserMedia;\n\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const micButton = screen.getByTitle(/hold to record/i);\n      fireEvent.mouseDown(micButton);\n\n      await waitFor(() => {\n        expect(mockGetUserMedia).toHaveBeenCalledWith({ audio: true });\n      });\n    });\n\n    it('should show recording time during voice recording', async () => {\n      const mockStream = {\n        getTracks: () => [{ stop: jest.fn() }],\n      };\n\n      (navigator.mediaDevices.getUserMedia as jest.Mock).mockResolvedValue(mockStream);\n\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const micButton = screen.getByTitle(/hold to record/i);\n      fireEvent.mouseDown(micButton);\n\n      // Wait for recording to start\n      await waitFor(() => {\n        expect(navigator.mediaDevices.getUserMedia).toHaveBeenCalledWith({ audio: true });\n      }, { timeout: 1000 });\n\n      // Recording button should exist (recording state may or may not show time immediately)\n      expect(micButton).toBeInTheDocument();\n    });\n  });\n\n  describe('EnhancedMessageInterface - Accessibility', () => {\n    it('should support keyboard navigation through controls', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      await user.tab();\n\n      // First focusable element should be attach button or input\n      const attachButton = screen.getByTitle(/attach file/i);\n      const messageInput = screen.getByPlaceholderText(/message john doe/i);\n\n      expect(\n        attachButton === document.activeElement || messageInput === document.activeElement\n      ).toBe(true);\n    });\n\n    it('should have proper ARIA labels for all interactive elements', () => {\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const attachButton = screen.getByTitle(/attach file/i);\n      const emojiButton = screen.getByTitle(/add emoji/i);\n      const templateButton = screen.getByTitle(/use template/i);\n\n      expect(attachButton).toHaveAttribute('title');\n      expect(emojiButton).toHaveAttribute('title');\n      expect(templateButton).toHaveAttribute('title');\n    });\n\n    it('should announce message sending status to screen readers', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const input = screen.getByPlaceholderText(/message john doe/i);\n      await user.type(input, 'Test message');\n\n      const sendButton = screen.getByTitle(/send message/i);\n      await user.click(sendButton);\n\n      await waitFor(() => {\n        // Message should be added to the list\n        expect(screen.getByText('Test message')).toBeInTheDocument();\n      });\n    });\n\n    it('should support screen reader navigation through message history', () => {\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      // Messages should be in a scrollable region\n      const messagesArea = document.querySelector('.overflow-y-auto');\n      expect(messagesArea).toBeInTheDocument();\n    });\n  });\n\n  describe('EnhancedMessageInterface - Real-time Features', () => {\n    it('should show typing indicator', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const input = screen.getByPlaceholderText(/message john doe/i);\n      await user.type(input, 'Typing...');\n\n      // Typing indicator appears for self (in implementation)\n      // This tests the component renders correctly\n      expect(input).toHaveValue('Typing...');\n    });\n\n    it('should auto-scroll to bottom when new messages arrive', async () => {\n      const user = userEvent.setup();\n      render(<EnhancedMessageInterface {...defaultProps} />);\n\n      const input = screen.getByPlaceholderText(/message john doe/i);\n      await user.type(input, 'New message{Enter}');\n\n      await waitFor(() => {\n        const messagesArea = document.querySelector('.overflow-y-auto');\n        // Auto-scroll effect is applied (tested via component behavior)\n        expect(messagesArea).toBeInTheDocument();\n      });\n    });\n  });\n});\n"],"names":["global","FileReader","jest","fn","mockImplementation","readAsDataURL","setTimeout","onload","target","result","Object","defineProperty","navigator","writable","value","getUserMedia","Element","prototype","scrollIntoView","describe","mockOnSendMessage","defaultProps","contactId","contactName","onSendMessage","beforeEach","clearAllMocks","it","render","EnhancedMessageInterface","expect","screen","getByText","toBeInTheDocument","messages","getAllByText","length","toBeGreaterThan","userMessages","closest","messagesContainer","input","getByPlaceholderText","tagName","toBe","user","userEvent","setup","type","toHaveValue","waitFor","toHaveBeenCalledWith","objectContaining","content","sender","toContain","not","toHaveBeenCalled","sendButton","getByTitle","click","attachButton","file","File","fileInput","document","querySelector","fireEvent","change","preview","timeout","progress","queryByText","removeButton","emojiButton","emojiPicker","emojiButtons","querySelectorAll","templateButton","welcomeTemplate","micButton","mockGetUserMedia","mockResolvedValue","getTracks","stop","mediaDevices","mouseDown","audio","mockStream","tab","messageInput","activeElement","toHaveAttribute","messagesArea"],"mappings":";;;;;yBAAuD;uBACI;kEACrC;iFACe;;;;;;AAErC,mBAAmB;AACnBA,OAAOC,UAAU,GAAGC,aAAI,CAACC,EAAE,GAAGC,kBAAkB,CAAC;IAC/C,IAAI,CAACC,aAAa,GAAGH,aAAI,CAACC,EAAE,CAAC;QAC3B,qCAAqC;QACrCG,WAAW;YACT,IAAI,IAAI,CAACC,MAAM,EAAE;gBACf,IAAI,CAACA,MAAM,CAAC;oBAAEC,QAAQ;wBAAEC,QAAQ;oBAAwC;gBAAE;YAC5E;QACF,GAAG;IACL;IACA,IAAI,CAACF,MAAM,GAAG;IACd,IAAI,CAACE,MAAM,GAAG;IACd,OAAO,IAAI;AACb;AAEA,8BAA8B;AAC9BC,OAAOC,cAAc,CAACX,OAAOY,SAAS,EAAE,gBAAgB;IACtDC,UAAU;IACVC,OAAO;QACLC,cAAcb,aAAI,CAACC,EAAE;IACvB;AACF;AAEA,sBAAsB;AACtBa,QAAQC,SAAS,CAACC,cAAc,GAAGhB,aAAI,CAACC,EAAE;AAE1CgB,IAAAA,iBAAQ,EAAC,wBAAwB;IAC/B,MAAMC,oBAAoBlB,aAAI,CAACC,EAAE;IACjC,MAAMkB,eAAe;QACnBC,WAAW;QACXC,aAAa;QACbC,eAAeJ;IACjB;IAEAK,IAAAA,mBAAU,EAAC;QACTvB,aAAI,CAACwB,aAAa;IACpB;IAEAP,IAAAA,iBAAQ,EAAC,8CAA8C;QACrDQ,IAAAA,WAAE,EAAC,qDAAqD;YACtDC,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,wCAAwC;YACxCS,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,qCAAqCC,iBAAiB;YAC9EH,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,iCAAiCC,iBAAiB;QAC5E;QAEAN,IAAAA,WAAE,EAAC,uDAAuD;YACxDC,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,sCAAsC;YACtC,MAAMa,WAAWH,aAAM,CAACI,YAAY,CAAC;YACrCL,IAAAA,eAAM,EAACI,SAASE,MAAM,EAAEC,eAAe,CAAC;QAC1C;QAEAV,IAAAA,WAAE,EAAC,2DAA2D;YAC5DC,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,mDAAmD;YACnD,MAAMiB,eAAeP,aAAM,CAACI,YAAY,CAAC,yBAAyB,CAAC,EAAE,CAACI,OAAO,CAAC;YAC9ET,IAAAA,eAAM,EAACQ,cAAcL,iBAAiB;QACxC;QAEAN,IAAAA,WAAE,EAAC,2CAA2C;YAC5CC,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,uCAAuC;YACvC,MAAMmB,oBAAoBT,aAAM,CAACC,SAAS,CAAC,0BAA0BO,OAAO,CAAC;YAC7ET,IAAAA,eAAM,EAACU,mBAAmBP,iBAAiB;QAC7C;IACF;IAEAd,IAAAA,iBAAQ,EAAC,4CAA4C;QACnDQ,IAAAA,WAAE,EAAC,uDAAuD;YACxDC,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMoB,QAAQV,aAAM,CAACW,oBAAoB,CAAC;YAC1CZ,IAAAA,eAAM,EAACW,OAAOR,iBAAiB;YAC/B,kDAAkD;YAClDH,IAAAA,eAAM,EAACW,MAAME,OAAO,EAAEC,IAAI,CAAC;QAC7B;QAEAjB,IAAAA,WAAE,EAAC,2CAA2C;YAC5C,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMoB,QAAQV,aAAM,CAACW,oBAAoB,CAAC;YAC1C,MAAMG,KAAKG,IAAI,CAACP,OAAO;YAEvBX,IAAAA,eAAM,EAACW,OAAOQ,WAAW,CAAC;QAC5B;QAEAtB,IAAAA,WAAE,EAAC,0CAA0C;YAC3C,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMoB,QAAQV,aAAM,CAACW,oBAAoB,CAAC;YAC1C,MAAMG,KAAKG,IAAI,CAACP,OAAO;YAEvB,MAAMS,IAAAA,cAAO,EAAC;gBACZpB,IAAAA,eAAM,EAACV,mBAAmB+B,oBAAoB,CAC5CrB,eAAM,CAACsB,gBAAgB,CAAC;oBACtBC,SAAS;oBACTC,QAAQ;oBACRN,MAAM;gBACR;YAEJ;QACF;QAEArB,IAAAA,WAAE,EAAC,2CAA2C;YAC5C,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMoB,QAAQV,aAAM,CAACW,oBAAoB,CAAC;YAC1C,MAAMG,KAAKG,IAAI,CAACP,OAAO;YAEvBX,IAAAA,eAAM,EAACW,MAAM3B,KAAK,EAAEyC,SAAS,CAAC;YAC9BzB,IAAAA,eAAM,EAACV,mBAAmBoC,GAAG,CAACC,gBAAgB;QAChD;QAEA9B,IAAAA,WAAE,EAAC,4CAA4C;YAC7C,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMoB,QAAQV,aAAM,CAACW,oBAAoB,CAAC;YAC1C,MAAMG,KAAKG,IAAI,CAACP,OAAO;YAEvB,MAAMiB,aAAa3B,aAAM,CAAC4B,UAAU,CAAC;YACrC,MAAMd,KAAKe,KAAK,CAACF;YAEjB,MAAMR,IAAAA,cAAO,EAAC;gBACZpB,IAAAA,eAAM,EAACW,OAAOQ,WAAW,CAAC;YAC5B;QACF;IACF;IAEA9B,IAAAA,iBAAQ,EAAC,0CAA0C;QACjDQ,IAAAA,WAAE,EAAC,yDAAyD;YAC1D,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMwC,eAAe9B,aAAM,CAAC4B,UAAU,CAAC;YACvC7B,IAAAA,eAAM,EAAC+B,cAAc5B,iBAAiB;YAEtC,MAAMY,KAAKe,KAAK,CAACC;QACjB,2CAA2C;QAC7C;QAEAlC,IAAAA,WAAE,EAAC,yCAAyC;YAC1C,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMyC,OAAO,IAAIC,KAAK;gBAAC;aAAgB,EAAE,YAAY;gBAAEf,MAAM;YAAY;YACzE,MAAMgB,YAAYC,SAASC,aAAa,CAAC;YAEzC,IAAIF,WAAW;gBACbtD,OAAOC,cAAc,CAACqD,WAAW,SAAS;oBACxClD,OAAO;wBAACgD;qBAAK;oBACbjD,UAAU;gBACZ;gBAEAsD,gBAAS,CAACC,MAAM,CAACJ;gBAEjB,MAAMd,IAAAA,cAAO,EAAC;oBACZ,sDAAsD;oBACtD,MAAMmB,UAAUJ,SAASC,aAAa,CAAC,kBAAkBD,SAASC,aAAa,CAAC;oBAChFpC,IAAAA,eAAM,EAACuC,SAASpC,iBAAiB;gBACnC,GAAG;oBAAEqC,SAAS;gBAAK;YACrB;QACF;QAEA3C,IAAAA,WAAE,EAAC,+CAA+C;YAChDC,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMyC,OAAO,IAAIC,KAAK;gBAAC;aAAW,EAAE,YAAY;gBAAEf,MAAM;YAAkB;YAC1E,MAAMgB,YAAYC,SAASC,aAAa,CAAC;YAEzC,IAAIF,WAAW;gBACbtD,OAAOC,cAAc,CAACqD,WAAW,SAAS;oBACxClD,OAAO;wBAACgD;qBAAK;oBACbjD,UAAU;gBACZ;gBAEAsD,gBAAS,CAACC,MAAM,CAACJ;gBAEjB,mCAAmC;gBACnC,MAAMd,IAAAA,cAAO,EAAC;oBACZ,MAAMqB,WAAWxC,aAAM,CAACyC,WAAW,CAAC;oBACpC,IAAID,UAAU;wBACZzC,IAAAA,eAAM,EAACyC,UAAUtC,iBAAiB;oBACpC;gBACF;YACF;QACF;QAEAN,IAAAA,WAAE,EAAC,oDAAoD;YACrD,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMyC,OAAO,IAAIC,KAAK;gBAAC;aAAO,EAAE,YAAY;gBAAEf,MAAM;YAAa;YACjE,MAAMgB,YAAYC,SAASC,aAAa,CAAC;YAEzC,IAAIF,WAAW;gBACbtD,OAAOC,cAAc,CAACqD,WAAW,SAAS;oBACxClD,OAAO;wBAACgD;qBAAK;oBACbjD,UAAU;gBACZ;gBAEAsD,gBAAS,CAACC,MAAM,CAACJ;gBAEjB,MAAMd,IAAAA,cAAO,EAAC;oBACZ,MAAMuB,eAAeR,SAASC,aAAa,CAAC;oBAC5C,IAAIO,cAAc;wBAChB,MAAM5B,KAAKe,KAAK,CAACa;oBACnB;gBACF;YACF;QACF;IACF;IAEAtD,IAAAA,iBAAQ,EAAC,2CAA2C;QAClDQ,IAAAA,WAAE,EAAC,8CAA8C;YAC/C,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMqD,cAAc3C,aAAM,CAAC4B,UAAU,CAAC;YACtC,MAAMd,KAAKe,KAAK,CAACc;YAEjB,MAAMxB,IAAAA,cAAO,EAAC;gBACZ,iCAAiC;gBACjC,MAAMyB,cAAcV,SAASC,aAAa,CAAC;gBAC3CpC,IAAAA,eAAM,EAAC6C,aAAa1C,iBAAiB;YACvC;QACF;QAEAN,IAAAA,WAAE,EAAC,0CAA0C;YAC3C,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMoB,QAAQV,aAAM,CAACW,oBAAoB,CAAC;YAC1C,MAAMG,KAAKG,IAAI,CAACP,OAAO;YAEvB,MAAMiC,cAAc3C,aAAM,CAAC4B,UAAU,CAAC;YACtC,MAAMd,KAAKe,KAAK,CAACc;YAEjB,gCAAgC;YAChC,MAAMxB,IAAAA,cAAO,EAAC;gBACZ,MAAM0B,eAAeX,SAASY,gBAAgB,CAAC;gBAC/C/C,IAAAA,eAAM,EAAC8C,aAAaxC,MAAM,EAAEC,eAAe,CAAC;YAC9C,GAAG;gBAAEiC,SAAS;YAAK;YAEnB,oBAAoB;YACpB,MAAMM,eAAeX,SAASY,gBAAgB,CAAC;YAC/C,MAAMhC,KAAKe,KAAK,CAACgB,YAAY,CAAC,EAAE;YAEhC,6CAA6C;YAC7C,MAAM1B,IAAAA,cAAO,EAAC;gBACZpB,IAAAA,eAAM,EAACW,MAAM3B,KAAK,CAACsB,MAAM,EAAEC,eAAe,CAAC,IAAI,mBAAmB;YACpE,GAAG;gBAAEiC,SAAS;YAAK;QACrB;IACF;IAEAnD,IAAAA,iBAAQ,EAAC,wCAAwC;QAC/CQ,IAAAA,WAAE,EAAC,iDAAiD;YAClD,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMyD,iBAAiB/C,aAAM,CAAC4B,UAAU,CAAC;YACzC,MAAMd,KAAKe,KAAK,CAACkB;YAEjB,MAAM5B,IAAAA,cAAO,EAAC;gBACZpB,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,uBAAuBC,iBAAiB;YAClE;QACF;QAEAN,IAAAA,WAAE,EAAC,2CAA2C;YAC5C,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMyD,iBAAiB/C,aAAM,CAAC4B,UAAU,CAAC;YACzC,MAAMd,KAAKe,KAAK,CAACkB;YAEjB,MAAM5B,IAAAA,cAAO,EAAC;gBACZpB,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,qBAAqBC,iBAAiB;gBAC9DH,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,wBAAwBC,iBAAiB;gBACjEH,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,sBAAsBC,iBAAiB;YACjE;QACF;QAEAN,IAAAA,WAAE,EAAC,mDAAmD;YACpD,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMyD,iBAAiB/C,aAAM,CAAC4B,UAAU,CAAC;YACzC,MAAMd,KAAKe,KAAK,CAACkB;YAEjB,MAAM5B,IAAAA,cAAO,EAAC;gBACZpB,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,qBAAqBC,iBAAiB;YAChE,GAAG;gBAAEqC,SAAS;YAAK;YAEnB,MAAMS,kBAAkBhD,aAAM,CAACC,SAAS,CAAC,oBAAoBO,OAAO,CAAC;YACrE,IAAIwC,iBAAiB;gBACnB,MAAMlC,KAAKe,KAAK,CAACmB;YACnB;YAEA,MAAMtC,QAAQV,aAAM,CAACW,oBAAoB,CAAC;YAC1C,MAAMQ,IAAAA,cAAO,EAAC;gBACZpB,IAAAA,eAAM,EAACW,MAAM3B,KAAK,CAACsB,MAAM,EAAEC,eAAe,CAAC;YAC7C,GAAG;gBAAEiC,SAAS;YAAK;QACrB;IACF;IAEAnD,IAAAA,iBAAQ,EAAC,8CAA8C;QACrDQ,IAAAA,WAAE,EAAC,0DAA0D;YAC3DC,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAM2D,YAAYjD,aAAM,CAAC4B,UAAU,CAAC;YACpC7B,IAAAA,eAAM,EAACkD,WAAW/C,iBAAiB;QACrC;QAEAN,IAAAA,WAAE,EAAC,wCAAwC;YACzC,MAAMsD,mBAAmB/E,aAAI,CAACC,EAAE,GAAG+E,iBAAiB,CAAC;gBACnDC,WAAW,IAAM;wBAAC;4BAAEC,MAAMlF,aAAI,CAACC,EAAE;wBAAG;qBAAE;YACxC;YAECS,UAAUyE,YAAY,CAACtE,YAAY,GAAiBkE;YAErD,MAAMpC,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAM2D,YAAYjD,aAAM,CAAC4B,UAAU,CAAC;YACpCQ,gBAAS,CAACmB,SAAS,CAACN;YAEpB,MAAM9B,IAAAA,cAAO,EAAC;gBACZpB,IAAAA,eAAM,EAACmD,kBAAkB9B,oBAAoB,CAAC;oBAAEoC,OAAO;gBAAK;YAC9D;QACF;QAEA5D,IAAAA,WAAE,EAAC,qDAAqD;YACtD,MAAM6D,aAAa;gBACjBL,WAAW,IAAM;wBAAC;4BAAEC,MAAMlF,aAAI,CAACC,EAAE;wBAAG;qBAAE;YACxC;YAECS,UAAUyE,YAAY,CAACtE,YAAY,CAAemE,iBAAiB,CAACM;YAErE5D,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAM2D,YAAYjD,aAAM,CAAC4B,UAAU,CAAC;YACpCQ,gBAAS,CAACmB,SAAS,CAACN;YAEpB,8BAA8B;YAC9B,MAAM9B,IAAAA,cAAO,EAAC;gBACZpB,IAAAA,eAAM,EAAClB,UAAUyE,YAAY,CAACtE,YAAY,EAAEoC,oBAAoB,CAAC;oBAAEoC,OAAO;gBAAK;YACjF,GAAG;gBAAEjB,SAAS;YAAK;YAEnB,uFAAuF;YACvFxC,IAAAA,eAAM,EAACkD,WAAW/C,iBAAiB;QACrC;IACF;IAEAd,IAAAA,iBAAQ,EAAC,4CAA4C;QACnDQ,IAAAA,WAAE,EAAC,uDAAuD;YACxD,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMwB,KAAK4C,GAAG;YAEd,2DAA2D;YAC3D,MAAM5B,eAAe9B,aAAM,CAAC4B,UAAU,CAAC;YACvC,MAAM+B,eAAe3D,aAAM,CAACW,oBAAoB,CAAC;YAEjDZ,IAAAA,eAAM,EACJ+B,iBAAiBI,SAAS0B,aAAa,IAAID,iBAAiBzB,SAAS0B,aAAa,EAClF/C,IAAI,CAAC;QACT;QAEAjB,IAAAA,WAAE,EAAC,+DAA+D;YAChEC,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMwC,eAAe9B,aAAM,CAAC4B,UAAU,CAAC;YACvC,MAAMe,cAAc3C,aAAM,CAAC4B,UAAU,CAAC;YACtC,MAAMmB,iBAAiB/C,aAAM,CAAC4B,UAAU,CAAC;YAEzC7B,IAAAA,eAAM,EAAC+B,cAAc+B,eAAe,CAAC;YACrC9D,IAAAA,eAAM,EAAC4C,aAAakB,eAAe,CAAC;YACpC9D,IAAAA,eAAM,EAACgD,gBAAgBc,eAAe,CAAC;QACzC;QAEAjE,IAAAA,WAAE,EAAC,4DAA4D;YAC7D,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMoB,QAAQV,aAAM,CAACW,oBAAoB,CAAC;YAC1C,MAAMG,KAAKG,IAAI,CAACP,OAAO;YAEvB,MAAMiB,aAAa3B,aAAM,CAAC4B,UAAU,CAAC;YACrC,MAAMd,KAAKe,KAAK,CAACF;YAEjB,MAAMR,IAAAA,cAAO,EAAC;gBACZ,sCAAsC;gBACtCpB,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,iBAAiBC,iBAAiB;YAC5D;QACF;QAEAN,IAAAA,WAAE,EAAC,mEAAmE;YACpEC,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,4CAA4C;YAC5C,MAAMwE,eAAe5B,SAASC,aAAa,CAAC;YAC5CpC,IAAAA,eAAM,EAAC+D,cAAc5D,iBAAiB;QACxC;IACF;IAEAd,IAAAA,iBAAQ,EAAC,iDAAiD;QACxDQ,IAAAA,WAAE,EAAC,gCAAgC;YACjC,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMoB,QAAQV,aAAM,CAACW,oBAAoB,CAAC;YAC1C,MAAMG,KAAKG,IAAI,CAACP,OAAO;YAEvB,wDAAwD;YACxD,6CAA6C;YAC7CX,IAAAA,eAAM,EAACW,OAAOQ,WAAW,CAAC;QAC5B;QAEAtB,IAAAA,WAAE,EAAC,yDAAyD;YAC1D,MAAMkB,OAAOC,kBAAS,CAACC,KAAK;YAC5BnB,IAAAA,aAAM,gBAAC,qBAACC,iCAAwB;gBAAE,GAAGR,YAAY;;YAEjD,MAAMoB,QAAQV,aAAM,CAACW,oBAAoB,CAAC;YAC1C,MAAMG,KAAKG,IAAI,CAACP,OAAO;YAEvB,MAAMS,IAAAA,cAAO,EAAC;gBACZ,MAAM2C,eAAe5B,SAASC,aAAa,CAAC;gBAC5C,gEAAgE;gBAChEpC,IAAAA,eAAM,EAAC+D,cAAc5D,iBAAiB;YACxC;QACF;IACF;AACF"}