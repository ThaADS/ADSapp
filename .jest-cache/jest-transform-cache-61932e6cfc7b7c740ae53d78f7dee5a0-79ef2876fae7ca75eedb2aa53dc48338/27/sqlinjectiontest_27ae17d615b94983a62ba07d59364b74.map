{"version":3,"sources":["C:\\Ai Projecten\\ADSapp\\tests\\security\\sql-injection.test.ts"],"sourcesContent":["/**\n * SQL Injection Prevention Test Suite\n *\n * Comprehensive testing for C-008 SQL Injection vulnerability prevention.\n * Tests all RPC functions and input validation against common injection patterns.\n *\n * Test Coverage:\n * - Input validation functions\n * - RPC function parameter sanitization\n * - Common SQL injection patterns\n * - Time-based blind injection attempts\n * - Union-based injection attempts\n * - Boolean-based injection attempts\n * - Error-based injection attempts\n *\n * @module sql-injection.test\n */\n\nimport { describe, it, expect, beforeAll, afterAll } from '@jest/globals';\nimport { createClient } from '@supabase/supabase-js';\nimport { secureRpc } from '@/lib/security/secure-rpc';\nimport { InputValidator, ValidationErrorCodes } from '@/lib/security/input-validation';\n\n// ============================================================================\n// TEST CONFIGURATION\n// ============================================================================\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;\n\nlet supabase: ReturnType<typeof createClient>;\nlet testUserId: string;\nlet testOrgId: string;\n\n// ============================================================================\n// COMMON SQL INJECTION PAYLOADS\n// ============================================================================\n\nconst SQL_INJECTION_PAYLOADS = {\n  basic: [\n    \"' OR '1'='1\",\n    \"' OR '1'='1' --\",\n    \"' OR '1'='1' /*\",\n    \"admin'--\",\n    \"admin' #\",\n    \"admin'/*\",\n    \"' or 1=1--\",\n    \"' or 1=1#\",\n    \"' or 1=1/*\",\n    \"') or '1'='1--\",\n    \"') or ('1'='1--\",\n  ],\n  unionBased: [\n    \"' UNION SELECT NULL--\",\n    \"' UNION SELECT NULL, NULL--\",\n    \"' UNION SELECT NULL, NULL, NULL--\",\n    \"' UNION SELECT 1, 'admin', 'password'--\",\n    \"' UNION ALL SELECT NULL--\",\n  ],\n  timeBased: [\n    \"'; WAITFOR DELAY '0:0:5'--\",\n    \"' OR SLEEP(5)--\",\n    \"' OR pg_sleep(5)--\",\n    \"'; SELECT pg_sleep(5)--\",\n    \"1' AND (SELECT * FROM (SELECT(SLEEP(5)))a)--\",\n  ],\n  booleanBased: [\n    \"' AND '1'='1\",\n    \"' AND '1'='2\",\n    \"' AND 1=1--\",\n    \"' AND 1=2--\",\n    \"1' AND '1'='1\",\n    \"1' AND '1'='2\",\n  ],\n  errorBased: [\n    \"' AND 1=CONVERT(int, (SELECT @@version))--\",\n    \"' AND 1=CAST((SELECT @@version) AS int)--\",\n    \"' AND extractvalue(1,concat(0x7e,(SELECT @@version)))--\",\n  ],\n  stackedQueries: [\n    \"'; DROP TABLE users--\",\n    \"'; DROP TABLE profiles--\",\n    \"'; DELETE FROM organizations--\",\n    \"'; UPDATE profiles SET is_super_admin=true--\",\n    \"1'; DROP TABLE messages; --\",\n  ],\n  commandExecution: [\n    \"'; EXEC xp_cmdshell('dir')--\",\n    \"'; EXEC sp_executesql N'SELECT @@version'--\",\n    \"admin'; EXEC master..xp_cmdshell 'ping 127.0.0.1'--\",\n  ],\n  integerInjection: [\n    \"1 OR 1=1\",\n    \"1 AND 1=1\",\n    \"1 UNION SELECT NULL\",\n    \"1' OR '1'='1\",\n  ],\n};\n\n// ============================================================================\n// SETUP AND TEARDOWN\n// ============================================================================\n\nbeforeAll(async () => {\n  supabase = createClient(supabaseUrl, supabaseServiceKey, {\n    auth: {\n      autoRefreshToken: false,\n      persistSession: false,\n    },\n  });\n\n  // Create test user and organization\n  const { data: user, error: userError } = await supabase.auth.admin.createUser({\n    email: 'sql-injection-test@example.com',\n    password: 'TestPassword123!',\n    email_confirm: true,\n  });\n\n  if (userError) throw userError;\n  testUserId = user.user.id;\n\n  const { data: org, error: orgError } = await supabase\n    .from('organizations')\n    .insert({\n      name: 'SQL Injection Test Org',\n      slug: 'sql-injection-test-org',\n      status: 'active',\n    })\n    .select()\n    .single();\n\n  if (orgError) throw orgError;\n  testOrgId = org.id;\n\n  // Associate user with organization\n  await supabase\n    .from('profiles')\n    .update({ organization_id: testOrgId })\n    .eq('id', testUserId);\n});\n\nafterAll(async () => {\n  // Cleanup test data\n  if (testOrgId) {\n    await supabase.from('organizations').delete().eq('id', testOrgId);\n  }\n\n  if (testUserId) {\n    await supabase.auth.admin.deleteUser(testUserId);\n  }\n});\n\n// ============================================================================\n// INPUT VALIDATION TESTS\n// ============================================================================\n\ndescribe('Input Validation - SQL Injection Prevention', () => {\n  describe('validateUUID', () => {\n    it('should accept valid UUIDs', () => {\n      const validUUIDs = [\n        '550e8400-e29b-41d4-a716-446655440000',\n        '6ba7b810-9dad-11d1-80b4-00c04fd430c8',\n        'f47ac10b-58cc-4372-a567-0e02b2c3d479',\n      ];\n\n      validUUIDs.forEach((uuid) => {\n        const result = InputValidator.validateUUID(uuid);\n        expect(result.isValid).toBe(true);\n        expect(result.sanitizedValue).toBe(uuid.toLowerCase());\n      });\n    });\n\n    it('should reject SQL injection attempts in UUID', () => {\n      const maliciousInputs = [\n        \"550e8400' OR '1'='1\",\n        \"550e8400; DROP TABLE users--\",\n        \"550e8400 UNION SELECT NULL\",\n        \"' OR '1'='1\",\n      ];\n\n      maliciousInputs.forEach((input) => {\n        const result = InputValidator.validateUUID(input);\n        expect(result.isValid).toBe(false);\n        expect(result.errorCode).toBe(ValidationErrorCodes.INVALID_UUID);\n      });\n    });\n\n    it('should reject invalid UUID formats', () => {\n      const invalidUUIDs = [\n        '550e8400-e29b-41d4-a716',\n        'not-a-uuid',\n        '12345',\n        '',\n        '550e8400-e29b-41d4-a716-44665544000g', // Invalid character\n      ];\n\n      invalidUUIDs.forEach((uuid) => {\n        const result = InputValidator.validateUUID(uuid);\n        expect(result.isValid).toBe(false);\n      });\n    });\n  });\n\n  describe('validateText', () => {\n    it('should accept safe text', () => {\n      const safeTexts = [\n        'Hello World',\n        'Test message 123',\n        'Email: test@example.com',\n        'Valid-text_with.symbols',\n      ];\n\n      safeTexts.forEach((text) => {\n        const result = InputValidator.validateText(text);\n        expect(result.isValid).toBe(true);\n      });\n    });\n\n    it('should reject SQL injection patterns', () => {\n      SQL_INJECTION_PAYLOADS.basic.forEach((payload) => {\n        const result = InputValidator.validateText(payload);\n        expect(result.isValid).toBe(false);\n        expect(result.errorCode).toBe(ValidationErrorCodes.SQL_INJECTION_DETECTED);\n      });\n    });\n\n    it('should reject XSS patterns', () => {\n      const xssPatterns = [\n        '<script>alert(\"XSS\")</script>',\n        'javascript:alert(1)',\n        '<img src=x onerror=alert(1)>',\n        '<iframe src=\"javascript:alert(1)\">',\n      ];\n\n      xssPatterns.forEach((pattern) => {\n        const result = InputValidator.validateText(pattern);\n        expect(result.isValid).toBe(false);\n        expect(result.errorCode).toBe(ValidationErrorCodes.XSS_DETECTED);\n      });\n    });\n\n    it('should enforce length limits', () => {\n      const longText = 'a'.repeat(10001);\n      const result = InputValidator.validateText(longText);\n      expect(result.isValid).toBe(false);\n      expect(result.errorCode).toBe(ValidationErrorCodes.INVALID_LENGTH);\n    });\n  });\n\n  describe('validateEmail', () => {\n    it('should accept valid emails', () => {\n      const validEmails = [\n        'test@example.com',\n        'user.name@example.co.uk',\n        'user+tag@example.com',\n      ];\n\n      validEmails.forEach((email) => {\n        const result = InputValidator.validateEmail(email);\n        expect(result.isValid).toBe(true);\n      });\n    });\n\n    it('should reject SQL injection in emails', () => {\n      const maliciousEmails = [\n        \"admin'--@example.com\",\n        \"test' OR '1'='1@example.com\",\n        \"user; DROP TABLE users@example.com\",\n      ];\n\n      maliciousEmails.forEach((email) => {\n        const result = InputValidator.validateEmail(email);\n        expect(result.isValid).toBe(false);\n      });\n    });\n  });\n\n  describe('validateInteger', () => {\n    it('should accept valid integers', () => {\n      const validIntegers = [0, 1, 42, -10, 1000000];\n\n      validIntegers.forEach((num) => {\n        const result = InputValidator.validateInteger(num);\n        expect(result.isValid).toBe(true);\n        expect(result.sanitizedValue).toBe(num);\n      });\n    });\n\n    it('should reject SQL injection in integer strings', () => {\n      const maliciousInputs = [\n        \"1 OR 1=1\",\n        \"1; DROP TABLE users\",\n        \"1 UNION SELECT NULL\",\n      ];\n\n      maliciousInputs.forEach((input) => {\n        const result = InputValidator.validateInteger(input);\n        expect(result.isValid).toBe(false);\n      });\n    });\n  });\n\n  describe('validateJSON', () => {\n    it('should accept and sanitize valid JSON', () => {\n      const validJSON = {\n        name: 'Test',\n        value: 123,\n        nested: { key: 'value' },\n      };\n\n      const result = InputValidator.validateJSON(validJSON);\n      expect(result.isValid).toBe(true);\n      expect(result.sanitizedValue).toBeDefined();\n    });\n\n    it('should sanitize SQL injection attempts in JSON values', () => {\n      const maliciousJSON = {\n        name: \"Test' OR '1'='1\",\n        query: \"; DROP TABLE users--\",\n      };\n\n      const result = InputValidator.validateJSON(maliciousJSON);\n      expect(result.isValid).toBe(true);\n      // Values should be sanitized\n      expect(result.sanitizedValue.name).not.toContain(\"' OR '1'='1\");\n    });\n  });\n});\n\n// ============================================================================\n// SECURE RPC WRAPPER TESTS\n// ============================================================================\n\ndescribe('Secure RPC Wrapper - Function Whitelist', () => {\n  it('should reject non-whitelisted functions', async () => {\n    const result = await secureRpc(supabase, 'malicious_function', {\n      param: 'value',\n    });\n\n    expect(result.error).toBeDefined();\n    expect(result.error?.message).toContain('not whitelisted');\n    expect(result.data).toBeNull();\n  });\n\n  it('should accept whitelisted functions', async () => {\n    const result = await secureRpc(supabase, 'is_super_admin', {\n      user_id: testUserId,\n    });\n\n    // Should not error on whitelist check (may error on other validation)\n    if (result.error) {\n      expect(result.error.message).not.toContain('not whitelisted');\n    }\n  });\n\n  it('should enforce parameter validation', async () => {\n    const result = await secureRpc(supabase, 'get_conversation_unread_count', {\n      conv_id: 'invalid-uuid',\n    });\n\n    expect(result.error).toBeDefined();\n    expect(result.validationErrors).toBeDefined();\n  });\n});\n\n// ============================================================================\n// RPC FUNCTION INJECTION TESTS\n// ============================================================================\n\ndescribe('RPC Functions - SQL Injection Protection', () => {\n  describe('get_conversation_unread_count', () => {\n    it('should reject SQL injection in UUID parameter', async () => {\n      const injectionAttempts = [\n        \"550e8400-e29b-41d4-a716-446655440000' OR '1'='1\",\n        \"550e8400-e29b-41d4-a716-446655440000; DROP TABLE messages--\",\n        \"550e8400-e29b-41d4-a716-446655440000 UNION SELECT NULL\",\n      ];\n\n      for (const payload of injectionAttempts) {\n        const result = await secureRpc(supabase, 'get_conversation_unread_count', {\n          conv_id: payload,\n        });\n\n        expect(result.error).toBeDefined();\n        expect(result.data).toBeNull();\n      }\n    });\n  });\n\n  describe('check_usage_limits', () => {\n    it('should reject SQL injection in organization_id', async () => {\n      for (const payload of SQL_INJECTION_PAYLOADS.basic) {\n        const result = await secureRpc(supabase, 'check_usage_limits', {\n          org_id: payload,\n          limit_type_param: 'messages',\n        });\n\n        expect(result.error).toBeDefined();\n        expect(result.data).toBeNull();\n      }\n    });\n\n    it('should reject SQL injection in limit_type parameter', async () => {\n      const injectionAttempts = [\n        \"messages' OR '1'='1\",\n        \"messages; DROP TABLE usage_events--\",\n        \"messages' UNION SELECT NULL--\",\n      ];\n\n      for (const payload of injectionAttempts) {\n        const result = await secureRpc(supabase, 'check_usage_limits', {\n          org_id: testOrgId,\n          limit_type_param: payload,\n        });\n\n        expect(result.error).toBeDefined();\n      }\n    });\n  });\n\n  describe('get_tenant_by_domain', () => {\n    it('should reject SQL injection in domain parameter', async () => {\n      const injectionAttempts = [\n        ...SQL_INJECTION_PAYLOADS.basic,\n        ...SQL_INJECTION_PAYLOADS.stackedQueries,\n      ];\n\n      for (const payload of injectionAttempts) {\n        const result = await secureRpc(supabase, 'get_tenant_by_domain', {\n          domain_name: payload,\n        });\n\n        expect(result.error).toBeDefined();\n        expect(result.data).toBeNull();\n      }\n    });\n  });\n\n  describe('track_usage_event', () => {\n    it('should reject SQL injection in event parameters', async () => {\n      const result = await secureRpc(supabase, 'track_usage_event', {\n        org_id: testOrgId,\n        event_type_param: \"message' OR '1'='1\",\n        event_category_param: \"api; DROP TABLE usage_events--\",\n        resource_amount_param: \"1 OR 1=1\",\n      });\n\n      expect(result.error).toBeDefined();\n    });\n\n    it('should sanitize JSON metadata', async () => {\n      const maliciousMetadata = {\n        query: \"; DROP TABLE users--\",\n        value: \"' OR '1'='1\",\n      };\n\n      const result = await secureRpc(supabase, 'track_usage_event', {\n        org_id: testOrgId,\n        event_type_param: 'test_event',\n        event_category_param: 'test',\n        additional_metadata: maliciousMetadata,\n      });\n\n      // Should sanitize the metadata, not reject it\n      if (!result.error) {\n        // Metadata should be cleaned\n        expect(result.data).toBeDefined();\n      }\n    });\n  });\n});\n\n// ============================================================================\n// TIME-BASED BLIND INJECTION TESTS\n// ============================================================================\n\ndescribe('Time-Based Blind Injection Prevention', () => {\n  it('should not delay execution with SLEEP injection', async () => {\n    const startTime = Date.now();\n\n    const result = await secureRpc(supabase, 'get_conversation_unread_count', {\n      conv_id: \"550e8400-e29b-41d4-a716-446655440000'; SELECT pg_sleep(5)--\",\n    });\n\n    const executionTime = Date.now() - startTime;\n\n    expect(result.error).toBeDefined();\n    // Execution should fail fast, not wait 5 seconds\n    expect(executionTime).toBeLessThan(1000);\n  });\n\n  it('should reject WAITFOR DELAY injection', async () => {\n    const result = await secureRpc(supabase, 'check_usage_limits', {\n      org_id: testOrgId,\n      limit_type_param: \"messages'; WAITFOR DELAY '0:0:5'--\",\n    });\n\n    expect(result.error).toBeDefined();\n    expect(result.data).toBeNull();\n  });\n});\n\n// ============================================================================\n// UNION-BASED INJECTION TESTS\n// ============================================================================\n\ndescribe('Union-Based Injection Prevention', () => {\n  it('should reject UNION SELECT in all parameters', async () => {\n    for (const payload of SQL_INJECTION_PAYLOADS.unionBased) {\n      const result = await secureRpc(supabase, 'get_tenant_by_domain', {\n        domain_name: payload,\n      });\n\n      expect(result.error).toBeDefined();\n      expect(result.data).toBeNull();\n    }\n  });\n\n  it('should not leak data through UNION injection', async () => {\n    const result = await secureRpc(supabase, 'check_usage_limits', {\n      org_id: testOrgId,\n      limit_type_param: \"messages' UNION SELECT email, password FROM profiles--\",\n    });\n\n    expect(result.error).toBeDefined();\n    expect(result.data).toBeNull();\n  });\n});\n\n// ============================================================================\n// STACKED QUERIES INJECTION TESTS\n// ============================================================================\n\ndescribe('Stacked Queries Injection Prevention', () => {\n  it('should reject DROP TABLE attempts', async () => {\n    const dropAttempts = [\n      \"'; DROP TABLE users--\",\n      \"test'; DROP TABLE profiles; --\",\n      \"value; DELETE FROM organizations--\",\n    ];\n\n    for (const payload of dropAttempts) {\n      const result = await secureRpc(supabase, 'get_tenant_by_domain', {\n        domain_name: payload,\n      });\n\n      expect(result.error).toBeDefined();\n      expect(result.data).toBeNull();\n    }\n  });\n\n  it('should reject UPDATE injection attempts', async () => {\n    const result = await secureRpc(supabase, 'check_usage_limits', {\n      org_id: testOrgId,\n      limit_type_param: \"messages'; UPDATE profiles SET is_super_admin=true--\",\n    });\n\n    expect(result.error).toBeDefined();\n    expect(result.data).toBeNull();\n  });\n});\n\n// ============================================================================\n// ERROR-BASED INJECTION TESTS\n// ============================================================================\n\ndescribe('Error-Based Injection Prevention', () => {\n  it('should not reveal database information through errors', async () => {\n    for (const payload of SQL_INJECTION_PAYLOADS.errorBased) {\n      const result = await secureRpc(supabase, 'get_tenant_by_domain', {\n        domain_name: payload,\n      });\n\n      expect(result.error).toBeDefined();\n      // Error message should not contain database information\n      expect(result.error?.message).not.toContain('version');\n      expect(result.error?.message).not.toContain('PostgreSQL');\n    }\n  });\n});\n\n// ============================================================================\n// RATE LIMITING TESTS\n// ============================================================================\n\ndescribe('Rate Limiting', () => {\n  it('should enforce rate limits on repeated calls', async () => {\n    const functionName = 'is_super_admin';\n    const calls = [];\n\n    // Make more calls than the rate limit allows\n    for (let i = 0; i < 150; i++) {\n      calls.push(\n        secureRpc(supabase, functionName, { user_id: testUserId })\n      );\n    }\n\n    const results = await Promise.all(calls);\n    const rateLimitErrors = results.filter(\n      (r) => r.error?.message.includes('Rate limit exceeded')\n    );\n\n    expect(rateLimitErrors.length).toBeGreaterThan(0);\n  });\n});\n\n// ============================================================================\n// AUDIT LOGGING TESTS\n// ============================================================================\n\ndescribe('Audit Logging', () => {\n  it('should log failed injection attempts', async () => {\n    await secureRpc(supabase, 'get_conversation_unread_count', {\n      conv_id: \"'; DROP TABLE messages--\",\n    });\n\n    const { data: auditLogs } = await supabase\n      .from('rpc_function_audit_log')\n      .select('*')\n      .eq('function_name', 'get_conversation_unread_count')\n      .eq('success', false)\n      .order('called_at', { ascending: false })\n      .limit(1);\n\n    expect(auditLogs).toBeDefined();\n    expect(auditLogs?.length).toBeGreaterThan(0);\n  });\n\n  it('should sanitize parameters in audit logs', async () => {\n    await secureRpc(supabase, 'check_usage_limits', {\n      org_id: testOrgId,\n      limit_type_param: \"messages' OR '1'='1\",\n    });\n\n    const { data: auditLogs } = await supabase\n      .from('rpc_function_audit_log')\n      .select('*')\n      .eq('function_name', 'check_usage_limits')\n      .order('called_at', { ascending: false })\n      .limit(1);\n\n    expect(auditLogs?.[0]?.parameters).toBeDefined();\n  });\n});\n\n// ============================================================================\n// INTEGRATION TESTS\n// ============================================================================\n\ndescribe('End-to-End SQL Injection Prevention', () => {\n  it('should protect full request flow', async () => {\n    // Simulate a complete user flow with injection attempts\n    const maliciousUserId = \"'; DROP TABLE profiles--\";\n    const maliciousOrgId = \"' OR '1'='1\";\n\n    // All these should fail safely\n    const results = await Promise.all([\n      secureRpc(supabase, 'is_super_admin', { user_id: maliciousUserId }),\n      secureRpc(supabase, 'check_usage_limits', {\n        org_id: maliciousOrgId,\n        limit_type_param: 'messages',\n      }),\n      secureRpc(supabase, 'get_tenant_by_domain', {\n        domain_name: \"'; DROP TABLE organizations--\",\n      }),\n    ]);\n\n    results.forEach((result) => {\n      expect(result.error).toBeDefined();\n      expect(result.data).toBeNull();\n    });\n  });\n\n  it('should allow legitimate requests', async () => {\n    const result = await secureRpc(supabase, 'is_super_admin', {\n      user_id: testUserId,\n    });\n\n    // Should not fail on whitelist or validation\n    if (result.error) {\n      expect(result.error.message).not.toContain('not whitelisted');\n      expect(result.error.message).not.toContain('validation failed');\n    }\n  });\n});\n"],"names":["supabaseUrl","process","env","NEXT_PUBLIC_SUPABASE_URL","supabaseServiceKey","SUPABASE_SERVICE_ROLE_KEY","supabase","testUserId","testOrgId","SQL_INJECTION_PAYLOADS","basic","unionBased","timeBased","booleanBased","errorBased","stackedQueries","commandExecution","integerInjection","beforeAll","createClient","auth","autoRefreshToken","persistSession","data","user","error","userError","admin","createUser","email","password","email_confirm","id","org","orgError","from","insert","name","slug","status","select","single","update","organization_id","eq","afterAll","delete","deleteUser","describe","it","validUUIDs","forEach","uuid","result","InputValidator","validateUUID","expect","isValid","toBe","sanitizedValue","toLowerCase","maliciousInputs","input","errorCode","ValidationErrorCodes","INVALID_UUID","invalidUUIDs","safeTexts","text","validateText","payload","SQL_INJECTION_DETECTED","xssPatterns","pattern","XSS_DETECTED","longText","repeat","INVALID_LENGTH","validEmails","validateEmail","maliciousEmails","validIntegers","num","validateInteger","validJSON","value","nested","key","validateJSON","toBeDefined","maliciousJSON","query","not","toContain","secureRpc","param","message","toBeNull","user_id","conv_id","validationErrors","injectionAttempts","org_id","limit_type_param","domain_name","event_type_param","event_category_param","resource_amount_param","maliciousMetadata","additional_metadata","startTime","Date","now","executionTime","toBeLessThan","dropAttempts","functionName","calls","i","push","results","Promise","all","rateLimitErrors","filter","r","includes","length","toBeGreaterThan","auditLogs","order","ascending","limit","parameters","maliciousUserId","maliciousOrgId"],"mappings":"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"}