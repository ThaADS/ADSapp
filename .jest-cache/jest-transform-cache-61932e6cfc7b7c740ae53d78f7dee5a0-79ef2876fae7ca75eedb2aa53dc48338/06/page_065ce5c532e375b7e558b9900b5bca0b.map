{"version":3,"names":["cov_1hzfbls200","actualCoverage","s","AdminSetup","f","email","setEmail","_react","useState","password","setPassword","loading","setLoading","message","setMessage","supabase","_client","createClient","handleSignUp","e","preventDefault","data","authData","error","authError","auth","signUp","options","full_name","b","user","setTimeout","profileError","from","update","organization_id","role","eq","id","err","testConnection","select","limit","_jsxruntime","jsx","className","jsxs","type","onClick","onSubmit","value","onChange","target","placeholder","required","minLength","disabled","includes","href"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\app\\admin-setup\\page.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { createClient } from '@/lib/supabase/client'\n\nexport default function AdminSetup() {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [message, setMessage] = useState('')\n\n  const supabase = createClient()\n\n  const handleSignUp = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setLoading(true)\n    setMessage('')\n\n    try {\n      // 1. Registreer de gebruiker\n      const { data: authData, error: authError } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          data: {\n            full_name: 'Admin User'\n          }\n        }\n      })\n\n      if (authError) {\n        setMessage(`Auth error: ${authError.message}`)\n        setLoading(false)\n        return\n      }\n\n      if (authData.user) {\n        // 2. Wacht even en probeer dan het profiel bij te werken\n        setTimeout(async () => {\n          try {\n            // Update het profiel naar admin\n            const { error: profileError } = await supabase\n              .from('profiles')\n              .update({\n                organization_id: 'a0000000-0000-0000-0000-000000000001',\n                role: 'owner',\n                full_name: 'Admin User'\n              })\n              .eq('id', authData.user?.id)\n\n            if (profileError) {\n              setMessage(`Profile error: ${profileError.message}`)\n            } else {\n              setMessage('✅ Admin account succesvol aangemaakt! Je kunt nu naar het dashboard.')\n            }\n          } catch (err) {\n            setMessage(`Error: ${err}`)\n          }\n          setLoading(false)\n        }, 2000)\n      }\n    } catch (error) {\n      setMessage(`Error: ${error}`)\n      setLoading(false)\n    }\n  }\n\n  const testConnection = async () => {\n    try {\n      const { error } = await supabase.from('organizations').select('*').limit(1)\n      if (error) {\n        setMessage(`❌ Database error: ${error.message}. Pas eerst de database schema toe!`)\n      } else {\n        setMessage('✅ Database verbinding werkt!')\n      }\n    } catch (err) {\n      setMessage(`❌ Connection error: ${err}`)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n      <div className=\"max-w-md w-full bg-white rounded-lg shadow-md p-8\">\n        <h1 className=\"text-2xl font-bold text-center mb-6\">Admin Setup</h1>\n        \n        <div className=\"mb-6\">\n          <button\n            type=\"button\"\n            onClick={testConnection}\n            className=\"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 mb-4\"\n          >\n            Test Database Verbinding\n          </button>\n        </div>\n\n        <form onSubmit={handleSignUp} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Admin Email\n            </label>\n            <input\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\n              placeholder=\"admin@example.com\"\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Wachtwoord\n            </label>\n            <input\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\n              placeholder=\"Minimaal 6 karakters\"\n              required\n              minLength={6}\n            />\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 disabled:opacity-50\"\n          >\n            {loading ? 'Bezig...' : 'Maak Admin Account Aan'}\n          </button>\n        </form>\n\n        {message && (\n          <div className={`mt-4 p-3 rounded ${\n            message.includes('✅') \n              ? 'bg-green-100 text-green-700' \n              : 'bg-red-100 text-red-700'\n          }`}>\n            {message}\n          </div>\n        )}\n\n        <div className=\"mt-6 text-sm text-gray-600\">\n          <h3 className=\"font-semibold mb-2\">Stappen:</h3>\n          <ol className=\"list-decimal list-inside space-y-1\">\n            <li>Pas eerst de database schema toe in Supabase</li>\n            <li>Test de database verbinding</li>\n            <li>Maak een admin account aan</li>\n            <li>Ga naar het dashboard om te testen</li>\n          </ol>\n        </div>\n\n        <div className=\"mt-4 text-center\">\n          <a href=\"/dashboard\" className=\"text-green-600 hover:underline\">\n            → Ga naar Dashboard\n          </a>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}