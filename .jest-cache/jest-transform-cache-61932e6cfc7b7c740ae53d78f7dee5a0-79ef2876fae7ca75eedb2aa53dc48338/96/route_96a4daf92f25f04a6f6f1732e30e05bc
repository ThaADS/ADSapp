56c97022d7d5e1f3bc3d6d5b7324f2bc
"use strict";

/* istanbul ignore next */
function cov_2hhyslzhv8() {
  var path = "C:\\Ai Projecten\\ADSapp\\src\\app\\api\\contacts\\segments\\route.ts";
  var hash = "238535e42689525ef10423e4351bc21fb3c7f0c4";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Ai Projecten\\ADSapp\\src\\app\\api\\contacts\\segments\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "2": {
        start: {
          line: 6,
          column: 24
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "3": {
        start: {
          line: 11,
          column: 0
        },
        end: {
          line: 18,
          column: 3
        }
      },
      "4": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 19
        }
      },
      "5": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 20
        }
      },
      "6": {
        start: {
          line: 19,
          column: 16
        },
        end: {
          line: 19,
          column: 38
        }
      },
      "7": {
        start: {
          line: 20,
          column: 18
        },
        end: {
          line: 20,
          column: 54
        }
      },
      "8": {
        start: {
          line: 21,
          column: 17
        },
        end: {
          line: 21,
          column: 59
        }
      },
      "9": {
        start: {
          line: 23,
          column: 4
        },
        end: {
          line: 69,
          column: 5
        }
      },
      "10": {
        start: {
          line: 24,
          column: 21
        },
        end: {
          line: 24,
          column: 68
        }
      },
      "11": {
        start: {
          line: 25,
          column: 24
        },
        end: {
          line: 25,
          column: 73
        }
      },
      "12": {
        start: {
          line: 26,
          column: 25
        },
        end: {
          line: 26,
          column: 59
        }
      },
      "13": {
        start: {
          line: 28,
          column: 25
        },
        end: {
          line: 37,
          column: 10
        }
      },
      "14": {
        start: {
          line: 39,
          column: 28
        },
        end: {
          line: 39,
          column: 89
        }
      },
      "15": {
        start: {
          line: 41,
          column: 41
        },
        end: {
          line: 43,
          column: 10
        }
      },
      "16": {
        start: {
          line: 44,
          column: 35
        },
        end: {
          line: 54,
          column: 11
        }
      },
      "17": {
        start: {
          line: 45,
          column: 26
        },
        end: {
          line: 45,
          column: 112
        }
      },
      "18": {
        start: {
          line: 46,
          column: 12
        },
        end: {
          line: 53,
          column: 14
        }
      },
      "19": {
        start: {
          line: 55,
          column: 8
        },
        end: {
          line: 65,
          column: 11
        }
      },
      "20": {
        start: {
          line: 60,
          column: 50
        },
        end: {
          line: 60,
          column: 65
        }
      },
      "21": {
        start: {
          line: 61,
          column: 51
        },
        end: {
          line: 61,
          column: 69
        }
      },
      "22": {
        start: {
          line: 62,
          column: 48
        },
        end: {
          line: 62,
          column: 63
        }
      },
      "23": {
        start: {
          line: 63,
          column: 52
        },
        end: {
          line: 63,
          column: 71
        }
      },
      "24": {
        start: {
          line: 67,
          column: 8
        },
        end: {
          line: 67,
          column: 65
        }
      },
      "25": {
        start: {
          line: 68,
          column: 8
        },
        end: {
          line: 68,
          column: 57
        }
      },
      "26": {
        start: {
          line: 72,
          column: 4
        },
        end: {
          line: 124,
          column: 5
        }
      },
      "27": {
        start: {
          line: 73,
          column: 21
        },
        end: {
          line: 73,
          column: 68
        }
      },
      "28": {
        start: {
          line: 74,
          column: 24
        },
        end: {
          line: 74,
          column: 73
        }
      },
      "29": {
        start: {
          line: 75,
          column: 21
        },
        end: {
          line: 75,
          column: 41
        }
      },
      "30": {
        start: {
          line: 76,
          column: 48
        },
        end: {
          line: 76,
          column: 52
        }
      },
      "31": {
        start: {
          line: 77,
          column: 8
        },
        end: {
          line: 83,
          column: 9
        }
      },
      "32": {
        start: {
          line: 78,
          column: 12
        },
        end: {
          line: 82,
          column: 15
        }
      },
      "33": {
        start: {
          line: 85,
          column: 8
        },
        end: {
          line: 91,
          column: 9
        }
      },
      "34": {
        start: {
          line: 86,
          column: 12
        },
        end: {
          line: 90,
          column: 15
        }
      },
      "35": {
        start: {
          line: 92,
          column: 25
        },
        end: {
          line: 92,
          column: 59
        }
      },
      "36": {
        start: {
          line: 94,
          column: 42
        },
        end: {
          line: 94,
          column: 167
        }
      },
      "37": {
        start: {
          line: 95,
          column: 8
        },
        end: {
          line: 101,
          column: 9
        }
      },
      "38": {
        start: {
          line: 96,
          column: 12
        },
        end: {
          line: 100,
          column: 15
        }
      },
      "39": {
        start: {
          line: 103,
          column: 26
        },
        end: {
          line: 103,
          column: 104
        }
      },
      "40": {
        start: {
          line: 105,
          column: 41
        },
        end: {
          line: 113,
          column: 28
        }
      },
      "41": {
        start: {
          line: 114,
          column: 8
        },
        end: {
          line: 116,
          column: 9
        }
      },
      "42": {
        start: {
          line: 115,
          column: 12
        },
        end: {
          line: 115,
          column: 24
        }
      },
      "43": {
        start: {
          line: 117,
          column: 8
        },
        end: {
          line: 120,
          column: 16
        }
      },
      "44": {
        start: {
          line: 122,
          column: 8
        },
        end: {
          line: 122,
          column: 64
        }
      },
      "45": {
        start: {
          line: 123,
          column: 8
        },
        end: {
          line: 123,
          column: 57
        }
      },
      "46": {
        start: {
          line: 127,
          column: 16
        },
        end: {
          line: 129,
          column: 44
        }
      },
      "47": {
        start: {
          line: 130,
          column: 4
        },
        end: {
          line: 178,
          column: 5
        }
      },
      "48": {
        start: {
          line: 132,
          column: 12
        },
        end: {
          line: 132,
          column: 18
        }
      },
      "49": {
        start: {
          line: 134,
          column: 34
        },
        end: {
          line: 134,
          column: 95
        }
      },
      "50": {
        start: {
          line: 135,
          column: 12
        },
        end: {
          line: 135,
          column: 64
        }
      },
      "51": {
        start: {
          line: 136,
          column: 12
        },
        end: {
          line: 136,
          column: 18
        }
      },
      "52": {
        start: {
          line: 138,
          column: 42
        },
        end: {
          line: 138,
          column: 103
        }
      },
      "53": {
        start: {
          line: 139,
          column: 12
        },
        end: {
          line: 139,
          column: 100
        }
      },
      "54": {
        start: {
          line: 140,
          column: 12
        },
        end: {
          line: 140,
          column: 18
        }
      },
      "55": {
        start: {
          line: 142,
          column: 33
        },
        end: {
          line: 142,
          column: 93
        }
      },
      "56": {
        start: {
          line: 143,
          column: 12
        },
        end: {
          line: 143,
          column: 58
        }
      },
      "57": {
        start: {
          line: 144,
          column: 12
        },
        end: {
          line: 144,
          column: 18
        }
      },
      "58": {
        start: {
          line: 146,
          column: 12
        },
        end: {
          line: 148,
          column: 15
        }
      },
      "59": {
        start: {
          line: 149,
          column: 12
        },
        end: {
          line: 149,
          column: 18
        }
      },
      "60": {
        start: {
          line: 151,
          column: 12
        },
        end: {
          line: 151,
          column: 49
        }
      },
      "61": {
        start: {
          line: 152,
          column: 12
        },
        end: {
          line: 152,
          column: 18
        }
      },
      "62": {
        start: {
          line: 155,
          column: 12
        },
        end: {
          line: 161,
          column: 12
        }
      },
      "63": {
        start: {
          line: 162,
          column: 12
        },
        end: {
          line: 162,
          column: 18
        }
      },
      "64": {
        start: {
          line: 165,
          column: 12
        },
        end: {
          line: 174,
          column: 12
        }
      },
      "65": {
        start: {
          line: 175,
          column: 12
        },
        end: {
          line: 175,
          column: 18
        }
      },
      "66": {
        start: {
          line: 177,
          column: 12
        },
        end: {
          line: 177,
          column: 18
        }
      },
      "67": {
        start: {
          line: 179,
          column: 22
        },
        end: {
          line: 179,
          column: 33
        }
      },
      "68": {
        start: {
          line: 180,
          column: 4
        },
        end: {
          line: 185,
          column: 6
        }
      },
      "69": {
        start: {
          line: 189,
          column: 31
        },
        end: {
          line: 189,
          column: 139
        }
      },
      "70": {
        start: {
          line: 190,
          column: 22
        },
        end: {
          line: 190,
          column: 31
        }
      },
      "71": {
        start: {
          line: 191,
          column: 4
        },
        end: {
          line: 196,
          column: 5
        }
      },
      "72": {
        start: {
          line: 192,
          column: 21
        },
        end: {
          line: 192,
          column: 39
        }
      },
      "73": {
        start: {
          line: 193,
          column: 8
        },
        end: {
          line: 195,
          column: 9
        }
      },
      "74": {
        start: {
          line: 194,
          column: 12
        },
        end: {
          line: 194,
          column: 62
        }
      },
      "75": {
        start: {
          line: 197,
          column: 4
        },
        end: {
          line: 203,
          column: 44
        }
      },
      "76": {
        start: {
          line: 197,
          column: 64
        },
        end: {
          line: 203,
          column: 9
        }
      },
      "77": {
        start: {
          line: 203,
          column: 25
        },
        end: {
          line: 203,
          column: 42
        }
      },
      "78": {
        start: {
          line: 206,
          column: 4
        },
        end: {
          line: 219,
          column: 5
        }
      },
      "79": {
        start: {
          line: 207,
          column: 20
        },
        end: {
          line: 209,
          column: 48
        }
      },
      "80": {
        start: {
          line: 211,
          column: 8
        },
        end: {
          line: 213,
          column: 9
        }
      },
      "81": {
        start: {
          line: 212,
          column: 12
        },
        end: {
          line: 212,
          column: 53
        }
      },
      "82": {
        start: {
          line: 214,
          column: 26
        },
        end: {
          line: 214,
          column: 37
        }
      },
      "83": {
        start: {
          line: 215,
          column: 8
        },
        end: {
          line: 215,
          column: 26
        }
      },
      "84": {
        start: {
          line: 217,
          column: 8
        },
        end: {
          line: 217,
          column: 72
        }
      },
      "85": {
        start: {
          line: 218,
          column: 8
        },
        end: {
          line: 218,
          column: 17
        }
      },
      "86": {
        start: {
          line: 222,
          column: 39
        },
        end: {
          line: 222,
          column: 48
        }
      },
      "87": {
        start: {
          line: 223,
          column: 4
        },
        end: {
          line: 266,
          column: 5
        }
      },
      "88": {
        start: {
          line: 225,
          column: 12
        },
        end: {
          line: 225,
          column: 42
        }
      },
      "89": {
        start: {
          line: 227,
          column: 12
        },
        end: {
          line: 227,
          column: 43
        }
      },
      "90": {
        start: {
          line: 229,
          column: 12
        },
        end: {
          line: 229,
          column: 52
        }
      },
      "91": {
        start: {
          line: 231,
          column: 12
        },
        end: {
          line: 231,
          column: 59
        }
      },
      "92": {
        start: {
          line: 233,
          column: 12
        },
        end: {
          line: 233,
          column: 51
        }
      },
      "93": {
        start: {
          line: 235,
          column: 12
        },
        end: {
          line: 235,
          column: 51
        }
      },
      "94": {
        start: {
          line: 237,
          column: 12
        },
        end: {
          line: 237,
          column: 41
        }
      },
      "95": {
        start: {
          line: 239,
          column: 12
        },
        end: {
          line: 239,
          column: 48
        }
      },
      "96": {
        start: {
          line: 241,
          column: 12
        },
        end: {
          line: 241,
          column: 42
        }
      },
      "97": {
        start: {
          line: 243,
          column: 12
        },
        end: {
          line: 243,
          column: 42
        }
      },
      "98": {
        start: {
          line: 245,
          column: 12
        },
        end: {
          line: 245,
          column: 43
        }
      },
      "99": {
        start: {
          line: 247,
          column: 12
        },
        end: {
          line: 247,
          column: 43
        }
      },
      "100": {
        start: {
          line: 249,
          column: 12
        },
        end: {
          line: 251,
          column: 15
        }
      },
      "101": {
        start: {
          line: 253,
          column: 12
        },
        end: {
          line: 255,
          column: 15
        }
      },
      "102": {
        start: {
          line: 257,
          column: 12
        },
        end: {
          line: 259,
          column: 15
        }
      },
      "103": {
        start: {
          line: 261,
          column: 12
        },
        end: {
          line: 263,
          column: 15
        }
      },
      "104": {
        start: {
          line: 265,
          column: 12
        },
        end: {
          line: 265,
          column: 25
        }
      },
      "105": {
        start: {
          line: 269,
          column: 4
        },
        end: {
          line: 271,
          column: 5
        }
      },
      "106": {
        start: {
          line: 270,
          column: 8
        },
        end: {
          line: 270,
          column: 21
        }
      },
      "107": {
        start: {
          line: 272,
          column: 4
        },
        end: {
          line: 274,
          column: 5
        }
      },
      "108": {
        start: {
          line: 273,
          column: 8
        },
        end: {
          line: 273,
          column: 21
        }
      },
      "109": {
        start: {
          line: 275,
          column: 24
        },
        end: {
          line: 285,
          column: 5
        }
      },
      "110": {
        start: {
          line: 286,
          column: 27
        },
        end: {
          line: 303,
          column: 5
        }
      },
      "111": {
        start: {
          line: 304,
          column: 4
        },
        end: {
          line: 322,
          column: 5
        }
      },
      "112": {
        start: {
          line: 305,
          column: 8
        },
        end: {
          line: 307,
          column: 9
        }
      },
      "113": {
        start: {
          line: 306,
          column: 12
        },
        end: {
          line: 306,
          column: 25
        }
      },
      "114": {
        start: {
          line: 308,
          column: 8
        },
        end: {
          line: 310,
          column: 9
        }
      },
      "115": {
        start: {
          line: 309,
          column: 12
        },
        end: {
          line: 309,
          column: 25
        }
      },
      "116": {
        start: {
          line: 311,
          column: 8
        },
        end: {
          line: 313,
          column: 9
        }
      },
      "117": {
        start: {
          line: 312,
          column: 12
        },
        end: {
          line: 312,
          column: 25
        }
      },
      "118": {
        start: {
          line: 315,
          column: 38
        },
        end: {
          line: 318,
          column: 9
        }
      },
      "119": {
        start: {
          line: 319,
          column: 8
        },
        end: {
          line: 321,
          column: 9
        }
      },
      "120": {
        start: {
          line: 320,
          column: 12
        },
        end: {
          line: 320,
          column: 25
        }
      },
      "121": {
        start: {
          line: 323,
          column: 4
        },
        end: {
          line: 323,
          column: 16
        }
      },
      "122": {
        start: {
          line: 326,
          column: 25
        },
        end: {
          line: 335,
          column: 5
        }
      },
      "123": {
        start: {
          line: 336,
          column: 4
        },
        end: {
          line: 336,
          column: 35
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 16
          }
        },
        loc: {
          start: {
            line: 5,
            column: 30
          },
          end: {
            line: 10,
            column: 1
          }
        },
        line: 5
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 12,
            column: 5
          }
        },
        loc: {
          start: {
            line: 12,
            column: 15
          },
          end: {
            line: 14,
            column: 5
          }
        },
        line: 12
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 15,
            column: 5
          }
        },
        loc: {
          start: {
            line: 15,
            column: 16
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 15
      },
      "3": {
        name: "GET",
        decl: {
          start: {
            line: 22,
            column: 15
          },
          end: {
            line: 22,
            column: 18
          }
        },
        loc: {
          start: {
            line: 22,
            column: 28
          },
          end: {
            line: 70,
            column: 1
          }
        },
        line: 22
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 44,
            column: 80
          },
          end: {
            line: 44,
            column: 81
          }
        },
        loc: {
          start: {
            line: 44,
            column: 97
          },
          end: {
            line: 54,
            column: 9
          }
        },
        line: 44
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 60,
            column: 45
          },
          end: {
            line: 60,
            column: 46
          }
        },
        loc: {
          start: {
            line: 60,
            column: 50
          },
          end: {
            line: 60,
            column: 65
          }
        },
        line: 60
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 61,
            column: 46
          },
          end: {
            line: 61,
            column: 47
          }
        },
        loc: {
          start: {
            line: 61,
            column: 51
          },
          end: {
            line: 61,
            column: 69
          }
        },
        line: 61
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 62,
            column: 43
          },
          end: {
            line: 62,
            column: 44
          }
        },
        loc: {
          start: {
            line: 62,
            column: 48
          },
          end: {
            line: 62,
            column: 63
          }
        },
        line: 62
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 63,
            column: 47
          },
          end: {
            line: 63,
            column: 48
          }
        },
        loc: {
          start: {
            line: 63,
            column: 52
          },
          end: {
            line: 63,
            column: 71
          }
        },
        line: 63
      },
      "9": {
        name: "POST",
        decl: {
          start: {
            line: 71,
            column: 15
          },
          end: {
            line: 71,
            column: 19
          }
        },
        loc: {
          start: {
            line: 71,
            column: 29
          },
          end: {
            line: 125,
            column: 1
          }
        },
        line: 71
      },
      "10": {
        name: "calculateSegment",
        decl: {
          start: {
            line: 126,
            column: 15
          },
          end: {
            line: 126,
            column: 31
          }
        },
        loc: {
          start: {
            line: 126,
            column: 69
          },
          end: {
            line: 186,
            column: 1
          }
        },
        line: 126
      },
      "11": {
        name: "calculateTagSegments",
        decl: {
          start: {
            line: 187,
            column: 15
          },
          end: {
            line: 187,
            column: 35
          }
        },
        loc: {
          start: {
            line: 187,
            column: 62
          },
          end: {
            line: 204,
            column: 1
          }
        },
        line: 187
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 197,
            column: 47
          },
          end: {
            line: 197,
            column: 48
          }
        },
        loc: {
          start: {
            line: 197,
            column: 64
          },
          end: {
            line: 203,
            column: 9
          }
        },
        line: 197
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 203,
            column: 17
          },
          end: {
            line: 203,
            column: 18
          }
        },
        loc: {
          start: {
            line: 203,
            column: 25
          },
          end: {
            line: 203,
            column: 42
          }
        },
        line: 203
      },
      "14": {
        name: "calculateCustomSegmentCount",
        decl: {
          start: {
            line: 205,
            column: 15
          },
          end: {
            line: 205,
            column: 42
          }
        },
        loc: {
          start: {
            line: 205,
            column: 79
          },
          end: {
            line: 220,
            column: 1
          }
        },
        line: 205
      },
      "15": {
        name: "applyCondition",
        decl: {
          start: {
            line: 221,
            column: 9
          },
          end: {
            line: 221,
            column: 23
          }
        },
        loc: {
          start: {
            line: 221,
            column: 42
          },
          end: {
            line: 267,
            column: 1
          }
        },
        line: 221
      },
      "16": {
        name: "validateSegmentCriteria",
        decl: {
          start: {
            line: 268,
            column: 9
          },
          end: {
            line: 268,
            column: 32
          }
        },
        loc: {
          start: {
            line: 268,
            column: 43
          },
          end: {
            line: 324,
            column: 1
          }
        },
        line: 268
      },
      "17": {
        name: "getSegmentDescription",
        decl: {
          start: {
            line: 325,
            column: 9
          },
          end: {
            line: 325,
            column: 30
          }
        },
        loc: {
          start: {
            line: 325,
            column: 36
          },
          end: {
            line: 337,
            column: 1
          }
        },
        line: 325
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 44,
            column: 54
          },
          end: {
            line: 44,
            column: 74
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 44,
            column: 54
          },
          end: {
            line: 44,
            column: 68
          }
        }, {
          start: {
            line: 44,
            column: 72
          },
          end: {
            line: 44,
            column: 74
          }
        }],
        line: 44
      },
      "1": {
        loc: {
          start: {
            line: 60,
            column: 31
          },
          end: {
            line: 60,
            column: 78
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 60,
            column: 31
          },
          end: {
            line: 60,
            column: 73
          }
        }, {
          start: {
            line: 60,
            column: 77
          },
          end: {
            line: 60,
            column: 78
          }
        }],
        line: 60
      },
      "2": {
        loc: {
          start: {
            line: 61,
            column: 32
          },
          end: {
            line: 61,
            column: 82
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 61,
            column: 32
          },
          end: {
            line: 61,
            column: 77
          }
        }, {
          start: {
            line: 61,
            column: 81
          },
          end: {
            line: 61,
            column: 82
          }
        }],
        line: 61
      },
      "3": {
        loc: {
          start: {
            line: 62,
            column: 29
          },
          end: {
            line: 62,
            column: 76
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 62,
            column: 29
          },
          end: {
            line: 62,
            column: 71
          }
        }, {
          start: {
            line: 62,
            column: 75
          },
          end: {
            line: 62,
            column: 76
          }
        }],
        line: 62
      },
      "4": {
        loc: {
          start: {
            line: 63,
            column: 33
          },
          end: {
            line: 63,
            column: 84
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 63,
            column: 33
          },
          end: {
            line: 63,
            column: 79
          }
        }, {
          start: {
            line: 63,
            column: 83
          },
          end: {
            line: 63,
            column: 84
          }
        }],
        line: 63
      },
      "5": {
        loc: {
          start: {
            line: 77,
            column: 8
          },
          end: {
            line: 83,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 77,
            column: 8
          },
          end: {
            line: 83,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 77
      },
      "6": {
        loc: {
          start: {
            line: 77,
            column: 12
          },
          end: {
            line: 77,
            column: 30
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 77,
            column: 12
          },
          end: {
            line: 77,
            column: 17
          }
        }, {
          start: {
            line: 77,
            column: 21
          },
          end: {
            line: 77,
            column: 30
          }
        }],
        line: 77
      },
      "7": {
        loc: {
          start: {
            line: 85,
            column: 8
          },
          end: {
            line: 91,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 85,
            column: 8
          },
          end: {
            line: 91,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 85
      },
      "8": {
        loc: {
          start: {
            line: 95,
            column: 8
          },
          end: {
            line: 101,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 95,
            column: 8
          },
          end: {
            line: 101,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 95
      },
      "9": {
        loc: {
          start: {
            line: 114,
            column: 8
          },
          end: {
            line: 116,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 114,
            column: 8
          },
          end: {
            line: 116,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 114
      },
      "10": {
        loc: {
          start: {
            line: 130,
            column: 4
          },
          end: {
            line: 178,
            column: 5
          }
        },
        type: "switch",
        locations: [{
          start: {
            line: 131,
            column: 8
          },
          end: {
            line: 132,
            column: 18
          }
        }, {
          start: {
            line: 133,
            column: 8
          },
          end: {
            line: 136,
            column: 18
          }
        }, {
          start: {
            line: 137,
            column: 8
          },
          end: {
            line: 140,
            column: 18
          }
        }, {
          start: {
            line: 141,
            column: 8
          },
          end: {
            line: 144,
            column: 18
          }
        }, {
          start: {
            line: 145,
            column: 8
          },
          end: {
            line: 149,
            column: 18
          }
        }, {
          start: {
            line: 150,
            column: 8
          },
          end: {
            line: 152,
            column: 18
          }
        }, {
          start: {
            line: 153,
            column: 8
          },
          end: {
            line: 162,
            column: 18
          }
        }, {
          start: {
            line: 163,
            column: 8
          },
          end: {
            line: 175,
            column: 18
          }
        }, {
          start: {
            line: 176,
            column: 8
          },
          end: {
            line: 177,
            column: 18
          }
        }],
        line: 130
      },
      "11": {
        loc: {
          start: {
            line: 183,
            column: 15
          },
          end: {
            line: 183,
            column: 25
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 183,
            column: 15
          },
          end: {
            line: 183,
            column: 20
          }
        }, {
          start: {
            line: 183,
            column: 24
          },
          end: {
            line: 183,
            column: 25
          }
        }],
        line: 183
      },
      "12": {
        loc: {
          start: {
            line: 191,
            column: 26
          },
          end: {
            line: 191,
            column: 40
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 191,
            column: 26
          },
          end: {
            line: 191,
            column: 34
          }
        }, {
          start: {
            line: 191,
            column: 38
          },
          end: {
            line: 191,
            column: 40
          }
        }],
        line: 191
      },
      "13": {
        loc: {
          start: {
            line: 192,
            column: 21
          },
          end: {
            line: 192,
            column: 39
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 192,
            column: 21
          },
          end: {
            line: 192,
            column: 33
          }
        }, {
          start: {
            line: 192,
            column: 37
          },
          end: {
            line: 192,
            column: 39
          }
        }],
        line: 192
      },
      "14": {
        loc: {
          start: {
            line: 194,
            column: 32
          },
          end: {
            line: 194,
            column: 55
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 194,
            column: 32
          },
          end: {
            line: 194,
            column: 50
          }
        }, {
          start: {
            line: 194,
            column: 54
          },
          end: {
            line: 194,
            column: 55
          }
        }],
        line: 194
      },
      "15": {
        loc: {
          start: {
            line: 211,
            column: 32
          },
          end: {
            line: 211,
            column: 57
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 211,
            column: 32
          },
          end: {
            line: 211,
            column: 51
          }
        }, {
          start: {
            line: 211,
            column: 55
          },
          end: {
            line: 211,
            column: 57
          }
        }],
        line: 211
      },
      "16": {
        loc: {
          start: {
            line: 215,
            column: 15
          },
          end: {
            line: 215,
            column: 25
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 215,
            column: 15
          },
          end: {
            line: 215,
            column: 20
          }
        }, {
          start: {
            line: 215,
            column: 24
          },
          end: {
            line: 215,
            column: 25
          }
        }],
        line: 215
      },
      "17": {
        loc: {
          start: {
            line: 223,
            column: 4
          },
          end: {
            line: 266,
            column: 5
          }
        },
        type: "switch",
        locations: [{
          start: {
            line: 224,
            column: 8
          },
          end: {
            line: 225,
            column: 42
          }
        }, {
          start: {
            line: 226,
            column: 8
          },
          end: {
            line: 227,
            column: 43
          }
        }, {
          start: {
            line: 228,
            column: 8
          },
          end: {
            line: 229,
            column: 52
          }
        }, {
          start: {
            line: 230,
            column: 8
          },
          end: {
            line: 231,
            column: 59
          }
        }, {
          start: {
            line: 232,
            column: 8
          },
          end: {
            line: 233,
            column: 51
          }
        }, {
          start: {
            line: 234,
            column: 8
          },
          end: {
            line: 235,
            column: 51
          }
        }, {
          start: {
            line: 236,
            column: 8
          },
          end: {
            line: 237,
            column: 41
          }
        }, {
          start: {
            line: 238,
            column: 8
          },
          end: {
            line: 239,
            column: 48
          }
        }, {
          start: {
            line: 240,
            column: 8
          },
          end: {
            line: 241,
            column: 42
          }
        }, {
          start: {
            line: 242,
            column: 8
          },
          end: {
            line: 243,
            column: 42
          }
        }, {
          start: {
            line: 244,
            column: 8
          },
          end: {
            line: 245,
            column: 43
          }
        }, {
          start: {
            line: 246,
            column: 8
          },
          end: {
            line: 247,
            column: 43
          }
        }, {
          start: {
            line: 248,
            column: 8
          },
          end: {
            line: 251,
            column: 15
          }
        }, {
          start: {
            line: 252,
            column: 8
          },
          end: {
            line: 255,
            column: 15
          }
        }, {
          start: {
            line: 256,
            column: 8
          },
          end: {
            line: 259,
            column: 15
          }
        }, {
          start: {
            line: 260,
            column: 8
          },
          end: {
            line: 263,
            column: 15
          }
        }, {
          start: {
            line: 264,
            column: 8
          },
          end: {
            line: 265,
            column: 25
          }
        }],
        line: 223
      },
      "18": {
        loc: {
          start: {
            line: 249,
            column: 35
          },
          end: {
            line: 251,
            column: 13
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 249,
            column: 58
          },
          end: {
            line: 249,
            column: 63
          }
        }, {
          start: {
            line: 249,
            column: 66
          },
          end: {
            line: 251,
            column: 13
          }
        }],
        line: 249
      },
      "19": {
        loc: {
          start: {
            line: 253,
            column: 42
          },
          end: {
            line: 255,
            column: 13
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 253,
            column: 65
          },
          end: {
            line: 253,
            column: 70
          }
        }, {
          start: {
            line: 253,
            column: 73
          },
          end: {
            line: 255,
            column: 13
          }
        }],
        line: 253
      },
      "20": {
        loc: {
          start: {
            line: 269,
            column: 4
          },
          end: {
            line: 271,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 269,
            column: 4
          },
          end: {
            line: 271,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 269
      },
      "21": {
        loc: {
          start: {
            line: 269,
            column: 8
          },
          end: {
            line: 269,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 269,
            column: 8
          },
          end: {
            line: 269,
            column: 17
          }
        }, {
          start: {
            line: 269,
            column: 21
          },
          end: {
            line: 269,
            column: 49
          }
        }],
        line: 269
      },
      "22": {
        loc: {
          start: {
            line: 272,
            column: 4
          },
          end: {
            line: 274,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 272,
            column: 4
          },
          end: {
            line: 274,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 272
      },
      "23": {
        loc: {
          start: {
            line: 305,
            column: 8
          },
          end: {
            line: 307,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 305,
            column: 8
          },
          end: {
            line: 307,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 305
      },
      "24": {
        loc: {
          start: {
            line: 305,
            column: 12
          },
          end: {
            line: 305,
            column: 51
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 305,
            column: 12
          },
          end: {
            line: 305,
            column: 28
          }
        }, {
          start: {
            line: 305,
            column: 32
          },
          end: {
            line: 305,
            column: 51
          }
        }],
        line: 305
      },
      "25": {
        loc: {
          start: {
            line: 308,
            column: 8
          },
          end: {
            line: 310,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 308,
            column: 8
          },
          end: {
            line: 310,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 308
      },
      "26": {
        loc: {
          start: {
            line: 311,
            column: 8
          },
          end: {
            line: 313,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 311,
            column: 8
          },
          end: {
            line: 313,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 311
      },
      "27": {
        loc: {
          start: {
            line: 319,
            column: 8
          },
          end: {
            line: 321,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 319,
            column: 8
          },
          end: {
            line: 321,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 319
      },
      "28": {
        loc: {
          start: {
            line: 319,
            column: 12
          },
          end: {
            line: 319,
            column: 96
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 319,
            column: 12
          },
          end: {
            line: 319,
            column: 63
          }
        }, {
          start: {
            line: 319,
            column: 67
          },
          end: {
            line: 319,
            column: 96
          }
        }],
        line: 319
      },
      "29": {
        loc: {
          start: {
            line: 336,
            column: 11
          },
          end: {
            line: 336,
            column: 34
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 336,
            column: 11
          },
          end: {
            line: 336,
            column: 28
          }
        }, {
          start: {
            line: 336,
            column: 32
          },
          end: {
            line: 336,
            column: 34
          }
        }],
        line: 336
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0,
      "91": 0,
      "92": 0,
      "93": 0,
      "94": 0,
      "95": 0,
      "96": 0,
      "97": 0,
      "98": 0,
      "99": 0,
      "100": 0,
      "101": 0,
      "102": 0,
      "103": 0,
      "104": 0,
      "105": 0,
      "106": 0,
      "107": 0,
      "108": 0,
      "109": 0,
      "110": 0,
      "111": 0,
      "112": 0,
      "113": 0,
      "114": 0,
      "115": 0,
      "116": 0,
      "117": 0,
      "118": 0,
      "119": 0,
      "120": 0,
      "121": 0,
      "122": 0,
      "123": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0, 0, 0, 0, 0, 0, 0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0],
      "21": [0, 0],
      "22": [0, 0],
      "23": [0, 0],
      "24": [0, 0],
      "25": [0, 0],
      "26": [0, 0],
      "27": [0, 0],
      "28": [0, 0],
      "29": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Ai Projecten\\ADSapp\\src\\app\\api\\contacts\\segments\\route.ts"],
      sourcesContent: ["import { NextRequest, NextResponse } from 'next/server'\nimport { requireAuthenticatedUser, getUserOrganization, createErrorResponse, createSuccessResponse } from '@/lib/api-utils'\nimport { createClient } from '@/lib/supabase/server'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const user = await requireAuthenticatedUser()\n    const profile = await getUserOrganization(user.id)\n\n    const supabase = await createClient()\n\n    // Calculate segment statistics\n    const segments = await Promise.all([\n      calculateSegment(supabase, profile.organization_id, 'all', 'All Contacts'),\n      calculateSegment(supabase, profile.organization_id, 'active', 'Active (Last 30 days)'),\n      calculateSegment(supabase, profile.organization_id, 'inactive', 'Inactive (30+ days)'),\n      calculateSegment(supabase, profile.organization_id, 'new', 'New (Last 7 days)'),\n      calculateSegment(supabase, profile.organization_id, 'vip', 'VIP Contacts'),\n      calculateSegment(supabase, profile.organization_id, 'blocked', 'Blocked Contacts'),\n      calculateSegment(supabase, profile.organization_id, 'no_conversations', 'No Conversations'),\n      calculateSegment(supabase, profile.organization_id, 'high_volume', 'High Volume (10+ messages)')\n    ])\n\n    // Get tag-based segments\n    const tagSegments = await calculateTagSegments(supabase, profile.organization_id)\n\n    // Get custom segments if any\n    const { data: customSegments } = await supabase\n      .from('contact_segments')\n      .select('*')\n      .eq('organization_id', profile.organization_id)\n      .eq('is_active', true)\n      .order('created_at', { ascending: false })\n\n    const customSegmentStats = await Promise.all(\n      (customSegments || []).map(async (segment) => {\n        const count = await calculateCustomSegmentCount(supabase, profile.organization_id, segment.criteria)\n        return {\n          id: segment.id,\n          name: segment.name,\n          description: segment.description,\n          count,\n          criteria: segment.criteria,\n          lastUpdated: segment.updated_at\n        }\n      })\n    )\n\n    return createSuccessResponse({\n      predefinedSegments: segments,\n      tagSegments,\n      customSegments: customSegmentStats,\n      summary: {\n        totalContacts: segments.find(s => s.key === 'all')?.count || 0,\n        activeContacts: segments.find(s => s.key === 'active')?.count || 0,\n        newContacts: segments.find(s => s.key === 'new')?.count || 0,\n        blockedContacts: segments.find(s => s.key === 'blocked')?.count || 0\n      }\n    })\n\n  } catch (error) {\n    console.error('Error fetching contact segments:', error)\n    return createErrorResponse(error)\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const user = await requireAuthenticatedUser()\n    const profile = await getUserOrganization(user.id)\n\n    const body = await request.json()\n    const { name, description, criteria } = body\n\n    if (!name || !criteria) {\n      return NextResponse.json(\n        { error: 'Name and criteria are required' },\n        { status: 400 }\n      )\n    }\n\n    // Validate criteria structure\n    if (!validateSegmentCriteria(criteria)) {\n      return NextResponse.json(\n        { error: 'Invalid criteria structure' },\n        { status: 400 }\n      )\n    }\n\n    const supabase = await createClient()\n\n    // Check if segment with same name exists\n    const { data: existingSegment } = await supabase\n      .from('contact_segments')\n      .select('id')\n      .eq('organization_id', profile.organization_id)\n      .eq('name', name)\n      .single()\n\n    if (existingSegment) {\n      return NextResponse.json(\n        { error: 'Segment with this name already exists' },\n        { status: 409 }\n      )\n    }\n\n    // Test the criteria to ensure it works\n    const testCount = await calculateCustomSegmentCount(supabase, profile.organization_id, criteria)\n\n    // Create the segment\n    const { data: segment, error } = await supabase\n      .from('contact_segments')\n      .insert({\n        organization_id: profile.organization_id,\n        created_by: user.id,\n        name,\n        description,\n        criteria,\n        contact_count: testCount,\n        is_active: true\n      })\n      .select()\n      .single()\n\n    if (error) {\n      throw error\n    }\n\n    return createSuccessResponse({\n      ...segment,\n      count: testCount\n    }, 201)\n\n  } catch (error) {\n    console.error('Error creating contact segment:', error)\n    return createErrorResponse(error)\n  }\n}\n\nasync function calculateSegment(supabase: any, organizationId: string, key: string, name: string) {\n  let query = supabase\n    .from('contacts')\n    .select('id', { count: 'exact' })\n    .eq('organization_id', organizationId)\n\n  switch (key) {\n    case 'all':\n      // No additional filters\n      break\n\n    case 'active':\n      const thirtyDaysAgo = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString()\n      query = query.gte('last_message_at', thirtyDaysAgo)\n      break\n\n    case 'inactive':\n      const thirtyDaysAgoInactive = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString()\n      query = query.or(`last_message_at.is.null,last_message_at.lt.${thirtyDaysAgoInactive}`)\n      break\n\n    case 'new':\n      const sevenDaysAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString()\n      query = query.gte('created_at', sevenDaysAgo)\n      break\n\n    case 'vip':\n      query = query.contains('tags', ['vip'])\n      break\n\n    case 'blocked':\n      query = query.eq('is_blocked', true)\n      break\n\n    case 'no_conversations':\n      // Contacts with no conversations\n      query = supabase\n        .from('contacts')\n        .select('id', { count: 'exact' })\n        .eq('organization_id', organizationId)\n        .not('id', 'in', `(\n          SELECT DISTINCT contact_id\n          FROM conversations\n          WHERE organization_id = '${organizationId}'\n        )`)\n      break\n\n    case 'high_volume':\n      // Contacts with 10+ messages in conversations\n      query = supabase\n        .from('contacts')\n        .select('id', { count: 'exact' })\n        .eq('organization_id', organizationId)\n        .in('id', `(\n          SELECT c.contact_id\n          FROM conversations c\n          JOIN messages m ON c.id = m.conversation_id\n          WHERE c.organization_id = '${organizationId}'\n          GROUP BY c.contact_id\n          HAVING COUNT(m.id) >= 10\n        )`)\n      break\n\n    default:\n      break\n  }\n\n  const { count } = await query\n\n  return {\n    key,\n    name,\n    count: count || 0,\n    description: getSegmentDescription(key)\n  }\n}\n\nasync function calculateTagSegments(supabase: any, organizationId: string) {\n  // Get all unique tags\n  const { data: contacts } = await supabase\n    .from('contacts')\n    .select('tags')\n    .eq('organization_id', organizationId)\n    .not('tags', 'is', null)\n\n  const tagCounts = new Map()\n\n  for (const contact of contacts || []) {\n    const tags = contact.tags || []\n    for (const tag of tags) {\n      tagCounts.set(tag, (tagCounts.get(tag) || 0) + 1)\n    }\n  }\n\n  return Array.from(tagCounts.entries())\n    .map(([tag, count]) => ({\n      key: `tag:${tag}`,\n      name: `Tagged: ${tag}`,\n      count,\n      tag,\n      description: `Contacts tagged with \"${tag}\"`\n    }))\n    .sort((a, b) => b.count - a.count)\n}\n\nasync function calculateCustomSegmentCount(supabase: any, organizationId: string, criteria: any): Promise<number> {\n  try {\n    let query = supabase\n      .from('contacts')\n      .select('id', { count: 'exact' })\n      .eq('organization_id', organizationId)\n\n    // Apply criteria filters\n    for (const condition of criteria.conditions || []) {\n      query = applyCondition(query, condition)\n    }\n\n    const { count } = await query\n    return count || 0\n  } catch (error) {\n    console.error('Error calculating custom segment count:', error)\n    return 0\n  }\n}\n\nfunction applyCondition(query: any, condition: any) {\n  const { field, operator, value } = condition\n\n  switch (operator) {\n    case 'equals':\n      return query.eq(field, value)\n\n    case 'not_equals':\n      return query.neq(field, value)\n\n    case 'contains':\n      return query.ilike(field, `%${value}%`)\n\n    case 'not_contains':\n      return query.not('ilike', field, `%${value}%`)\n\n    case 'starts_with':\n      return query.ilike(field, `${value}%`)\n\n    case 'ends_with':\n      return query.ilike(field, `%${value}`)\n\n    case 'is_null':\n      return query.is(field, null)\n\n    case 'is_not_null':\n      return query.not('is', field, null)\n\n    case 'greater_than':\n      return query.gt(field, value)\n\n    case 'less_than':\n      return query.lt(field, value)\n\n    case 'greater_than_or_equal':\n      return query.gte(field, value)\n\n    case 'less_than_or_equal':\n      return query.lte(field, value)\n\n    case 'in':\n      return query.in(field, Array.isArray(value) ? value : [value])\n\n    case 'not_in':\n      return query.not('in', field, Array.isArray(value) ? value : [value])\n\n    case 'has_tag':\n      return query.contains('tags', [value])\n\n    case 'not_has_tag':\n      return query.not('contains', 'tags', [value])\n\n    default:\n      return query\n  }\n}\n\nfunction validateSegmentCriteria(criteria: any): boolean {\n  if (!criteria || typeof criteria !== 'object') {\n    return false\n  }\n\n  if (!Array.isArray(criteria.conditions)) {\n    return false\n  }\n\n  const validFields = ['name', 'phone_number', 'email', 'tags', 'notes', 'is_blocked', 'created_at', 'updated_at', 'last_message_at']\n  const validOperators = [\n    'equals', 'not_equals', 'contains', 'not_contains', 'starts_with', 'ends_with',\n    'is_null', 'is_not_null', 'greater_than', 'less_than', 'greater_than_or_equal',\n    'less_than_or_equal', 'in', 'not_in', 'has_tag', 'not_has_tag'\n  ]\n\n  for (const condition of criteria.conditions) {\n    if (!condition.field || !condition.operator) {\n      return false\n    }\n\n    if (!validFields.includes(condition.field)) {\n      return false\n    }\n\n    if (!validOperators.includes(condition.operator)) {\n      return false\n    }\n\n    // Value is optional for some operators\n    const operatorsWithoutValue = ['is_null', 'is_not_null']\n    if (!operatorsWithoutValue.includes(condition.operator) && condition.value === undefined) {\n      return false\n    }\n  }\n\n  return true\n}\n\nfunction getSegmentDescription(key: string): string {\n  const descriptions = {\n    all: 'All contacts in your organization',\n    active: 'Contacts who have sent or received messages in the last 30 days',\n    inactive: 'Contacts who have not been active for more than 30 days',\n    new: 'Contacts added in the last 7 days',\n    vip: 'Contacts tagged as VIP',\n    blocked: 'Contacts that have been blocked',\n    no_conversations: 'Contacts who have never had a conversation',\n    high_volume: 'Contacts with 10 or more messages'\n  }\n\n  return descriptions[key] || ''\n}"],
      names: ["GET", "POST", "request", "user", "requireAuthenticatedUser", "profile", "getUserOrganization", "id", "supabase", "createClient", "segments", "Promise", "all", "calculateSegment", "organization_id", "tagSegments", "calculateTagSegments", "data", "customSegments", "from", "select", "eq", "order", "ascending", "customSegmentStats", "map", "segment", "count", "calculateCustomSegmentCount", "criteria", "name", "description", "lastUpdated", "updated_at", "createSuccessResponse", "predefinedSegments", "summary", "totalContacts", "find", "s", "key", "activeContacts", "newContacts", "blockedContacts", "error", "console", "createErrorResponse", "body", "json", "NextResponse", "status", "validateSegmentCriteria", "existingSegment", "single", "testCount", "insert", "created_by", "contact_count", "is_active", "organizationId", "query", "thirtyDaysAgo", "Date", "now", "toISOString", "gte", "thirtyDaysAgoInactive", "or", "sevenDaysAgo", "contains", "not", "in", "getSegmentDescription", "contacts", "tagCounts", "Map", "contact", "tags", "tag", "set", "get", "Array", "entries", "sort", "a", "b", "condition", "conditions", "applyCondition", "field", "operator", "value", "neq", "ilike", "is", "gt", "lt", "lte", "isArray", "validFields", "validOperators", "includes", "operatorsWithoutValue", "undefined", "descriptions", "active", "inactive", "new", "vip", "blocked", "no_conversations", "high_volume"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "238535e42689525ef10423e4351bc21fb3c7f0c4"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2hhyslzhv8 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2hhyslzhv8();
cov_2hhyslzhv8().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_2hhyslzhv8().f[0]++;
  cov_2hhyslzhv8().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_2hhyslzhv8().s[3]++;
_export(exports, {
  get GET() {
    /* istanbul ignore next */
    cov_2hhyslzhv8().f[1]++;
    cov_2hhyslzhv8().s[4]++;
    return GET;
  },
  get POST() {
    /* istanbul ignore next */
    cov_2hhyslzhv8().f[2]++;
    cov_2hhyslzhv8().s[5]++;
    return POST;
  }
});
const _server =
/* istanbul ignore next */
(cov_2hhyslzhv8().s[6]++, require("next/server"));
const _apiutils =
/* istanbul ignore next */
(cov_2hhyslzhv8().s[7]++, require("../../../../lib/api-utils"));
const _server1 =
/* istanbul ignore next */
(cov_2hhyslzhv8().s[8]++, require("../../../../lib/supabase/server"));
async function GET(request) {
  /* istanbul ignore next */
  cov_2hhyslzhv8().f[3]++;
  cov_2hhyslzhv8().s[9]++;
  try {
    const user =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[10]++, await (0, _apiutils.requireAuthenticatedUser)());
    const profile =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[11]++, await (0, _apiutils.getUserOrganization)(user.id));
    const supabase =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[12]++, await (0, _server1.createClient)());
    // Calculate segment statistics
    const segments =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[13]++, await Promise.all([calculateSegment(supabase, profile.organization_id, 'all', 'All Contacts'), calculateSegment(supabase, profile.organization_id, 'active', 'Active (Last 30 days)'), calculateSegment(supabase, profile.organization_id, 'inactive', 'Inactive (30+ days)'), calculateSegment(supabase, profile.organization_id, 'new', 'New (Last 7 days)'), calculateSegment(supabase, profile.organization_id, 'vip', 'VIP Contacts'), calculateSegment(supabase, profile.organization_id, 'blocked', 'Blocked Contacts'), calculateSegment(supabase, profile.organization_id, 'no_conversations', 'No Conversations'), calculateSegment(supabase, profile.organization_id, 'high_volume', 'High Volume (10+ messages)')]));
    // Get tag-based segments
    const tagSegments =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[14]++, await calculateTagSegments(supabase, profile.organization_id));
    // Get custom segments if any
    const {
      data: customSegments
    } =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[15]++, await supabase.from('contact_segments').select('*').eq('organization_id', profile.organization_id).eq('is_active', true).order('created_at', {
      ascending: false
    }));
    const customSegmentStats =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[16]++, await Promise.all((
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[0][0]++, customSegments) ||
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[0][1]++, [])).map(async segment => {
      /* istanbul ignore next */
      cov_2hhyslzhv8().f[4]++;
      const count =
      /* istanbul ignore next */
      (cov_2hhyslzhv8().s[17]++, await calculateCustomSegmentCount(supabase, profile.organization_id, segment.criteria));
      /* istanbul ignore next */
      cov_2hhyslzhv8().s[18]++;
      return {
        id: segment.id,
        name: segment.name,
        description: segment.description,
        count,
        criteria: segment.criteria,
        lastUpdated: segment.updated_at
      };
    })));
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[19]++;
    return (0, _apiutils.createSuccessResponse)({
      predefinedSegments: segments,
      tagSegments,
      customSegments: customSegmentStats,
      summary: {
        totalContacts:
        /* istanbul ignore next */
        (cov_2hhyslzhv8().b[1][0]++, segments.find(s => {
          /* istanbul ignore next */
          cov_2hhyslzhv8().f[5]++;
          cov_2hhyslzhv8().s[20]++;
          return s.key === 'all';
        })?.count) ||
        /* istanbul ignore next */
        (cov_2hhyslzhv8().b[1][1]++, 0),
        activeContacts:
        /* istanbul ignore next */
        (cov_2hhyslzhv8().b[2][0]++, segments.find(s => {
          /* istanbul ignore next */
          cov_2hhyslzhv8().f[6]++;
          cov_2hhyslzhv8().s[21]++;
          return s.key === 'active';
        })?.count) ||
        /* istanbul ignore next */
        (cov_2hhyslzhv8().b[2][1]++, 0),
        newContacts:
        /* istanbul ignore next */
        (cov_2hhyslzhv8().b[3][0]++, segments.find(s => {
          /* istanbul ignore next */
          cov_2hhyslzhv8().f[7]++;
          cov_2hhyslzhv8().s[22]++;
          return s.key === 'new';
        })?.count) ||
        /* istanbul ignore next */
        (cov_2hhyslzhv8().b[3][1]++, 0),
        blockedContacts:
        /* istanbul ignore next */
        (cov_2hhyslzhv8().b[4][0]++, segments.find(s => {
          /* istanbul ignore next */
          cov_2hhyslzhv8().f[8]++;
          cov_2hhyslzhv8().s[23]++;
          return s.key === 'blocked';
        })?.count) ||
        /* istanbul ignore next */
        (cov_2hhyslzhv8().b[4][1]++, 0)
      }
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[24]++;
    console.error('Error fetching contact segments:', error);
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[25]++;
    return (0, _apiutils.createErrorResponse)(error);
  }
}
async function POST(request) {
  /* istanbul ignore next */
  cov_2hhyslzhv8().f[9]++;
  cov_2hhyslzhv8().s[26]++;
  try {
    const user =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[27]++, await (0, _apiutils.requireAuthenticatedUser)());
    const profile =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[28]++, await (0, _apiutils.getUserOrganization)(user.id));
    const body =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[29]++, await request.json());
    const {
      name,
      description,
      criteria
    } =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[30]++, body);
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[31]++;
    if (
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[6][0]++, !name) ||
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[6][1]++, !criteria)) {
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[5][0]++;
      cov_2hhyslzhv8().s[32]++;
      return _server.NextResponse.json({
        error: 'Name and criteria are required'
      }, {
        status: 400
      });
    } else
    /* istanbul ignore next */
    {
      cov_2hhyslzhv8().b[5][1]++;
    }
    // Validate criteria structure
    cov_2hhyslzhv8().s[33]++;
    if (!validateSegmentCriteria(criteria)) {
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[7][0]++;
      cov_2hhyslzhv8().s[34]++;
      return _server.NextResponse.json({
        error: 'Invalid criteria structure'
      }, {
        status: 400
      });
    } else
    /* istanbul ignore next */
    {
      cov_2hhyslzhv8().b[7][1]++;
    }
    const supabase =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[35]++, await (0, _server1.createClient)());
    // Check if segment with same name exists
    const {
      data: existingSegment
    } =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[36]++, await supabase.from('contact_segments').select('id').eq('organization_id', profile.organization_id).eq('name', name).single());
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[37]++;
    if (existingSegment) {
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[8][0]++;
      cov_2hhyslzhv8().s[38]++;
      return _server.NextResponse.json({
        error: 'Segment with this name already exists'
      }, {
        status: 409
      });
    } else
    /* istanbul ignore next */
    {
      cov_2hhyslzhv8().b[8][1]++;
    }
    // Test the criteria to ensure it works
    const testCount =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[39]++, await calculateCustomSegmentCount(supabase, profile.organization_id, criteria));
    // Create the segment
    const {
      data: segment,
      error
    } =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[40]++, await supabase.from('contact_segments').insert({
      organization_id: profile.organization_id,
      created_by: user.id,
      name,
      description,
      criteria,
      contact_count: testCount,
      is_active: true
    }).select().single());
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[41]++;
    if (error) {
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[9][0]++;
      cov_2hhyslzhv8().s[42]++;
      throw error;
    } else
    /* istanbul ignore next */
    {
      cov_2hhyslzhv8().b[9][1]++;
    }
    cov_2hhyslzhv8().s[43]++;
    return (0, _apiutils.createSuccessResponse)({
      ...segment,
      count: testCount
    }, 201);
  } catch (error) {
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[44]++;
    console.error('Error creating contact segment:', error);
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[45]++;
    return (0, _apiutils.createErrorResponse)(error);
  }
}
async function calculateSegment(supabase, organizationId, key, name) {
  /* istanbul ignore next */
  cov_2hhyslzhv8().f[10]++;
  let query =
  /* istanbul ignore next */
  (cov_2hhyslzhv8().s[46]++, supabase.from('contacts').select('id', {
    count: 'exact'
  }).eq('organization_id', organizationId));
  /* istanbul ignore next */
  cov_2hhyslzhv8().s[47]++;
  switch (key) {
    case 'all':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[10][0]++;
      cov_2hhyslzhv8().s[48]++;
      break;
    case 'active':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[10][1]++;
      const thirtyDaysAgo =
      /* istanbul ignore next */
      (cov_2hhyslzhv8().s[49]++, new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString());
      /* istanbul ignore next */
      cov_2hhyslzhv8().s[50]++;
      query = query.gte('last_message_at', thirtyDaysAgo);
      /* istanbul ignore next */
      cov_2hhyslzhv8().s[51]++;
      break;
    case 'inactive':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[10][2]++;
      const thirtyDaysAgoInactive =
      /* istanbul ignore next */
      (cov_2hhyslzhv8().s[52]++, new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString());
      /* istanbul ignore next */
      cov_2hhyslzhv8().s[53]++;
      query = query.or(`last_message_at.is.null,last_message_at.lt.${thirtyDaysAgoInactive}`);
      /* istanbul ignore next */
      cov_2hhyslzhv8().s[54]++;
      break;
    case 'new':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[10][3]++;
      const sevenDaysAgo =
      /* istanbul ignore next */
      (cov_2hhyslzhv8().s[55]++, new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString());
      /* istanbul ignore next */
      cov_2hhyslzhv8().s[56]++;
      query = query.gte('created_at', sevenDaysAgo);
      /* istanbul ignore next */
      cov_2hhyslzhv8().s[57]++;
      break;
    case 'vip':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[10][4]++;
      cov_2hhyslzhv8().s[58]++;
      query = query.contains('tags', ['vip']);
      /* istanbul ignore next */
      cov_2hhyslzhv8().s[59]++;
      break;
    case 'blocked':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[10][5]++;
      cov_2hhyslzhv8().s[60]++;
      query = query.eq('is_blocked', true);
      /* istanbul ignore next */
      cov_2hhyslzhv8().s[61]++;
      break;
    case 'no_conversations':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[10][6]++;
      cov_2hhyslzhv8().s[62]++;
      // Contacts with no conversations
      query = supabase.from('contacts').select('id', {
        count: 'exact'
      }).eq('organization_id', organizationId).not('id', 'in', `(
          SELECT DISTINCT contact_id
          FROM conversations
          WHERE organization_id = '${organizationId}'
        )`);
      /* istanbul ignore next */
      cov_2hhyslzhv8().s[63]++;
      break;
    case 'high_volume':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[10][7]++;
      cov_2hhyslzhv8().s[64]++;
      // Contacts with 10+ messages in conversations
      query = supabase.from('contacts').select('id', {
        count: 'exact'
      }).eq('organization_id', organizationId).in('id', `(
          SELECT c.contact_id
          FROM conversations c
          JOIN messages m ON c.id = m.conversation_id
          WHERE c.organization_id = '${organizationId}'
          GROUP BY c.contact_id
          HAVING COUNT(m.id) >= 10
        )`);
      /* istanbul ignore next */
      cov_2hhyslzhv8().s[65]++;
      break;
    default:
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[10][8]++;
      cov_2hhyslzhv8().s[66]++;
      break;
  }
  const {
    count
  } =
  /* istanbul ignore next */
  (cov_2hhyslzhv8().s[67]++, await query);
  /* istanbul ignore next */
  cov_2hhyslzhv8().s[68]++;
  return {
    key,
    name,
    count:
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[11][0]++, count) ||
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[11][1]++, 0),
    description: getSegmentDescription(key)
  };
}
async function calculateTagSegments(supabase, organizationId) {
  /* istanbul ignore next */
  cov_2hhyslzhv8().f[11]++;
  // Get all unique tags
  const {
    data: contacts
  } =
  /* istanbul ignore next */
  (cov_2hhyslzhv8().s[69]++, await supabase.from('contacts').select('tags').eq('organization_id', organizationId).not('tags', 'is', null));
  const tagCounts =
  /* istanbul ignore next */
  (cov_2hhyslzhv8().s[70]++, new Map());
  /* istanbul ignore next */
  cov_2hhyslzhv8().s[71]++;
  for (const contact of
  /* istanbul ignore next */
  (cov_2hhyslzhv8().b[12][0]++, contacts) ||
  /* istanbul ignore next */
  (cov_2hhyslzhv8().b[12][1]++, [])) {
    const tags =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[72]++,
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[13][0]++, contact.tags) ||
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[13][1]++, []));
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[73]++;
    for (const tag of tags) {
      /* istanbul ignore next */
      cov_2hhyslzhv8().s[74]++;
      tagCounts.set(tag, (
      /* istanbul ignore next */
      (cov_2hhyslzhv8().b[14][0]++, tagCounts.get(tag)) ||
      /* istanbul ignore next */
      (cov_2hhyslzhv8().b[14][1]++, 0)) + 1);
    }
  }
  /* istanbul ignore next */
  cov_2hhyslzhv8().s[75]++;
  return Array.from(tagCounts.entries()).map(([tag, count]) => {
    /* istanbul ignore next */
    cov_2hhyslzhv8().f[12]++;
    cov_2hhyslzhv8().s[76]++;
    return {
      key: `tag:${tag}`,
      name: `Tagged: ${tag}`,
      count,
      tag,
      description: `Contacts tagged with "${tag}"`
    };
  }).sort((a, b) => {
    /* istanbul ignore next */
    cov_2hhyslzhv8().f[13]++;
    cov_2hhyslzhv8().s[77]++;
    return b.count - a.count;
  });
}
async function calculateCustomSegmentCount(supabase, organizationId, criteria) {
  /* istanbul ignore next */
  cov_2hhyslzhv8().f[14]++;
  cov_2hhyslzhv8().s[78]++;
  try {
    let query =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[79]++, supabase.from('contacts').select('id', {
      count: 'exact'
    }).eq('organization_id', organizationId));
    // Apply criteria filters
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[80]++;
    for (const condition of
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[15][0]++, criteria.conditions) ||
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[15][1]++, [])) {
      /* istanbul ignore next */
      cov_2hhyslzhv8().s[81]++;
      query = applyCondition(query, condition);
    }
    const {
      count
    } =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[82]++, await query);
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[83]++;
    return /* istanbul ignore next */(cov_2hhyslzhv8().b[16][0]++, count) ||
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[16][1]++, 0);
  } catch (error) {
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[84]++;
    console.error('Error calculating custom segment count:', error);
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[85]++;
    return 0;
  }
}
function applyCondition(query, condition) {
  /* istanbul ignore next */
  cov_2hhyslzhv8().f[15]++;
  const {
    field,
    operator,
    value
  } =
  /* istanbul ignore next */
  (cov_2hhyslzhv8().s[86]++, condition);
  /* istanbul ignore next */
  cov_2hhyslzhv8().s[87]++;
  switch (operator) {
    case 'equals':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][0]++;
      cov_2hhyslzhv8().s[88]++;
      return query.eq(field, value);
    case 'not_equals':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][1]++;
      cov_2hhyslzhv8().s[89]++;
      return query.neq(field, value);
    case 'contains':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][2]++;
      cov_2hhyslzhv8().s[90]++;
      return query.ilike(field, `%${value}%`);
    case 'not_contains':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][3]++;
      cov_2hhyslzhv8().s[91]++;
      return query.not('ilike', field, `%${value}%`);
    case 'starts_with':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][4]++;
      cov_2hhyslzhv8().s[92]++;
      return query.ilike(field, `${value}%`);
    case 'ends_with':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][5]++;
      cov_2hhyslzhv8().s[93]++;
      return query.ilike(field, `%${value}`);
    case 'is_null':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][6]++;
      cov_2hhyslzhv8().s[94]++;
      return query.is(field, null);
    case 'is_not_null':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][7]++;
      cov_2hhyslzhv8().s[95]++;
      return query.not('is', field, null);
    case 'greater_than':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][8]++;
      cov_2hhyslzhv8().s[96]++;
      return query.gt(field, value);
    case 'less_than':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][9]++;
      cov_2hhyslzhv8().s[97]++;
      return query.lt(field, value);
    case 'greater_than_or_equal':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][10]++;
      cov_2hhyslzhv8().s[98]++;
      return query.gte(field, value);
    case 'less_than_or_equal':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][11]++;
      cov_2hhyslzhv8().s[99]++;
      return query.lte(field, value);
    case 'in':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][12]++;
      cov_2hhyslzhv8().s[100]++;
      return query.in(field, Array.isArray(value) ?
      /* istanbul ignore next */
      (cov_2hhyslzhv8().b[18][0]++, value) :
      /* istanbul ignore next */
      (cov_2hhyslzhv8().b[18][1]++, [value]));
    case 'not_in':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][13]++;
      cov_2hhyslzhv8().s[101]++;
      return query.not('in', field, Array.isArray(value) ?
      /* istanbul ignore next */
      (cov_2hhyslzhv8().b[19][0]++, value) :
      /* istanbul ignore next */
      (cov_2hhyslzhv8().b[19][1]++, [value]));
    case 'has_tag':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][14]++;
      cov_2hhyslzhv8().s[102]++;
      return query.contains('tags', [value]);
    case 'not_has_tag':
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][15]++;
      cov_2hhyslzhv8().s[103]++;
      return query.not('contains', 'tags', [value]);
    default:
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[17][16]++;
      cov_2hhyslzhv8().s[104]++;
      return query;
  }
}
function validateSegmentCriteria(criteria) {
  /* istanbul ignore next */
  cov_2hhyslzhv8().f[16]++;
  cov_2hhyslzhv8().s[105]++;
  if (
  /* istanbul ignore next */
  (cov_2hhyslzhv8().b[21][0]++, !criteria) ||
  /* istanbul ignore next */
  (cov_2hhyslzhv8().b[21][1]++, typeof criteria !== 'object')) {
    /* istanbul ignore next */
    cov_2hhyslzhv8().b[20][0]++;
    cov_2hhyslzhv8().s[106]++;
    return false;
  } else
  /* istanbul ignore next */
  {
    cov_2hhyslzhv8().b[20][1]++;
  }
  cov_2hhyslzhv8().s[107]++;
  if (!Array.isArray(criteria.conditions)) {
    /* istanbul ignore next */
    cov_2hhyslzhv8().b[22][0]++;
    cov_2hhyslzhv8().s[108]++;
    return false;
  } else
  /* istanbul ignore next */
  {
    cov_2hhyslzhv8().b[22][1]++;
  }
  const validFields =
  /* istanbul ignore next */
  (cov_2hhyslzhv8().s[109]++, ['name', 'phone_number', 'email', 'tags', 'notes', 'is_blocked', 'created_at', 'updated_at', 'last_message_at']);
  const validOperators =
  /* istanbul ignore next */
  (cov_2hhyslzhv8().s[110]++, ['equals', 'not_equals', 'contains', 'not_contains', 'starts_with', 'ends_with', 'is_null', 'is_not_null', 'greater_than', 'less_than', 'greater_than_or_equal', 'less_than_or_equal', 'in', 'not_in', 'has_tag', 'not_has_tag']);
  /* istanbul ignore next */
  cov_2hhyslzhv8().s[111]++;
  for (const condition of criteria.conditions) {
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[112]++;
    if (
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[24][0]++, !condition.field) ||
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[24][1]++, !condition.operator)) {
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[23][0]++;
      cov_2hhyslzhv8().s[113]++;
      return false;
    } else
    /* istanbul ignore next */
    {
      cov_2hhyslzhv8().b[23][1]++;
    }
    cov_2hhyslzhv8().s[114]++;
    if (!validFields.includes(condition.field)) {
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[25][0]++;
      cov_2hhyslzhv8().s[115]++;
      return false;
    } else
    /* istanbul ignore next */
    {
      cov_2hhyslzhv8().b[25][1]++;
    }
    cov_2hhyslzhv8().s[116]++;
    if (!validOperators.includes(condition.operator)) {
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[26][0]++;
      cov_2hhyslzhv8().s[117]++;
      return false;
    } else
    /* istanbul ignore next */
    {
      cov_2hhyslzhv8().b[26][1]++;
    }
    // Value is optional for some operators
    const operatorsWithoutValue =
    /* istanbul ignore next */
    (cov_2hhyslzhv8().s[118]++, ['is_null', 'is_not_null']);
    /* istanbul ignore next */
    cov_2hhyslzhv8().s[119]++;
    if (
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[28][0]++, !operatorsWithoutValue.includes(condition.operator)) &&
    /* istanbul ignore next */
    (cov_2hhyslzhv8().b[28][1]++, condition.value === undefined)) {
      /* istanbul ignore next */
      cov_2hhyslzhv8().b[27][0]++;
      cov_2hhyslzhv8().s[120]++;
      return false;
    } else
    /* istanbul ignore next */
    {
      cov_2hhyslzhv8().b[27][1]++;
    }
  }
  /* istanbul ignore next */
  cov_2hhyslzhv8().s[121]++;
  return true;
}
function getSegmentDescription(key) {
  /* istanbul ignore next */
  cov_2hhyslzhv8().f[17]++;
  const descriptions =
  /* istanbul ignore next */
  (cov_2hhyslzhv8().s[122]++, {
    all: 'All contacts in your organization',
    active: 'Contacts who have sent or received messages in the last 30 days',
    inactive: 'Contacts who have not been active for more than 30 days',
    new: 'Contacts added in the last 7 days',
    vip: 'Contacts tagged as VIP',
    blocked: 'Contacts that have been blocked',
    no_conversations: 'Contacts who have never had a conversation',
    high_volume: 'Contacts with 10 or more messages'
  });
  /* istanbul ignore next */
  cov_2hhyslzhv8().s[123]++;
  return /* istanbul ignore next */(cov_2hhyslzhv8().b[29][0]++, descriptions[key]) ||
  /* istanbul ignore next */
  (cov_2hhyslzhv8().b[29][1]++, '');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJHRVQiLCJjb3ZfMmhoeXNsemh2OCIsImYiLCJzIiwiUE9TVCIsInJlcXVlc3QiLCJ1c2VyIiwiX2FwaXV0aWxzIiwicmVxdWlyZUF1dGhlbnRpY2F0ZWRVc2VyIiwicHJvZmlsZSIsImdldFVzZXJPcmdhbml6YXRpb24iLCJpZCIsInN1cGFiYXNlIiwiX3NlcnZlcjEiLCJjcmVhdGVDbGllbnQiLCJzZWdtZW50cyIsIlByb21pc2UiLCJhbGwiLCJjYWxjdWxhdGVTZWdtZW50Iiwib3JnYW5pemF0aW9uX2lkIiwidGFnU2VnbWVudHMiLCJjYWxjdWxhdGVUYWdTZWdtZW50cyIsImRhdGEiLCJjdXN0b21TZWdtZW50cyIsImZyb20iLCJzZWxlY3QiLCJlcSIsIm9yZGVyIiwiYXNjZW5kaW5nIiwiY3VzdG9tU2VnbWVudFN0YXRzIiwiYiIsIm1hcCIsInNlZ21lbnQiLCJjb3VudCIsImNhbGN1bGF0ZUN1c3RvbVNlZ21lbnRDb3VudCIsImNyaXRlcmlhIiwibmFtZSIsImRlc2NyaXB0aW9uIiwibGFzdFVwZGF0ZWQiLCJ1cGRhdGVkX2F0IiwiY3JlYXRlU3VjY2Vzc1Jlc3BvbnNlIiwicHJlZGVmaW5lZFNlZ21lbnRzIiwic3VtbWFyeSIsInRvdGFsQ29udGFjdHMiLCJmaW5kIiwia2V5IiwiYWN0aXZlQ29udGFjdHMiLCJuZXdDb250YWN0cyIsImJsb2NrZWRDb250YWN0cyIsImVycm9yIiwiY29uc29sZSIsImNyZWF0ZUVycm9yUmVzcG9uc2UiLCJib2R5IiwianNvbiIsIl9zZXJ2ZXIiLCJOZXh0UmVzcG9uc2UiLCJzdGF0dXMiLCJ2YWxpZGF0ZVNlZ21lbnRDcml0ZXJpYSIsImV4aXN0aW5nU2VnbWVudCIsInNpbmdsZSIsInRlc3RDb3VudCIsImluc2VydCIsImNyZWF0ZWRfYnkiLCJjb250YWN0X2NvdW50IiwiaXNfYWN0aXZlIiwib3JnYW5pemF0aW9uSWQiLCJxdWVyeSIsInRoaXJ0eURheXNBZ28iLCJEYXRlIiwibm93IiwidG9JU09TdHJpbmciLCJndGUiLCJ0aGlydHlEYXlzQWdvSW5hY3RpdmUiLCJvciIsInNldmVuRGF5c0FnbyIsImNvbnRhaW5zIiwibm90IiwiaW4iLCJnZXRTZWdtZW50RGVzY3JpcHRpb24iLCJjb250YWN0cyIsInRhZ0NvdW50cyIsIk1hcCIsImNvbnRhY3QiLCJ0YWdzIiwidGFnIiwic2V0IiwiZ2V0IiwiQXJyYXkiLCJlbnRyaWVzIiwic29ydCIsImEiLCJjb25kaXRpb24iLCJjb25kaXRpb25zIiwiYXBwbHlDb25kaXRpb24iLCJmaWVsZCIsIm9wZXJhdG9yIiwidmFsdWUiLCJuZXEiLCJpbGlrZSIsImlzIiwiZ3QiLCJsdCIsImx0ZSIsImlzQXJyYXkiLCJ2YWxpZEZpZWxkcyIsInZhbGlkT3BlcmF0b3JzIiwiaW5jbHVkZXMiLCJvcGVyYXRvcnNXaXRob3V0VmFsdWUiLCJ1bmRlZmluZWQiLCJkZXNjcmlwdGlvbnMiLCJhY3RpdmUiLCJpbmFjdGl2ZSIsIm5ldyIsInZpcCIsImJsb2NrZWQiLCJub19jb252ZXJzYXRpb25zIiwiaGlnaF92b2x1bWUiXSwic291cmNlcyI6WyJDOlxcQWkgUHJvamVjdGVuXFxBRFNhcHBcXHNyY1xcYXBwXFxhcGlcXGNvbnRhY3RzXFxzZWdtZW50c1xccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgcmVxdWlyZUF1dGhlbnRpY2F0ZWRVc2VyLCBnZXRVc2VyT3JnYW5pemF0aW9uLCBjcmVhdGVFcnJvclJlc3BvbnNlLCBjcmVhdGVTdWNjZXNzUmVzcG9uc2UgfSBmcm9tICdAL2xpYi9hcGktdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9zZXJ2ZXInXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcmVxdWlyZUF1dGhlbnRpY2F0ZWRVc2VyKClcbiAgICBjb25zdCBwcm9maWxlID0gYXdhaXQgZ2V0VXNlck9yZ2FuaXphdGlvbih1c2VyLmlkKVxuXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKVxuXG4gICAgLy8gQ2FsY3VsYXRlIHNlZ21lbnQgc3RhdGlzdGljc1xuICAgIGNvbnN0IHNlZ21lbnRzID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgY2FsY3VsYXRlU2VnbWVudChzdXBhYmFzZSwgcHJvZmlsZS5vcmdhbml6YXRpb25faWQsICdhbGwnLCAnQWxsIENvbnRhY3RzJyksXG4gICAgICBjYWxjdWxhdGVTZWdtZW50KHN1cGFiYXNlLCBwcm9maWxlLm9yZ2FuaXphdGlvbl9pZCwgJ2FjdGl2ZScsICdBY3RpdmUgKExhc3QgMzAgZGF5cyknKSxcbiAgICAgIGNhbGN1bGF0ZVNlZ21lbnQoc3VwYWJhc2UsIHByb2ZpbGUub3JnYW5pemF0aW9uX2lkLCAnaW5hY3RpdmUnLCAnSW5hY3RpdmUgKDMwKyBkYXlzKScpLFxuICAgICAgY2FsY3VsYXRlU2VnbWVudChzdXBhYmFzZSwgcHJvZmlsZS5vcmdhbml6YXRpb25faWQsICduZXcnLCAnTmV3IChMYXN0IDcgZGF5cyknKSxcbiAgICAgIGNhbGN1bGF0ZVNlZ21lbnQoc3VwYWJhc2UsIHByb2ZpbGUub3JnYW5pemF0aW9uX2lkLCAndmlwJywgJ1ZJUCBDb250YWN0cycpLFxuICAgICAgY2FsY3VsYXRlU2VnbWVudChzdXBhYmFzZSwgcHJvZmlsZS5vcmdhbml6YXRpb25faWQsICdibG9ja2VkJywgJ0Jsb2NrZWQgQ29udGFjdHMnKSxcbiAgICAgIGNhbGN1bGF0ZVNlZ21lbnQoc3VwYWJhc2UsIHByb2ZpbGUub3JnYW5pemF0aW9uX2lkLCAnbm9fY29udmVyc2F0aW9ucycsICdObyBDb252ZXJzYXRpb25zJyksXG4gICAgICBjYWxjdWxhdGVTZWdtZW50KHN1cGFiYXNlLCBwcm9maWxlLm9yZ2FuaXphdGlvbl9pZCwgJ2hpZ2hfdm9sdW1lJywgJ0hpZ2ggVm9sdW1lICgxMCsgbWVzc2FnZXMpJylcbiAgICBdKVxuXG4gICAgLy8gR2V0IHRhZy1iYXNlZCBzZWdtZW50c1xuICAgIGNvbnN0IHRhZ1NlZ21lbnRzID0gYXdhaXQgY2FsY3VsYXRlVGFnU2VnbWVudHMoc3VwYWJhc2UsIHByb2ZpbGUub3JnYW5pemF0aW9uX2lkKVxuXG4gICAgLy8gR2V0IGN1c3RvbSBzZWdtZW50cyBpZiBhbnlcbiAgICBjb25zdCB7IGRhdGE6IGN1c3RvbVNlZ21lbnRzIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2NvbnRhY3Rfc2VnbWVudHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ29yZ2FuaXphdGlvbl9pZCcsIHByb2ZpbGUub3JnYW5pemF0aW9uX2lkKVxuICAgICAgLmVxKCdpc19hY3RpdmUnLCB0cnVlKVxuICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG5cbiAgICBjb25zdCBjdXN0b21TZWdtZW50U3RhdHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIChjdXN0b21TZWdtZW50cyB8fCBbXSkubWFwKGFzeW5jIChzZWdtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gYXdhaXQgY2FsY3VsYXRlQ3VzdG9tU2VnbWVudENvdW50KHN1cGFiYXNlLCBwcm9maWxlLm9yZ2FuaXphdGlvbl9pZCwgc2VnbWVudC5jcml0ZXJpYSlcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpZDogc2VnbWVudC5pZCxcbiAgICAgICAgICBuYW1lOiBzZWdtZW50Lm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHNlZ21lbnQuZGVzY3JpcHRpb24sXG4gICAgICAgICAgY291bnQsXG4gICAgICAgICAgY3JpdGVyaWE6IHNlZ21lbnQuY3JpdGVyaWEsXG4gICAgICAgICAgbGFzdFVwZGF0ZWQ6IHNlZ21lbnQudXBkYXRlZF9hdFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIClcblxuICAgIHJldHVybiBjcmVhdGVTdWNjZXNzUmVzcG9uc2Uoe1xuICAgICAgcHJlZGVmaW5lZFNlZ21lbnRzOiBzZWdtZW50cyxcbiAgICAgIHRhZ1NlZ21lbnRzLFxuICAgICAgY3VzdG9tU2VnbWVudHM6IGN1c3RvbVNlZ21lbnRTdGF0cyxcbiAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgdG90YWxDb250YWN0czogc2VnbWVudHMuZmluZChzID0+IHMua2V5ID09PSAnYWxsJyk/LmNvdW50IHx8IDAsXG4gICAgICAgIGFjdGl2ZUNvbnRhY3RzOiBzZWdtZW50cy5maW5kKHMgPT4gcy5rZXkgPT09ICdhY3RpdmUnKT8uY291bnQgfHwgMCxcbiAgICAgICAgbmV3Q29udGFjdHM6IHNlZ21lbnRzLmZpbmQocyA9PiBzLmtleSA9PT0gJ25ldycpPy5jb3VudCB8fCAwLFxuICAgICAgICBibG9ja2VkQ29udGFjdHM6IHNlZ21lbnRzLmZpbmQocyA9PiBzLmtleSA9PT0gJ2Jsb2NrZWQnKT8uY291bnQgfHwgMFxuICAgICAgfVxuICAgIH0pXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjb250YWN0IHNlZ21lbnRzOicsIGVycm9yKVxuICAgIHJldHVybiBjcmVhdGVFcnJvclJlc3BvbnNlKGVycm9yKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHJlcXVpcmVBdXRoZW50aWNhdGVkVXNlcigpXG4gICAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IGdldFVzZXJPcmdhbml6YXRpb24odXNlci5pZClcblxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24sIGNyaXRlcmlhIH0gPSBib2R5XG5cbiAgICBpZiAoIW5hbWUgfHwgIWNyaXRlcmlhKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdOYW1lIGFuZCBjcml0ZXJpYSBhcmUgcmVxdWlyZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIGNyaXRlcmlhIHN0cnVjdHVyZVxuICAgIGlmICghdmFsaWRhdGVTZWdtZW50Q3JpdGVyaWEoY3JpdGVyaWEpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdJbnZhbGlkIGNyaXRlcmlhIHN0cnVjdHVyZScgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKVxuXG4gICAgLy8gQ2hlY2sgaWYgc2VnbWVudCB3aXRoIHNhbWUgbmFtZSBleGlzdHNcbiAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nU2VnbWVudCB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdjb250YWN0X3NlZ21lbnRzJylcbiAgICAgIC5zZWxlY3QoJ2lkJylcbiAgICAgIC5lcSgnb3JnYW5pemF0aW9uX2lkJywgcHJvZmlsZS5vcmdhbml6YXRpb25faWQpXG4gICAgICAuZXEoJ25hbWUnLCBuYW1lKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAoZXhpc3RpbmdTZWdtZW50KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdTZWdtZW50IHdpdGggdGhpcyBuYW1lIGFscmVhZHkgZXhpc3RzJyB9LFxuICAgICAgICB7IHN0YXR1czogNDA5IH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBUZXN0IHRoZSBjcml0ZXJpYSB0byBlbnN1cmUgaXQgd29ya3NcbiAgICBjb25zdCB0ZXN0Q291bnQgPSBhd2FpdCBjYWxjdWxhdGVDdXN0b21TZWdtZW50Q291bnQoc3VwYWJhc2UsIHByb2ZpbGUub3JnYW5pemF0aW9uX2lkLCBjcml0ZXJpYSlcblxuICAgIC8vIENyZWF0ZSB0aGUgc2VnbWVudFxuICAgIGNvbnN0IHsgZGF0YTogc2VnbWVudCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnY29udGFjdF9zZWdtZW50cycpXG4gICAgICAuaW5zZXJ0KHtcbiAgICAgICAgb3JnYW5pemF0aW9uX2lkOiBwcm9maWxlLm9yZ2FuaXphdGlvbl9pZCxcbiAgICAgICAgY3JlYXRlZF9ieTogdXNlci5pZCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIGNyaXRlcmlhLFxuICAgICAgICBjb250YWN0X2NvdW50OiB0ZXN0Q291bnQsXG4gICAgICAgIGlzX2FjdGl2ZTogdHJ1ZVxuICAgICAgfSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuXG4gICAgcmV0dXJuIGNyZWF0ZVN1Y2Nlc3NSZXNwb25zZSh7XG4gICAgICAuLi5zZWdtZW50LFxuICAgICAgY291bnQ6IHRlc3RDb3VudFxuICAgIH0sIDIwMSlcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNvbnRhY3Qgc2VnbWVudDonLCBlcnJvcilcbiAgICByZXR1cm4gY3JlYXRlRXJyb3JSZXNwb25zZShlcnJvcilcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjYWxjdWxhdGVTZWdtZW50KHN1cGFiYXNlOiBhbnksIG9yZ2FuaXphdGlvbklkOiBzdHJpbmcsIGtleTogc3RyaW5nLCBuYW1lOiBzdHJpbmcpIHtcbiAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAuZnJvbSgnY29udGFjdHMnKVxuICAgIC5zZWxlY3QoJ2lkJywgeyBjb3VudDogJ2V4YWN0JyB9KVxuICAgIC5lcSgnb3JnYW5pemF0aW9uX2lkJywgb3JnYW5pemF0aW9uSWQpXG5cbiAgc3dpdGNoIChrZXkpIHtcbiAgICBjYXNlICdhbGwnOlxuICAgICAgLy8gTm8gYWRkaXRpb25hbCBmaWx0ZXJzXG4gICAgICBicmVha1xuXG4gICAgY2FzZSAnYWN0aXZlJzpcbiAgICAgIGNvbnN0IHRoaXJ0eURheXNBZ28gPSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmd0ZSgnbGFzdF9tZXNzYWdlX2F0JywgdGhpcnR5RGF5c0FnbylcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlICdpbmFjdGl2ZSc6XG4gICAgICBjb25zdCB0aGlydHlEYXlzQWdvSW5hY3RpdmUgPSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lm9yKGBsYXN0X21lc3NhZ2VfYXQuaXMubnVsbCxsYXN0X21lc3NhZ2VfYXQubHQuJHt0aGlydHlEYXlzQWdvSW5hY3RpdmV9YClcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlICduZXcnOlxuICAgICAgY29uc3Qgc2V2ZW5EYXlzQWdvID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmd0ZSgnY3JlYXRlZF9hdCcsIHNldmVuRGF5c0FnbylcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlICd2aXAnOlxuICAgICAgcXVlcnkgPSBxdWVyeS5jb250YWlucygndGFncycsIFsndmlwJ10pXG4gICAgICBicmVha1xuXG4gICAgY2FzZSAnYmxvY2tlZCc6XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdpc19ibG9ja2VkJywgdHJ1ZSlcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlICdub19jb252ZXJzYXRpb25zJzpcbiAgICAgIC8vIENvbnRhY3RzIHdpdGggbm8gY29udmVyc2F0aW9uc1xuICAgICAgcXVlcnkgPSBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnY29udGFjdHMnKVxuICAgICAgICAuc2VsZWN0KCdpZCcsIHsgY291bnQ6ICdleGFjdCcgfSlcbiAgICAgICAgLmVxKCdvcmdhbml6YXRpb25faWQnLCBvcmdhbml6YXRpb25JZClcbiAgICAgICAgLm5vdCgnaWQnLCAnaW4nLCBgKFxuICAgICAgICAgIFNFTEVDVCBESVNUSU5DVCBjb250YWN0X2lkXG4gICAgICAgICAgRlJPTSBjb252ZXJzYXRpb25zXG4gICAgICAgICAgV0hFUkUgb3JnYW5pemF0aW9uX2lkID0gJyR7b3JnYW5pemF0aW9uSWR9J1xuICAgICAgICApYClcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlICdoaWdoX3ZvbHVtZSc6XG4gICAgICAvLyBDb250YWN0cyB3aXRoIDEwKyBtZXNzYWdlcyBpbiBjb252ZXJzYXRpb25zXG4gICAgICBxdWVyeSA9IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdjb250YWN0cycpXG4gICAgICAgIC5zZWxlY3QoJ2lkJywgeyBjb3VudDogJ2V4YWN0JyB9KVxuICAgICAgICAuZXEoJ29yZ2FuaXphdGlvbl9pZCcsIG9yZ2FuaXphdGlvbklkKVxuICAgICAgICAuaW4oJ2lkJywgYChcbiAgICAgICAgICBTRUxFQ1QgYy5jb250YWN0X2lkXG4gICAgICAgICAgRlJPTSBjb252ZXJzYXRpb25zIGNcbiAgICAgICAgICBKT0lOIG1lc3NhZ2VzIG0gT04gYy5pZCA9IG0uY29udmVyc2F0aW9uX2lkXG4gICAgICAgICAgV0hFUkUgYy5vcmdhbml6YXRpb25faWQgPSAnJHtvcmdhbml6YXRpb25JZH0nXG4gICAgICAgICAgR1JPVVAgQlkgYy5jb250YWN0X2lkXG4gICAgICAgICAgSEFWSU5HIENPVU5UKG0uaWQpID49IDEwXG4gICAgICAgIClgKVxuICAgICAgYnJlYWtcblxuICAgIGRlZmF1bHQ6XG4gICAgICBicmVha1xuICB9XG5cbiAgY29uc3QgeyBjb3VudCB9ID0gYXdhaXQgcXVlcnlcblxuICByZXR1cm4ge1xuICAgIGtleSxcbiAgICBuYW1lLFxuICAgIGNvdW50OiBjb3VudCB8fCAwLFxuICAgIGRlc2NyaXB0aW9uOiBnZXRTZWdtZW50RGVzY3JpcHRpb24oa2V5KVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNhbGN1bGF0ZVRhZ1NlZ21lbnRzKHN1cGFiYXNlOiBhbnksIG9yZ2FuaXphdGlvbklkOiBzdHJpbmcpIHtcbiAgLy8gR2V0IGFsbCB1bmlxdWUgdGFnc1xuICBjb25zdCB7IGRhdGE6IGNvbnRhY3RzIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdjb250YWN0cycpXG4gICAgLnNlbGVjdCgndGFncycpXG4gICAgLmVxKCdvcmdhbml6YXRpb25faWQnLCBvcmdhbml6YXRpb25JZClcbiAgICAubm90KCd0YWdzJywgJ2lzJywgbnVsbClcblxuICBjb25zdCB0YWdDb3VudHMgPSBuZXcgTWFwKClcblxuICBmb3IgKGNvbnN0IGNvbnRhY3Qgb2YgY29udGFjdHMgfHwgW10pIHtcbiAgICBjb25zdCB0YWdzID0gY29udGFjdC50YWdzIHx8IFtdXG4gICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgdGFnQ291bnRzLnNldCh0YWcsICh0YWdDb3VudHMuZ2V0KHRhZykgfHwgMCkgKyAxKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBBcnJheS5mcm9tKHRhZ0NvdW50cy5lbnRyaWVzKCkpXG4gICAgLm1hcCgoW3RhZywgY291bnRdKSA9PiAoe1xuICAgICAga2V5OiBgdGFnOiR7dGFnfWAsXG4gICAgICBuYW1lOiBgVGFnZ2VkOiAke3RhZ31gLFxuICAgICAgY291bnQsXG4gICAgICB0YWcsXG4gICAgICBkZXNjcmlwdGlvbjogYENvbnRhY3RzIHRhZ2dlZCB3aXRoIFwiJHt0YWd9XCJgXG4gICAgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGIuY291bnQgLSBhLmNvdW50KVxufVxuXG5hc3luYyBmdW5jdGlvbiBjYWxjdWxhdGVDdXN0b21TZWdtZW50Q291bnQoc3VwYWJhc2U6IGFueSwgb3JnYW5pemF0aW9uSWQ6IHN0cmluZywgY3JpdGVyaWE6IGFueSk6IFByb21pc2U8bnVtYmVyPiB7XG4gIHRyeSB7XG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdjb250YWN0cycpXG4gICAgICAuc2VsZWN0KCdpZCcsIHsgY291bnQ6ICdleGFjdCcgfSlcbiAgICAgIC5lcSgnb3JnYW5pemF0aW9uX2lkJywgb3JnYW5pemF0aW9uSWQpXG5cbiAgICAvLyBBcHBseSBjcml0ZXJpYSBmaWx0ZXJzXG4gICAgZm9yIChjb25zdCBjb25kaXRpb24gb2YgY3JpdGVyaWEuY29uZGl0aW9ucyB8fCBbXSkge1xuICAgICAgcXVlcnkgPSBhcHBseUNvbmRpdGlvbihxdWVyeSwgY29uZGl0aW9uKVxuICAgIH1cblxuICAgIGNvbnN0IHsgY291bnQgfSA9IGF3YWl0IHF1ZXJ5XG4gICAgcmV0dXJuIGNvdW50IHx8IDBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxjdWxhdGluZyBjdXN0b20gc2VnbWVudCBjb3VudDonLCBlcnJvcilcbiAgICByZXR1cm4gMFxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5Q29uZGl0aW9uKHF1ZXJ5OiBhbnksIGNvbmRpdGlvbjogYW55KSB7XG4gIGNvbnN0IHsgZmllbGQsIG9wZXJhdG9yLCB2YWx1ZSB9ID0gY29uZGl0aW9uXG5cbiAgc3dpdGNoIChvcGVyYXRvcikge1xuICAgIGNhc2UgJ2VxdWFscyc6XG4gICAgICByZXR1cm4gcXVlcnkuZXEoZmllbGQsIHZhbHVlKVxuXG4gICAgY2FzZSAnbm90X2VxdWFscyc6XG4gICAgICByZXR1cm4gcXVlcnkubmVxKGZpZWxkLCB2YWx1ZSlcblxuICAgIGNhc2UgJ2NvbnRhaW5zJzpcbiAgICAgIHJldHVybiBxdWVyeS5pbGlrZShmaWVsZCwgYCUke3ZhbHVlfSVgKVxuXG4gICAgY2FzZSAnbm90X2NvbnRhaW5zJzpcbiAgICAgIHJldHVybiBxdWVyeS5ub3QoJ2lsaWtlJywgZmllbGQsIGAlJHt2YWx1ZX0lYClcblxuICAgIGNhc2UgJ3N0YXJ0c193aXRoJzpcbiAgICAgIHJldHVybiBxdWVyeS5pbGlrZShmaWVsZCwgYCR7dmFsdWV9JWApXG5cbiAgICBjYXNlICdlbmRzX3dpdGgnOlxuICAgICAgcmV0dXJuIHF1ZXJ5LmlsaWtlKGZpZWxkLCBgJSR7dmFsdWV9YClcblxuICAgIGNhc2UgJ2lzX251bGwnOlxuICAgICAgcmV0dXJuIHF1ZXJ5LmlzKGZpZWxkLCBudWxsKVxuXG4gICAgY2FzZSAnaXNfbm90X251bGwnOlxuICAgICAgcmV0dXJuIHF1ZXJ5Lm5vdCgnaXMnLCBmaWVsZCwgbnVsbClcblxuICAgIGNhc2UgJ2dyZWF0ZXJfdGhhbic6XG4gICAgICByZXR1cm4gcXVlcnkuZ3QoZmllbGQsIHZhbHVlKVxuXG4gICAgY2FzZSAnbGVzc190aGFuJzpcbiAgICAgIHJldHVybiBxdWVyeS5sdChmaWVsZCwgdmFsdWUpXG5cbiAgICBjYXNlICdncmVhdGVyX3RoYW5fb3JfZXF1YWwnOlxuICAgICAgcmV0dXJuIHF1ZXJ5Lmd0ZShmaWVsZCwgdmFsdWUpXG5cbiAgICBjYXNlICdsZXNzX3RoYW5fb3JfZXF1YWwnOlxuICAgICAgcmV0dXJuIHF1ZXJ5Lmx0ZShmaWVsZCwgdmFsdWUpXG5cbiAgICBjYXNlICdpbic6XG4gICAgICByZXR1cm4gcXVlcnkuaW4oZmllbGQsIEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdKVxuXG4gICAgY2FzZSAnbm90X2luJzpcbiAgICAgIHJldHVybiBxdWVyeS5ub3QoJ2luJywgZmllbGQsIEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdKVxuXG4gICAgY2FzZSAnaGFzX3RhZyc6XG4gICAgICByZXR1cm4gcXVlcnkuY29udGFpbnMoJ3RhZ3MnLCBbdmFsdWVdKVxuXG4gICAgY2FzZSAnbm90X2hhc190YWcnOlxuICAgICAgcmV0dXJuIHF1ZXJ5Lm5vdCgnY29udGFpbnMnLCAndGFncycsIFt2YWx1ZV0pXG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHF1ZXJ5XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVTZWdtZW50Q3JpdGVyaWEoY3JpdGVyaWE6IGFueSk6IGJvb2xlYW4ge1xuICBpZiAoIWNyaXRlcmlhIHx8IHR5cGVvZiBjcml0ZXJpYSAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGlmICghQXJyYXkuaXNBcnJheShjcml0ZXJpYS5jb25kaXRpb25zKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgY29uc3QgdmFsaWRGaWVsZHMgPSBbJ25hbWUnLCAncGhvbmVfbnVtYmVyJywgJ2VtYWlsJywgJ3RhZ3MnLCAnbm90ZXMnLCAnaXNfYmxvY2tlZCcsICdjcmVhdGVkX2F0JywgJ3VwZGF0ZWRfYXQnLCAnbGFzdF9tZXNzYWdlX2F0J11cbiAgY29uc3QgdmFsaWRPcGVyYXRvcnMgPSBbXG4gICAgJ2VxdWFscycsICdub3RfZXF1YWxzJywgJ2NvbnRhaW5zJywgJ25vdF9jb250YWlucycsICdzdGFydHNfd2l0aCcsICdlbmRzX3dpdGgnLFxuICAgICdpc19udWxsJywgJ2lzX25vdF9udWxsJywgJ2dyZWF0ZXJfdGhhbicsICdsZXNzX3RoYW4nLCAnZ3JlYXRlcl90aGFuX29yX2VxdWFsJyxcbiAgICAnbGVzc190aGFuX29yX2VxdWFsJywgJ2luJywgJ25vdF9pbicsICdoYXNfdGFnJywgJ25vdF9oYXNfdGFnJ1xuICBdXG5cbiAgZm9yIChjb25zdCBjb25kaXRpb24gb2YgY3JpdGVyaWEuY29uZGl0aW9ucykge1xuICAgIGlmICghY29uZGl0aW9uLmZpZWxkIHx8ICFjb25kaXRpb24ub3BlcmF0b3IpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICghdmFsaWRGaWVsZHMuaW5jbHVkZXMoY29uZGl0aW9uLmZpZWxkKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF2YWxpZE9wZXJhdG9ycy5pbmNsdWRlcyhjb25kaXRpb24ub3BlcmF0b3IpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICAvLyBWYWx1ZSBpcyBvcHRpb25hbCBmb3Igc29tZSBvcGVyYXRvcnNcbiAgICBjb25zdCBvcGVyYXRvcnNXaXRob3V0VmFsdWUgPSBbJ2lzX251bGwnLCAnaXNfbm90X251bGwnXVxuICAgIGlmICghb3BlcmF0b3JzV2l0aG91dFZhbHVlLmluY2x1ZGVzKGNvbmRpdGlvbi5vcGVyYXRvcikgJiYgY29uZGl0aW9uLnZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbmZ1bmN0aW9uIGdldFNlZ21lbnREZXNjcmlwdGlvbihrZXk6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGRlc2NyaXB0aW9ucyA9IHtcbiAgICBhbGw6ICdBbGwgY29udGFjdHMgaW4geW91ciBvcmdhbml6YXRpb24nLFxuICAgIGFjdGl2ZTogJ0NvbnRhY3RzIHdobyBoYXZlIHNlbnQgb3IgcmVjZWl2ZWQgbWVzc2FnZXMgaW4gdGhlIGxhc3QgMzAgZGF5cycsXG4gICAgaW5hY3RpdmU6ICdDb250YWN0cyB3aG8gaGF2ZSBub3QgYmVlbiBhY3RpdmUgZm9yIG1vcmUgdGhhbiAzMCBkYXlzJyxcbiAgICBuZXc6ICdDb250YWN0cyBhZGRlZCBpbiB0aGUgbGFzdCA3IGRheXMnLFxuICAgIHZpcDogJ0NvbnRhY3RzIHRhZ2dlZCBhcyBWSVAnLFxuICAgIGJsb2NrZWQ6ICdDb250YWN0cyB0aGF0IGhhdmUgYmVlbiBibG9ja2VkJyxcbiAgICBub19jb252ZXJzYXRpb25zOiAnQ29udGFjdHMgd2hvIGhhdmUgbmV2ZXIgaGFkIGEgY29udmVyc2F0aW9uJyxcbiAgICBoaWdoX3ZvbHVtZTogJ0NvbnRhY3RzIHdpdGggMTAgb3IgbW9yZSBtZXNzYWdlcydcbiAgfVxuXG4gIHJldHVybiBkZXNjcmlwdGlvbnNba2V5XSB8fCAnJ1xufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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