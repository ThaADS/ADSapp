{"version":3,"names":["GET","cov_2qo6ed4o5q","f","s","PUT","request","supabase","_server1","createClient","data","user","auth","getUser","b","_server","NextResponse","json","error","status","profile","from","select","eq","id","single","organization_id","brandingManager","_tenantbranding","TenantBrandingManager","branding","getBranding","success","console","body","updatedBranding","updateBranding"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\app\\api\\tenant\\branding\\route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { createClient } from '@/lib/supabase/server';\nimport { TenantBrandingManager } from '@/lib/tenant-branding';\n\nexport async function GET(request: NextRequest) {\n  try {\n    const supabase = await createClient();\n    \n    // Get organization ID from headers or auth\n    const { data: { user } } = await supabase.auth.getUser();\n    \n    if (!user) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      );\n    }\n\n    // Get user's organization\n    const { data: profile } = await supabase\n      .from('profiles')\n      .select('organization_id')\n      .eq('id', user.id)\n      .single();\n\n    if (!profile?.organization_id) {\n      return NextResponse.json(\n        { error: 'No organization found' },\n        { status: 404 }\n      );\n    }\n\n    // Get branding\n    const brandingManager = new TenantBrandingManager(supabase);\n    const branding = await brandingManager.getBranding(profile.organization_id);\n\n    return NextResponse.json({\n      success: true,\n      data: branding,\n    });\n  } catch (error) {\n    console.error('Error fetching branding:', error);\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function PUT(request: NextRequest) {\n  try {\n    const supabase = await createClient();\n    const body = await request.json();\n    \n    // Get organization ID from auth\n    const { data: { user } } = await supabase.auth.getUser();\n    \n    if (!user) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      );\n    }\n\n    // Get user's organization\n    const { data: profile } = await supabase\n      .from('profiles')\n      .select('organization_id')\n      .eq('id', user.id)\n      .single();\n\n    if (!profile?.organization_id) {\n      return NextResponse.json(\n        { error: 'No organization found' },\n        { status: 404 }\n      );\n    }\n\n    // Update branding\n    const brandingManager = new TenantBrandingManager(supabase);\n    const updatedBranding = await brandingManager.updateBranding(\n      profile.organization_id,\n      body\n    );\n\n    return NextResponse.json({\n      success: true,\n      data: updatedBranding,\n    });\n  } catch (error) {\n    console.error('Error updating branding:', error);\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}