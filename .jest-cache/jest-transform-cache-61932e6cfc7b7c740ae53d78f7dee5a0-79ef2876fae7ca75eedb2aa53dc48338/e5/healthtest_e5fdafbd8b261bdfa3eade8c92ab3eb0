5f77a21c5af9b30ac0ed8501e0a4b9d7
/**
 * Health Check API Integration Tests
 *
 * Tests for /api/health/* endpoints including overall health,
 * database, Stripe, and WhatsApp API connectivity.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _apitesthelpers = require("../../utils/api-test-helpers");
const _testhelpers = require("../../utils/test-helpers");
_globals.jest.mock('@/lib/supabase/server');
(0, _globals.describe)('GET /api/health', ()=>{
    (0, _globals.it)('should return overall application health status', async ()=>{
        const request = (0, _apitesthelpers.createMockRequest)('GET', '/api/health');
        const response = await simulateHealthCheck(request);
        const { status, data } = await (0, _apitesthelpers.parseResponse)(response);
        (0, _globals.expect)(status).toBe(200);
        (0, _globals.expect)(data).toHaveProperty('status');
        (0, _globals.expect)(data).toHaveProperty('timestamp');
        (0, _globals.expect)(data).toHaveProperty('services');
        (0, _globals.expect)(data.status).toBe('healthy');
    });
});
(0, _globals.describe)('GET /api/health/db', ()=>{
    let mockSupabase;
    (0, _globals.beforeEach)(()=>{
        mockSupabase = (0, _testhelpers.createMockSupabaseClient)();
        _globals.jest.clearAllMocks();
    });
    (0, _globals.it)('should return healthy when database is connected', async ()=>{
        mockSupabase.from = _globals.jest.fn().mockReturnValue({
            select: _globals.jest.fn().mockReturnThis(),
            limit: _globals.jest.fn().mockResolvedValue({
                data: [],
                error: null
            })
        });
        const request = (0, _apitesthelpers.createMockRequest)('GET', '/api/health/db');
        const response = await simulateDbHealthCheck(request, mockSupabase);
        const { status, data } = await (0, _apitesthelpers.parseResponse)(response);
        (0, _globals.expect)(status).toBe(200);
        (0, _globals.expect)(data.status).toBe('healthy');
        (0, _globals.expect)(data.service).toBe('database');
        (0, _globals.expect)(data).toHaveProperty('latency');
    });
    (0, _globals.it)('should return unhealthy when database connection fails', async ()=>{
        mockSupabase.from = _globals.jest.fn().mockReturnValue({
            select: _globals.jest.fn().mockReturnThis(),
            limit: _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    message: 'Connection failed'
                }
            })
        });
        const request = (0, _apitesthelpers.createMockRequest)('GET', '/api/health/db');
        const response = await simulateDbHealthCheck(request, mockSupabase);
        const { status, data } = await (0, _apitesthelpers.parseResponse)(response);
        (0, _globals.expect)(status).toBe(503);
        (0, _globals.expect)(data.status).toBe('unhealthy');
        (0, _globals.expect)(data).toHaveProperty('error');
    });
});
(0, _globals.describe)('GET /api/health/stripe', ()=>{
    (0, _globals.it)('should return healthy when Stripe is configured', async ()=>{
        const mockStripe = {
            customers: {
                list: _globals.jest.fn().mockResolvedValue({
                    data: []
                })
            }
        };
        const request = (0, _apitesthelpers.createMockRequest)('GET', '/api/health/stripe');
        const response = await simulateStripeHealthCheck(request, mockStripe);
        const { status, data } = await (0, _apitesthelpers.parseResponse)(response);
        (0, _globals.expect)(status).toBe(200);
        (0, _globals.expect)(data.status).toBe('healthy');
        (0, _globals.expect)(data.service).toBe('stripe');
    });
    (0, _globals.it)('should return unhealthy when Stripe is not configured', async ()=>{
        const mockStripe = null;
        const request = (0, _apitesthelpers.createMockRequest)('GET', '/api/health/stripe');
        const response = await simulateStripeHealthCheck(request, mockStripe);
        const { status, data } = await (0, _apitesthelpers.parseResponse)(response);
        (0, _globals.expect)(status).toBe(503);
        (0, _globals.expect)(data.status).toBe('unhealthy');
        (0, _globals.expect)(data.error).toContain('not configured');
    });
});
(0, _globals.describe)('GET /api/health/whatsapp', ()=>{
    (0, _globals.it)('should return healthy when WhatsApp API is accessible', async ()=>{
        global.fetch = _globals.jest.fn().mockResolvedValue({
            ok: true,
            json: async ()=>({
                    success: true
                })
        });
        const request = (0, _apitesthelpers.createMockRequest)('GET', '/api/health/whatsapp');
        const response = await simulateWhatsAppHealthCheck(request);
        const { status, data } = await (0, _apitesthelpers.parseResponse)(response);
        (0, _globals.expect)(status).toBe(200);
        (0, _globals.expect)(data.status).toBe('healthy');
        (0, _globals.expect)(data.service).toBe('whatsapp');
    });
    (0, _globals.it)('should return unhealthy when WhatsApp API is not accessible', async ()=>{
        global.fetch = _globals.jest.fn().mockRejectedValue(new Error('Network error'));
        const request = (0, _apitesthelpers.createMockRequest)('GET', '/api/health/whatsapp');
        const response = await simulateWhatsAppHealthCheck(request);
        const { status, data } = await (0, _apitesthelpers.parseResponse)(response);
        (0, _globals.expect)(status).toBe(503);
        (0, _globals.expect)(data.status).toBe('unhealthy');
        (0, _globals.expect)(data).toHaveProperty('error');
    });
});
// =============================================================================
// Helper Functions to Simulate API Route Handlers
// =============================================================================
async function simulateHealthCheck(request) {
    try {
        return new Response(JSON.stringify({
            status: 'healthy',
            timestamp: new Date().toISOString(),
            services: {
                database: 'healthy',
                stripe: 'healthy',
                whatsapp: 'healthy'
            }
        }), {
            status: 200,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    } catch (error) {
        return new Response(JSON.stringify({
            status: 'unhealthy',
            error: error.message
        }), {
            status: 503,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }
}
async function simulateDbHealthCheck(request, supabase) {
    try {
        const startTime = Date.now();
        const { data, error } = await supabase.from('organizations').select('id').limit(1);
        if (error) {
            return new Response(JSON.stringify({
                status: 'unhealthy',
                service: 'database',
                error: error.message
            }), {
                status: 503,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        const latency = Date.now() - startTime;
        return new Response(JSON.stringify({
            status: 'healthy',
            service: 'database',
            latency: `${latency}ms`
        }), {
            status: 200,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    } catch (error) {
        return new Response(JSON.stringify({
            status: 'unhealthy',
            service: 'database',
            error: error.message
        }), {
            status: 503,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }
}
async function simulateStripeHealthCheck(request, stripe) {
    try {
        if (!stripe || !process.env.STRIPE_SECRET_KEY) {
            return new Response(JSON.stringify({
                status: 'unhealthy',
                service: 'stripe',
                error: 'Stripe not configured'
            }), {
                status: 503,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        await stripe.customers.list({
            limit: 1
        });
        return new Response(JSON.stringify({
            status: 'healthy',
            service: 'stripe'
        }), {
            status: 200,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    } catch (error) {
        return new Response(JSON.stringify({
            status: 'unhealthy',
            service: 'stripe',
            error: error.message
        }), {
            status: 503,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }
}
async function simulateWhatsAppHealthCheck(request) {
    try {
        if (!process.env.WHATSAPP_ACCESS_TOKEN) {
            return new Response(JSON.stringify({
                status: 'unhealthy',
                service: 'whatsapp',
                error: 'WhatsApp not configured'
            }), {
                status: 503,
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        const response = await fetch(`https://graph.facebook.com/v18.0/${process.env.WHATSAPP_PHONE_NUMBER_ID}`, {
            headers: {
                Authorization: `Bearer ${process.env.WHATSAPP_ACCESS_TOKEN}`
            }
        });
        if (!response.ok) {
            throw new Error('WhatsApp API not accessible');
        }
        return new Response(JSON.stringify({
            status: 'healthy',
            service: 'whatsapp'
        }), {
            status: 200,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    } catch (error) {
        return new Response(JSON.stringify({
            status: 'unhealthy',
            service: 'whatsapp',
            error: error.message
        }), {
            status: 503,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxBaSBQcm9qZWN0ZW5cXEFEU2FwcFxcdGVzdHNcXGludGVncmF0aW9uXFxhcGlcXGhlYWx0aC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSGVhbHRoIENoZWNrIEFQSSBJbnRlZ3JhdGlvbiBUZXN0c1xuICpcbiAqIFRlc3RzIGZvciAvYXBpL2hlYWx0aC8qIGVuZHBvaW50cyBpbmNsdWRpbmcgb3ZlcmFsbCBoZWFsdGgsXG4gKiBkYXRhYmFzZSwgU3RyaXBlLCBhbmQgV2hhdHNBcHAgQVBJIGNvbm5lY3Rpdml0eS5cbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgYmVmb3JlRWFjaCwgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgY3JlYXRlTW9ja1JlcXVlc3QsIHBhcnNlUmVzcG9uc2UgfSBmcm9tICcuLi8uLi91dGlscy9hcGktdGVzdC1oZWxwZXJzJ1xuaW1wb3J0IHsgY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvdGVzdC1oZWxwZXJzJ1xuXG5qZXN0Lm1vY2soJ0AvbGliL3N1cGFiYXNlL3NlcnZlcicpXG5cbmRlc2NyaWJlKCdHRVQgL2FwaS9oZWFsdGgnLCAoKSA9PiB7XG4gIGl0KCdzaG91bGQgcmV0dXJuIG92ZXJhbGwgYXBwbGljYXRpb24gaGVhbHRoIHN0YXR1cycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3QoJ0dFVCcsICcvYXBpL2hlYWx0aCcpXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaW11bGF0ZUhlYWx0aENoZWNrKHJlcXVlc3QpXG4gICAgY29uc3QgeyBzdGF0dXMsIGRhdGEgfSA9IGF3YWl0IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICBleHBlY3Qoc3RhdHVzKS50b0JlKDIwMClcbiAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ3N0YXR1cycpXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCd0aW1lc3RhbXAnKVxuICAgIGV4cGVjdChkYXRhKS50b0hhdmVQcm9wZXJ0eSgnc2VydmljZXMnKVxuICAgIGV4cGVjdChkYXRhLnN0YXR1cykudG9CZSgnaGVhbHRoeScpXG4gIH0pXG59KVxuXG5kZXNjcmliZSgnR0VUIC9hcGkvaGVhbHRoL2RiJywgKCkgPT4ge1xuICBsZXQgbW9ja1N1cGFiYXNlOiBhbnlcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBtb2NrU3VwYWJhc2UgPSBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQoKVxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCByZXR1cm4gaGVhbHRoeSB3aGVuIGRhdGFiYXNlIGlzIGNvbm5lY3RlZCcsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrU3VwYWJhc2UuZnJvbSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGxpbWl0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBbXSwgZXJyb3I6IG51bGwgfSksXG4gICAgfSlcblxuICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCgnR0VUJywgJy9hcGkvaGVhbHRoL2RiJylcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpbXVsYXRlRGJIZWFsdGhDaGVjayhyZXF1ZXN0LCBtb2NrU3VwYWJhc2UpXG4gICAgY29uc3QgeyBzdGF0dXMsIGRhdGEgfSA9IGF3YWl0IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICBleHBlY3Qoc3RhdHVzKS50b0JlKDIwMClcbiAgICBleHBlY3QoZGF0YS5zdGF0dXMpLnRvQmUoJ2hlYWx0aHknKVxuICAgIGV4cGVjdChkYXRhLnNlcnZpY2UpLnRvQmUoJ2RhdGFiYXNlJylcbiAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ2xhdGVuY3knKVxuICB9KVxuXG4gIGl0KCdzaG91bGQgcmV0dXJuIHVuaGVhbHRoeSB3aGVuIGRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja1N1cGFiYXNlLmZyb20gPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICBsaW1pdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0Nvbm5lY3Rpb24gZmFpbGVkJyB9LFxuICAgICAgfSksXG4gICAgfSlcblxuICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCgnR0VUJywgJy9hcGkvaGVhbHRoL2RiJylcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpbXVsYXRlRGJIZWFsdGhDaGVjayhyZXF1ZXN0LCBtb2NrU3VwYWJhc2UpXG4gICAgY29uc3QgeyBzdGF0dXMsIGRhdGEgfSA9IGF3YWl0IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICBleHBlY3Qoc3RhdHVzKS50b0JlKDUwMylcbiAgICBleHBlY3QoZGF0YS5zdGF0dXMpLnRvQmUoJ3VuaGVhbHRoeScpXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdlcnJvcicpXG4gIH0pXG59KVxuXG5kZXNjcmliZSgnR0VUIC9hcGkvaGVhbHRoL3N0cmlwZScsICgpID0+IHtcbiAgaXQoJ3Nob3VsZCByZXR1cm4gaGVhbHRoeSB3aGVuIFN0cmlwZSBpcyBjb25maWd1cmVkJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tTdHJpcGUgPSB7XG4gICAgICBjdXN0b21lcnM6IHtcbiAgICAgICAgbGlzdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogW10gfSksXG4gICAgICB9LFxuICAgIH1cblxuICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCgnR0VUJywgJy9hcGkvaGVhbHRoL3N0cmlwZScpXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaW11bGF0ZVN0cmlwZUhlYWx0aENoZWNrKHJlcXVlc3QsIG1vY2tTdHJpcGUpXG4gICAgY29uc3QgeyBzdGF0dXMsIGRhdGEgfSA9IGF3YWl0IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICBleHBlY3Qoc3RhdHVzKS50b0JlKDIwMClcbiAgICBleHBlY3QoZGF0YS5zdGF0dXMpLnRvQmUoJ2hlYWx0aHknKVxuICAgIGV4cGVjdChkYXRhLnNlcnZpY2UpLnRvQmUoJ3N0cmlwZScpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCByZXR1cm4gdW5oZWFsdGh5IHdoZW4gU3RyaXBlIGlzIG5vdCBjb25maWd1cmVkJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tTdHJpcGUgPSBudWxsXG5cbiAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3QoJ0dFVCcsICcvYXBpL2hlYWx0aC9zdHJpcGUnKVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2ltdWxhdGVTdHJpcGVIZWFsdGhDaGVjayhyZXF1ZXN0LCBtb2NrU3RyaXBlKVxuICAgIGNvbnN0IHsgc3RhdHVzLCBkYXRhIH0gPSBhd2FpdCBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlKVxuXG4gICAgZXhwZWN0KHN0YXR1cykudG9CZSg1MDMpXG4gICAgZXhwZWN0KGRhdGEuc3RhdHVzKS50b0JlKCd1bmhlYWx0aHknKVxuICAgIGV4cGVjdChkYXRhLmVycm9yKS50b0NvbnRhaW4oJ25vdCBjb25maWd1cmVkJylcbiAgfSlcbn0pXG5cbmRlc2NyaWJlKCdHRVQgL2FwaS9oZWFsdGgvd2hhdHNhcHAnLCAoKSA9PiB7XG4gIGl0KCdzaG91bGQgcmV0dXJuIGhlYWx0aHkgd2hlbiBXaGF0c0FwcCBBUEkgaXMgYWNjZXNzaWJsZScsIGFzeW5jICgpID0+IHtcbiAgICBnbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgb2s6IHRydWUsXG4gICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlIH0pLFxuICAgIH0pIGFzIGplc3QuTW9ja1xuXG4gICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KCdHRVQnLCAnL2FwaS9oZWFsdGgvd2hhdHNhcHAnKVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2ltdWxhdGVXaGF0c0FwcEhlYWx0aENoZWNrKHJlcXVlc3QpXG4gICAgY29uc3QgeyBzdGF0dXMsIGRhdGEgfSA9IGF3YWl0IHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpXG5cbiAgICBleHBlY3Qoc3RhdHVzKS50b0JlKDIwMClcbiAgICBleHBlY3QoZGF0YS5zdGF0dXMpLnRvQmUoJ2hlYWx0aHknKVxuICAgIGV4cGVjdChkYXRhLnNlcnZpY2UpLnRvQmUoJ3doYXRzYXBwJylcbiAgfSlcblxuICBpdCgnc2hvdWxkIHJldHVybiB1bmhlYWx0aHkgd2hlbiBXaGF0c0FwcCBBUEkgaXMgbm90IGFjY2Vzc2libGUnLCBhc3luYyAoKSA9PiB7XG4gICAgZ2xvYmFsLmZldGNoID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKSBhcyBqZXN0Lk1vY2tcblxuICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCgnR0VUJywgJy9hcGkvaGVhbHRoL3doYXRzYXBwJylcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpbXVsYXRlV2hhdHNBcHBIZWFsdGhDaGVjayhyZXF1ZXN0KVxuICAgIGNvbnN0IHsgc3RhdHVzLCBkYXRhIH0gPSBhd2FpdCBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlKVxuXG4gICAgZXhwZWN0KHN0YXR1cykudG9CZSg1MDMpXG4gICAgZXhwZWN0KGRhdGEuc3RhdHVzKS50b0JlKCd1bmhlYWx0aHknKVxuICAgIGV4cGVjdChkYXRhKS50b0hhdmVQcm9wZXJ0eSgnZXJyb3InKVxuICB9KVxufSlcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhlbHBlciBGdW5jdGlvbnMgdG8gU2ltdWxhdGUgQVBJIFJvdXRlIEhhbmRsZXJzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5hc3luYyBmdW5jdGlvbiBzaW11bGF0ZUhlYWx0aENoZWNrKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTxhbnk+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6ICdoZWFsdGh5JyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHNlcnZpY2VzOiB7XG4gICAgICAgICAgZGF0YWJhc2U6ICdoZWFsdGh5JyxcbiAgICAgICAgICBzdHJpcGU6ICdoZWFsdGh5JyxcbiAgICAgICAgICB3aGF0c2FwcDogJ2hlYWx0aHknLFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgICB7IHN0YXR1czogMjAwLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSB9XG4gICAgKVxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IHN0YXR1czogJ3VuaGVhbHRoeScsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pLCB7XG4gICAgICBzdGF0dXM6IDUwMyxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgIH0pXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gc2ltdWxhdGVEYkhlYWx0aENoZWNrKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCBzdXBhYmFzZTogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdvcmdhbml6YXRpb25zJykuc2VsZWN0KCdpZCcpLmxpbWl0KDEpXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBzdGF0dXM6ICd1bmhlYWx0aHknLFxuICAgICAgICAgIHNlcnZpY2U6ICdkYXRhYmFzZScsXG4gICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIH0pLFxuICAgICAgICB7IHN0YXR1czogNTAzLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSB9XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgbGF0ZW5jeSA9IERhdGUubm93KCkgLSBzdGFydFRpbWVcblxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXG4gICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogJ2hlYWx0aHknLFxuICAgICAgICBzZXJ2aWNlOiAnZGF0YWJhc2UnLFxuICAgICAgICBsYXRlbmN5OiBgJHtsYXRlbmN5fW1zYCxcbiAgICAgIH0pLFxuICAgICAgeyBzdGF0dXM6IDIwMCwgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0gfVxuICAgIClcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXG4gICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogJ3VuaGVhbHRoeScsXG4gICAgICAgIHNlcnZpY2U6ICdkYXRhYmFzZScsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgfSksXG4gICAgICB7IHN0YXR1czogNTAzLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSB9XG4gICAgKVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNpbXVsYXRlU3RyaXBlSGVhbHRoQ2hlY2socmVxdWVzdDogTmV4dFJlcXVlc3QsIHN0cmlwZTogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIXN0cmlwZSB8fCAhcHJvY2Vzcy5lbnYuU1RSSVBFX1NFQ1JFVF9LRVkpIHtcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBzdGF0dXM6ICd1bmhlYWx0aHknLFxuICAgICAgICAgIHNlcnZpY2U6ICdzdHJpcGUnLFxuICAgICAgICAgIGVycm9yOiAnU3RyaXBlIG5vdCBjb25maWd1cmVkJyxcbiAgICAgICAgfSksXG4gICAgICAgIHsgc3RhdHVzOiA1MDMsIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9IH1cbiAgICAgIClcbiAgICB9XG5cbiAgICBhd2FpdCBzdHJpcGUuY3VzdG9tZXJzLmxpc3QoeyBsaW1pdDogMSB9KVxuXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShcbiAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiAnaGVhbHRoeScsXG4gICAgICAgIHNlcnZpY2U6ICdzdHJpcGUnLFxuICAgICAgfSksXG4gICAgICB7IHN0YXR1czogMjAwLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSB9XG4gICAgKVxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShcbiAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiAndW5oZWFsdGh5JyxcbiAgICAgICAgc2VydmljZTogJ3N0cmlwZScsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgfSksXG4gICAgICB7IHN0YXR1czogNTAzLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSB9XG4gICAgKVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNpbXVsYXRlV2hhdHNBcHBIZWFsdGhDaGVjayhyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IFByb21pc2U8YW55PiB7XG4gIHRyeSB7XG4gICAgaWYgKCFwcm9jZXNzLmVudi5XSEFUU0FQUF9BQ0NFU1NfVE9LRU4pIHtcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBzdGF0dXM6ICd1bmhlYWx0aHknLFxuICAgICAgICAgIHNlcnZpY2U6ICd3aGF0c2FwcCcsXG4gICAgICAgICAgZXJyb3I6ICdXaGF0c0FwcCBub3QgY29uZmlndXJlZCcsXG4gICAgICAgIH0pLFxuICAgICAgICB7IHN0YXR1czogNTAzLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSB9XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgIGBodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92MTguMC8ke3Byb2Nlc3MuZW52LldIQVRTQVBQX1BIT05FX05VTUJFUl9JRH1gLFxuICAgICAge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Byb2Nlc3MuZW52LldIQVRTQVBQX0FDQ0VTU19UT0tFTn1gLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV2hhdHNBcHAgQVBJIG5vdCBhY2Nlc3NpYmxlJylcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6ICdoZWFsdGh5JyxcbiAgICAgICAgc2VydmljZTogJ3doYXRzYXBwJyxcbiAgICAgIH0pLFxuICAgICAgeyBzdGF0dXM6IDIwMCwgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0gfVxuICAgIClcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXG4gICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogJ3VuaGVhbHRoeScsXG4gICAgICAgIHNlcnZpY2U6ICd3aGF0c2FwcCcsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgfSksXG4gICAgICB7IHN0YXR1czogNTAzLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSB9XG4gICAgKVxuICB9XG59XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJkZXNjcmliZSIsIml0IiwicmVxdWVzdCIsImNyZWF0ZU1vY2tSZXF1ZXN0IiwicmVzcG9uc2UiLCJzaW11bGF0ZUhlYWx0aENoZWNrIiwic3RhdHVzIiwiZGF0YSIsInBhcnNlUmVzcG9uc2UiLCJleHBlY3QiLCJ0b0JlIiwidG9IYXZlUHJvcGVydHkiLCJtb2NrU3VwYWJhc2UiLCJiZWZvcmVFYWNoIiwiY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50IiwiY2xlYXJBbGxNb2NrcyIsImZyb20iLCJmbiIsIm1vY2tSZXR1cm5WYWx1ZSIsInNlbGVjdCIsIm1vY2tSZXR1cm5UaGlzIiwibGltaXQiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImVycm9yIiwic2ltdWxhdGVEYkhlYWx0aENoZWNrIiwic2VydmljZSIsIm1lc3NhZ2UiLCJtb2NrU3RyaXBlIiwiY3VzdG9tZXJzIiwibGlzdCIsInNpbXVsYXRlU3RyaXBlSGVhbHRoQ2hlY2siLCJ0b0NvbnRhaW4iLCJnbG9iYWwiLCJmZXRjaCIsIm9rIiwianNvbiIsInN1Y2Nlc3MiLCJzaW11bGF0ZVdoYXRzQXBwSGVhbHRoQ2hlY2siLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsIkVycm9yIiwiUmVzcG9uc2UiLCJKU09OIiwic3RyaW5naWZ5IiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic2VydmljZXMiLCJkYXRhYmFzZSIsInN0cmlwZSIsIndoYXRzYXBwIiwiaGVhZGVycyIsInN1cGFiYXNlIiwic3RhcnRUaW1lIiwibm93IiwibGF0ZW5jeSIsInByb2Nlc3MiLCJlbnYiLCJTVFJJUEVfU0VDUkVUX0tFWSIsIldIQVRTQVBQX0FDQ0VTU19UT0tFTiIsIldIQVRTQVBQX1BIT05FX05VTUJFUl9JRCIsIkF1dGhvcml6YXRpb24iXSwibWFwcGluZ3MiOiJBQUFBOzs7OztDQUtDOzs7O3lCQUVzRDtnQ0FFTjs2QkFDUjtBQUV6Q0EsYUFBSSxDQUFDQyxJQUFJLENBQUM7QUFFVkMsSUFBQUEsaUJBQVEsRUFBQyxtQkFBbUI7SUFDMUJDLElBQUFBLFdBQUUsRUFBQyxtREFBbUQ7UUFDcEQsTUFBTUMsVUFBVUMsSUFBQUEsaUNBQWlCLEVBQUMsT0FBTztRQUN6QyxNQUFNQyxXQUFXLE1BQU1DLG9CQUFvQkg7UUFDM0MsTUFBTSxFQUFFSSxNQUFNLEVBQUVDLElBQUksRUFBRSxHQUFHLE1BQU1DLElBQUFBLDZCQUFhLEVBQUNKO1FBRTdDSyxJQUFBQSxlQUFNLEVBQUNILFFBQVFJLElBQUksQ0FBQztRQUNwQkQsSUFBQUEsZUFBTSxFQUFDRixNQUFNSSxjQUFjLENBQUM7UUFDNUJGLElBQUFBLGVBQU0sRUFBQ0YsTUFBTUksY0FBYyxDQUFDO1FBQzVCRixJQUFBQSxlQUFNLEVBQUNGLE1BQU1JLGNBQWMsQ0FBQztRQUM1QkYsSUFBQUEsZUFBTSxFQUFDRixL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