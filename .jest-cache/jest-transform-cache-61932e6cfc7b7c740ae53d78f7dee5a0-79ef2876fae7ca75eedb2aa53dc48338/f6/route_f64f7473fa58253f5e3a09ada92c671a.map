{"version":3,"names":["cov_2kgn4kcdw4","actualCoverage","s","POST","request","f","organizationId","headers","get","paymentMethodId","json","b","_server","NextResponse","error","status","paymentMethodManager","_paymentmethods","PaymentMethodManager","setDefaultPaymentMethod","success","console","Error","message"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\app\\api\\billing\\payment-methods\\default\\route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\nimport { PaymentMethodManager } from '@/lib/billing/payment-methods'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const organizationId = request.headers.get('X-Organization-ID')\n    const { paymentMethodId } = await request.json()\n\n    if (!organizationId) {\n      return NextResponse.json(\n        { error: 'Organization ID is required' },\n        { status: 400 }\n      )\n    }\n\n    if (!paymentMethodId) {\n      return NextResponse.json(\n        { error: 'Payment method ID is required' },\n        { status: 400 }\n      )\n    }\n\n    const paymentMethodManager = new PaymentMethodManager()\n    await paymentMethodManager.setDefaultPaymentMethod(organizationId, paymentMethodId)\n\n    return NextResponse.json({ success: true })\n  } catch (error) {\n    console.error('Set default payment method API error:', error)\n    return NextResponse.json(\n      { error: error instanceof Error ? error.message : 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAOI;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAAAA,cAAA,GAAAE,CAAA;;;;;;+BAHkB;;;;;;WAAAC,IAAA;;;;;kCAJoB;;;kCAEL;AAE9B,eAAeA,KAAKC,OAAoB;EAAA;EAAAJ,cAAA,GAAAK,CAAA;EAAAL,cAAA,GAAAE,CAAA;EAC7C,IAAI;IACF,MAAMI,cAAA;IAAA;IAAA,CAAAN,cAAA,GAAAE,CAAA,OAAiBE,OAAA,CAAQG,OAAO,CAACC,GAAG,CAAC;IAC3C,MAAM;MAAEC;IAAe,CAAE;IAAA;IAAA,CAAAT,cAAA,GAAAE,CAAA,OAAG,MAAME,OAAA,CAAQM,IAAI;IAAA;IAAAV,cAAA,GAAAE,CAAA;IAE9C,IAAI,CAACI,cAAA,EAAgB;MAAA;MAAAN,cAAA,GAAAW,CAAA;MAAAX,cAAA,GAAAE,CAAA;MACnB,OAAOU,OAAA,CAAAC,YAAY,CAACH,IAAI,CACtB;QAAEI,KAAA,EAAO;MAA8B,GACvC;QAAEC,MAAA,EAAQ;MAAI;IAElB;IAAA;IAAA;MAAAf,cAAA,GAAAW,CAAA;IAAA;IAAAX,cAAA,GAAAE,CAAA;IAEA,IAAI,CAACO,eAAA,EAAiB;MAAA;MAAAT,cAAA,GAAAW,CAAA;MAAAX,cAAA,GAAAE,CAAA;MACpB,OAAOU,OAAA,CAAAC,YAAY,CAACH,IAAI,CACtB;QAAEI,KAAA,EAAO;MAAgC,GACzC;QAAEC,MAAA,EAAQ;MAAI;IAElB;IAAA;IAAA;MAAAf,cAAA,GAAAW,CAAA;IAAA;IAEA,MAAMK,oBAAA;IAAA;IAAA,CAAAhB,cAAA,GAAAE,CAAA,QAAuB,IAAIe,eAAA,CAAAC,oBAAoB;IAAA;IAAAlB,cAAA,GAAAE,CAAA;IACrD,MAAMc,oBAAA,CAAqBG,uBAAuB,CAACb,cAAA,EAAgBG,eAAA;IAAA;IAAAT,cAAA,GAAAE,CAAA;IAEnE,OAAOU,OAAA,CAAAC,YAAY,CAACH,IAAI,CAAC;MAAEU,OAAA,EAAS;IAAK;EAC3C,EAAE,OAAON,KAAA,EAAO;IAAA;IAAAd,cAAA,GAAAE,CAAA;IACdmB,OAAA,CAAQP,KAAK,CAAC,yCAAyCA,KAAA;IAAA;IAAAd,cAAA,GAAAE,CAAA;IACvD,OAAOU,OAAA,CAAAC,YAAY,CAACH,IAAI,CACtB;MAAEI,KAAA,EAAOA,KAAA,YAAiBQ,KAAA;MAAA;MAAA,CAAAtB,cAAA,GAAAW,CAAA,UAAQG,KAAA,CAAMS,OAAO;MAAA;MAAA,CAAAvB,cAAA,GAAAW,CAAA,UAAG;IAAwB,GAC1E;MAAEI,MAAA,EAAQ;IAAI;EAElB;AACF","ignoreList":[]}