{"version":3,"sources":["C:\\Ai Projecten\\ADSapp\\tests\\utils\\test-helpers.ts"],"sourcesContent":["/**\n * Test Helpers - Comprehensive Test Utilities\n *\n * Provides utility functions for creating mock data, test fixtures,\n * and common testing patterns used across the test suite.\n */\n\nimport { v4 as uuidv4 } from 'uuid'\nimport type {\n  Organization,\n  Profile,\n  Contact,\n  Conversation,\n  Message,\n} from '@/types/database'\n\n// TODO WEEK 5+: Create MessageTemplate and AutomationRule types in database.ts\n// For now, these are commented out as they don't exist in the current schema\n// type MessageTemplate = any;\n// type AutomationRule = any;\n\n// =============================================================================\n// Type Definitions\n// =============================================================================\n\nexport type PartialExcept<T, K extends keyof T> = Partial<T> & Pick<T, K>\n\nexport interface MockSupabaseClient {\n  from: jest.Mock\n  auth: {\n    getUser: jest.Mock\n    getSession: jest.Mock\n    signIn: jest.Mock\n    signOut: jest.Mock\n    signUp: jest.Mock\n  }\n  rpc: jest.Mock\n  storage: {\n    from: jest.Mock\n  }\n}\n\n// =============================================================================\n// Supabase Client Mock Factory\n// =============================================================================\n\n/**\n * Creates a mock Supabase client with jest mock functions\n * @param overrides - Optional overrides for specific methods\n * @returns Mocked Supabase client\n */\nexport function createMockSupabaseClient(overrides?: Partial<MockSupabaseClient>): MockSupabaseClient {\n  const mockClient: MockSupabaseClient = {\n    from: jest.fn((table: string) => ({\n      select: jest.fn().mockReturnThis(),\n      insert: jest.fn().mockReturnThis(),\n      update: jest.fn().mockReturnThis(),\n      delete: jest.fn().mockReturnThis(),\n      upsert: jest.fn().mockReturnThis(),\n      eq: jest.fn().mockReturnThis(),\n      neq: jest.fn().mockReturnThis(),\n      gt: jest.fn().mockReturnThis(),\n      gte: jest.fn().mockReturnThis(),\n      lt: jest.fn().mockReturnThis(),\n      lte: jest.fn().mockReturnThis(),\n      like: jest.fn().mockReturnThis(),\n      ilike: jest.fn().mockReturnThis(),\n      in: jest.fn().mockReturnThis(),\n      is: jest.fn().mockReturnThis(),\n      contains: jest.fn().mockReturnThis(),\n      containedBy: jest.fn().mockReturnThis(),\n      filter: jest.fn().mockReturnThis(),\n      not: jest.fn().mockReturnThis(),\n      or: jest.fn().mockReturnThis(),\n      order: jest.fn().mockReturnThis(),\n      limit: jest.fn().mockReturnThis(),\n      range: jest.fn().mockReturnThis(),\n      single: jest.fn().mockResolvedValue({ data: null, error: null }),\n      maybeSingle: jest.fn().mockResolvedValue({ data: null, error: null }),\n    })),\n    auth: {\n      getUser: jest.fn().mockResolvedValue({\n        data: { user: null },\n        error: null,\n      }),\n      getSession: jest.fn().mockResolvedValue({\n        data: { session: null },\n        error: null,\n      }),\n      signIn: jest.fn().mockResolvedValue({\n        data: { user: null, session: null },\n        error: null,\n      }),\n      signOut: jest.fn().mockResolvedValue({ error: null }),\n      signUp: jest.fn().mockResolvedValue({\n        data: { user: null, session: null },\n        error: null,\n      }),\n    },\n    rpc: jest.fn().mockResolvedValue({ data: null, error: null }),\n    storage: {\n      from: jest.fn(() => ({\n        upload: jest.fn().mockResolvedValue({ data: { path: 'test-path' }, error: null }),\n        download: jest.fn().mockResolvedValue({ data: new Blob(), error: null }),\n        remove: jest.fn().mockResolvedValue({ data: null, error: null }),\n        list: jest.fn().mockResolvedValue({ data: [], error: null }),\n        getPublicUrl: jest.fn().mockReturnValue({\n          data: { publicUrl: 'https://test.com/file' },\n        }),\n      })),\n    },\n  }\n\n  return { ...mockClient, ...overrides }\n}\n\n// =============================================================================\n// Mock Data Factories\n// =============================================================================\n\n/**\n * Creates a mock user/profile object (aligned with actual database schema)\n */\nexport function createMockUser(overrides?: Partial<Profile>): Profile {\n  const id = overrides?.id || uuidv4()\n  return {\n    id,\n    organization_id: overrides?.organization_id || uuidv4(),\n    email: overrides?.email || `user-${id.slice(0, 8)}@test.com`,\n    full_name: overrides?.full_name || 'Test User',\n    avatar_url: overrides?.avatar_url || null,\n    role: overrides?.role || 'agent',\n    is_active: overrides?.is_active !== undefined ? overrides.is_active : true,\n    is_super_admin: overrides?.is_super_admin !== undefined ? overrides.is_super_admin : false,\n    last_seen_at: overrides?.last_seen_at || new Date().toISOString(),\n    mfa_enabled: overrides?.mfa_enabled || null,\n    mfa_secret: overrides?.mfa_secret || null,\n    mfa_backup_codes: overrides?.mfa_backup_codes || null,\n    mfa_enrolled_at: overrides?.mfa_enrolled_at || null,\n    created_at: overrides?.created_at || new Date().toISOString(),\n    updated_at: overrides?.updated_at || new Date().toISOString(),\n    organization: null,\n  }\n}\n\n/**\n * Creates a mock organization object (aligned with actual database schema)\n */\nexport function createMockOrganization(overrides?: Partial<Organization>): Organization {\n  const id = overrides?.id || uuidv4()\n  return {\n    id,\n    name: overrides?.name || `Test Organization ${id.slice(0, 8)}`,\n    slug: overrides?.slug || `org-${id.slice(0, 8)}`,\n    whatsapp_business_account_id: overrides?.whatsapp_business_account_id || 'test-business-account',\n    whatsapp_phone_number_id: overrides?.whatsapp_phone_number_id || 'test-phone-number',\n    subscription_status: overrides?.subscription_status || 'active',\n    subscription_tier: overrides?.subscription_tier || 'professional',\n    status: overrides?.status || 'active',\n    stripe_customer_id: overrides?.stripe_customer_id || `cus_test_${id.slice(0, 8)}`,\n    stripe_subscription_id: overrides?.stripe_subscription_id || `sub_test_${id.slice(0, 8)}`,\n    trial_ends_at: overrides?.trial_ends_at || null,\n    billing_email: overrides?.billing_email || null,\n    timezone: overrides?.timezone || 'UTC',\n    locale: overrides?.locale || 'en',\n    suspended_at: overrides?.suspended_at || null,\n    suspended_by: overrides?.suspended_by || null,\n    suspension_reason: overrides?.suspension_reason || null,\n    created_at: overrides?.created_at || new Date().toISOString(),\n    updated_at: overrides?.updated_at || new Date().toISOString(),\n  }\n}\n\n/**\n * Creates a mock contact object (aligned with actual database schema)\n */\nexport function createMockContact(overrides?: Partial<Contact>): Contact {\n  const id = overrides?.id || uuidv4()\n  return {\n    id,\n    organization_id: overrides?.organization_id || uuidv4(),\n    whatsapp_id: overrides?.whatsapp_id || `wa-${id.slice(0, 8)}`,\n    phone_number: overrides?.phone_number || `+1555${Math.floor(1000000 + Math.random() * 9000000)}`,\n    name: overrides?.name || `Test Contact ${id.slice(0, 8)}`,\n    profile_picture_url: overrides?.profile_picture_url || null,\n    tags: overrides?.tags || [],\n    notes: overrides?.notes || null,\n    is_blocked: overrides?.is_blocked !== undefined ? overrides.is_blocked : false,\n    last_message_at: overrides?.last_message_at || new Date().toISOString(),\n    created_at: overrides?.created_at || new Date().toISOString(),\n    updated_at: overrides?.updated_at || new Date().toISOString(),\n  }\n}\n\n/**\n * Creates a mock conversation object (aligned with actual database schema)\n */\nexport function createMockConversation(overrides?: Partial<Conversation>): Conversation {\n  const id = overrides?.id || uuidv4()\n  return {\n    id,\n    organization_id: overrides?.organization_id || uuidv4(),\n    contact_id: overrides?.contact_id || uuidv4(),\n    assigned_to: overrides?.assigned_to || null,\n    status: overrides?.status || 'open',\n    priority: overrides?.priority || 'medium',\n    subject: overrides?.subject || null,\n    last_message_at: overrides?.last_message_at || new Date().toISOString(),\n    created_at: overrides?.created_at || new Date().toISOString(),\n    updated_at: overrides?.updated_at || new Date().toISOString(),\n  }\n}\n\n/**\n * Creates a mock message object (aligned with actual database schema)\n */\nexport function createMockMessage(overrides?: Partial<Message>): Message {\n  const id = overrides?.id || uuidv4()\n  return {\n    id,\n    conversation_id: overrides?.conversation_id || uuidv4(),\n    whatsapp_message_id: overrides?.whatsapp_message_id || `wamid_test_${id.slice(0, 8)}`,\n    sender_type: overrides?.sender_type || 'contact',\n    sender_id: overrides?.sender_id || null,\n    content: overrides?.content || 'Test message content',\n    message_type: overrides?.message_type || 'text',\n    media_url: overrides?.media_url || null,\n    media_mime_type: overrides?.media_mime_type || null,\n    is_read: overrides?.is_read !== undefined ? overrides.is_read : false,\n    delivered_at: overrides?.delivered_at || new Date().toISOString(),\n    read_at: overrides?.read_at || null,\n    created_at: overrides?.created_at || new Date().toISOString(),\n  }\n}\n\n// TODO WEEK 5+: Uncomment when MessageTemplate and AutomationRule types are added to database.ts\n/**\n * Creates a mock message template object\n */\n// export function createMockTemplate(overrides?: Partial<MessageTemplate>): MessageTemplate {\n//   const id = overrides?.id || uuidv4()\n//   return {\n//     id,\n//     organization_id: overrides?.organization_id || uuidv4(),\n//     name: overrides?.name || `Template ${id.slice(0, 8)}`,\n//     content: overrides?.content || 'Hello {{name}}, this is a test template.',\n//     category: overrides?.category || 'marketing',\n//     language: overrides?.language || 'en',\n//     status: overrides?.status || 'approved',\n//     variables: overrides?.variables || ['name'],\n//     components: overrides?.components || [],\n//     whatsapp_template_id: overrides?.whatsapp_template_id || null,\n//     created_by: overrides?.created_by || uuidv4(),\n//     created_at: overrides?.created_at || new Date().toISOString(),\n//     updated_at: overrides?.updated_at || new Date().toISOString(),\n//   }\n// }\n\n/**\n * Creates a mock automation rule object\n */\n// export function createMockAutomationRule(overrides?: Partial<AutomationRule>): AutomationRule {\n//   const id = overrides?.id || uuidv4()\n//   return {\n//     id,\n//     organization_id: overrides?.organization_id || uuidv4(),\n//     name: overrides?.name || `Automation Rule ${id.slice(0, 8)}`,\n//     description: overrides?.description || 'Test automation rule',\n//     trigger_type: overrides?.trigger_type || 'message_received',\n//     trigger_conditions: overrides?.trigger_conditions || {\n//       conditions: [\n//         {\n//           field: 'message_content',\n//           operator: 'contains',\n//           value: 'help',\n//         },\n//       ],\n//     },\n//     actions: overrides?.actions || [\n//       {\n//         type: 'send_template',\n//         template_id: uuidv4(),\n//       },\n//     ],\n//     is_active: overrides?.is_active !== undefined ? overrides.is_active : true,\n//     priority: overrides?.priority || 1,\n//     created_by: overrides?.created_by || uuidv4(),\n//     created_at: overrides?.created_at || new Date().toISOString(),\n//     updated_at: overrides?.updated_at || new Date().toISOString(),\n//   }\n// }\n\n// =============================================================================\n// Test Data Generators\n// =============================================================================\n\n/**\n * Generates multiple mock users\n */\nexport function generateMockUsers(count: number, overrides?: Partial<Profile>): Profile[] {\n  return Array.from({ length: count }, () => createMockUser(overrides))\n}\n\n/**\n * Generates multiple mock organizations\n */\nexport function generateMockOrganizations(count: number, overrides?: Partial<Organization>): Organization[] {\n  return Array.from({ length: count }, () => createMockOrganization(overrides))\n}\n\n/**\n * Generates multiple mock contacts\n */\nexport function generateMockContacts(count: number, overrides?: Partial<Contact>): Contact[] {\n  return Array.from({ length: count }, () => createMockContact(overrides))\n}\n\n/**\n * Generates multiple mock conversations\n */\nexport function generateMockConversations(count: number, overrides?: Partial<Conversation>): Conversation[] {\n  return Array.from({ length: count }, () => createMockConversation(overrides))\n}\n\n/**\n * Generates multiple mock messages\n */\nexport function generateMockMessages(count: number, overrides?: Partial<Message>): Message[] {\n  return Array.from({ length: count }, () => createMockMessage(overrides))\n}\n\n// =============================================================================\n// Utility Functions\n// =============================================================================\n\n/**\n * Wait for async operations to complete\n */\nexport const waitForAsync = (): Promise<void> =>\n  new Promise((resolve) => setTimeout(resolve, 0))\n\n/**\n * Wait for a specific amount of time\n */\nexport const wait = (ms: number): Promise<void> =>\n  new Promise((resolve) => setTimeout(resolve, ms))\n\n/**\n * Flush all pending promises\n */\nexport const flushPromises = (): Promise<void> =>\n  new Promise((resolve) => setImmediate(resolve))\n\n/**\n * Create a mock Date that can be controlled in tests\n */\nexport function mockDate(date: Date | string): () => void {\n  const mockDate = new Date(date)\n  const originalDate = Date\n  const DateConstructor = function (this: any, ...args: any[]) {\n    if (args.length === 0) {\n      return new originalDate(mockDate)\n    }\n    return new originalDate(...args)\n  }\n  DateConstructor.now = () => mockDate.getTime()\n  DateConstructor.UTC = originalDate.UTC\n  DateConstructor.parse = originalDate.parse\n  global.Date = DateConstructor as any\n\n  return () => {\n    global.Date = originalDate\n  }\n}\n\n/**\n * Setup and teardown helpers for tests\n */\nexport const testLifecycle = {\n  beforeEach: (fn: () => void | Promise<void>) => beforeEach(fn),\n  afterEach: (fn: () => void | Promise<void>) => afterEach(fn),\n  beforeAll: (fn: () => void | Promise<void>) => beforeAll(fn),\n  afterAll: (fn: () => void | Promise<void>) => afterAll(fn),\n}\n\n/**\n * Assert that a function throws an error\n */\nexport async function expectToThrow(\n  fn: () => any | Promise<any>,\n  errorMessage?: string | RegExp\n): Promise<void> {\n  let thrownError: Error | undefined\n\n  try {\n    await fn()\n  } catch (error) {\n    thrownError = error as Error\n  }\n\n  expect(thrownError).toBeDefined()\n  if (errorMessage) {\n    if (typeof errorMessage === 'string') {\n      expect(thrownError?.message).toContain(errorMessage)\n    } else {\n      expect(thrownError?.message).toMatch(errorMessage)\n    }\n  }\n}\n\n/**\n * Mock console methods to suppress expected output\n */\nexport function suppressConsole(): () => void {\n  const originalLog = console.log\n  const originalWarn = console.warn\n  const originalError = console.error\n\n  console.log = jest.fn()\n  console.warn = jest.fn()\n  console.error = jest.fn()\n\n  return () => {\n    console.log = originalLog\n    console.warn = originalWarn\n    console.error = originalError\n  }\n}\n\n// =============================================================================\n// Export All Helpers\n// =============================================================================\n\nexport default {\n  createMockSupabaseClient,\n  createMockUser,\n  createMockOrganization,\n  createMockContact,\n  createMockConversation,\n  createMockMessage,\n  // TODO WEEK 5+: Re-enable when MessageTemplate and AutomationRule are added to database\n  // createMockTemplate,\n  // createMockAutomationRule,\n  generateMockUsers,\n  generateMockOrganizations,\n  generateMockContacts,\n  generateMockConversations,\n  generateMockMessages,\n  waitForAsync,\n  wait,\n  flushPromises,\n  mockDate,\n  testLifecycle,\n  expectToThrow,\n  suppressConsole,\n}\n"],"names":["createMockContact","createMockConversation","createMockMessage","createMockOrganization","createMockSupabaseClient","createMockUser","expectToThrow","flushPromises","generateMockContacts","generateMockConversations","generateMockMessages","generateMockOrganizations","generateMockUsers","mockDate","suppressConsole","testLifecycle","wait","waitForAsync","overrides","mockClient","from","jest","fn","table","select","mockReturnThis","insert","update","delete","upsert","eq","neq","gt","gte","lt","lte","like","ilike","in","is","contains","containedBy","filter","not","or","order","limit","range","single","mockResolvedValue","data","error","maybeSingle","auth","getUser","user","getSession","session","signIn","signOut","signUp","rpc","storage","upload","path","download","Blob","remove","list","getPublicUrl","mockReturnValue","publicUrl","id","uuidv4","organization_id","email","slice","full_name","avatar_url","role","is_active","undefined","is_super_admin","last_seen_at","Date","toISOString","mfa_enabled","mfa_secret","mfa_backup_codes","mfa_enrolled_at","created_at","updated_at","organization","name","slug","whatsapp_business_account_id","whatsapp_phone_number_id","subscription_status","subscription_tier","status","stripe_customer_id","stripe_subscription_id","trial_ends_at","billing_email","timezone","locale","suspended_at","suspended_by","suspension_reason","whatsapp_id","phone_number","Math","floor","random","profile_picture_url","tags","notes","is_blocked","last_message_at","contact_id","assigned_to","priority","subject","conversation_id","whatsapp_message_id","sender_type","sender_id","content","message_type","media_url","media_mime_type","is_read","delivered_at","read_at","count","Array","length","Promise","resolve","setTimeout","ms","setImmediate","date","originalDate","DateConstructor","args","now","getTime","UTC","parse","global","beforeEach","afterEach","beforeAll","afterAll","errorMessage","thrownError","expect","toBeDefined","message","toContain","toMatch","originalLog","console","log","originalWarn","warn","originalError"],"mappings":"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"}