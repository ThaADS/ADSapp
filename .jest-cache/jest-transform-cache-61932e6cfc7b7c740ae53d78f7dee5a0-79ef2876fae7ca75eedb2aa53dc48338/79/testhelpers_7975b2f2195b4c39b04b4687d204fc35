62d93e0cfceab54ea4007ac8d7afa3d6
/**
 * Test Helpers - Comprehensive Test Utilities
 *
 * Provides utility functions for creating mock data, test fixtures,
 * and common testing patterns used across the test suite.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get createMockContact () {
        return createMockContact;
    },
    get createMockConversation () {
        return createMockConversation;
    },
    get createMockMessage () {
        return createMockMessage;
    },
    get createMockOrganization () {
        return createMockOrganization;
    },
    get createMockSupabaseClient () {
        return createMockSupabaseClient;
    },
    get createMockUser () {
        return createMockUser;
    },
    get // =============================================================================
    // Export All Helpers
    // =============================================================================
    default () {
        return _default;
    },
    get expectToThrow () {
        return expectToThrow;
    },
    get flushPromises () {
        return flushPromises;
    },
    get generateMockContacts () {
        return generateMockContacts;
    },
    get generateMockConversations () {
        return generateMockConversations;
    },
    get generateMockMessages () {
        return generateMockMessages;
    },
    get generateMockOrganizations () {
        return generateMockOrganizations;
    },
    get generateMockUsers () {
        return generateMockUsers;
    },
    get mockDate () {
        return mockDate;
    },
    get suppressConsole () {
        return suppressConsole;
    },
    get testLifecycle () {
        return testLifecycle;
    },
    get wait () {
        return wait;
    },
    get waitForAsync () {
        return waitForAsync;
    }
});
const _uuid = require("uuid");
function createMockSupabaseClient(overrides) {
    const mockClient = {
        from: jest.fn((table)=>({
                select: jest.fn().mockReturnThis(),
                insert: jest.fn().mockReturnThis(),
                update: jest.fn().mockReturnThis(),
                delete: jest.fn().mockReturnThis(),
                upsert: jest.fn().mockReturnThis(),
                eq: jest.fn().mockReturnThis(),
                neq: jest.fn().mockReturnThis(),
                gt: jest.fn().mockReturnThis(),
                gte: jest.fn().mockReturnThis(),
                lt: jest.fn().mockReturnThis(),
                lte: jest.fn().mockReturnThis(),
                like: jest.fn().mockReturnThis(),
                ilike: jest.fn().mockReturnThis(),
                in: jest.fn().mockReturnThis(),
                is: jest.fn().mockReturnThis(),
                contains: jest.fn().mockReturnThis(),
                containedBy: jest.fn().mockReturnThis(),
                filter: jest.fn().mockReturnThis(),
                not: jest.fn().mockReturnThis(),
                or: jest.fn().mockReturnThis(),
                order: jest.fn().mockReturnThis(),
                limit: jest.fn().mockReturnThis(),
                range: jest.fn().mockReturnThis(),
                single: jest.fn().mockResolvedValue({
                    data: null,
                    error: null
                }),
                maybeSingle: jest.fn().mockResolvedValue({
                    data: null,
                    error: null
                })
            })),
        auth: {
            getUser: jest.fn().mockResolvedValue({
                data: {
                    user: null
                },
                error: null
            }),
            getSession: jest.fn().mockResolvedValue({
                data: {
                    session: null
                },
                error: null
            }),
            signIn: jest.fn().mockResolvedValue({
                data: {
                    user: null,
                    session: null
                },
                error: null
            }),
            signOut: jest.fn().mockResolvedValue({
                error: null
            }),
            signUp: jest.fn().mockResolvedValue({
                data: {
                    user: null,
                    session: null
                },
                error: null
            })
        },
        rpc: jest.fn().mockResolvedValue({
            data: null,
            error: null
        }),
        storage: {
            from: jest.fn(()=>({
                    upload: jest.fn().mockResolvedValue({
                        data: {
                            path: 'test-path'
                        },
                        error: null
                    }),
                    download: jest.fn().mockResolvedValue({
                        data: new Blob(),
                        error: null
                    }),
                    remove: jest.fn().mockResolvedValue({
                        data: null,
                        error: null
                    }),
                    list: jest.fn().mockResolvedValue({
                        data: [],
                        error: null
                    }),
                    getPublicUrl: jest.fn().mockReturnValue({
                        data: {
                            publicUrl: 'https://test.com/file'
                        }
                    })
                }))
        }
    };
    return {
        ...mockClient,
        ...overrides
    };
}
function createMockUser(overrides) {
    const id = overrides?.id || (0, _uuid.v4)();
    return {
        id,
        organization_id: overrides?.organization_id || (0, _uuid.v4)(),
        email: overrides?.email || `user-${id.slice(0, 8)}@test.com`,
        full_name: overrides?.full_name || 'Test User',
        avatar_url: overrides?.avatar_url || null,
        role: overrides?.role || 'agent',
        is_active: overrides?.is_active !== undefined ? overrides.is_active : true,
        is_super_admin: overrides?.is_super_admin !== undefined ? overrides.is_super_admin : false,
        last_seen_at: overrides?.last_seen_at || new Date().toISOString(),
        mfa_enabled: overrides?.mfa_enabled || null,
        mfa_secret: overrides?.mfa_secret || null,
        mfa_backup_codes: overrides?.mfa_backup_codes || null,
        mfa_enrolled_at: overrides?.mfa_enrolled_at || null,
        created_at: overrides?.created_at || new Date().toISOString(),
        updated_at: overrides?.updated_at || new Date().toISOString(),
        organization: null
    };
}
function createMockOrganization(overrides) {
    const id = overrides?.id || (0, _uuid.v4)();
    return {
        id,
        name: overrides?.name || `Test Organization ${id.slice(0, 8)}`,
        slug: overrides?.slug || `org-${id.slice(0, 8)}`,
        whatsapp_business_account_id: overrides?.whatsapp_business_account_id || 'test-business-account',
        whatsapp_phone_number_id: overrides?.whatsapp_phone_number_id || 'test-phone-number',
        subscription_status: overrides?.subscription_status || 'active',
        subscription_tier: overrides?.subscription_tier || 'professional',
        status: overrides?.status || 'active',
        stripe_customer_id: overrides?.stripe_customer_id || `cus_test_${id.slice(0, 8)}`,
        stripe_subscription_id: overrides?.stripe_subscription_id || `sub_test_${id.slice(0, 8)}`,
        trial_ends_at: overrides?.trial_ends_at || null,
        billing_email: overrides?.billing_email || null,
        timezone: overrides?.timezone || 'UTC',
        locale: overrides?.locale || 'en',
        suspended_at: overrides?.suspended_at || null,
        suspended_by: overrides?.suspended_by || null,
        suspension_reason: overrides?.suspension_reason || null,
        created_at: overrides?.created_at || new Date().toISOString(),
        updated_at: overrides?.updated_at || new Date().toISOString()
    };
}
function createMockContact(overrides) {
    const id = overrides?.id || (0, _uuid.v4)();
    return {
        id,
        organization_id: overrides?.organization_id || (0, _uuid.v4)(),
        whatsapp_id: overrides?.whatsapp_id || `wa-${id.slice(0, 8)}`,
        phone_number: overrides?.phone_number || `+1555${Math.floor(1000000 + Math.random() * 9000000)}`,
        name: overrides?.name || `Test Contact ${id.slice(0, 8)}`,
        profile_picture_url: overrides?.profile_picture_url || null,
        tags: overrides?.tags || [],
        notes: overrides?.notes || null,
        is_blocked: overrides?.is_blocked !== undefined ? overrides.is_blocked : false,
        last_message_at: overrides?.last_message_at || new Date().toISOString(),
        created_at: overrides?.created_at || new Date().toISOString(),
        updated_at: overrides?.updated_at || new Date().toISOString()
    };
}
function createMockConversation(overrides) {
    const id = overrides?.id || (0, _uuid.v4)();
    return {
        id,
        organization_id: overrides?.organization_id || (0, _uuid.v4)(),
        contact_id: overrides?.contact_id || (0, _uuid.v4)(),
        assigned_to: overrides?.assigned_to || null,
        status: overrides?.status || 'open',
        priority: overrides?.priority || 'medium',
        subject: overrides?.subject || null,
        last_message_at: overrides?.last_message_at || new Date().toISOString(),
        created_at: overrides?.created_at || new Date().toISOString(),
        updated_at: overrides?.updated_at || new Date().toISOString()
    };
}
function createMockMessage(overrides) {
    const id = overrides?.id || (0, _uuid.v4)();
    return {
        id,
        conversation_id: overrides?.conversation_id || (0, _uuid.v4)(),
        whatsapp_message_id: overrides?.whatsapp_message_id || `wamid_test_${id.slice(0, 8)}`,
        sender_type: overrides?.sender_type || 'contact',
        sender_id: overrides?.sender_id || null,
        content: overrides?.content || 'Test message content',
        message_type: overrides?.message_type || 'text',
        media_url: overrides?.media_url || null,
        media_mime_type: overrides?.media_mime_type || null,
        is_read: overrides?.is_read !== undefined ? overrides.is_read : false,
        delivered_at: overrides?.delivered_at || new Date().toISOString(),
        read_at: overrides?.read_at || null,
        created_at: overrides?.created_at || new Date().toISOString()
    };
}
function generateMockUsers(count, overrides) {
    return Array.from({
        length: count
    }, ()=>createMockUser(overrides));
}
function generateMockOrganizations(count, overrides) {
    return Array.from({
        length: count
    }, ()=>createMockOrganization(overrides));
}
function generateMockContacts(count, overrides) {
    return Array.from({
        length: count
    }, ()=>createMockContact(overrides));
}
function generateMockConversations(count, overrides) {
    return Array.from({
        length: count
    }, ()=>createMockConversation(overrides));
}
function generateMockMessages(count, overrides) {
    return Array.from({
        length: count
    }, ()=>createMockMessage(overrides));
}
const waitForAsync = ()=>new Promise((resolve)=>setTimeout(resolve, 0));
const wait = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));
const flushPromises = ()=>new Promise((resolve)=>setImmediate(resolve));
function mockDate(date) {
    const mockDate = new Date(date);
    const originalDate = Date;
    const DateConstructor = function(...args) {
        if (args.length === 0) {
            return new originalDate(mockDate);
        }
        return new originalDate(...args);
    };
    DateConstructor.now = ()=>mockDate.getTime();
    DateConstructor.UTC = originalDate.UTC;
    DateConstructor.parse = originalDate.parse;
    global.Date = DateConstructor;
    return ()=>{
        global.Date = originalDate;
    };
}
const testLifecycle = {
    beforeEach: (fn)=>beforeEach(fn),
    afterEach: (fn)=>afterEach(fn),
    beforeAll: (fn)=>beforeAll(fn),
    afterAll: (fn)=>afterAll(fn)
};
async function expectToThrow(fn, errorMessage) {
    let thrownError;
    try {
        await fn();
    } catch (error) {
        thrownError = error;
    }
    expect(thrownError).toBeDefined();
    if (errorMessage) {
        if (typeof errorMessage === 'string') {
            expect(thrownError?.message).toContain(errorMessage);
        } else {
            expect(thrownError?.message).toMatch(errorMessage);
        }
    }
}
function suppressConsole() {
    const originalLog = console.log;
    const originalWarn = console.warn;
    const originalError = console.error;
    console.log = jest.fn();
    console.warn = jest.fn();
    console.error = jest.fn();
    return ()=>{
        console.log = originalLog;
        console.warn = originalWarn;
        console.error = originalError;
    };
}
const _default = {
    createMockSupabaseClient,
    createMockUser,
    createMockOrganization,
    createMockContact,
    createMockConversation,
    createMockMessage,
    // TODO WEEK 5+: Re-enable when MessageTemplate and AutomationRule are added to database
    // createMockTemplate,
    // createMockAutomationRule,
    generateMockUsers,
    generateMockOrganizations,
    generateMockContacts,
    generateMockConversations,
    generateMockMessages,
    waitForAsync,
    wait,
    flushPromises,
    mockDate,
    testLifecycle,
    expectToThrow,
    suppressConsole
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxBaSBQcm9qZWN0ZW5cXEFEU2FwcFxcdGVzdHNcXHV0aWxzXFx0ZXN0LWhlbHBlcnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZXN0IEhlbHBlcnMgLSBDb21wcmVoZW5zaXZlIFRlc3QgVXRpbGl0aWVzXG4gKlxuICogUHJvdmlkZXMgdXRpbGl0eSBmdW5jdGlvbnMgZm9yIGNyZWF0aW5nIG1vY2sgZGF0YSwgdGVzdCBmaXh0dXJlcyxcbiAqIGFuZCBjb21tb24gdGVzdGluZyBwYXR0ZXJucyB1c2VkIGFjcm9zcyB0aGUgdGVzdCBzdWl0ZS5cbiAqL1xuXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJ1xuaW1wb3J0IHR5cGUge1xuICBPcmdhbml6YXRpb24sXG4gIFByb2ZpbGUsXG4gIENvbnRhY3QsXG4gIENvbnZlcnNhdGlvbixcbiAgTWVzc2FnZSxcbn0gZnJvbSAnQC90eXBlcy9kYXRhYmFzZSdcblxuLy8gVE9ETyBXRUVLIDUrOiBDcmVhdGUgTWVzc2FnZVRlbXBsYXRlIGFuZCBBdXRvbWF0aW9uUnVsZSB0eXBlcyBpbiBkYXRhYmFzZS50c1xuLy8gRm9yIG5vdywgdGhlc2UgYXJlIGNvbW1lbnRlZCBvdXQgYXMgdGhleSBkb24ndCBleGlzdCBpbiB0aGUgY3VycmVudCBzY2hlbWFcbi8vIHR5cGUgTWVzc2FnZVRlbXBsYXRlID0gYW55O1xuLy8gdHlwZSBBdXRvbWF0aW9uUnVsZSA9IGFueTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFR5cGUgRGVmaW5pdGlvbnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCB0eXBlIFBhcnRpYWxFeGNlcHQ8VCwgSyBleHRlbmRzIGtleW9mIFQ+ID0gUGFydGlhbDxUPiAmIFBpY2s8VCwgSz5cblxuZXhwb3J0IGludGVyZmFjZSBNb2NrU3VwYWJhc2VDbGllbnQge1xuICBmcm9tOiBqZXN0Lk1vY2tcbiAgYXV0aDoge1xuICAgIGdldFVzZXI6IGplc3QuTW9ja1xuICAgIGdldFNlc3Npb246IGplc3QuTW9ja1xuICAgIHNpZ25JbjogamVzdC5Nb2NrXG4gICAgc2lnbk91dDogamVzdC5Nb2NrXG4gICAgc2lnblVwOiBqZXN0Lk1vY2tcbiAgfVxuICBycGM6IGplc3QuTW9ja1xuICBzdG9yYWdlOiB7XG4gICAgZnJvbTogamVzdC5Nb2NrXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFN1cGFiYXNlIENsaWVudCBNb2NrIEZhY3Rvcnlcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1vY2sgU3VwYWJhc2UgY2xpZW50IHdpdGggamVzdCBtb2NrIGZ1bmN0aW9uc1xuICogQHBhcmFtIG92ZXJyaWRlcyAtIE9wdGlvbmFsIG92ZXJyaWRlcyBmb3Igc3BlY2lmaWMgbWV0aG9kc1xuICogQHJldHVybnMgTW9ja2VkIFN1cGFiYXNlIGNsaWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50KG92ZXJyaWRlcz86IFBhcnRpYWw8TW9ja1N1cGFiYXNlQ2xpZW50Pik6IE1vY2tTdXBhYmFzZUNsaWVudCB7XG4gIGNvbnN0IG1vY2tDbGllbnQ6IE1vY2tTdXBhYmFzZUNsaWVudCA9IHtcbiAgICBmcm9tOiBqZXN0LmZuKCh0YWJsZTogc3RyaW5nKSA9PiAoe1xuICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGluc2VydDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgZGVsZXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIHVwc2VydDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICBuZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgZ3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgZ3RlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGx0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGx0ZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICBsaWtlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGlsaWtlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGluOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGlzOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGNvbnRhaW5zOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGNvbnRhaW5lZEJ5OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGZpbHRlcjogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICBub3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgb3I6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgb3JkZXI6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgbGltaXQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgcmFuZ2U6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBudWxsLCBlcnJvcjogbnVsbCB9KSxcbiAgICAgIG1heWJlU2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBudWxsLCBlcnJvcjogbnVsbCB9KSxcbiAgICB9KSksXG4gICAgYXV0aDoge1xuICAgICAgZ2V0VXNlcjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1c2VyOiBudWxsIH0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSksXG4gICAgICBnZXRTZXNzaW9uOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IHNlc3Npb246IG51bGwgfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KSxcbiAgICAgIHNpZ25JbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1c2VyOiBudWxsLCBzZXNzaW9uOiBudWxsIH0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSksXG4gICAgICBzaWduT3V0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBlcnJvcjogbnVsbCB9KSxcbiAgICAgIHNpZ25VcDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1c2VyOiBudWxsLCBzZXNzaW9uOiBudWxsIH0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSksXG4gICAgfSxcbiAgICBycGM6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG51bGwsIGVycm9yOiBudWxsIH0pLFxuICAgIHN0b3JhZ2U6IHtcbiAgICAgIGZyb206IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgdXBsb2FkOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiB7IHBhdGg6ICd0ZXN0LXBhdGgnIH0sIGVycm9yOiBudWxsIH0pLFxuICAgICAgICBkb3dubG9hZDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbmV3IEJsb2IoKSwgZXJyb3I6IG51bGwgfSksXG4gICAgICAgIHJlbW92ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbnVsbCwgZXJyb3I6IG51bGwgfSksXG4gICAgICAgIGxpc3Q6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IFtdLCBlcnJvcjogbnVsbCB9KSxcbiAgICAgICAgZ2V0UHVibGljVXJsOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBkYXRhOiB7IHB1YmxpY1VybDogJ2h0dHBzOi8vdGVzdC5jb20vZmlsZScgfSxcbiAgICAgICAgfSksXG4gICAgICB9KSksXG4gICAgfSxcbiAgfVxuXG4gIHJldHVybiB7IC4uLm1vY2tDbGllbnQsIC4uLm92ZXJyaWRlcyB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBNb2NrIERhdGEgRmFjdG9yaWVzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIENyZWF0ZXMgYSBtb2NrIHVzZXIvcHJvZmlsZSBvYmplY3QgKGFsaWduZWQgd2l0aCBhY3R1YWwgZGF0YWJhc2Ugc2NoZW1hKVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTW9ja1VzZXIob3ZlcnJpZGVzPzogUGFydGlhbDxQcm9maWxlPik6IFByb2ZpbGUge1xuICBjb25zdCBpZCA9IG92ZXJyaWRlcz8uaWQgfHwgdXVpZHY0KClcbiAgcmV0dXJuIHtcbiAgICBpZCxcbiAgICBvcmdhbml6YXRpb25faWQ6IG92ZXJyaWRlcz8ub3JnYW5pemF0aW9uX2lkIHx8IHV1aWR2NCgpLFxuICAgIGVtYWlsOiBvdmVycmlkZXM/LmVtYWlsIHx8IGB1c2VyLSR7aWQuc2xpY2UoMCwgOCl9QHRlc3QuY29tYCxcbiAgICBmdWxsX25hbWU6IG92ZXJyaWRlcz8uZnVsbF9uYW1lIHx8ICdUZXN0IFVzZXInLFxuICAgIGF2YXRhcl91cmw6IG92ZXJyaWRlcz8uYXZhdGFyX3VybCB8fCBudWxsLFxuICAgIHJvbGU6IG92ZXJyaWRlcz8ucm9sZSB8fCAnYWdlbnQnLFxuICAgIGlzX2FjdGl2ZTogb3ZlcnJpZGVzPy5pc19hY3RpdmUgIT09IHVuZGVmaW5lZCA/IG92ZXJyaWRlcy5pc19hY3RpdmUgOiB0cnVlLFxuICAgIGlzX3N1cGVyX2FkbWluOiBvdmVycmlkZXM/LmlzX3N1cGVyX2FkbWluICE9PSB1bmRlZmluZWQgPyBvdmVycmlkZXMuaXNfc3VwZXJfYWRtaW4gOiBmYWxzZSxcbiAgICBsYXN0X3NlZW5fYXQ6IG92ZXJyaWRlcz8ubGFzdF9zZWVuX2F0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICBtZmFfZW5hYmxlZDogb3ZlcnJpZGVzPy5tZmFfZW5hYmxlZCB8fCBudWxsLFxuICAgIG1mYV9zZWNyZXQ6IG92ZXJyaWRlcz8ubWZhX3NlY3JldCB8fCBudWxsLFxuICAgIG1mYV9iYWNrdXBfY29kZXM6IG92ZXJyaWRlcz8ubWZhX2JhY2t1cF9jb2RlcyB8fCBudWxsLFxuICAgIG1mYV9lbnJvbGxlZF9hdDogb3ZlcnJpZGVzPy5tZmFfZW5yb2xsZWRfYXQgfHwgbnVsbCxcbiAgICBjcmVhdGVkX2F0OiBvdmVycmlkZXM/LmNyZWF0ZWRfYXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHVwZGF0ZWRfYXQ6IG92ZXJyaWRlcz8udXBkYXRlZF9hdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgb3JnYW5pemF0aW9uOiBudWxsLFxuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1vY2sgb3JnYW5pemF0aW9uIG9iamVjdCAoYWxpZ25lZCB3aXRoIGFjdHVhbCBkYXRhYmFzZSBzY2hlbWEpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNb2NrT3JnYW5pemF0aW9uKG92ZXJyaWRlcz86IFBhcnRpYWw8T3JnYW5pemF0aW9uPik6IE9yZ2FuaXphdGlvbiB7XG4gIGNvbnN0IGlkID0gb3ZlcnJpZGVzPy5pZCB8fCB1dWlkdjQoKVxuICByZXR1cm4ge1xuICAgIGlkLFxuICAgIG5hbWU6IG92ZXJyaWRlcz8ubmFtZSB8fCBgVGVzdCBPcmdhbml6YXRpb24gJHtpZC5zbGljZSgwLCA4KX1gLFxuICAgIHNsdWc6IG92ZXJyaWRlcz8uc2x1ZyB8fCBgb3JnLSR7aWQuc2xpY2UoMCwgOCl9YCxcbiAgICB3aGF0c2FwcF9idXNpbmVzc19hY2NvdW50X2lkOiBvdmVycmlkZXM/LndoYXRzYXBwX2J1c2luZXNzX2FjY291bnRfaWQgfHwgJ3Rlc3QtYnVzaW5lc3MtYWNjb3VudCcsXG4gICAgd2hhdHNhcHBfcGhvbmVfbnVtYmVyX2lkOiBvdmVycmlkZXM/LndoYXRzYXBwX3Bob25lX251bWJlcl9pZCB8fCAndGVzdC1waG9uZS1udW1iZXInLFxuICAgIHN1YnNjcmlwdGlvbl9zdGF0dXM6IG92ZXJyaWRlcz8uc3Vic2NyaXB0aW9uX3N0YXR1cyB8fCAnYWN0aXZlJyxcbiAgICBzdWJzY3JpcHRpb25fdGllcjogb3ZlcnJpZGVzPy5zdWJzY3JpcHRpb25fdGllciB8fCAncHJvZmVzc2lvbmFsJyxcbiAgICBzdGF0dXM6IG92ZXJyaWRlcz8uc3RhdHVzIHx8ICdhY3RpdmUnLFxuICAgIHN0cmlwZV9jdXN0b21lcl9pZDogb3ZlcnJpZGVzPy5zdHJpcGVfY3VzdG9tZXJfaWQgfHwgYGN1c190ZXN0XyR7aWQuc2xpY2UoMCwgOCl9YCxcbiAgICBzdHJpcGVfc3Vic2NyaXB0aW9uX2lkOiBvdmVycmlkZXM/LnN0cmlwZV9zdWJzY3JpcHRpb25faWQgfHwgYHN1Yl90ZXN0XyR7aWQuc2xpY2UoMCwgOCl9YCxcbiAgICB0cmlhbF9lbmRzX2F0OiBvdmVycmlkZXM/LnRyaWFsX2VuZHNfYXQgfHwgbnVsbCxcbiAgICBiaWxsaW5nX2VtYWlsOiBvdmVycmlkZXM/LmJpbGxpbmdfZW1haWwgfHwgbnVsbCxcbiAgICB0aW1lem9uZTogb3ZlcnJpZGVzPy50aW1lem9uZSB8fCAnVVRDJyxcbiAgICBsb2NhbGU6IG92ZXJyaWRlcz8ubG9jYWxlIHx8ICdlbicsXG4gICAgc3VzcGVuZGVkX2F0OiBvdmVycmlkZXM/LnN1c3BlbmRlZF9hdCB8fCBudWxsLFxuICAgIHN1c3BlbmRlZF9ieTogb3ZlcnJpZGVzPy5zdXNwZW5kZWRfYnkgfHwgbnVsbCxcbiAgICBzdXNwZW5zaW9uX3JlYXNvbjogb3ZlcnJpZGVzPy5zdXNwZW5zaW9uX3JlYXNvbiB8fCBudWxsLFxuICAgIGNyZWF0ZWRfYXQ6IG92ZXJyaWRlcz8uY3JlYXRlZF9hdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdXBkYXRlZF9hdDogb3ZlcnJpZGVzPy51cGRhdGVkX2F0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBtb2NrIGNvbnRhY3Qgb2JqZWN0IChhbGlnbmVkIHdpdGggYWN0dWFsIGRhdGFiYXNlIHNjaGVtYSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1vY2tDb250YWN0KG92ZXJyaWRlcz86IFBhcnRpYWw8Q29udGFjdD4pOiBDb250YWN0IHtcbiAgY29uc3QgaWQgPSBvdmVycmlkZXM/LmlkIHx8IHV1aWR2NCgpXG4gIHJldHVybiB7XG4gICAgaWQsXG4gICAgb3JnYW5pemF0aW9uX2lkOiBvdmVycmlkZXM/Lm9yZ2FuaXphdGlvbl9pZCB8fCB1dWlkdjQoKSxcbiAgICB3aGF0c2FwcF9pZDogb3ZlcnJpZGVzPy53aGF0c2FwcF9pZCB8fCBgd2EtJHtpZC5zbGljZSgwLCA4KX1gLFxuICAgIHBob25lX251bWJlcjogb3ZlcnJpZGVzPy5waG9uZV9udW1iZXIgfHwgYCsxNTU1JHtNYXRoLmZsb29yKDEwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMCl9YCxcbiAgICBuYW1lOiBvdmVycmlkZXM/Lm5hbWUgfHwgYFRlc3QgQ29udGFjdCAke2lkLnNsaWNlKDAsIDgpfWAsXG4gICAgcHJvZmlsZV9waWN0dXJlX3VybDogb3ZlcnJpZGVzPy5wcm9maWxlX3BpY3R1cmVfdXJsIHx8IG51bGwsXG4gICAgdGFnczogb3ZlcnJpZGVzPy50YWdzIHx8IFtdLFxuICAgIG5vdGVzOiBvdmVycmlkZXM/Lm5vdGVzIHx8IG51bGwsXG4gICAgaXNfYmxvY2tlZDogb3ZlcnJpZGVzPy5pc19ibG9ja2VkICE9PSB1bmRlZmluZWQgPyBvdmVycmlkZXMuaXNfYmxvY2tlZCA6IGZhbHNlLFxuICAgIGxhc3RfbWVzc2FnZV9hdDogb3ZlcnJpZGVzPy5sYXN0X21lc3NhZ2VfYXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIGNyZWF0ZWRfYXQ6IG92ZXJyaWRlcz8uY3JlYXRlZF9hdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdXBkYXRlZF9hdDogb3ZlcnJpZGVzPy51cGRhdGVkX2F0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBtb2NrIGNvbnZlcnNhdGlvbiBvYmplY3QgKGFsaWduZWQgd2l0aCBhY3R1YWwgZGF0YWJhc2Ugc2NoZW1hKVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTW9ja0NvbnZlcnNhdGlvbihvdmVycmlkZXM/OiBQYXJ0aWFsPENvbnZlcnNhdGlvbj4pOiBDb252ZXJzYXRpb24ge1xuICBjb25zdCBpZCA9IG92ZXJyaWRlcz8uaWQgfHwgdXVpZHY0KClcbiAgcmV0dXJuIHtcbiAgICBpZCxcbiAgICBvcmdhbml6YXRpb25faWQ6IG92ZXJyaWRlcz8ub3JnYW5pemF0aW9uX2lkIHx8IHV1aWR2NCgpLFxuICAgIGNvbnRhY3RfaWQ6IG92ZXJyaWRlcz8uY29udGFjdF9pZCB8fCB1dWlkdjQoKSxcbiAgICBhc3NpZ25lZF90bzogb3ZlcnJpZGVzPy5hc3NpZ25lZF90byB8fCBudWxsLFxuICAgIHN0YXR1czogb3ZlcnJpZGVzPy5zdGF0dXMgfHwgJ29wZW4nLFxuICAgIHByaW9yaXR5OiBvdmVycmlkZXM/LnByaW9yaXR5IHx8ICdtZWRpdW0nLFxuICAgIHN1YmplY3Q6IG92ZXJyaWRlcz8uc3ViamVjdCB8fCBudWxsLFxuICAgIGxhc3RfbWVzc2FnZV9hdDogb3ZlcnJpZGVzPy5sYXN0X21lc3NhZ2VfYXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIGNyZWF0ZWRfYXQ6IG92ZXJyaWRlcz8uY3JlYXRlZF9hdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdXBkYXRlZF9hdDogb3ZlcnJpZGVzPy51cGRhdGVkX2F0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBtb2NrIG1lc3NhZ2Ugb2JqZWN0IChhbGlnbmVkIHdpdGggYWN0dWFsIGRhdGFiYXNlIHNjaGVtYSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1vY2tNZXNzYWdlKG92ZXJyaWRlcz86IFBhcnRpYWw8TWVzc2FnZT4pOiBNZXNzYWdlIHtcbiAgY29uc3QgaWQgPSBvdmVycmlkZXM/LmlkIHx8IHV1aWR2NCgpXG4gIHJldHVybiB7XG4gICAgaWQsXG4gICAgY29udmVyc2F0aW9uX2lkOiBvdmVycmlkZXM/LmNvbnZlcnNhdGlvbl9pZCB8fCB1dWlkdjQoKSxcbiAgICB3aGF0c2FwcF9tZXNzYWdlX2lkOiBvdmVycmlkZXM/LndoYXRzYXBwX21lc3NhZ2VfaWQgfHwgYHdhbWlkX3Rlc3RfJHtpZC5zbGljZSgwLCA4KX1gLFxuICAgIHNlbmRlcl90eXBlOiBvdmVycmlkZXM/LnNlbmRlcl90eXBlIHx8ICdjb250YWN0JyxcbiAgICBzZW5kZXJfaWQ6IG92ZXJyaWRlcz8uc2VuZGVyX2lkIHx8IG51bGwsXG4gICAgY29udGVudDogb3ZlcnJpZGVzPy5jb250ZW50IHx8ICdUZXN0IG1lc3NhZ2UgY29udGVudCcsXG4gICAgbWVzc2FnZV90eXBlOiBvdmVycmlkZXM/Lm1lc3NhZ2VfdHlwZSB8fCAndGV4dCcsXG4gICAgbWVkaWFfdXJsOiBvdmVycmlkZXM/Lm1lZGlhX3VybCB8fCBudWxsLFxuICAgIG1lZGlhX21pbWVfdHlwZTogb3ZlcnJpZGVzPy5tZWRpYV9taW1lX3R5cGUgfHwgbnVsbCxcbiAgICBpc19yZWFkOiBvdmVycmlkZXM/LmlzX3JlYWQgIT09IHVuZGVmaW5lZCA/IG92ZXJyaWRlcy5pc19yZWFkIDogZmFsc2UsXG4gICAgZGVsaXZlcmVkX2F0OiBvdmVycmlkZXM/LmRlbGl2ZXJlZF9hdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgcmVhZF9hdDogb3ZlcnJpZGVzPy5yZWFkX2F0IHx8IG51bGwsXG4gICAgY3JlYXRlZF9hdDogb3ZlcnJpZGVzPy5jcmVhdGVkX2F0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgfVxufVxuXG4vLyBUT0RPIFdFRUsgNSs6IFVuY29tbWVudCB3aGVuIE1lc3NhZ2VUZW1wbGF0ZSBhbmQgQXV0b21hdGlvblJ1bGUgdHlwZXMgYXJlIGFkZGVkIHRvIGRhdGFiYXNlLnRzXG4vKipcbiAqIENyZWF0ZXMgYSBtb2NrIG1lc3NhZ2UgdGVtcGxhdGUgb2JqZWN0XG4gKi9cbi8vIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNb2NrVGVtcGxhdGUob3ZlcnJpZGVzPzogUGFydGlhbDxNZXNzYWdlVGVtcGxhdGU+KTogTWVzc2FnZVRlbXBsYXRlIHtcbi8vICAgY29uc3QgaWQgPSBvdmVycmlkZXM/LmlkIHx8IHV1aWR2NCgpXG4vLyAgIHJldHVybiB7XG4vLyAgICAgaWQsXG4vLyAgICAgb3JnYW5pemF0aW9uX2lkOiBvdmVycmlkZXM/Lm9yZ2FuaXphdGlvbl9pZCB8fCB1dWlkdjQoKSxcbi8vICAgICBuYW1lOiBvdmVycmlkZXM/Lm5hbWUgfHwgYFRlbXBsYXRlICR7aWQuc2xpY2UoMCwgOCl9YCxcbi8vICAgICBjb250ZW50OiBvdmVycmlkZXM/LmNvbnRlbnQgfHwgJ0hlbGxvIHt7bmFtZX19LCB0aGlzIGlzIGEgdGVzdCB0ZW1wbGF0ZS4nLFxuLy8gICAgIGNhdGVnb3J5OiBvdmVycmlkZXM/LmNhdGVnb3J5IHx8ICdtYXJrZXRpbmcnLFxuLy8gICAgIGxhbmd1YWdlOiBvdmVycmlkZXM/Lmxhbmd1YWdlIHx8ICdlbicsXG4vLyAgICAgc3RhdHVzOiBvdmVycmlkZXM/LnN0YXR1cyB8fCAnYXBwcm92ZWQnLFxuLy8gICAgIHZhcmlhYmxlczogb3ZlcnJpZGVzPy52YXJpYWJsZXMgfHwgWyduYW1lJ10sXG4vLyAgICAgY29tcG9uZW50czogb3ZlcnJpZGVzPy5jb21wb25lbnRzIHx8IFtdLFxuLy8gICAgIHdoYXRzYXBwX3RlbXBsYXRlX2lkOiBvdmVycmlkZXM/LndoYXRzYXBwX3RlbXBsYXRlX2lkIHx8IG51bGwsXG4vLyAgICAgY3JlYXRlZF9ieTogb3ZlcnJpZGVzPy5jcmVhdGVkX2J5IHx8IHV1aWR2NCgpLFxuLy8gICAgIGNyZWF0ZWRfYXQ6IG92ZXJyaWRlcz8uY3JlYXRlZF9hdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4vLyAgICAgdXBkYXRlZF9hdDogb3ZlcnJpZGVzPy51cGRhdGVkX2F0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbi8vICAgfVxuLy8gfVxuXG4vKipcbiAqIENyZWF0ZXMgYSBtb2NrIGF1dG9tYXRpb24gcnVsZSBvYmplY3RcbiAqL1xuLy8gZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1vY2tBdXRvbWF0aW9uUnVsZShvdmVycmlkZXM/OiBQYXJ0aWFsPEF1dG9tYXRpb25SdWxlPik6IEF1dG9tYXRpb25SdWxlIHtcbi8vICAgY29uc3QgaWQgPSBvdmVycmlkZXM/LmlkIHx8IHV1aWR2NCgpXG4vLyAgIHJldHVybiB7XG4vLyAgICAgaWQsXG4vLyAgICAgb3JnYW5pemF0aW9uX2lkOiBvdmVycmlkZXM/Lm9yZ2FuaXphdGlvbl9pZCB8fCB1dWlkdjQoKSxcbi8vICAgICBuYW1lOiBvdmVycmlkZXM/Lm5hbWUgfHwgYEF1dG9tYXRpb24gUnVsZSAke2lkLnNsaWNlKDAsIDgpfWAsXG4vLyAgICAgZGVzY3JpcHRpb246IG92ZXJyaWRlcz8uZGVzY3JpcHRpb24gfHwgJ1Rlc3QgYXV0b21hdGlvbiBydWxlJyxcbi8vICAgICB0cmlnZ2VyX3R5cGU6IG92ZXJyaWRlcz8udHJpZ2dlcl90eXBlIHx8ICdtZXNzYWdlX3JlY2VpdmVkJyxcbi8vICAgICB0cmlnZ2VyX2NvbmRpdGlvbnM6IG92ZXJyaWRlcz8udHJpZ2dlcl9jb25kaXRpb25zIHx8IHtcbi8vICAgICAgIGNvbmRpdGlvbnM6IFtcbi8vICAgICAgICAge1xuLy8gICAgICAgICAgIGZpZWxkOiAnbWVzc2FnZV9jb250ZW50Jyxcbi8vICAgICAgICAgICBvcGVyYXRvcjogJ2NvbnRhaW5zJyxcbi8vICAgICAgICAgICB2YWx1ZTogJ2hlbHAnLFxuLy8gICAgICAgICB9LFxuLy8gICAgICAgXSxcbi8vICAgICB9LFxuLy8gICAgIGFjdGlvbnM6IG92ZXJyaWRlcz8uYWN0aW9ucyB8fCBbXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHR5cGU6ICdzZW5kX3RlbXBsYXRlJyxcbi8vICAgICAgICAgdGVtcGxhdGVfaWQ6IHV1aWR2NCgpLFxuLy8gICAgICAgfSxcbi8vICAgICBdLFxuLy8gICAgIGlzX2FjdGl2ZTogb3ZlcnJpZGVzPy5pc19hY3RpdmUgIT09IHVuZGVmaW5lZCA/IG92ZXJyaWRlcy5pc19hY3RpdmUgOiB0cnVlLFxuLy8gICAgIHByaW9yaXR5OiBvdmVycmlkZXM/LnByaW9yaXR5IHx8IDEsXG4vLyAgICAgY3JlYXRlZF9ieTogb3ZlcnJpZGVzPy5jcmVhdGVkX2J5IHx8IHV1aWR2NCgpLFxuLy8gICAgIGNyZWF0ZWRfYXQ6IG92ZXJyaWRlcz8uY3JlYXRlZF9hdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4vLyAgICAgdXBkYXRlZF9hdDogb3ZlcnJpZGVzPy51cGRhdGVkX2F0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbi8vICAgfVxuLy8gfVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVGVzdCBEYXRhIEdlbmVyYXRvcnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2VuZXJhdGVzIG11bHRpcGxlIG1vY2sgdXNlcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlTW9ja1VzZXJzKGNvdW50OiBudW1iZXIsIG92ZXJyaWRlcz86IFBhcnRpYWw8UHJvZmlsZT4pOiBQcm9maWxlW10ge1xuICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY291bnQgfSwgKCkgPT4gY3JlYXRlTW9ja1VzZXIob3ZlcnJpZGVzKSlcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgbXVsdGlwbGUgbW9jayBvcmdhbml6YXRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZU1vY2tPcmdhbml6YXRpb25zKGNvdW50OiBudW1iZXIsIG92ZXJyaWRlcz86IFBhcnRpYWw8T3JnYW5pemF0aW9uPik6IE9yZ2FuaXphdGlvbltdIHtcbiAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IGNvdW50IH0sICgpID0+IGNyZWF0ZU1vY2tPcmdhbml6YXRpb24ob3ZlcnJpZGVzKSlcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgbXVsdGlwbGUgbW9jayBjb250YWN0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVNb2NrQ29udGFjdHMoY291bnQ6IG51bWJlciwgb3ZlcnJpZGVzPzogUGFydGlhbDxDb250YWN0Pik6IENvbnRhY3RbXSB7XG4gIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiBjb3VudCB9LCAoKSA9PiBjcmVhdGVNb2NrQ29udGFjdChvdmVycmlkZXMpKVxufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBtdWx0aXBsZSBtb2NrIGNvbnZlcnNhdGlvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlTW9ja0NvbnZlcnNhdGlvbnMoY291bnQ6IG51bWJlciwgb3ZlcnJpZGVzPzogUGFydGlhbDxDb252ZXJzYXRpb24+KTogQ29udmVyc2F0aW9uW10ge1xuICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY291bnQgfSwgKCkgPT4gY3JlYXRlTW9ja0NvbnZlcnNhdGlvbihvdmVycmlkZXMpKVxufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBtdWx0aXBsZSBtb2NrIG1lc3NhZ2VzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZU1vY2tNZXNzYWdlcyhjb3VudDogbnVtYmVyLCBvdmVycmlkZXM/OiBQYXJ0aWFsPE1lc3NhZ2U+KTogTWVzc2FnZVtdIHtcbiAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IGNvdW50IH0sICgpID0+IGNyZWF0ZU1vY2tNZXNzYWdlKG92ZXJyaWRlcykpXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBVdGlsaXR5IEZ1bmN0aW9uc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBXYWl0IGZvciBhc3luYyBvcGVyYXRpb25zIHRvIGNvbXBsZXRlXG4gKi9cbmV4cG9ydCBjb25zdCB3YWl0Rm9yQXN5bmMgPSAoKTogUHJvbWlzZTx2b2lkPiA9PlxuICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSlcblxuLyoqXG4gKiBXYWl0IGZvciBhIHNwZWNpZmljIGFtb3VudCBvZiB0aW1lXG4gKi9cbmV4cG9ydCBjb25zdCB3YWl0ID0gKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+ID0+XG4gIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSlcblxuLyoqXG4gKiBGbHVzaCBhbGwgcGVuZGluZyBwcm9taXNlc1xuICovXG5leHBvcnQgY29uc3QgZmx1c2hQcm9taXNlcyA9ICgpOiBQcm9taXNlPHZvaWQ+ID0+XG4gIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRJbW1lZGlhdGUocmVzb2x2ZSkpXG5cbi8qKlxuICogQ3JlYXRlIGEgbW9jayBEYXRlIHRoYXQgY2FuIGJlIGNvbnRyb2xsZWQgaW4gdGVzdHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vY2tEYXRlKGRhdGU6IERhdGUgfCBzdHJpbmcpOiAoKSA9PiB2b2lkIHtcbiAgY29uc3QgbW9ja0RhdGUgPSBuZXcgRGF0ZShkYXRlKVxuICBjb25zdCBvcmlnaW5hbERhdGUgPSBEYXRlXG4gIGNvbnN0IERhdGVDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uICh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbmV3IG9yaWdpbmFsRGF0ZShtb2NrRGF0ZSlcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBvcmlnaW5hbERhdGUoLi4uYXJncylcbiAgfVxuICBEYXRlQ29uc3RydWN0b3Iubm93ID0gKCkgPT4gbW9ja0RhdGUuZ2V0VGltZSgpXG4gIERhdGVDb25zdHJ1Y3Rvci5VVEMgPSBvcmlnaW5hbERhdGUuVVRDXG4gIERhdGVDb25zdHJ1Y3Rvci5wYXJzZSA9IG9yaWdpbmFsRGF0ZS5wYXJzZVxuICBnbG9iYWwuRGF0ZSA9IERhdGVDb25zdHJ1Y3RvciBhcyBhbnlcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIGdsb2JhbC5EYXRlID0gb3JpZ2luYWxEYXRlXG4gIH1cbn1cblxuLyoqXG4gKiBTZXR1cCBhbmQgdGVhcmRvd24gaGVscGVycyBmb3IgdGVzdHNcbiAqL1xuZXhwb3J0IGNvbnN0IHRlc3RMaWZlY3ljbGUgPSB7XG4gIGJlZm9yZUVhY2g6IChmbjogKCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4pID0+IGJlZm9yZUVhY2goZm4pLFxuICBhZnRlckVhY2g6IChmbjogKCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4pID0+IGFmdGVyRWFjaChmbiksXG4gIGJlZm9yZUFsbDogKGZuOiAoKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPikgPT4gYmVmb3JlQWxsKGZuKSxcbiAgYWZ0ZXJBbGw6IChmbjogKCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4pID0+IGFmdGVyQWxsKGZuKSxcbn1cblxuLyoqXG4gKiBBc3NlcnQgdGhhdCBhIGZ1bmN0aW9uIHRocm93cyBhbiBlcnJvclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhwZWN0VG9UaHJvdyhcbiAgZm46ICgpID0+IGFueSB8IFByb21pc2U8YW55PixcbiAgZXJyb3JNZXNzYWdlPzogc3RyaW5nIHwgUmVnRXhwXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgbGV0IHRocm93bkVycm9yOiBFcnJvciB8IHVuZGVmaW5lZFxuXG4gIHRyeSB7XG4gICAgYXdhaXQgZm4oKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93bkVycm9yID0gZXJyb3IgYXMgRXJyb3JcbiAgfVxuXG4gIGV4cGVjdCh0aHJvd25FcnJvcikudG9CZURlZmluZWQoKVxuICBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgaWYgKHR5cGVvZiBlcnJvck1lc3NhZ2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICBleHBlY3QodGhyb3duRXJyb3I/Lm1lc3NhZ2UpLnRvQ29udGFpbihlcnJvck1lc3NhZ2UpXG4gICAgfSBlbHNlIHtcbiAgICAgIGV4cGVjdCh0aHJvd25FcnJvcj8ubWVzc2FnZSkudG9NYXRjaChlcnJvck1lc3NhZ2UpXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogTW9jayBjb25zb2xlIG1ldGhvZHMgdG8gc3VwcHJlc3MgZXhwZWN0ZWQgb3V0cHV0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdXBwcmVzc0NvbnNvbGUoKTogKCkgPT4gdm9pZCB7XG4gIGNvbnN0IG9yaWdpbmFsTG9nID0gY29uc29sZS5sb2dcbiAgY29uc3Qgb3JpZ2luYWxXYXJuID0gY29uc29sZS53YXJuXG4gIGNvbnN0IG9yaWdpbmFsRXJyb3IgPSBjb25zb2xlLmVycm9yXG5cbiAgY29uc29sZS5sb2cgPSBqZXN0LmZuKClcbiAgY29uc29sZS53YXJuID0gamVzdC5mbigpXG4gIGNvbnNvbGUuZXJyb3IgPSBqZXN0LmZuKClcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nID0gb3JpZ2luYWxMb2dcbiAgICBjb25zb2xlLndhcm4gPSBvcmlnaW5hbFdhcm5cbiAgICBjb25zb2xlLmVycm9yID0gb3JpZ2luYWxFcnJvclxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFeHBvcnQgQWxsIEhlbHBlcnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50LFxuICBjcmVhdGVNb2NrVXNlcixcbiAgY3JlYXRlTW9ja09yZ2FuaXphdGlvbixcbiAgY3JlYXRlTW9ja0NvbnRhY3QsXG4gIGNyZWF0ZU1vY2tDb252ZXJzYXRpb24sXG4gIGNyZWF0ZU1vY2tNZXNzYWdlLFxuICAvLyBUT0RPIFdFRUsgNSs6IFJlLWVuYWJsZSB3aGVuIE1lc3NhZ2VUZW1wbGF0ZSBhbmQgQXV0b21hdGlvblJ1bGUgYXJlIGFkZGVkIHRvIGRhdGFiYXNlXG4gIC8vIGNyZWF0ZU1vY2tUZW1wbGF0ZSxcbiAgLy8gY3JlYXRlTW9ja0F1dG9tYXRpb25SdWxlLFxuICBnZW5lcmF0ZU1vY2tVc2VycyxcbiAgZ2VuZXJhdGVNb2NrT3JnYW5pemF0aW9ucyxcbiAgZ2VuZXJhdGVNb2NrQ29udGFjdHMsXG4gIGdlbmVyYXRlTW9ja0NvbnZlcnNhdGlvbnMsXG4gIGdlbmVyYXRlTW9ja01lc3NhZ2VzLFxuICB3YWl0Rm9yQXN5bmMsXG4gIHdhaXQsXG4gIGZsdXNoUHJvbWlzZXMsXG4gIG1vY2tEYXRlLFxuICB0ZXN0TGlmZWN5Y2xlLFxuICBleHBlY3RUb1Rocm93LFxuICBzdXBwcmVzc0NvbnNvbGUsXG59XG4iXSwibmFtZXMiOlsiY3JlYXRlTW9ja0NvbnRhY3QiLCJjcmVhdGVNb2NrQ29udmVyc2F0aW9uIiwiY3JlYXRlTW9ja01lc3NhZ2UiLCJjcmVhdGVNb2NrT3JnYW5pemF0aW9uIiwiY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50IiwiY3JlYXRlTW9ja1VzZXIiLCJleHBlY3RUb1Rocm93IiwiZmx1c2hQcm9taXNlcyIsImdlbmVyYXRlTW9ja0NvbnRhY3RzIiwiZ2VuZXJhdGVNb2NrQ29udmVyc2F0aW9ucyIsImdlbmVyYXRlTW9ja01lc3NhZ2VzIiwiZ2VuZXJhdGVNb2NrT3JnYW5pemF0aW9ucyIsImdlbmVyYXRlTW9ja1VzZXJzIiwibW9ja0RhdGUiLCJzdXBwcmVzc0NvbnNvbGUiLCJ0ZXN0TGlmZWN5Y2xlIiwid2FpdCIsIndhaXRGb3JBc3luYyIsIm92ZXJyaWRlcyIsIm1vY2tDbGllbnQiLCJmcm9tIiwiamVzdCIsImZuIiwidGFibGUiLCJzZWxlY3QiLCJtb2NrUmV0dXJuVGhpcyIsImluc2VydCIsInVwZGF0ZSIsImRlbGV0ZSIsInVwc2VydCIsImVxIiwibmVxIiwiZ3QiLCJndGUiLCJsdCIsImx0ZSIsImxpa2UiLCJpbGlrZSIsImluIiwiaXMiLCJjb250YWlucyIsImNvbnRhaW5lZEJ5IiwiZmlsdGVyIiwibm90Iiwib3IiLCJvcmRlciIsImxpbWl0IiwicmFuZ2UiLCJzaW5nbGUiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRhdGEiLCJlcnJvciIsIm1heWJlU2luZ2xlIiwiYXV0aCIsImdldFVzZXIiLCJ1c2VyIiwiZ2V0U2Vzc2lvbiIsInNlc3Npb24iLCJzaWduSW4iLCJzaWduT3V0Iiwic2lnblVwIiwicnBjIiwic3RvcmFnZSIsInVwbG9hZCIsInBhdGgiLCJkb3dubG9hZCIsIkJsb2IiLCJyZW1vdmUiLCJsaXN0IiwiZ2V0UHVibGljVXJsIiwibW9ja1JldHVyblZhbHVlIiwicHVibGljVXJsIiwiaWQiLCJ1dWlkdjQiLCJvcmdhbml6YXRpb25faWQiLCJlbWFpbCIsInNsaWNlIiwiZnVsbF9uYW1lIiwiYXZhdGFyX3VybCIsInJvbGUiLCJpc19hY3RpdmUiLCJ1bmRlZmluZWQiLCJpc19zdXBlcl9hZG1pbiIsImxhc3Rfc2Vlbl9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIm1mYV9lbmFibGVkIiwibWZhX3NlY3JldCIsIm1mYV9iYWNrdXBfY29kZXMiLCJtZmFfZW5yb2xsZWRfYXQiLCJjcmVhdGVkX2F0IiwidXBkYXRlZF9hdCIsIm9yZ2FuaXphdGlvbiIsIm5hbWUiLCJzbHVnIiwid2hhdHNhcHBfYnVzaW5lc3NfYWNjb3VudF9pZCIsIndoYXRzYXBwX3Bob25lX251bWJlcl9pZCIsInN1YnNjcmlwdGlvbl9zdGF0dXMiLCJzdWJzY3JpcHRpb25fdGllciIsInN0YXR1cyIsInN0cmlwZV9jdXN0b21lcl9pZCIsInN0cmlwZV9zdWJzY3JpcHRpb25faWQiLCJ0cmlhbF9lbmRzX2F0IiwiYmlsbGluZ19lbWFpbCIsInRpbWV6b25lIiwibG9jYWxlIiwic3VzcGVuZGVkX2F0Iiwic3VzcGVuZGVkX2J5Iiwic3VzcGVuc2lvbl9yZWFzb24iLCJ3aGF0c2FwcF9pZCIsInBob25lX251bWJlciIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInByb2ZpbGVfcGljdHVyZV91cmwiLCJ0YWdzIiwibm90ZXMiLCJpc19ibG9ja2VkIiwibGFzdF9tZXNzYWdlX2F0IiwiY29udGFjdF9pZCIsImFzc2lnbmVkX3RvIiwicHJpb3JpdHkiLCJzdWJqZWN0IiwiY29udmVyc2F0aW9uX2lkIiwid2hhdHNhcHBfbWVzc2FnZV9pZCIsInNlbmRlcl90eXBlIiwic2VuZGVyX2lkIiwiY29udGVudCIsIm1lc3NhZ2VfdHlwZSIsIm1lZGlhX3VybCIsIm1lZGlhX21pbWVfdHlwZSIsImlzX3JlYWQiLCJkZWxpdmVyZWRfYXQiLCJyZWFkX2F0IiwiY291bnQiLCJBcnJheSIsImxlbmd0aCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsIm1zIiwic2V0SW1tZWRpYXRlIiwiZGF0ZSIsIm9yaWdpbmFsRGF0ZSIsIkRhdGVDb25zdHJ1Y3RvciIsImFyZ3MiLCJub3ciLCJnZXRUaW1lIiwiVVRDIiwicGFyc2UiLCJnbG9iYWwiLCJiZWZvcmVFYWNoIiwiYWZ0ZXJFYWNoIiwiYmVmb3JlQWxsIiwiYWZ0ZXJBbGwiLCJlcnJvck1lc3NhZ2UiLCJ0aHJvd25FcnJvciIsImV4cGVjdCIsInRvQmVEZWZpbmVkIiwibWVzc2FnZSIsInRvQ29udGFpbiIsInRvTWF0Y2giLCJvcmlnaW5hbExvZyIsImNvbnNvbGUiLCJsb2ciLCJvcmlnaW5hbFdhcm4iLCJ3YXJuIiwib3JpZ2luYWxFcnJvciJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0NBS0M7Ozs7Ozs7Ozs7O1FBMktlQTtlQUFBQTs7UUFxQkFDO2VBQUFBOztRQW1CQUM7ZUFBQUE7O1FBcEVBQztlQUFBQTs7UUFqR0FDO2VBQUFBOztRQXdFQUM7ZUFBQUE7O1FBa1RoQixnRkFBZ0Y7SUFDaEYscUJBQXFCO0lBQ3JCLGdGQUFnRjtJQUVoRjtlQUFBOztRQTdDc0JDO2VBQUFBOztRQXRDVEM7ZUFBQUE7O1FBckNHQztlQUFBQTs7UUFPQUM7ZUFBQUE7O1FBT0FDO2VBQUFBOztRQXJCQUM7ZUFBQUE7O1FBUEFDO2VBQUFBOztRQXlEQUM7ZUFBQUE7O1FBeURBQztlQUFBQTs7UUFuQ0hDO2VBQUFBOztRQWxDQUM7ZUFBQUE7O1FBTkFDO2VBQUFB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