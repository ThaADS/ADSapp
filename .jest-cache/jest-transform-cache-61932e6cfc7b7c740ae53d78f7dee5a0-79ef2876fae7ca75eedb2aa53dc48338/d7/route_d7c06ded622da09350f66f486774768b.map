{"version":3,"names":["cov_mrijewr82","actualCoverage","s","GET","request","f","middlewareResponse","_middleware","strictApiMiddleware","b","organizationId","getTenantContext","paymentMethodManager","_paymentmethods","PaymentMethodManager","paymentMethods","getPaymentMethods","_server","NextResponse","json","error","console","status"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\app\\api\\billing\\payment-methods\\route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\nimport { PaymentMethodManager } from '@/lib/billing/payment-methods'\nimport { strictApiMiddleware, getTenantContext } from '@/lib/middleware'\n\nexport async function GET(request: NextRequest) {\n  // Apply strict API middleware (tenant validation + strict rate limiting)\n  const middlewareResponse = await strictApiMiddleware(request);\n  if (middlewareResponse) return middlewareResponse;\n\n  try {\n    // Get tenant context from middleware (already validated)\n    const { organizationId } = getTenantContext(request);\n\n    const paymentMethodManager = new PaymentMethodManager();\n    const paymentMethods = await paymentMethodManager.getPaymentMethods(organizationId);\n\n    return NextResponse.json(paymentMethods)\n  } catch (error) {\n    console.error('Payment methods API error:', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAOQ;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAAAA,aAAA,GAAAE,CAAA;;;;;;+BAFc;;;;;;WAAAC,GAAA;;;;;iCALoB;;;iCAEL;;;iCACiB;AAE/C,eAAeA,IAAIC,OAAoB;EAAA;EAAAJ,aAAA,GAAAK,CAAA;EAC5C;EACA,MAAMC,kBAAA;EAAA;EAAA,CAAAN,aAAA,GAAAE,CAAA,OAAqB,MAAM,IAAAK,WAAA,CAAAC,mBAAmB,EAACJ,OAAA;EAAA;EAAAJ,aAAA,GAAAE,CAAA;EACrD,IAAII,kBAAA,EAAoB;IAAA;IAAAN,aAAA,GAAAS,CAAA;IAAAT,aAAA,GAAAE,CAAA;IAAA,OAAOI,kBAAA;EAAA;EAAA;EAAA;IAAAN,aAAA,GAAAS,CAAA;EAAA;EAAAT,aAAA,GAAAE,CAAA;EAE/B,IAAI;IACF;IACA,MAAM;MAAEQ;IAAc,CAAE;IAAA;IAAA,CAAAV,aAAA,GAAAE,CAAA,QAAG,IAAAK,WAAA,CAAAI,gBAAgB,EAACP,OAAA;IAE5C,MAAMQ,oBAAA;IAAA;IAAA,CAAAZ,aAAA,GAAAE,CAAA,QAAuB,IAAIW,eAAA,CAAAC,oBAAoB;IACrD,MAAMC,cAAA;IAAA;IAAA,CAAAf,aAAA,GAAAE,CAAA,QAAiB,MAAMU,oBAAA,CAAqBI,iBAAiB,CAACN,cAAA;IAAA;IAAAV,aAAA,GAAAE,CAAA;IAEpE,OAAOe,OAAA,CAAAC,YAAY,CAACC,IAAI,CAACJ,cAAA;EAC3B,EAAE,OAAOK,KAAA,EAAO;IAAA;IAAApB,aAAA,GAAAE,CAAA;IACdmB,OAAA,CAAQD,KAAK,CAAC,8BAA8BA,KAAA;IAAA;IAAApB,aAAA,GAAAE,CAAA;IAC5C,OAAOe,OAAA,CAAAC,YAAY,CAACC,IAAI,CACtB;MAAEC,KAAA,EAAO;IAAwB,GACjC;MAAEE,MAAA,EAAQ;IAAI;EAElB;AACF","ignoreList":[]}