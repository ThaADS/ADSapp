{"version":3,"names":["BillingPage","DEFAULT_PLANS","cov_rf28cmmxt","s","starter","name","description","price","interval","features","professional","enterprise","organization","propOrganization","profile","propProfile","f","setOrganization","_react","useState","b","setProfile","usage","setUsage","isLoading","setIsLoading","useEffect","fetchData","supabase","_client","createClient","data","user","auth","getUser","userProfile","from","select","eq","id","single","organization_id","orgId","org","usageResponse","fetch","ok","usageData","json","error","console","_jsxruntime","jsx","className","jsxs","_toast","ToastProvider","_billingdashboard","BillingDashboard","plans"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\app\\dashboard\\billing\\page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { BillingDashboard } from '@/components/billing/billing-dashboard'\nimport { ToastProvider } from '@/components/ui/toast'\nimport { createClient } from '@/lib/supabase/client'\nimport type { Organization, Profile } from '@/types'\n\ninterface BillingPageProps {\n  organization?: Organization\n  profile?: Profile\n}\n\nconst DEFAULT_PLANS = {\n  starter: {\n    name: 'Starter',\n    description: 'Perfect for small businesses getting started',\n    price: 29,\n    interval: 'month',\n    features: [\n      'Up to 3 team members',\n      'Up to 500 contacts',\n      'Up to 1,000 messages/month',\n      'Basic automation',\n      'Email support'\n    ]\n  },\n  professional: {\n    name: 'Professional',\n    description: 'Growing businesses with advanced needs',\n    price: 79,\n    interval: 'month',\n    features: [\n      'Up to 10 team members',\n      'Up to 5,000 contacts',\n      'Up to 10,000 messages/month',\n      'Advanced automation',\n      'Custom templates',\n      'Priority support',\n      'Analytics dashboard'\n    ]\n  },\n  enterprise: {\n    name: 'Enterprise',\n    description: 'Large organizations with custom requirements',\n    price: 199,\n    interval: 'month',\n    features: [\n      'Unlimited team members',\n      'Unlimited contacts',\n      'Unlimited messages',\n      'Custom integrations',\n      'Dedicated support',\n      'Custom branding',\n      'Advanced analytics',\n      'SLA guarantees'\n    ]\n  }\n}\n\nexport default function BillingPage({ organization: propOrganization, profile: propProfile }: BillingPageProps) {\n  const [organization, setOrganization] = useState<Organization | null>(propOrganization || null)\n  const [profile, setProfile] = useState<Profile | null>(propProfile || null)\n  const [usage, setUsage] = useState(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const supabase = createClient()\n\n        // Get current user if not provided via props\n        if (!profile) {\n          const { data: { user } } = await supabase.auth.getUser()\n          if (user) {\n            const { data: userProfile } = await supabase\n              .from('profiles')\n              .select('*')\n              .eq('id', user.id)\n              .single()\n\n            if (userProfile) {\n              setProfile(userProfile)\n            }\n          }\n        }\n\n        // Get organization if not provided via props\n        if (!organization && (profile?.organization_id || propProfile?.organization_id)) {\n          const orgId = profile?.organization_id || propProfile?.organization_id\n          const { data: org } = await supabase\n            .from('organizations')\n            .select('*')\n            .eq('id', orgId)\n            .single()\n\n          if (org) {\n            setOrganization(org)\n          }\n        }\n\n        // Fetch usage data\n        const usageResponse = await fetch('/api/billing/usage')\n        if (usageResponse.ok) {\n          const { usage: usageData } = await usageResponse.json()\n          setUsage(usageData)\n        }\n      } catch (error) {\n        console.error('Error fetching billing data:', error)\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    fetchData()\n  }, [organization, profile, propOrganization, propProfile])\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <div className=\"animate-pulse space-y-6\">\n            <div className=\"h-8 bg-gray-200 rounded w-1/4\"></div>\n            <div className=\"bg-white rounded-lg p-6 space-y-4\">\n              <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\n              <div className=\"h-4 bg-gray-200 rounded w-1/2\"></div>\n              <div className=\"h-4 bg-gray-200 rounded w-2/3\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (!organization || !profile) {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <div className=\"text-center\">\n            <h1 className=\"text-2xl font-bold text-gray-900\">Access Denied</h1>\n            <p className=\"mt-2 text-gray-600\">Please log in to access billing information.</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <ToastProvider>\n      <div className=\"min-h-screen bg-gray-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <div className=\"mb-8\">\n            <h1 className=\"text-3xl font-bold text-gray-900\">Billing & Subscription</h1>\n            <p className=\"mt-2 text-gray-600\">\n              Manage your subscription, view usage metrics, and download invoices.\n            </p>\n          </div>\n\n          <BillingDashboard\n            organization={organization}\n            profile={profile}\n            usage={usage}\n            plans={DEFAULT_PLANS}\n          />\n        </div>\n      </div>\n    </ToastProvider>\n  )\n}"],"mappings":"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","ignoreList":[]}