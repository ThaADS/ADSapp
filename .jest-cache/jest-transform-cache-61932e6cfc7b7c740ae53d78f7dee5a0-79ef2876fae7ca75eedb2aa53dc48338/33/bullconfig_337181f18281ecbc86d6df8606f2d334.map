{"version":3,"names":["DEFAULT_JOB_CONFIG","cov_2fcpo1pl0j","f","s","JobPriority","JobStatus","QUEUE_CONFIGS","QueueName","WORKER_CONCURRENCY","checkQueueHealth","clearQueue","createQueue","createQueueEvents","createWorker","getQueueStats","getRedisConfig","getRedisConnection","gracefulShutdown","pauseQueue","resumeQueue","url","process","env","UPSTASH_REDIS_REST_URL","b","Error","urlObj","URL","host","hostname","port","parseInt","password","UPSTASH_REDIS_REST_TOKEN","db","maxRetriesPerRequest","enableReadyCheck","enableOfflineQueue","config","_ioredis","default","retryStrategy","times","delay","Math","min","reconnectOnError","err","targetError","message","includes","attempts","backoff","type","removeOnComplete","removeOnFail","timeout","queueName","connection","queue","_bullmq","Queue","defaultJobOptions","processor","concurrency","worker","Worker","autorun","count","on","job","console","log","id","error","queueEvents","QueueEvents","waiting","active","completed","failed","delayed","paused","Promise","all","getWaitingCount","getActiveCount","getCompletedCount","getFailedCount","getDelayedCount","getPausedCount","start","Date","now","stats","latency","healthy","name","close","pause","resume","drain","clean"],"sources":["C:\\Ai Projecten\\ADSapp\\src\\lib\\queue\\bull-config.ts"],"sourcesContent":["import { Queue, Worker, QueueEvents, ConnectionOptions } from 'bullmq';\nimport IORedis from 'ioredis';\n\n/**\n * BullMQ Job Queue Configuration\n *\n * Production-ready job queue system for asynchronous processing.\n * Handles bulk operations, contact imports, template processing, and email notifications.\n *\n * Features:\n * - Redis-backed reliable job storage\n * - Automatic retry with exponential backoff\n * - Job progress tracking\n * - Dead letter queue for failed jobs\n * - Queue monitoring and health checks\n * - Multi-tenant job isolation\n *\n * @module bull-config\n */\n\n/**\n * Job priorities for queue processing\n */\nexport enum JobPriority {\n  CRITICAL = 1, // User-initiated actions (immediate send)\n  HIGH = 2, // Scheduled campaigns\n  NORMAL = 3, // Background imports\n  LOW = 4 // Analytics processing\n}\n\n/**\n * Job status enum\n */\nexport enum JobStatus {\n  WAITING = 'waiting',\n  ACTIVE = 'active',\n  COMPLETED = 'completed',\n  FAILED = 'failed',\n  DELAYED = 'delayed',\n  PAUSED = 'paused'\n}\n\n/**\n * Queue names\n */\nexport enum QueueName {\n  BULK_MESSAGE = 'bulk-messages',\n  CONTACT_IMPORT = 'contact-import',\n  TEMPLATE_PROCESSING = 'template-processing',\n  EMAIL_NOTIFICATION = 'email-notification'\n}\n\n/**\n * Redis connection configuration\n */\nexport interface RedisConfig {\n  host: string;\n  port: number;\n  password?: string;\n  db?: number;\n  maxRetriesPerRequest?: number;\n  enableReadyCheck?: boolean;\n  enableOfflineQueue?: boolean;\n}\n\n/**\n * Job options configuration\n */\nexport interface JobConfig {\n  attempts: number;\n  backoff: {\n    type: 'exponential' | 'fixed';\n    delay: number;\n  };\n  removeOnComplete: number | boolean;\n  removeOnFail: number | boolean;\n  timeout?: number;\n}\n\n/**\n * Queue statistics\n */\nexport interface QueueStats {\n  waiting: number;\n  active: number;\n  completed: number;\n  failed: number;\n  delayed: number;\n  paused: number;\n}\n\n/**\n * Get Redis connection configuration from environment\n */\nexport function getRedisConfig(): RedisConfig {\n  const url = process.env.UPSTASH_REDIS_REST_URL;\n\n  if (!url) {\n    throw new Error('UPSTASH_REDIS_REST_URL environment variable is not set');\n  }\n\n  // Parse Upstash Redis URL\n  // Format: https://host:port or redis://host:port\n  const urlObj = new URL(url);\n  const host = urlObj.hostname;\n  const port = parseInt(urlObj.port || '6379', 10);\n\n  return {\n    host,\n    port,\n    password: process.env.UPSTASH_REDIS_REST_TOKEN,\n    db: 0,\n    maxRetriesPerRequest: 3,\n    enableReadyCheck: false,\n    enableOfflineQueue: true\n  };\n}\n\n/**\n * Get Redis IORedis connection for BullMQ\n */\nexport function getRedisConnection(): IORedis {\n  const config = getRedisConfig();\n\n  return new IORedis({\n    host: config.host,\n    port: config.port,\n    password: config.password,\n    db: config.db || 0,\n    maxRetriesPerRequest: config.maxRetriesPerRequest || 3,\n    enableReadyCheck: config.enableReadyCheck ?? false,\n    enableOfflineQueue: config.enableOfflineQueue ?? true,\n    retryStrategy(times: number) {\n      const delay = Math.min(times * 50, 2000);\n      return delay;\n    },\n    reconnectOnError(err: Error) {\n      const targetError = 'READONLY';\n      if (err.message.includes(targetError)) {\n        // Only reconnect when the error contains \"READONLY\"\n        return true;\n      }\n      return false;\n    }\n  });\n}\n\n/**\n * Default job configuration\n */\nexport const DEFAULT_JOB_CONFIG: JobConfig = {\n  attempts: 3,\n  backoff: {\n    type: 'exponential',\n    delay: 1000\n  },\n  removeOnComplete: 100, // Keep last 100 completed jobs\n  removeOnFail: 1000, // Keep last 1000 failed jobs for debugging\n  timeout: 300000 // 5 minutes default timeout\n};\n\n/**\n * Job configuration by queue type\n */\nexport const QUEUE_CONFIGS: Record<QueueName, Partial<JobConfig>> = {\n  [QueueName.BULK_MESSAGE]: {\n    attempts: 3,\n    backoff: {\n      type: 'exponential',\n      delay: 2000\n    },\n    timeout: 600000 // 10 minutes for bulk messages\n  },\n  [QueueName.CONTACT_IMPORT]: {\n    attempts: 2,\n    backoff: {\n      type: 'exponential',\n      delay: 5000\n    },\n    timeout: 1800000 // 30 minutes for large imports\n  },\n  [QueueName.TEMPLATE_PROCESSING]: {\n    attempts: 3,\n    backoff: {\n      type: 'exponential',\n      delay: 1000\n    },\n    timeout: 180000 // 3 minutes\n  },\n  [QueueName.EMAIL_NOTIFICATION]: {\n    attempts: 5,\n    backoff: {\n      type: 'exponential',\n      delay: 2000\n    },\n    timeout: 60000 // 1 minute\n  }\n};\n\n/**\n * Worker concurrency configuration\n */\nexport const WORKER_CONCURRENCY: Record<QueueName, number> = {\n  [QueueName.BULK_MESSAGE]: 5, // 5 concurrent workers for messages\n  [QueueName.CONTACT_IMPORT]: 2, // 2 concurrent workers for imports\n  [QueueName.TEMPLATE_PROCESSING]: 10, // 10 concurrent workers for templates\n  [QueueName.EMAIL_NOTIFICATION]: 10 // 10 concurrent workers for emails\n};\n\n/**\n * Create a BullMQ queue\n */\nexport function createQueue(queueName: QueueName): Queue {\n  const connection = getRedisConnection();\n  const config = {\n    ...DEFAULT_JOB_CONFIG,\n    ...QUEUE_CONFIGS[queueName]\n  };\n\n  const queue = new Queue(queueName, {\n    connection,\n    defaultJobOptions: {\n      attempts: config.attempts,\n      backoff: config.backoff,\n      removeOnComplete: config.removeOnComplete,\n      removeOnFail: config.removeOnFail,\n      timeout: config.timeout\n    }\n  });\n\n  return queue;\n}\n\n/**\n * Create a BullMQ worker\n */\nexport function createWorker(\n  queueName: QueueName,\n  processor: (job: any) => Promise<any>\n): Worker {\n  const connection = getRedisConnection();\n  const concurrency = WORKER_CONCURRENCY[queueName];\n\n  const worker = new Worker(queueName, processor, {\n    connection,\n    concurrency,\n    autorun: true,\n    removeOnComplete: { count: 100 },\n    removeOnFail: { count: 1000 }\n  });\n\n  // Worker event handlers\n  worker.on('completed', (job) => {\n    console.log(`[${queueName}] Job ${job.id} completed successfully`);\n  });\n\n  worker.on('failed', (job, err) => {\n    console.error(\n      `[${queueName}] Job ${job?.id} failed with error:`,\n      err.message\n    );\n  });\n\n  worker.on('error', (err) => {\n    console.error(`[${queueName}] Worker error:`, err);\n  });\n\n  return worker;\n}\n\n/**\n * Create queue events listener\n */\nexport function createQueueEvents(queueName: QueueName): QueueEvents {\n  const connection = getRedisConnection();\n\n  const queueEvents = new QueueEvents(queueName, {\n    connection\n  });\n\n  return queueEvents;\n}\n\n/**\n * Get queue statistics\n */\nexport async function getQueueStats(queue: Queue): Promise<QueueStats> {\n  const [waiting, active, completed, failed, delayed, paused] =\n    await Promise.all([\n      queue.getWaitingCount(),\n      queue.getActiveCount(),\n      queue.getCompletedCount(),\n      queue.getFailedCount(),\n      queue.getDelayedCount(),\n      queue.getPausedCount()\n    ]);\n\n  return {\n    waiting,\n    active,\n    completed,\n    failed,\n    delayed,\n    paused\n  };\n}\n\n/**\n * Health check for queue system\n */\nexport async function checkQueueHealth(queue: Queue): Promise<{\n  healthy: boolean;\n  queueName: string;\n  stats: QueueStats;\n  latency: number;\n  error?: string;\n}> {\n  try {\n    const start = Date.now();\n    const stats = await getQueueStats(queue);\n    const latency = Date.now() - start;\n\n    return {\n      healthy: true,\n      queueName: queue.name,\n      stats,\n      latency\n    };\n  } catch (error) {\n    const message = error instanceof Error ? error.message : 'Unknown error';\n    return {\n      healthy: false,\n      queueName: queue.name,\n      stats: {\n        waiting: 0,\n        active: 0,\n        completed: 0,\n        failed: 0,\n        delayed: 0,\n        paused: 0\n      },\n      latency: -1,\n      error: message\n    };\n  }\n}\n\n/**\n * Graceful shutdown for queue and worker\n */\nexport async function gracefulShutdown(\n  queue: Queue,\n  worker: Worker,\n  queueEvents: QueueEvents\n): Promise<void> {\n  console.log(`Gracefully shutting down ${queue.name}...`);\n\n  try {\n    // Close queue events first\n    await queueEvents.close();\n\n    // Close worker (wait for active jobs to complete)\n    await worker.close();\n\n    // Close queue\n    await queue.close();\n\n    console.log(`${queue.name} shutdown complete`);\n  } catch (error) {\n    console.error(`Error during shutdown of ${queue.name}:`, error);\n    throw error;\n  }\n}\n\n/**\n * Pause a queue\n */\nexport async function pauseQueue(queue: Queue): Promise<void> {\n  await queue.pause();\n  console.log(`Queue ${queue.name} paused`);\n}\n\n/**\n * Resume a queue\n */\nexport async function resumeQueue(queue: Queue): Promise<void> {\n  await queue.resume();\n  console.log(`Queue ${queue.name} resumed`);\n}\n\n/**\n * Clear all jobs from a queue\n */\nexport async function clearQueue(queue: Queue): Promise<void> {\n  await queue.drain();\n  await queue.clean(0, 0, 'completed');\n  await queue.clean(0, 0, 'failed');\n  console.log(`Queue ${queue.name} cleared`);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}