{"version":3,"sources":["C:\\Ai Projecten\\ADSapp\\src\\components\\auth\\signin-form.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { createClient } from '@/lib/supabase/client'\n\nexport function SignInForm() {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const router = useRouter()\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setIsLoading(true)\n    setError(null)\n\n    const supabase = createClient()\n\n    try {\n      const { data, error } = await supabase.auth.signInWithPassword({\n        email,\n        password,\n      })\n\n      if (error) {\n        setError(error.message)\n      } else if (data.user) {\n        // Fetch user profile to determine redirect path\n        const { data: profile } = await supabase\n          .from('profiles')\n          .select('is_super_admin, organization_id')\n          .eq('id', data.user.id)\n          .single()\n\n        // Redirect based on user role\n        if (profile?.is_super_admin) {\n          router.push('/admin')\n        } else if (profile?.organization_id) {\n          router.push('/dashboard')\n        } else {\n          router.push('/onboarding')\n        }\n        router.refresh()\n      }\n    } catch (err) {\n      setError('An unexpected error occurred')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\n      <input type=\"hidden\" name=\"remember\" value=\"true\" />\n      <div className=\"rounded-md shadow-sm -space-y-px\">\n        <div>\n          <label htmlFor=\"email-address\" className=\"sr-only\">\n            Email address\n          </label>\n          <input\n            id=\"email-address\"\n            name=\"email\"\n            type=\"email\"\n            autoComplete=\"email\"\n            required\n            className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm\"\n            placeholder=\"Email address\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n        </div>\n        <div>\n          <label htmlFor=\"password\" className=\"sr-only\">\n            Password\n          </label>\n          <input\n            id=\"password\"\n            name=\"password\"\n            type=\"password\"\n            autoComplete=\"current-password\"\n            required\n            className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm\"\n            placeholder=\"Password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"rounded-md bg-red-50 p-4\">\n          <div className=\"flex\">\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-red-800\">\n                Authentication Error\n              </h3>\n              <div className=\"mt-2 text-sm text-red-700\">{error}</div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center\">\n          <input\n            id=\"remember-me\"\n            name=\"remember-me\"\n            type=\"checkbox\"\n            className=\"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded\"\n          />\n          <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-900\">\n            Remember me\n          </label>\n        </div>\n\n        <div className=\"text-sm\">\n          <a href=\"#\" className=\"font-medium text-green-600 hover:text-green-500\">\n            Forgot your password?\n          </a>\n        </div>\n      </div>\n\n      <div>\n        <button\n          type=\"submit\"\n          disabled={isLoading}\n          className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {isLoading ? (\n            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n          ) : (\n            'Sign in'\n          )}\n        </button>\n      </div>\n    </form>\n  )\n}"],"names":["SignInForm","email","setEmail","useState","password","setPassword","isLoading","setIsLoading","error","setError","router","useRouter","handleSubmit","e","preventDefault","supabase","createClient","data","auth","signInWithPassword","message","user","profile","from","select","eq","id","single","is_super_admin","push","organization_id","refresh","err","form","className","onSubmit","input","type","name","value","div","label","htmlFor","autoComplete","required","placeholder","onChange","target","h3","a","href","button","disabled"],"mappings":"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"}