---
phase: 10.5-i18n-completion
plan: 03
type: execute
wave: 2
depends_on: ["10.5-01"]
files_modified:
  - src/locales/en/emails.json
  - src/locales/nl/emails.json
  - src/locales/en/index.ts
  - src/locales/nl/index.ts
  - src/lib/i18n/dictionaries.ts
autonomous: true

must_haves:
  truths:
    - "Email translations exist for confirmation, password reset, magic link, and invitation emails"
    - "Translations are available in both Dutch and English"
    - "emails namespace is registered in the dictionaries system"
    - "Missing translation keys log console warning and fall back to English"
  artifacts:
    - path: "src/locales/en/emails.json"
      provides: "English email translations"
      contains: "confirmEmailSubject"
    - path: "src/locales/nl/emails.json"
      provides: "Dutch email translations"
      contains: "confirmEmailSubject"
  key_links:
    - from: "src/lib/i18n/dictionaries.ts"
      to: "emails.json"
      via: "namespace registration"
      pattern: "emails"
---

<objective>
Create translation files for system emails in both English and Dutch.

Purpose: Enable localized auth emails (confirmation, password reset, magic link, invitation) by providing translation keys for email subjects and content.

Output:
- New emails.json translation files for EN and NL
- Updated dictionaries.ts with emails namespace
- Updated index.ts barrel exports
</objective>

<execution_context>
@C:\Users\info\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\info\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/10.5-i18n-completion/10.5-CONTEXT.md
@.planning/phases/10.5-i18n-completion/10.5-RESEARCH.md

Reference existing translation files:
@src/locales/en/auth.json
@src/locales/nl/auth.json
@src/locales/en/index.ts
@src/lib/i18n/dictionaries.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create English email translations</name>
  <files>src/locales/en/emails.json</files>
  <action>
Create src/locales/en/emails.json with translations for all auth emails:

```json
{
  "common": {
    "greeting": "Hello",
    "greetingWithName": "Hello {name}",
    "regards": "Best regards",
    "team": "The ADSapp Team",
    "footer": "This email was sent by ADSapp. If you have questions, contact support@adsapp.com",
    "securityNotice": "If you didn't request this, you can safely ignore this email.",
    "linkExpiry": "This link expires in {hours} hours."
  },
  "confirmation": {
    "subject": "Confirm your email address",
    "title": "Welcome to ADSapp!",
    "body": "Thank you for signing up. Please confirm your email address to get started with your WhatsApp Business Inbox.",
    "button": "Confirm Email Address",
    "linkText": "Or copy this link into your browser:",
    "notYou": "If you didn't create an account on ADSapp, you can safely ignore this email."
  },
  "passwordReset": {
    "subject": "Reset your password",
    "title": "Password Reset Request",
    "body": "We received a request to reset your password for your ADSapp account. Click the button below to choose a new password.",
    "button": "Reset Password",
    "linkText": "Or copy this link into your browser:",
    "expiry": "This link expires in 24 hours.",
    "notYou": "If you didn't request a password reset, you can safely ignore this email. Your password will remain unchanged."
  },
  "magicLink": {
    "subject": "Your sign-in link",
    "title": "Sign in to ADSapp",
    "body": "Click the button below to sign in to your ADSapp account. No password needed!",
    "button": "Sign In",
    "linkText": "Or copy this link into your browser:",
    "expiry": "This link expires in 1 hour and can only be used once.",
    "notYou": "If you didn't request to sign in, you can safely ignore this email."
  },
  "invitation": {
    "subject": "You've been invited to join {organizationName}",
    "title": "Team Invitation",
    "body": "{inviterName} has invited you to join their team on ADSapp, a WhatsApp Business Inbox platform.",
    "details": {
      "organization": "Organization",
      "role": "Role",
      "invitedBy": "Invited by"
    },
    "button": "Accept Invitation",
    "linkText": "Or copy this link into your browser:",
    "expiry": "This invitation expires in {days} days.",
    "notYou": "If you don't know who sent this invitation, you can safely ignore this email."
  },
  "roles": {
    "owner": "Owner",
    "admin": "Administrator",
    "agent": "Agent",
    "viewer": "Viewer"
  }
}
```

This structure provides:
- Common elements reusable across emails
- Specific content for each email type
- Parameterized strings using {param} syntax
- Role translations for invitation emails
  </action>
  <verify>
1. File exists at src/locales/en/emails.json
2. JSON is valid (no syntax errors)
3. Contains all four email types: confirmation, passwordReset, magicLink, invitation
  </verify>
  <done>English email translations created with all auth email content</done>
</task>

<task type="auto">
  <name>Task 2: Create Dutch email translations</name>
  <files>src/locales/nl/emails.json</files>
  <action>
Create src/locales/nl/emails.json with Dutch translations matching the English structure:

```json
{
  "common": {
    "greeting": "Hallo",
    "greetingWithName": "Hallo {name}",
    "regards": "Met vriendelijke groet",
    "team": "Het ADSapp Team",
    "footer": "Deze e-mail is verzonden door ADSapp. Heb je vragen? Neem contact op via support@adsapp.com",
    "securityNotice": "Als je dit niet hebt aangevraagd, kun je deze e-mail veilig negeren.",
    "linkExpiry": "Deze link verloopt over {hours} uur."
  },
  "confirmation": {
    "subject": "Bevestig je e-mailadres",
    "title": "Welkom bij ADSapp!",
    "body": "Bedankt voor je aanmelding. Bevestig je e-mailadres om te beginnen met je WhatsApp Business Inbox.",
    "button": "E-mailadres Bevestigen",
    "linkText": "Of kopieer deze link naar je browser:",
    "notYou": "Als je geen account hebt aangemaakt bij ADSapp, kun je deze e-mail veilig negeren."
  },
  "passwordReset": {
    "subject": "Wachtwoord resetten",
    "title": "Wachtwoord Reset Aanvraag",
    "body": "We hebben een verzoek ontvangen om het wachtwoord van je ADSapp-account te resetten. Klik op de knop hieronder om een nieuw wachtwoord te kiezen.",
    "button": "Wachtwoord Resetten",
    "linkText": "Of kopieer deze link naar je browser:",
    "expiry": "Deze link verloopt over 24 uur.",
    "notYou": "Als je geen wachtwoord reset hebt aangevraagd, kun je deze e-mail veilig negeren. Je wachtwoord blijft ongewijzigd."
  },
  "magicLink": {
    "subject": "Je inloglink",
    "title": "Inloggen bij ADSapp",
    "body": "Klik op de knop hieronder om in te loggen bij je ADSapp-account. Geen wachtwoord nodig!",
    "button": "Inloggen",
    "linkText": "Of kopieer deze link naar je browser:",
    "expiry": "Deze link verloopt over 1 uur en kan maar één keer worden gebruikt.",
    "notYou": "Als je niet hebt geprobeerd in te loggen, kun je deze e-mail veilig negeren."
  },
  "invitation": {
    "subject": "Je bent uitgenodigd voor {organizationName}",
    "title": "Team Uitnodiging",
    "body": "{inviterName} heeft je uitgenodigd om deel te nemen aan hun team op ADSapp, een WhatsApp Business Inbox platform.",
    "details": {
      "organization": "Organisatie",
      "role": "Rol",
      "invitedBy": "Uitgenodigd door"
    },
    "button": "Uitnodiging Accepteren",
    "linkText": "Of kopieer deze link naar je browser:",
    "expiry": "Deze uitnodiging verloopt over {days} dagen.",
    "notYou": "Als je niet weet wie deze uitnodiging heeft gestuurd, kun je deze e-mail veilig negeren."
  },
  "roles": {
    "owner": "Eigenaar",
    "admin": "Beheerder",
    "agent": "Agent",
    "viewer": "Viewer"
  }
}
```

Note: Dutch translations should sound natural and professional, not word-for-word translations.
  </action>
  <verify>
1. File exists at src/locales/nl/emails.json
2. JSON is valid (no syntax errors)
3. Structure matches English file exactly (same keys)
4. All text is in Dutch
  </verify>
  <done>Dutch email translations created matching English structure</done>
</task>

<task type="auto">
  <name>Task 3: Register emails namespace in dictionaries</name>
  <files>src/lib/i18n/dictionaries.ts, src/locales/en/index.ts, src/locales/nl/index.ts</files>
  <action>
Update the i18n infrastructure to include the new emails namespace:

1. **Update src/lib/i18n/dictionaries.ts:**
   - Add 'emails' to the namespaces array (around line 10-20)

   ```typescript
   export const namespaces = [
     'admin',
     'auth',
     'common',
     'dashboard',
     'billing',
     'emails',  // ADD THIS
     'onboarding',
     'inbox',
     'workflow',
     'analytics',
   ] as const
   ```

2. **Update src/locales/en/index.ts:**
   - Import the emails.json file
   - Add it to the default export object

   Find the existing pattern (imports at top, then export default { ... }) and add:
   ```typescript
   import emails from './emails.json'
   ```
   And in the export:
   ```typescript
   export default {
     // ... existing namespaces
     emails,
   }
   ```

3. **Update src/locales/nl/index.ts:**
   - Same pattern as English - import and export emails
  </action>
  <verify>
1. `npm run type-check` passes
2. Namespace 'emails' appears in dictionaries.ts
3. Both en/index.ts and nl/index.ts export emails
  </verify>
  <done>emails namespace registered and available through dictionary system</done>
</task>

</tasks>

<verification>
After completing all tasks:

1. **Files exist:**
   - src/locales/en/emails.json
   - src/locales/nl/emails.json

2. **JSON validity:**
   - Both files are valid JSON
   - Keys match between EN and NL

3. **TypeScript:**
   - `npm run type-check` passes

4. **Namespace registration:**
   - 'emails' is in the namespaces array in dictionaries.ts
   - Both index.ts files export emails

5. **Fallback behavior verification:**
   - Test missing translation handling:
     1. Temporarily remove one key from nl/emails.json (e.g., "confirmation.subject")
     2. Load emails namespace with locale='nl'
     3. Verify: console shows warning about missing key
     4. Verify: English fallback value is returned (not undefined or the key string)
     5. Restore the removed key
   - This confirms the fallback chain: NL translation -> EN fallback -> console warning
</verification>

<success_criteria>
1. English and Dutch email translations exist with all required content
2. emails namespace is registered in dictionaries.ts
3. Index files export the emails translations
4. TypeScript passes
</success_criteria>

<output>
After completion, create `.planning/phases/10.5-i18n-completion/10.5-03-SUMMARY.md`
</output>
