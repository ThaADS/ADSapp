# Phase 10.5: i18n Completion - Context

**Gathered:** 2026-01-28
**Status:** Ready for planning

<domain>
## Phase Boundary

Complete the existing i18n infrastructure so all user-facing text displays correctly in Dutch or English based on user preference. This includes fixing the TranslationProvider setup for onboarding, ensuring all pages use translations, and implementing localized system emails.

**NOT in scope:** Adding new languages (Phase 20), SEO landing pages (Phase 20), translation of user-generated content.

</domain>

<decisions>
## Implementation Decisions

### Language Detection Behavior
- **Priority order:** Account setting > Cookie > Browser detection
- Store language preference in user profile (database) for logged-in users
- Cookie serves as fallback for non-logged-in users
- Browser language detection for first-time visitors (Dutch for NL browsers, English for others)
- Language switcher placed in profile settings only (not in header/nav)

### Translation Coverage Scope
- **Full app translation required** - all pages and components
- Includes: Auth flows, Onboarding, Dashboard, Admin panel
- User-generated content (names, messages, etc.) stays untranslated
- UI labels translated, user data not (e.g., "Contact:" translated, "Jan Jansen" not)
- Systematic check of all pages required to find hardcoded text

### System Emails
- **All auth emails must be localized:** Confirmation, Password reset, Magic link, Invitation
- Email language matches user's language preference
- Use **custom SMTP via Resend** (not Supabase templates) for full control
- **Professional branded design:** ADSapp logo, brand colors, footer with company info
- Emails must work for both NL and EN users

### Fallback Behavior
- **Missing translation:** Show console warning + English fallback
- English is always the fallback language (never show raw keys to users)
- Dev mode shows warnings to help identify gaps

### Claude's Discretion
- Whether to create CLI tooling for detecting missing translations (npm run i18n:check)
- Build strictness level (fail on missing translations vs soft warnings)
- Exact implementation of language preference storage in database schema
- Email template design specifics

</decisions>

<specifics>
## Specific Ideas

- User mentioned "ik zie de sleutels" (seeing translation keys) — indicates TranslationProvider not properly wrapping onboarding flow
- Onboarding page (`src/app/onboarding/page.tsx`) has hardcoded English text and no layout with TranslationProvider
- Existing i18n infrastructure is solid (next-intl pattern with JSON files), just needs consistent application
- Translation files already exist for most namespaces (auth, onboarding, common, dashboard, etc.)

</specifics>

<deferred>
## Deferred Ideas

- Additional languages beyond NL/EN — Phase 20 (v2.1 International Expansion)
- SEO landing pages per language — Phase 20
- RTL support for Arabic — Phase 20

</deferred>

---

*Phase: 10.5-i18n-completion*
*Context gathered: 2026-01-28*
