# Plan 25-01: Database Types Regeneration

**Phase:** 25 - Database Types & Technical Debt
**Plan:** 01 of 04
**Wave:** 1 (Foundation)
**Date:** 2026-02-03

## Objective

Regenerate TypeScript types from the current Supabase database schema to fix the root cause of 200+ @ts-nocheck files.

## Prerequisites

- Supabase CLI installed and linked to project
- Access to Supabase project credentials

## Success Criteria

1. Database types successfully regenerated from schema
2. New types include all 250+ tables
3. Types include all custom types and enums
4. No errors during generation process

## Tasks

### Task 1: Verify Supabase CLI Setup
```bash
npx supabase --version
npx supabase db remote list
```

### Task 2: Generate Fresh Types
```bash
npx supabase gen types typescript --linked > src/types/database.ts
```

### Task 3: Validate Generated Types
- Check file size (should be substantial for 250+ tables)
- Verify key tables are present (organizations, profiles, messages)
- Confirm RLS helper types are generated

### Task 4: Update Type Exports
- Update `src/types/index.ts` to export database types
- Ensure backwards compatibility with existing imports

## Files to Modify

| File | Action | Description |
|------|--------|-------------|
| `src/types/database.ts` | Replace | Fresh types from Supabase |
| `src/types/index.ts` | Update | Re-export database types |

## Validation

```bash
# Check types compile
npx tsc --noEmit src/types/database.ts

# Verify key tables
grep -c "organizations" src/types/database.ts
grep -c "profiles" src/types/database.ts
grep -c "messages" src/types/database.ts
```

## Rollback

Original database.ts backed up before replacement. Revert if compilation fails.

## Estimated Effort

- Duration: 15-30 minutes
- Complexity: Low
- Risk: Low (types only, no runtime changes)

## Dependencies

None - this is the first plan in the phase.

## Notes

- This plan unlocks all other plans in Phase 25
- Must complete before fixing @ts-nocheck files
- Types should include new tables from v2.0-v2.3 (channels, Twilio, etc.)
